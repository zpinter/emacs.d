2005-03-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (emacs-w3m-version): Release 1.4.4.

2005-03-23  Andreas Seltenreich  <seltenreich@gmx.de>

	* shimbun/sb-zeit-de.el (shimbun-zeit-de-content-end): Don't match
	on advertisements.
	(shimbun-clear-contents): Added to get rid of webbugs and
	advertisements.

2005-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-setup-toolbar): Make sure icon files exist.
	(w3m-update-toolbar): Make sure toolbar items have been specified.
	(w3m-initialize-graphic-icons): Make sure icon files exist.

	* w3m-e21.el (w3m-setup-toolbar): Make sure icon files exist.
	(w3m-initialize-graphic-icons): Ditto.

2005-03-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (tarball): Remove `w3m-e23.el' instead of
	`w3m-e22.el'.

	* w3m.el (w3m-url-readable-string): Decide a scheme to guess
	encodings based on the target URL, instead of the current URL.
	(w3m-show-decoded-url): Doc fix to follow the above change.
	(w3m-copy-buffer): Do not set `w3m-current-url' and
	`w3m-current-coding-system'.
	(w3m-goto-url-new-session): Simplified.

	* shimbun/nnshimbun.el (nnshimbun-parse-nov): Remove redundant
	`function'.

2005-03-22  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-yahoo-auctions.el (shimbun-yahoo-auctions-content-start)
	(shimbun-yahoo-auctions-content-end): Follow the change of the
	site design.
	(shimbun-get-headers): Reverse the order of the return value.
	(shimbun-article-url): New overridden method.
	(shimbun-make-contents): Ditto.

2005-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-fau.el (shimbun-article): Fix the class name.
	Suggested by ARISAWA Akihiro <ari@mbf.sphere.ne.jp>.

2005-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (display-images-p): Remove alias.

	* shimbun/sb-fau.el (shimbun-article): New overriding method to
	decode article contents according to shimbun-fau-coding-system.

2005-03-22  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-fau.el (shimbun-fau-coding-system): New variable.

	* shimbun/shimbun.el (shimbun-find-coding-system): Alias to
	w3m-find-coding-system.

2005-03-21  David Hansen  <david.hansen@physik.fu-berlin.de>

	* shimbun/sb-heise.el (shimbun-heise-get-telepolis-headers):
	Fixed broken message id.

2005-03-20  David Hansen  <david.hansen@physik.fu-berlin.de>

	* shimbun/sb-heise.el (shimbun-heise-get-newsticker-headers):
	Removed forgotten debug code.
	(shimbun-heise-get-telepolis-headers): Follow the change of site
	design.

2005-03-19  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-fau.el (shimbun-fau-x-face-alist): New variable.
	(shimbun-fau-content-end): Improve regexp.

2005-03-19  David Hansen  <david.hansen@physik.fu-berlin.de>

	* shimbun/sb-fau.el: New file.

2005-03-19  Takashi Hiromatsu  <matsuan@ca2.so-net.ne.jp>

	* shimbun/sb-sourceforge-jp.el (shimbun-sourceforge-jp-mailing-lists):
	Add groups macemacsjp-users, macemacsjp-dev and macemacsjp-english.

2005-03-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (very-slow): Don't mv non-existent files.

	* w3m-e19.el (easy-menu-remove-item): Don't autoload it.

	* w3m-om.el (easy-menu-remove-item): Ditto.

	* w3m-rss.el (match-string-no-properties): Avoid warning for Emacs
	19 and XEmacs.
	(split-string): Avoid warning for Emacs 19.

	* w3m-symbol.el: Require cl when compiling.

	* w3m-tabmenu.el (easy-menu-remove-item): Aautoload it for Emacs 19.

	* w3m.el: Autoload widget-get to avoid compile warning for Emacs 19.
	(w3m): Remove unused bound variable.

	* w3mhack.el: Bind executable-binary-suffixes to the proper value
	for OS/2 and emx while checking for the shell command; cause an
	error only when compiling or formatting files.

	* attic/addpath.el: Make it work with old Emacsen even if cl is
	not loaded; load custom, bind defcustom'ed variables and make the
	locate-library function run quietly for Emacs 19; synch the code
	testing the shell command with w3mhack.el.
	(char-after): Add a byte-optimizer for Emacs 19.

	* w3m-ccl.el: Load w3m-om instead of autoloading it for charset-id.

	* w3m-util.el: Load cl independently when compiling.

2005-03-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Check whether the shell command can be used.

	* attic/addpath.el: Ditto; add early-package-load-path to
	load-path for XEmacs 21.5.

	* shimbun/nnshimbun.el: Load gnus-bcklg safely (see the comment).

2005-03-17  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-favicon.el: Add autoload of `w3m-url-readable-string'.

2005-03-17  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* w3m.el (w3m-check-header-tags): Check abnormal `base' url.

2005-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-prepare-article): Try to
	fetch the article for that day if it failed for the editorial
	group and the tenjin group; remove the science group section.

	* shimbun/sb-tcup.el (shimbun-tcup-group-alist): Remove the
	time-lag parameter.
	(shimbun-get-headers): Adjust date for articles posted up in the
	level-one boards in which the clock has been advanced for 9 hours.

2005-03-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Add early-package-load-path to load-path for XEmacs
	21.5.

	* shimbun/sb-asahi.el: Rewrite to follow the change of the site.
	(shimbun-asahi-make-regexp): New function.
	(shimbun-asahi-group-table): Use it; remove the groups borderless,
	kansai-special, nankyoku-people and whitemail; add the groups
	book, business.column, car, car.italycolumn, car.motorsports,
	car.newcar, car.newcarbywebcg, culture.column, digital,
	digital.apc, digital.bcnnews, digital.column01, digital.hotwired,
	digital.internet, digital.mobile, digital.nikkanko, digital.pc,
	edu.column, edu.kosodate, edu.tamate, health, health.aged,
	health.alz, health.medical, housing, housing.amano,
	housing.column, housing.diary, housing.world, igo,
	kansai.horiekenichi, kansai.umaimon, kansai.fuukei,
	kansai.yotsuba, kansai.smile, kansai.keiki, kansai.okiniiri,
	kansai.syun, kansai.takara, kansai.kansaiisan, kansai.depa,
	kansai.kaban, kansai.kyosho, kansai.okan, kansai.densetsu,
	kansai.onayami, kansai.sanshi, life, life.column, life.food,
	national.calamity, national.etc, national.trial, obituaries,
	shopping, shopping.kishi, shopping.ryouhin, shougi,
	sports.baseball, sports.column, sports.football, sports.spo,
	travel, travel.kaido, travel.matsuri, travel.zeitaku and wakamiya;
	improve regexps.
	(initialize-instance): Make the from address unreachable.
	(shimbun-asahi-get-headers): Rewrite.
	(shimbun-asahi-get-headers-for-today): Rewrite.
	(shimbun-asahi-prepare-article): Rewrite.

	* w3m-xmas.el: Fbind coding-system-type to ignore if it is void.

	* shimbun/sb-bbc.el (shimbun-rss-build-message-id): Ease a
	strictness of regexp.

2005-03-15  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-mee-new): Display clear signs of
	coding-system for `w3m-url-decode-string'.
	(w3m-form-mee-select-value): Ditto.
	(w3m-form-parse-and-fontify): Ditto.

	* w3m.el (w3m-decode-buffer): Decode the buffer within buffer set
	the `multibyte'.

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-article): Treat
	folder surely over again.

2005-03-14  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-goto-folder): Treat folder
	surely; inlude last `/' of folder name.
	(mew-shimbun-re-retrieve): Doc fix.

2005-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-content-start):
	Improve.
	(shimbun-asahi-html-content-end): Improve.

	* shimbun/sb-asahi.el (shimbun-asahi-content-start): Improve.
	(shimbun-asahi-content-end): Improve.
	(shimbun-asahi-prepare-article): Don't remove adv for the sports
	group there.

2005-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Modify regexp
	for the sports group following the change of the site.
	(shimbun-asahi-prepare-article): Set date and remove adv for the
	sports group.

2005-03-13  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-wincefan.el (shimbun-wincefan-content-start): Updated.
	(shimbun-wincefan-content-end): Ditto.
	(shimbun-get-headers): Ditto.
	(shimbun-wincefan-parse-time): Removed.
	(shimbun-make-contents): Not to modify the current buffer and
	simply expand relative URLs.

2005-03-13  MIYOSHI Masanori  <miyoshi@meadowy.org>

	* shimbun/sb-yahoo-sports.el: New shimbun backend for
	Yahoo!SPORTS.

	* doc/emacs-w3m-ja.texi (Sport Sites Supported by Shimbun): Update.

	* doc/emacs-w3m.texi (Sport Sites Supported by Shimbun): Ditto.

2005-03-13  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-sourceforge-jp.el (shimbun-index-url): Fix generating
	url rule.

	* shimbun/sb-savannah.el (shimbun-savannah-url): Improve url.

	* shimbun/sb-ruby.el (shimbun-ruby-url): Improve url.
	(shimbun-index-url): Fix generating url rule.

2005-03-12  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-toshiba.el (Toplevel): Add 'require cl' when compiling.
	(shimbun-toshiba-from-address): New variable.
	(shimbun-get-headers): New method define.

2005-03-12  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-plucker.el (shimbun-plucker-litemplate-regexp):
	Improve Regexp.
	(shimbun-plucker-extract-header-values): Fix supporting new regexp.

	* shimbun/sb-orca.el (shimbun-orca-url): Improve url.
	(shimbun-orca-litemplate-regexp): Improve Regexp.

2005-03-12  MIYOSHI Masanori  <miyoshi@meadowy.org>

	* shimbun/sb-msports-nifty.el: Follow the change of site design.

	* shimbun/sb-f1express.el: Removed.

	* shimbun/sb-f1fan.el: Update the email address of the author.

	* shimbun/sb-makanai.el: Ditto.

	* shimbun/sb-nikkansports.el: Ditto.

	* doc/emacs-w3m-ja.texi (Sport Sites Supported by Shimbun): Update.

	* doc/emacs-w3m.texi (Sport Sites Supported by Shimbun): Ditto.

2005-03-11  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-squeak-ja.el (shimbun-squeak-ja-url): Improve url.

	* shimbun/sb-squeak-dev.el (shimbun-squeak-dev-url): Ditto.

	* shimbun/sb-sml.el (shimbun-sml-url): Ditto.

	* shimbun/sb-pilot-mailsync.el (shimbun-pilot-mailsync-url): Ditto.

	* shimbun/sb-pilot-link.el (shimbun-index-url): Improve url
	generating rule.

2005-03-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-tcup.el (shimbun-tcup-group-alist): Revert; update
	urls; add the time-lag parameter.
	(shimbun-tcup-coding-system): Remove:
	(shimbun-get-headers): Use it instead of shimbun-headers; fetch
	old articles; adjust date according to the time-lag parameter.
	(shimbun-article): Protect against missing contents.

2005-03-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-tcup.el (shimbun-tcup-group-alist): Add the coding
	system parameter; set it as shift_jis for the yutopia group.
	(shimbun-tcup-subject-regexp): Improve regexp.
	(shimbun-tcup-from-start-regexp): Ditto.
	(shimbun-tcup-date-start-regexp): Ditto.
	(shimbun-tcup-body-start-regexp): Ditto.
	(shimbun-tcup-body-end-regexp): Ditto.
	(shimbun-tcup-coding-system): Default to euc-jp.
	(shimbun-tcup-stime-to-time): Don't adjust the time by the local
	timezone.
	(shimbun-headers): Decode the contents using the coding system
	which shimbun-tcup-group-alist specifies; improve regexp matching
	the author's name; fix the time for the groups which use shift_jis.

2005-03-10  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-jpilot.el (shimbun-jpilot-url): Fix url.
	(shimbun-make-contents :after): Removed.

2005-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Load w3m-e23.el(c) that exists in the same directory as
	w3m.el(c) so as to exclude ones in other places; report the
	precise error message if it doesn't exist.

2005-03-10 Masaru Nomiya <nomiya@ttmy.ne.jp>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Use
	http://www.asahi.com/national/list.html for the national group
	instead of http://www.asahi.com/national/ in which some articles
	might be missed.

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers-ft): correct
	regexp.

2005-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-decode-coding-string-with-priority): Ignore
	`undecided' so as not to use it for the priority list.

2005-03-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-fsf.el (w3m-detect-coding-region): Guard error for
	`undecided'.

2005-03-10  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-pocketgames.el (shimbun-pocketgames-content-start):
	Fix regexp for new design web page.
	(shimbun-headers): Remove.
	(shimbun-pocketgames-headers): Ditto.
	(shimbun-pocketgames-headers-1): Rename for 'shimbun-get-headers'
	(shimbun-get-headers): New method overriden.
	(shimbun-make-contents): Remove.
	(shimbun-pocketgames-make-mime-article): Ditto.

2005-03-10  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-arch-bluegate.el: Removed for site closing.

	* shimbun/sb-pocketgames.el (shimbun-make-contents): Fix mistaken
	method overriding.

	* shimbun/sb-atmarkit.el (shimbun-atmarkit-group-path-alist): Add
	"fwcr" group.

2005-03-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-wikimedia.el (shimbun-wikimedia-ja-date-decode):
	Allow the RFC822 style date format which has been used in the
	early days.

	* w3mhack.el: Remove the byte-optimizer which replaces
	truncate-string with truncate-string-to-width.

2005-03-09  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/sb-palmfan.el (shimbun-palmfan-group-path-alist):
	Comment out `palmwarefan'.

2005-03-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-zeit-de.el (shimbun-rss-build-message-id): Make it
	work even if there's no subdirectory in url.

	* w3m.el (w3m-modeline-title): Replace truncate-string-to-width
	with w3m-truncate-string.

	* w3m-util.el (w3m-truncate-string): Use truncate-string-to-width
	if it is available.

2005-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-info-like-map): Bind the `y' key to the
	w3m-print-current-url command; bind the `Y' key to the
	w3m-print-this-url command; don't bind the `c' key.

	* shimbun/sb-impress.el (shimbun-make-contents): Fix broken image
	tags.

	* shimbun/sb-bbdb-ml.el (shimbun-bbdb-ml-url): Update.

2005-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yahoo.el (shimbun-get-headers): Leave garbages around
	headers.

	* shimbun/sb-atmarkit.el (shimbun-atmarkit-use-base-url): New var.
	(shimbun-article-url): Switch the return value to the base url and
	the printing url according to shimbun-atmarkit-use-base-url.
	(shimbun-make-contents): Make shimbun-article-url return the base
	url rather than the printing url because links in the print page
	are relative to it.

2005-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-make-help-echo): Fix the backquote form.
	(w3m-make-balloon-help): Ditto.

	* w3m-util.el (w3m-set-match-data): Use existing markers.

2005-03-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-url-readable-string): Save matching data.  Check
	whether `w3m-current-url' is string before checking it.
	(w3m-goto-url-new-session, w3m-copy-buffer): Call `w3m-goto-url'
	with `redisplay' option to enforce redisplaying the certain
	content.

	* w3m-favicon.el (w3m-favicon-retrieve): Decode an URL when
	displaying it.

	* w3m-form.el (w3m-form-input-textarea-mode-setup): An expression
	is evaluated without checking type, and save matching data.

2005-03-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-url-readable-string): Check whether
	`w3m-current-coding-system' is valid before calling
	`w3m-url-decode-string'.
	(w3m-local-dirlist-cgi, w3m-w3m-dump-extra): Use
	`w3m-url-readable-string'.
	(w3m-copy-buffer): Copy all buffer-local variables, and do not
	cancel them even if `empty' option is set.
	(w3m-display-progress-message): Import from w3m-util.el to
	suppress byte-compile warnings.

	* w3m-util.el (w3m-parse-attributes): Accept XHTML format of
	boolean atttibutes.
	(w3m-display-progress-message): Export to w3m.el.

2005-03-03  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-url-readable-string): An expression is evaluated
	without checking type.

2005-03-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-show-decoded-url): Update its customize spec to use
	it as the rule set to decode URIs when displaying them.  Changed
	its default value.
	(w3m-url-readable-string): New function to process the above option.
	(w3m-make-help-echo, w3m-make-balloon-help): Do not accept
	`url-decode' option, and use the above function to decore URIs.
	(w3m-fontify-anchors): Follow the above change.
	(w3m-print-current-url, w3m-print-this-url): Call the above function.
	(w3m-make-url-decode-function): Removed.
	(w3m-entity-alist, w3m-about-history): Remove redundant `function'.
	For more detail, see http://www.mew.org/~kazu/doc/elisp/function.html.

2005-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-modeline-title-string): New variable.
	(w3m-modeline-title-timer): New variable.
	(w3m-modeline-title): New function used to truncate the title
	string not to cut the right end of the mode line.  Works only with
	Emacs 22 and newer.
	(w3m-buffer-setup): Use it.

2005-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-make-help-echo): Make it work with XEmacs.
	(w3m-make-balloon-help): Support decoding URIs.
	(w3m-fontify-anchors): Make the balloon-help show decoded URIs.

2005-03-02  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>

	* w3m.el (w3m-show-decoded-url): New user option.
	(w3m-make-url-decode-function): New inline function.
	(w3m-make-help-echo): Use it.
	(w3m-fontify-anchors): The function of help-echo property has
	an ability to decode url.

2005-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-decode-coding-string-with-priority): New function.

	* w3m.el (w3m-url-decode-string): Use it.

2005-03-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-attributes-1): Support `300 Multiple Choices'.
	(w3m-w3m-retrieve): Ditto.
	(w3m-w3m-retrieve-1): Ditto.

2005-02-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-detect-coding-region): Use the name of the
	coding system instead of the coding category if it is void.

	* w3m-util.el (w3m-set-match-data): New macro which converts
	points into markers under XEmacs.
	(w3m-search-tag-1): Use it.

	* w3m-e19.el: Autoload easymenu in order to avoid compile warning.
	* w3m-om.el: Ditto.

2005-02-26  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-heise.el (shimbun-heise-get-newsticker-headers): Replace
	'w3m-expand-url' to 'shimbun-expand-url'.
	(shimbun-heise-get-newsticker-headers): Ditto.

2005-02-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (all): Use `w3m-form-set-number' and
	`w3m-form-kill-buffer' instead of `w3m-form-textarea-set-number'
	and `w3m-form-textarea-kill-buffer'

	* w3m-form.el (w3m-form-input-select-urlid): New buffer local
	variable.
	(w3m-form-input-map-urlname): Ditto.
	(w3m-form-set-number): Rename from `w3m-form-textarea-set-number'
	and treate buffers of `select' and `map'.
	(w3m-form-kill-buffer): Ditto.
	(w3m-form-input-select-set): Allways remove own buffer.
	(w3m-form-input-select-exit): Ditto.
	(w3m-form-input-map-set): Ditto.
	(w3m-form-input-map-exit): Ditto.
	(w3m-form-input-select): When exists same from buffer, use it.
	(w3m-form-input-map): Ditto.

2005-02-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-what-where): Fix the form.
	(w3mhack-makeinfo): Silence it when formatting @multitable section.

2005-02-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (top): Add autoloads of `w3m-form-textarea-kill-buffer'
	and `w3m-form-textarea-set-number' to avoid byte-compile warnings.
	(w3m-delete-buffer): Call `w3m-form-textarea-kill-buffer' when use
	form.
	(w3m-delete-other-buffers): Ditto.
	(w3m-quit): Ditto.
	(w3m-select-buffer-delete-buffer): Ditto.
	(w3m-pack-buffer-numbers): Call `w3m-form-textarea-set-number'
	when use form.

	* w3m-form.el (top): Move all buffer local variables on the top to
	avoid byte-compile warnings.
	(w3m-form-parse-and-fontify): Set `w3m-form-use-textarea-backup-p'
	to nil.
	(w3m-form-input-textarea-save): Use
	`w3m-form-use-textarea-backup-p' instead of
	`w3m-form-use-textarea-backup'.
	(w3m-form-input-textarea-set): Allways remove textarea buffer and
	window.
	(w3m-form-input-textarea-exit): Ditto.
	(w3m-form-input-textarea): Check to call for backup. Check
	identity of existed textarea buffer and w3m buffer. Treat
	`w3m-form-use-textarea-backup-p'.
	(w3m-form-use-textarea-backup-p): New function.
	(w3m-form-textarea-set-number): Ditto.
	(w3m-form-textarea-kill-buffer): Ditto.
	(w3m-form-submit-get-textarea-files): If no backup, return nil.

2005-02-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-make-mime-article): Call
	`shimbun-article-url' instead of `shimbun-header-xref'.
	(shimbun-header-insert-and-buffer-string): Ditto.
	(shimbun-footer): Call `shimbun-article-base-url' instead of
	`shimbun-header-xref'.

	* shimbun/sb-atmarkit.el (shimbun-make-contents): Removed.
	(shimbun-atmarkit-content-start): New variable.
	(shimbun-atmarkit-content-end): Ditto.
	(shimbun-clear-contents): Defined as a before method.

2005-02-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el: Autoload cancel-timer for XEmacs.

	* w3m-xmas.el (w3m-run-at-time): Use run-at-time which comes from
	timer-funcs.el if it seems to work correctly.
	(cancel-timer): Defun if it is void.

2005-02-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/ptexinfmt.el (texinfo-multitable-widths): Reverse the logic
	that shows whether it is broken.

	* w3m-util.el: Autoload regexp-opt for Emacs 19.

	* w3mhack.el (w3mhack-makeinfo): Load poe for Emacs 19.

2005-02-24  Romain Francoise  <romain@orebokech.com>

	* w3m.el (w3m-lynx-like-map): Bind [follow-link] so as to make
	mouse-1 work in Emacs 22 like mouse-2.
	(w3m-info-like-map): Ditto.

2005-02-24  Felix E. Klee  <felix.klee@inka.de>

	* shimbun/sb-ffii.el (shimbun-ffii-group-alist): Renamed.

2005-02-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el: Changes to retrieve printable pages instead
	of retrieving pages which are linked from index pages.
	(shimbun-fetch-url): Accept the 4th argument, `referer'.
	(shimbun-article-base-url): New inline function.
	(shimbun-article-url): Redefined as a method.
	(shimbun-header-insert): Call `shimbun-article-base-url' instead
	of calling the above.
	(shimbun-article): Retrieve the pages specified by
	`shimbun-article-url' method.
	(shimbun-make-html-contents): Call `shimbun-article-url' instead
	of calling `shimbun-header-xref'.

	* shimbun/sb-atmarkit.el: Fix its encoding to `iso-2022-7bit'.
	(shimbun-atmarkit-groups): Removed.
	(shimbun-groups): New method.
	(shimbun-article): Removed.
	(shimbun-article-url): New method.

	* shimbun/sb-ibm-dev.el (shimbun-article): Removed.
	(shimbun-article-url): New method.

	* shimbun/sb-msdn.el (shimbun-article): Removed.
	(shimbun-article-url): New method.

	* shimbun/sb-rediff.el (shimbun-article): Removed.
	(shimbun-article-url): New method.

	* shimbun/sb-wired-jp.el (shimbun-headers): Simplified.
	(shimbun-article-url): New method.
	(shimbun-clear-contents): Call the above instead of calling
	`shimbun-header-xref'.

2005-02-23  Felix E. Klee  <felix.klee@inka.de>

	* shimbun/sb-ffii.el: New module.

2005-02-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-antenna.el (w3m-antenna-check-rss): Parse all date fields.

2005-02-21  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-impress.el (shimbun-get-headers): Add comment-outed
	html source removal.

2005-02-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-form.el (w3m-form-input-textarea): Fix.

2005-02-21  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>,
	Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-input-textarea-mode-setup): Fix.
	(w3m-form-input-textarea): Follow the above change.

2005-02-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-form.el (w3m-form-textarea-edit-mode): Changed its default
	value to `text-mode'.

2005-02-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install-package): Change the default directory in
	which icon files will be installed from `etc/w3m/icons/' into
	`etc/images/w3m/' following the most recent Emacs and Gnus.
	(install-package-ja): Ditto.

	* aclocal.m4 (AC_EXAMINE_PACKAGEDIR): Use configure-package-path.
	(AC_PATH_ICONDIR): Change the default directory in which icon
	files will be installed from `etc/w3m/icons/' into
	`etc/images/w3m/' following the most recent Emacs and Gnus.

	* w3m.el (w3m-icon-directory): Improve the way to determin the
	default value.

	* w3mhack.el (w3mhack-nonunix-install): Change the default directory
	in which icon files will be installed from `etc/w3m/icons/' into
	`etc/images/w3m/' following the most recent Emacs and Gnus.
	(w3mhack-make-package): Ditto.
	(w3mhack-what-where): Ditto.

2005-02-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-rss.el (shimbun-rss-get-headers): New function.
	(shimbun-get-headers): Use the above.

	* shimbun/sb-yahoo-auctions.el (shimbun-get-headers): Use the
	above.

2005-02-19  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/nnshimbun.el (nnshimbun-insert-nov): Encode extra field.
	(nnshimbun-parse-nov): Decode extra field.

	* shimbun/sb-yahoo-auctions.el (shimbun-get-headers): New
	overridden method.

	* shimbun/sb-rss.el (shimbun-get-headers): Revert last change.

2005-02-19  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-atmarkit.el (shimbun-atmarkit-content-start): Remove.
	(shimbun-atmarkit-content-end): Ditto.
	(shimbun-atmarkit-coding-system): Change 'euc-japan' by print page
	(shimbun-atmarkit-print-page-url): New variable.
	(shimbun-atmarkit-group-path-alist): Add "news","fdb", and "farc".
	(shimbun-article): New method.
	(shimbun-make-contents): Ditto.
	(shimbun-clear-contents): Ditto.

2005-02-19  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-rss.el (shimbun-get-headers): Headers are returned
	whether they have been acquired.

	* shimbun/nnshimbun.el (nnshimbun-generate-nov-database):
	If returned header has already been acquired, replace NOV by it.

2005-02-19  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-rss.el (shimbun-get-headers): Store description
	element into extra slot.

	* shimbun/nnshimbun.el (nnshimbun-insert-nov): Insert extra slot
	of shimbun header.
	(nnshimbun-parse-nov): Store extra data into extra slot.

2005-02-19  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-ibm-dev.el (shimbun-get-headers): Fix index list
	reverse operation.

2005-02-18  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/nnshimbun.el (nnshimbun-decode-group-name): New function.
	(nnshimbun-request-article, nnshimbun-request-group)
	(nnshimbun-request-scan, nnshimbun-close-group)
	(nnshimbun-retrieve-headers, nnshimbun-request-expire-articles)
	(nnshimbun-request-delete-group): Decode group name.
	(gnus-group-make-shimbun-group): The server name must be
	unibyte string; Encode group name to utf-8.

2005-02-17  Tsuyoshi CHO  <tsuyoshi_cho@ybb.ne.jp>

	* shimbun/sb-impress.el (shimbun-impress-groups-alist): Add new
	groups:"enterprise" "dc" "k-tai" "bb" "forest".
	(shimbun-impress-get-headers-date): Rename from shimbun-get-headers.
	(shimbun-impress-get-headers-sequence): New function.
	(shimbun-get-headers): Redefine method; function calling branched
	by groups.
	(shimbun-make-contents): Add date fix routine.

2005-02-17  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-yahoo-auctions.el: New file.

	* shimbun/shimbun.el (shimbun-url-encode-string): New function alias.
	(shimbun-group-p): New method.
	(shimbun-open-group): Use `shimbun-group-p'.

	* shimbun/nnshimbun.el (gnus-group-make-shimbun-group): Allow
	the group which is not contained in `shimbun-groups'.

2005-02-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-lnum.el: Rename from w3m-link-numbering.el.

	* mime-w3m.el: Load mime-parse.el before mime.el and w3m.el when
	compiling rather than always loading mime.el and w3m.el.

2005-02-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-form.el: Changes to define `w3m-form-input-textarea-mode' as
	a minor mode.
	(w3m-form-textarea-edit-mode): New option.
	(w3m-form-input-textarea-map): Renamed from
	`w3m-form-input-textarea-keymap'.
	(w3m-form-input-textarea-mode) [variable]: New internal variable.
	(w3m-form-input-textarea-mode) [function]: Reconstructed.
	(w3m-form-input-textarea-mode-setup): New function.
	(w3m-form-input-textarea): Clean up.

2005-02-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_PATH_EMACS): Show the correct Emacs version.

	* mime-w3m.el: Always require mime and w3m instead of to autoload
	mime-parse.el.

	* w3m-bitmap.el: Bind w3m-work-buffer-list when compiling.

	* w3m-proc.el: Silence the byte compiler complaining against gensym.

	* w3m-rss.el: Use eval-and-compile in order to autoload timezone.el.

	* w3m.el (w3m-treat-drive-letter): Use eval-and-compile.
	(w3m-touch-file-available-p): Move forward.
	(w3m-touch-file): Ditto.
	(w3m-expand-path-name): Use eval-and-compile.
	(w3m-window-hscroll): Ditto.
	(w3m-current-column): Ditto.
	(w3m-set-window-hscroll): Ditto.
	(w3m-add-local-hook): Silence the byte compiler.
	(w3m-run-at-time): Use eval-and-compile.

	* w3mhack.el: Remove the code used to silence the byte compiler
	which complains make-local-hook is obsolete.
	(w3mhack-makeinfo): Silence XEmacs when formatting Infos.

	* octet.el: Require cl when compiling.
	* w3m-filter.el: Ditto.
	* w3m-fsf.el: Ditto.
	* w3m-link-numbering.el: Ditto.
	* w3m-namazu.el: Ditto.

	* shimbun/sb-2ch.el: Require cl when compiling.
	(shimbun-2ch-parse-page): Use truncate-string-to-width if it is
	available.

	* shimbun/sb-msdn.el: Autoload md5 for old Emacsen.

	* shimbun/sb-cnet-jp.el: Require cl when compiling.
	* shimbun/sb-emacswiki.el: Ditto.
	* shimbun/sb-excite.el: Ditto.
	* shimbun/sb-exconn.el: Ditto.
	* shimbun/sb-geocrawler.el: Ditto.
	* shimbun/sb-ibm-dev.el: Ditto.
	* shimbun/sb-jpo.el: Ditto.
	* shimbun/sb-marc-aims.el: Ditto.
	* shimbun/sb-mew.el: Ditto.
	* shimbun/sb-mhonarc.el: Ditto.
	* shimbun/sb-slashdot-jp.el: Ditto.
	* shimbun/sb-tigris.el: Ditto.
	* shimbun/sb-wired.el: Ditto.

2005-02-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-wired-jp.el: New module.

2005-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Load w3m-e23.el for Emacs 23.

	* w3mhack.el (w3mhack-module-list): Use w3m-e23.el for Emacs 23.

	* w3m-e23.el: Rename from w3m-e22.el.

2005-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-rss.el (shimbun-get-headers): Display an error
	message rather than signaling an error when xml-parse-region fails
	so that MUA may not be discontinued.

	* shimbun/sb-emacswiki.el (shimbun-get-headers): Ditto.

2005-02-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-cnet-jp.el: Changes to support orphaned groups.
	(shimbun-cnet-jp-orphaned-group-list): New variable.
	(shimbun-groups): Add the groups listed in the above variable.
	(shimbun-headers): New method.

2005-02-13  Tsuyoshi CHO  <cho@namazu.org>

	* shimbun/sb-mailman.el (shimbun-mailman-headers): Change url
	enclosing 'shimbun-expand-url'.
	(shimbun-mailman-headers): Ditto.

2005-02-11  Tsuyoshi CHO  <cho@namazu.org>

	* shimbun/sb-x51.el (shimbun-get-headers): Remove temp-buffer
	ignored when previous committing.

	* shimbun/sb-cnn-jp.el (shimbun-cnn-jp-content-start): Fix value
	for new page design.
	(shimbun-cnn-jp-content-end): Ditto.
	(shimbun-get-headers): Ditto.
	(shimbun-cnn-jp-prepare-article): Ditto.

2005-02-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Load w3m-e21.el even if the version of Emacs is 22.x
	when the Emacs CVS HEAD is used.

	* w3mhack.el (w3mhack-module-list): Prefer w3m-e21.el rather than
	w3m-e22.el if the Emacs CVS HEAD is used.

2005-02-09  Tsuyoshi CHO  <cho@namazu.org>

	* shimbun/sb-tigris.el: New File.

	* shimbun/sb-cnet-jp.el (shimbun-cnet-jp-group-alist): Remove
	closed blog entiry: "inoue","mori","umeda"; add blog entiry:
	"editors".

	* shimbun/sb-x51.el (shimbun-get-headers): Remove duplicate
	webpage retrieving; add buffer erasing before webpage retrieving.

2005-02-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/nnshimbun.el (gnus-group-make-shimbun-group): Display
	help messages.

	* shimbun/shimbun.el (shimbun-clear-contents): Validate regexps
	before using them.

2005-02-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-html-skelton): Fix typo.
	(w3m-antenna-make-contents): Replace %D to the modified time of
	`w3m-antenna-file'.

2005-02-04  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-arch-bluegate.el: New file.

2005-02-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-prepare-article): Rewrite the
	code for the tenjin group.

2005-02-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-gmane-url-at-point): New function.
	(w3m-url-at-point): Use it.

2005-01-31  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* shimbun/sb-airs.el (shimbun-get-headers): Erase the work buffer
	for each time before retrieving a summary page.

2005-01-31  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* shimbun/sb-airs.el (shimbun-get-headers): Improve regexp.

2005-01-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-x51.el: Cosmetic fixes.

2005-01-31  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-x51.el (shimbun-get-headers): Remove useless list
	operations.

2005-01-31  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-x51.el (shimbun-get-headers): Fix nreverse usage.

2005-01-30  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* w3m.el (w3m-attributes): Support cid urls.
	(w3m-external-view): Ditto.

2005-01-30  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-x51.el: Fix indentation.
	(shimbun-get-headers): Add support Message-ID check; Fix regex.

2005-01-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-ibm-dev.el (shimbun-ibm-dev-content-start): Follow
	the change of site design.
	(shimbun-ibm-dev-content-end): Ditto.
	(shimbun-make-contents): Removed.
	(shimbun-clear-contents): New method.

2005-01-30  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-ibm-dev.el (shimbun-ibm-dev-groups): Add "autonomic".
	(shimbun-get-headers): New method support "range" option.
	(shimbun-headers): Succeeded by `shimbun-get-headers'.

2005-01-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-force-window-update): Make it work whatever the
	value for the resize-mini-windows variable is.
	(w3m-update-tab-line): Ditto.

2005-01-26  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add it.zensen,
	it.manage, it.seisaku, and it.digicore groups.
	(shimbun-nikkei-get-headers-it-zensen): New function.
	(shimbun-nikkei-get-headers-it-manage): New function.
	(shimbun-nikkei-get-headers-it-seisaku): New function.
	(shimbun-nikkei-get-headers-it-digicore): New function.

2005-01-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-rss.el (w3m-rss-parse-date-string): Support the date format
	in the RFC822 style which RSS 2.0 allows.
	Suggested by David Hansen <david.hansen@physik.fu-berlin.de>.

	* shimbun/sb-rss.el (shimbun-rss-process-date): Ditto.

2005-01-25  David Hansen  <david.hansen@physik.fu-berlin.de>

	* shimbun/sb-the-register.el (shimbun-get-headers): Rewrite URL to
	be able to get the images.
	(shimbun-make-contents): Remove ads.

2005-01-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-article): Disable
	mew-biff while retrieving.
	(mew-shimbun-re-retrieve-article): Ditto.
	(mew-shimbun-scan-message): Disable message from Mew.

2005-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers-markets):
	Improve regexp.
	(shimbun-nikkei-get-headers-kawase): Improve regexp.
	(shimbun-nikkei-get-headers-bunkatsu2): Improve regexp.
	(shimbun-nikkei-get-headers-kinri): Improve regexp.
	(shimbun-nikkei-get-headers-ft): Improve regexp.
	(shimbun-nikkei-get-headers-dj): Improve regexp.
	(shimbun-nikkei-get-headers-gyoseki): Improve regexp.

2005-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers-market):
	Improve regexp.

2005-01-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-e21.el (w3m-force-window-update, w3m-update-tab-line): Call
	`enlarge-window' before calling `shrink-window', in order to avoid
	deleting sole window.

2005-01-19  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-content-type-alist): Check if "fiber.exe" is exist.

2005-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Don't use
	too complex regexp.

2005-01-17  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-form.el (w3m-form-parse-and-fontify): Check if w3m-current-url
	is available.

2005-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Ease limits
	on the regexp used to match unquoted text.

2005-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Fix regexp
	in order to obey HTML 4.01, the 3.2.2 Attributes section.
	Suggested by Yoichi NAKAYAMA <yoichi@geiin.org>.

2005-01-15  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-cnet-jp.el (shimbun-cnet-jp-retrieve-next-pages): Fix
	footer cut; fix ad-hoc `shimbun-clear-contents' call.

2005-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Fix regexp.

2005-01-15  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-cnet-jp.el (shimbun-cnet-jp-clean-text-page): New function.
	(shimbun-cnet-jp-retrieve-next-pages): Ditto.
	(shimbun-make-contents): New method.

2005-01-14  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-w3m-dev.el (shimbun-w3m-dev-url): Change it into the
	new website URL.
	(shimbun-w3m-dev-group-alist): New variable.
	(shimbun-w3m-dev-groups): Generate the value using
	shimbun-w3m-dev-group-alist.
	(shimbun-index-url): New method
	(shimbun-reply-to): Generate the value using
	shimbun-w3m-dev-group-alist.

2005-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add the rss group.
	(shimbun-index-url): Work with the rss group.
	(shimbun-asahi-get-headers): Ditto.

2004-07-24  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* w3m.el (w3m-menubar): Rearrange it hierarchical.
	(w3m-setup-menu): Use easymenu.

2005-01-03  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-mailman.el (shimbun-mailman-headers): Modify regex
	for supporting quarter of a year message list (20xxq[1-4]); modify
	regex for message link to contain space before "I" tag.

	* shimbun/sb-wikimedia.el (shimbun-wikimedia-l10n-make-contents):
	Append "case-fold-search" local binding.

2005-01-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Allow not
	quoted url in img tags.
	Suggested by Tsuyoshi CHO <mfalcon_sky@emailuser.net>.

2004-12-24  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-excite.el: New file.

2005-01-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-input-textarea): Modify string of the
	inquiry.

2005-01-08  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-japantimes.el (shimbun-japantimes-content-start):
	Improve the value.
	(shimbun-japantimes-content-end): Ditto.
	(shimbun-get-headers): Improve regexp; simplify Message-ID form.

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add the
	gyosuuchi group.
	(shimbun-nikkei-get-headers-bunkatsu2): New function.
	(shimbun-nikkei-prepare-article-bunkatsu2): New function.

2005-01-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-goto-url): Call `w3m-form-textarea-files-remove' if
	necessary.

	* w3m-util.el (w3m-compare-strings): New define.

	* w3m-form.el (w3m-form-textarea-file-expire-date): Modify
	Document.
	(w3m-fontify-textareas): Put `w3m-form-file-name' property.
	(w3m-form-textarea-files, w3m-form-textarea-post-files): New
	buffer local variable.
	(w3m-form-parse-and-fontify): Set `w3m-form-textarea-files'. Put
	`w3m-form-file-name' property on the form of textarea.
	(w3m-form-input-textarea): Use same textarea buffer if exist.
	Don't ask user if don't modify its area without tailed white
	space.
	Visible the editted text when ask user. Guard against 'C-g'.
	Added `w3m-form-textarea-file-cleanup' to hook as
	`kill-emacs-hook'
	(w3m-form-textarea-same-check): New function.
	(w3m-form-textarea-file-cleanup): Remove myself from
	`kill-emacs-hook'.
	(w3m-form-textarea-files-remove): New function.
	(w3m-form-submit-get-textarea-files): Ditto.
	(w3m-form-submit): Set `w3m-form-textarea-post-files' for removing
	files.
	(w3m-form-resume): Check `selects' is cons.

2005-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-prepare-article-release):
	Remove print button.

2005-01-06  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add kansai,
	it, kokunai, markets, kawase, kinri, ft, dj, ngyoseki and gyoseki
	groups.
	(shimbun-nikkei-get-headers-kansai): New function.
	(shimbun-nikkei-get-headers-it): New function.
	(shimbun-nikkei-get-headers-markets): New function.
	(shimbun-nikkei-get-headers-kawase): New function.
	(shimbun-nikkei-get-headers-kinri): New function.
	(shimbun-nikkei-get-headers-ft): New function.
	(shimbun-nikkei-get-headers-dj): New function.
	(shimbun-nikkei-get-headers-gyoseki): New function.
	(shimbun-nikkei-prepare-article-kansai): New function.
	(shimbun-nikkei-prepare-article-default3): New function.
	(shimbun-nikkei-prepare-article-release): Improve regexps.

2005-01-05  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-itmedia.el (shimbun-itmedia-group-alist): Follow
	the change of ITmedia Games.

2005-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/Makefile.in (.texi.info): Set LC_ALL=C.

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers-report): Make
	Date header.
	(shimbun-nikkei-prepare-article-report): New function.

2005-01-04  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add tento,
	zinzi and report groups.
	(shimbun-nikkei-get-headers-default2): New function.
	(shimbun-nikkei-get-headers-report): New function.
	(shimbun-nikkei-prepare-article-default2): Rename from
	shimbun-nikkei-prepare-article-retto.

2005-01-02  Tsuyoshi CHO  <mfalcon_sky@emailuser.net>

	* shimbun/sb-x51.el (shimbun-x51-group-alist): Fix "psychic" entry
	name/address.
	(shimbun-x51-content-start): Change value for the Web page of a
	new design.
	(shimbun-x51-content-end): Ditto.
	(shimbun-get-headers): Change process for the Web page of a new
	design; Support "range" argument.
	(shimbun-clear-contents): New function.

2004-12-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-quit): Call `w3m-form-textarea-file-cleanup'.
	(w3m-view-this-url-1): Revert final change.

	* w3m-form.el (w3m-form-textarea-file-expire-date): New user
	option.
	(w3m-form-textarea-file-cleanup): New function.

2004-12-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers-retto): Prepend
	region names in subjects.

2004-12-28  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add the retto
	group.
	(shimbun-nikkei-get-headers-retto): New function.
	(shimbun-nikkei-prepare-article-retto): New function.

2004-12-28  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-use-textarea-backup): New user option.
	(w3m-form-textarea-directory): Ditto.
	(w3m-form-get-coding-system): New function.
	(w3m-form-make-form-data): Use `w3m-form-get-coding-system'.
	(w3m-form-input-textarea-keymap): Define "C-xC-s" to
	`w3m-form-input-textarea-save'.
	(w3m-form-input-textarea-file): New variable.
	(w3m-form-input-textarea-coding-system): Ditto.
	(w3m-form-input-textarea-filename): New function.
	(w3m-form-input-textarea-save): Ditto.
	(w3m-form-input-textarea-set): Call `w3m-form-input-textarea-save'.
	(w3m-form-input-textarea-exit): Ditto.
	(w3m-form-input-textarea-mode): Modify doc-string.
	(w3m-form-input-textarea): Handling filename and coding-system.

2004-12-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-this-url-1): Revert 2004-12-17 change.
	The buffer seems empty killed before to restore window
	configuration.
	Restore the position and window-start if last window equal
	current-window.

2004-12-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-get-headers): Reduce
	redundancies in Message-ID string.

2004-12-24  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-mainichi.el (shimbun-mainichi-group-table): Add the
	shakai.edu group.

2004-12-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-hist.el (w3m-history-restore-position): Handling the window
	of w3m for sure absolutely.

2004-12-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el (nnshimbun-request-delete-group): Delete
	the internal nov buffer as well.

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add the job group.
	(shimbun-asahi-get-headers): Replace `.' with `/' in group names;
	remove a special treatment for the international group; don't add
	extra keywords in Message-IDs for the job.special group.

2004-12-23  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add edu, edu.it,
	edu.nyushi, job.special and international.jinmin groups; fix url
	for the english group; exclude Jinmin-Nippou from the international
	group.

2004-12-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Revert.

2004-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Bind undo-outer-limit.

2004-12-19  David Hansen  <david.hansen@gmx.net>

	* shimbun/sb-the-register.el: New file.

2004-12-18  Tsuyoshi CHO  <mfalcon21@hotmail.com>

	* shimbun/sb-x51.el (shimbun-x51-group-alist): Append "news" and
	"story" entries; sort entires in alphabetical order.

2004-12-17  Tetsurou Okazaki  <okazaki@be.to>

	* shimbun/sb-sourceforge-jp.el (shimbun-sourceforge-jp): Inherit
	`shimbun-mailman-ja' instead of `shimbun-mailman'.

2004-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el (nnshimbun-request-delete-group): New function.

	* shimbun/sb-itmedia.el (shimbun-itmedia-group-alist): Improve regexp.

2004-12-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-anchors): Local file is given special
	treatment for `href'. Fix match data of `href'.
	(w3m-view-this-url-1): If the points of window was treated in
	w3m-goto-url(), now reconstruct window configuration.

2004-12-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-update-tab-line): Wobble the window size instead
	of setting the cursor color.

2004-12-15  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-namazu.el (w3m-namazu): Added optional argument `reload'.

2004-12-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkansports.el (shimbun-nikkansports-group-table):
	Remove the world-soccer group.
	(shimbun-nikkansports-from-address): Remove.
	(shimbun-nikkansports-content-start): Chnage the value.
	(shimbun-nikkansports-content-end): Ditto.
	(shimbun-get-headers): Make the from address unreachable; change
	the message-id form; extract the hour:minute data.
	(shimbun-make-contents): New function.

	* w3m-util.el (w3m-tag-regexp-of): Remove.
	(w3m-search-tag-1): New function.
	(w3m-search-tag): New macro.

	* w3m-form.el (w3m-form-parse-and-fontify): Use w3m-search-tag
	instead of w3m-tag-regexp-of.

2004-12-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-bbc.el (shimbun-bbc-url): Update.

2004-12-12  Tsuyoshi CHO  <mfalcon21@hotmail.com>

	* shimbun/sb-cnet-jp.el (shimbun-clear-contents): Append tag
	removal: advertisement and column link.

2004-12-11  David Hansen  <david.hansen@gmx.net>

	* shimbun/sb-heise.el (shimbun-heise-get-telepolis-headers): Fixed
	bug that gave same message id to different articles.

2004-12-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-anchors): Use 'w3m-name-anchor2 property to
	avoid overriding 'w3m-name-anchor property.
	(w3m-search-name-anchor): Search 'w3m-name-anchor2 property if
	not detect 'w3m-name-anchor property.

2004-12-08  Andreas Seltenreich  <seltenreich@gmx.de>

	* shimbun/sb-heise.el (shimbun-heise-get-telepolis-headers):
	Improve regexp used to extract id string.

2004-12-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Rewrite the
	kyoiku section.
	(shimbun-yomiuri-get-headers): Remove a special treatment for the
	kyoiku group.
	(shimbun-yomiuri-prepare-article): Rewrite the code for extracting
	article bodies in the kyoiku group.

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add the
	market group; remove stockjp, exchange, stockwo-us and stockwo-eu.
	(shimbun-nikkei-get-headers-markets): Remove.
	(shimbun-nikkei-get-headers-market): New function.
	(shimbun-make-contents): Pass the header argument to sub-functions.
	(shimbun-nikkei-prepare-article-default): Ignore argument.
	(shimbun-nikkei-prepare-article-sports): Ditto.
	(shimbun-nikkei-prepare-article-newpro): Ditto.
	(shimbun-nikkei-prepare-article-release): Ditto.
	(shimbun-nikkei-prepare-article-markets): Remove.
	(shimbun-nikkei-prepare-article-market): New function.
	(shimbun-nikkei-prepare-article-okuyami): Ignore argument.

2004-12-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-form.el (w3m-form-parse-and-fontify): Ignore a select form
	in the case where w3mmee is running if its value is not specified.
	Reported by Clemens Fischer <ino-qc@spotteswoode.de.eu.org>.

	* w3mhack.el (labels): Remove.

	* shimbun/sb-itmedia.el (shimbun-get-headers): Improve appearance
	of subject string.

2004-11-28  David Hansen  <david.hansen@gmx.net>

	* shimbun/sb-heise.el: (nearly) complete rewrite of the telepolis
	part due to massive changes in their html.

2004-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (labels): A temporary substitution against the Emacs
	CVS bug.

2004-11-26  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m-form.el (w3m-form-resume): Check whether a form exists,
	before resuming its values from its history.

2004-11-25  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* shimbun/sb-exconn.el (shimbun-exconn-content-start): Synchronize.
	(shimbun-exconn-content-end): Ditto.

2004-11-23  S V N Vishwanathan  <vishketan@yahoo.com>

	* shimbun/sb-rediff.el (shimbun-rediff-month-alist): New variable.
	(shimbun-article): Signal an error if the url looks malformed; use
	match-string-no-properties instead of match-string.
	(shimbun-clear-contents): Improve regexps matching tags to be
	removed.
	(shimbun-make-contents): New function to make true Date headers.
	(shimbun-rss-build-message-id): Signal an error if the url string
	is not what is expected; improve the uniqueness of Message-IDs.

2004-11-23  Tsuyoshi CHO  <mfalcon21@hotmail.com>

	* shimbun/sb-wikimedia.el (shimbun-wikimedia-l10n-make-contents):
	Add alternate atmark(@) pattern.
	(shimbun-wikimedia-date-decode-rule-alist): Fix regular expression
	for date string mismatching problem.

2004-11-23  S V N Vishwanathan  <vishketan@yahoo.com>

	* shimbun/sb-rediff.el: New file.

2004-11-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-prepare-article): Break
	continuous lines in editorials.

2004-11-21  Tsuyoshi CHO  <mfalcon21@hotmail.com>

	* shimbun/sb-wikimedia.el: New file.

2004-11-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-rss.el: New file.

	* w3m-antenna.el (w3m-antenna-check-rss): New function.
	(w3m-antenna-sites): Improve its customize spec to support
	`w3m-antenna-check-rss'.

	* w3m.el (w3m-content-type-alist): Add text/xml, application/xml,
	application/rdf+xml, and application/rss+xml.
	(w3m-detect-xml-charset): New function.
	(w3m-decode-buffer): Use the above function when decoding XML
	contents.

	* shimbun/sb-rss.el (shimbun-rss-process-date): Accept minus sign
	character for time zone.

2004-11-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-redisplay-this-page): Don't make a new history.

2004-11-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-output-coding-system): Use `utf-8' if Emacs has
	internal utf-8 only.
	(w3m-input-coding-system): Revert last change.
	(w3m-halfdump-command-arguments): Bind `fix_width_conv' and
	`use_jisx0201' when w3m-m17n.

2004-11-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-input-coding-system): Use `utf-8' if Emacs has
	internal utf-8, it has no Mule-UCS and w3m-type is `w3m-m17n'.

2004-11-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-prepare-article): Break
	continuous lines in editorials.

	* w3m-form.el (w3m-char-to-int, w3m-string-to-char-list,
	w3m-int-to-char): Silence byte-compiler.
	* w3m-ccl.el (charset-id): Ditto.

	* w3m-tabmenu.el (w3m-tab-menubar-update): Don't let iswitchb
	manage the w3m tab menubar.

2004-11-02  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-hns.el (shimbun-hns-article): Support tdiary-hns-theme.

2004-10-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-break-long-japanese-lines): New function.
	* shimbun/sb-mainichi.el (shimbun-mainichi-prepare-article): Use it.
	* shimbun/sb-wired.el (shimbun-make-contents): Use it.

2004-10-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-check-refresh-attribute): Support own page reload.
	(w3m-goto-url-with-timer): Ditto.

2004-10-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_ADD_LOAD_PATH): Clarify the error message.

2004-10-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (call-process-region): Add an advice in order to fix
	an XEmacs 21.5.18 bug.
	* w3mhack.el (call-process-region): Ditto.

	* shimbun/sb-bbc.el (shimbun-rss-build-message-id): Prevent
	fetching of headers stopping with extra articles.

2004-10-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-check-refresh-attribute): Fix to analyze the URL.

2004-10-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-wired.el (shimbun-wired-from-address): Make it
	uneachable.
	(shimbun-wired-x-face-alist): Replace it with a new face.
	(shimbun-get-group-header-alist): Improve the uniqueness of
	Message-IDs; change the From header appearance.

2004-10-21  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-wired.el (shimbun-wired-url): Update it so that it
	may fit to the new configuration of the Hotwired Japan.
	(shimbun-wired-content-start): Ditto.
	(shimbun-get-group-header-alist): Ditto.

2004-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-touch-file): Protect against the absence of
	file-name-coding-system and default-file-name-coding-system.

2004-10-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-buffer-setup): Modify
	`mode-line-buffer-identification'; display "Loading..." instead of
	`w3m-current-titile' when process of w3m active.

2004-10-16  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-touch-file): Use `set-file-times' if available;
	bind `coding-system-for-write' while calling `w3m-touch-command'.

2004-10-10  Andreas Seltenreich  <seltenreich@gmx.de>

	* shimbun/sb-laut-de.el: New file.

2004-10-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-perldoc.el (w3m-perldoc-input-coding-system)
	(w3m-perldoc-output-coding-system): New options.
	(w3m-about-perldoc): Use the above options, to display both
	modules encoded in EUC-JP and ones encoded in UTF-8 correctly.

2004-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-line): Replace "%" with "%%" in
	w3m-tab-line-format.

2004-10-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-retrieve): Add autoload cookie.

2004-10-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-kantei.el (shimbun-get-headers): Don't escape
	Japanese parenthesis (it is not supported by old Emacsen).

2004-10-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-search.el (w3m-search-engine-alist): Add the parameter
	`ie=Shift_JIS' to Google for Japanese users.

2004-09-26  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* shimbun/sb-msdn.el (shimbun-msdn-from-address): Define.

	* shimbun/sb-exconn.el (shimbun-get-headers): Overwrite from
	address.

2004-09-25  Yuya Nishida  <yuya@j96.org>

	* shimbun/sb-impress.el (shimbun-get-headers): Include subtitles
	in the subject strings.

2004-09-21  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-antenna.el (w3m-about-antenna): Revert 2004-09-16 change.

2004-09-19  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* shimbun/sb-heise.el (shimbun-heise-content-start,
	shimbun-heise-wash-newsticker-article,
	shimbun-heise-wash-newsticker-article): Relax regexps.

2004-09-18  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-ibm-dev.el (shimbun-headers): Update regexp.

2004-09-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-antenna.el (w3m-about-antenna): Change the method to compare
	an arrived time to a last-modified time.

2004-09-15  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* shimbun/sb-msdn.el: New module.

2004-09-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-mark-unseen): Change default
	value.
	(mew-shimbun-scan-message): Move to the beginning of next line.
	(mew-shimbun-unseen-setup): Use the original function of Mew if it
	suport 'unread'.

2004-09-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Don't make a new history when reloading.
	(w3m-reload-this-page): Ditto.

	* w3m-hist.el (w3m-history-restore-position): Don't cause an error
	even if a page has shrunk.

2004-09-06  David Hansen  <david.hansen@gmx.net>

	* shimbun/sb-weeklyworldnews.el: New file.

	* shimbun/sb-emacswiki.el (shimbun-get-headers): Follow the change
	of the URL layout.
	(shimbun-rss-build-message-id): Ditto.

2004-09-01  Hiroaki Irokawa  <irorin@terra.dti.ne.jp>

	* shimbun/sb-vinelinux.el (shimbun-vinelinux-group-path-alist):
	Add errata.3x.i386, errata.3x.ppc and errata.3x.alpha groups.

2004-08-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-itmedia.el (shimbun-itmedia-group-alist): Fetch
	/enterprise/articles/ as well as /news/articles/ in burst group.
	(shimbun-get-headers): Ignore headers if there's no subject.

2004-08-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-mark-re-retrieve): Change
	default value for Mew 4.0.66 and later.

2004-08-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.4.3.
	(w3m-meta-content-type-charset-regexp): Revivaled to keep
	compatibility with old Gnus.
	(w3m-meta-charset-content-type-regexp): Ditto.

2004-08-15  Kazuhiro UCHIDA  <kayoujin@yahoo.co.jp>

	* w3m.el (w3m-remove-meta-charset-tags): Check that a content
	field has a valid value before parsing it.

2004-08-12  Romain Francoise  <romain@orebokech.com>

	* w3m.el (w3m-relationship-estimate-rules): Improve regexp for
	Google in order to make the scroll-to-next-page feature work on
	Google Groups as well.

2004-08-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-relationship-estimate-rules): Fix regexp for Google.
	Suggested by Romain Francoise <romain@orebokech.com>.

2004-08-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-cgi-board.el (shimbun-get-headers): Check whether a
	current header has been canceled or not.

2004-08-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-mytown.el (shimbun-asahi-mytown-get-headers):
	Use shimbun-create-header instead of shimbun-make-header.
	cf. <URL:http://emacs-w3m.namazu.org/ml/msg05438.html>.

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers): Ditto.
	* shimbun/sb-kantei.el (shimbun-get-headers): Ditto.
	* shimbun/sb-sankei.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-get-headers): Ditto.

2004-07-31  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* shimbun/sb-rss.el (shimbun-rss-node-text): Fix regexp.
	* shimbun/sb-haiku-os.el: New module.

2004-08-02  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* doc/ptexinfmt.el (slanted): Rename @s to @slanted.

2004-08-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers): Simplify
	removing of `<...>'s in the kansai-special group.

2004-07-30  Romain Francoise  <romain@orebokech.com>

	Enable emacs-w3m to be built with Emacs --without-x.

	* w3m-e21.el (image-size): Alias to ignore if it is not available.

	* w3m-favicon.el (w3m-favicon-type): Don't use image-types if it
	is not available.

	* w3m.el (mouse-set-point): Autoload mouse.elc.

2004-07-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Allow a subject
	to contain `<...>'s.
	(shimbun-asahi-get-headers): Use w3m-fontify to remove `<...>'s
	from a subject when parsing the kansai-special group.

2004-07-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>
	NOMIYA Masaru <nomiya@ttmy.ne.jp>,
	Katsumi Yamaoka <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-group-table): Replace
	kagaku with kagaku.science, kagaku.env and kagaku.medical groups.
	(shimbun-index-url): Replace . with / in group names.

	* shimbun/shimbun.el (shimbun-subst-char-in-string): New function.

2004-07-20  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* doc/ptexinfmt.el: Support @s.

2004-07-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.4.2.

2004-07-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-canonicalize-url): Revival.
	(w3m-w3m-attributes, w3m-w3m-retrieve): Call the above.
	(w3m-canonicalize-url): Do not check a slash.

2004-07-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-detect-meta-charset): Check that a content field has
	a valid value before parsing it.

2004-07-08  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>
	Suggested by Tatsuya Kinoshita <tats@vega.ocn.ne.jp>

	* w3m.el (w3m-correct-charset-alist): Reverse "windows-125x" and
	"cp125x".

2004-07-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.4.1.

2004-07-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-weather.el: Reconstructed to follow the change of site
	design.
	(w3m-weather-completion-table, w3m-weather-filter-functions):
	Update.
	(w3m-weather-extract-contents, w3m-weather-adjust-contents): New
	functions.
	(w3m-weather-remove-headers, w3m-weather-remove-footers,
	w3m-weather-get-seikatu-sisu, w3m-weather-insert-seikatu-sisu):
	Removed.

2004-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add the
	nankyoku-people group.

2004-06-27  Yoshitaka Taki  <taki@tawagoto.org>

	* shimbun/sb-impress.el (shimbun-impress-groups-alist): Improve
	regexp for pc, akiba, game and av groups.
	(shimbun-index-url): Don't add an excessive slash.
	(shimbun-get-headers): Use shimbun-create-header instead of
	shimbun-make-header; don't encode subject string.

	* shimbun/sb-itmedia.el (shimbun-itmedia-content-start): Don't
	declare it since it has never been used.
	(shimbun-itmedia-content-end): Ditto.
	(shimbun-itmedia-expiration-days): Don't declare it.
	(shimbun-get-headers): Use shimbun-create-header instead of
	shimbun-make-header; don't encode subject string; remove a relic
	lingered when it was sb-zdnet.el.
	(shimbun-itmedia-clean-text-page): Look for the body end securely.
	(shimbun-make-contents): Improve regexp to find date string.

2004-06-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-quickml.el: Removed.

2004-06-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-canonicalize-url): Don't make sure arg is a string.
	(w3m-input-url): Don't use w3m-canonicalize-url for non-string url
	which may be the symbol popup.

2004-06-27  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* shimbun/sb-exconn.el: New module.

2004-06-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mailman.el [shimbun-mailman-ja]: New class.
	(shimbun-make-contents) [shimbun-mailman-ja]: New method.
	(shimbun-mailman-ja-make-contents): New function.

	* sb-squeak-ja.el: Inherit `shimbun-mailman-ja' instead of
	`shimbun-mailman'.
	(shimbun-make-contents, shimbun-squeak-ja-make-contents): Removed.

	* sb-namazu.el: Inherit `shimbun-mailman-ja' instead of
	`shimbun-mailman'.
	(shimbun-make-contents, shimbun-namazu-make-contents): Removed.

2004-06-25  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-namazu.el (shimbun-namazu-groups): Add
	"kakasi-commits", "kakasi-dev" and "sary".

2004-06-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-canonicalize-url): New function.
	(w3m-input-url, w3m-browse-url): Call the above.
	(w3m-w3m-canonicalize-url): Abolished.
	(w3m-w3m-attributes, w3m-w3m-retrieve): Do not call the abolished
	function.
	(w3m-url-hierarchical-schemes): Add `ftps'.

2004-06-25  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-emacs-w3m.el: New file.

	* shimbun/sb-namazu.el (shimbun-namazu-groups): Remove "emacs-w3m"
	entry.

2004-06-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-add-w3m-initial-frames): Share the opened frame
	in w3m-initial-frames over all emacs-w3m buffers if w3m-use-tab is
	non-nil.
	(w3m-delete-w3m-initial-frames): New function; add it to
	delete-frame-functions or delete-frame-hook, or merge into
	delete-frame using defadvice.
	(w3m-delete-frames-and-windows): Return to the former buffer after
	performing walk-windows; don't manage w3m-initial-frames.

	* w3m.el (w3m-delete-buffer): Don't manage w3m-initial-frames.

2004-06-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-bbc.el (shimbun-bbc-content-start): Relaxed.

2004-06-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Strict
	checking whether images are successfuly retrieved.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-itmedia.el (shimbun-itmedia-group-alist): Give up to
	fetch HH:MM data in the business group; add anchordesk, bursts and
	technology groups.
	(shimbun-get-headers): Don't miss headers even if HH:MM is missing;
	sort headers by date.

2004-06-22  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-itmedia.el (shimbun-itmedia-group-alist): Update url
	and regexp for the enterprise group; add the business group.

2004-06-14  Yoichi NAKAYAMA  <yoichi@geiin.org>

	* w3m.el (TopLevel): Display meaningful message when w3m-command
	is nil.

2004-06-21  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-fontify): Call `w3m-replace-symbol' before
	`w3m-fontify-anchors' in order not to lose text properties.

2004-06-14  Andreas Seltenreich  <seltenreich@gmx.de>

	* shimbun/sb-welt-de.el: New file.

2004-06-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-prepare-article): Don't work
	for the editorial and the tenjin groups when newspaper holidays.

2004-06-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m): Run w3m-mode before popping to the newly created
	buffer up.

2004-06-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-rss.el (shimbun-rss-process-date): Simplified and
	relaxed the regular expression to be used to analyze date strings.
	Thanks to Andreas Seltenreich for his report.

2004-06-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-output-coding-system): Change default value for
	w3m-m17n.

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Add
	w3m-input-coding-system and w3m-output-coding-system.

2004-06-11  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-meta-content-type-charset-regexp)
	(w3m-meta-charset-content-type-regexp)
	(w3m-meta-refresh-content-regexp)
	(w3m-meta-content-refresh-regexp): Removed.
	(w3m-detect-meta-charset, w3m-remove-meta-charset-tags)
	(w3m-check-refresh-attribute): Use `w3m-parse-attributes' instead
	of above regexp.
	(w3m-rendering-buffer): Don't call `w3m-remove-meta-charset-tags'
	for w3m-m17n.

2004-06-10  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-namazu.el: Rewrite.

	* shimbun/sb-fml.el (shimbun-make-contents): Guard error at
	unsupposed page.

2004-06-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-make-new-session): Doc fix.
	(w3m-safe-view-this-url): Use w3m-goto-url-new-session only when a
	user invokes this command in a buffer not being running the
	w3m-mode.

2004-06-07  Masatake YAMATO  <jet@gyve.org>

	* w3m-hist.el (w3m-history-store-position): Fix a wrong message.

2004-06-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-filter.el (w3m-filter-rules): Relax the condition.

2004-06-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-make-new-session): Doc fix.
	(w3m-safe-view-this-url): Use w3m-goto-url-new-session instead of
	w3m-goto-url when w3m-make-new-session is non-nil.

2004-06-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-make-new-session): New user option.
	(w3m): Make a new emacs-w3m buffer if w3m-make-new-session is
	non-nil and a user specifies a url string.

	* shimbun/sb-cnn-jp.el (shimbun-cnn-jp-x-face-alist): New variable.

2004-06-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add the
	editorial group and the tensei-jingo group as tenjin.
	(shimbun-asahi-get-headers): Add a special treatment for the
	groups editorial and tenjin.
	(shimbun-asahi-get-headers-for-today): New function.
	(shimbun-asahi-prepare-article): Rename from
	shimbun-asahi-adjust-date-header; remove garbages for the groups
	editorial and tenjin.
	(shimbun-make-contents): Use shimbun-asahi-prepare-article.

	* shimbun/sb-asahi-html.el (shimbun-make-contents): Use
	shimbun-asahi-prepare-article.

2004-06-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-popup-buffer): Don't use focus-frame in Emacs.

	* shimbun/sb-x51.el (shimbun-make-contents): Make sure there are
	the start and the end of contents.

	* shimbun/sb-zeit-de.el (shimbun-make-contents): Ditto.

2004-06-02  Tsuyoshi CHO  <mfalcon21@hotmail.com>

	* shimbun/sb-cnn-jp.el (shimbun-cnn-jp-content-start): Improve
	regexp.
	(shimbun-cnn-jp-prepare-article): New function.
	(shimbun-make-contents): Use it to correct date headers.

	* shimbun/sb-x51.el (shimbun-x51-content-end): Improve regexp.
	(shimbun-get-headers): Don't put hour:min in date headers.
	(shimbun-x51-prepare-article): New function.
	(shimbun-make-contents): Use it to correct date headers.

2004-06-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-proc.el (w3m-process-wait-discard-input): Abolish.
	(w3m-process-wait-process): Don't use accept-process-output to
	make it possible to show progress messages; discard key press
	events while waiting for finishing of a process.

2004-05-27  Andreas Seltenreich  <seltenreich@gmx.de>

	* shimbun/sb-zeit-de.el (shimbun-zeit-de-content-end): Improve
	regexp.
	(shimbun-make-contents): Correct date headers if possible.

2004-05-24  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-form.el (w3m-form-put-by-name): Overwrite ID value when a name
	is found.

2004-05-24  MATSUURA Kyo  <kyo@chimons.org>

	* sb-security-memo.el (shimbun-security-memo-url): Reduced.
	(shimbun-security-memo-group-alist): New variable.
	(shimbun-security-memo-coding-system): Removed.
	(shimbun-security-memo-groups): New method.
	(shimbun-index-url): Ditto.
	(shimbun-reply-to): Check the current group name.

2004-05-24  Andreas Seltenreich  <seltenreich@gmx.de>

	* shimbun/sb-zeit-de.el: New file.  The shimbun backend for
	www.zeit.de.

	* shimbun/sb-n24-de.el: New file.  The shimbun backend for
	www.n24.de.

2004-05-22  Tsuyoshi CHO  <mfalcon21@hotmail.com>

	* shimbun/sb-cnn-jp.el: New file.

	* shimbun/sb-x51.el: New file.

2004-05-22  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-fontify): Remove tags in the form element except for
	textarea.

2004-05-21  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-rakuten.el (shimbun-rss-build-message-id): Modify
	the regexp.
	(shimbun-rss-get-date): Ditto.

2004-05-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-expire): Fix last change.

2004-05-18  Katsumi Yamaoka  <yamaoka@jpl.org>
	Suggested by Yoichi NAKAYAMA <yoichi@geiin.org>

	* w3m-util.el (w3m-replace-in-string): New function which is a
	copy of shimbun-replace-in-string.
	* w3m.el (w3m-active-region-or-url-at-point): Use it; remove all
	whitespace in region.

2004-05-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-view-inline-image): Bind
	mew-use-text/html as t.

	* shimbun/mew-shimbun.el (mew-shimbun-expire): Add message for
	nothing to do.

2004-05-17  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-fml.el (shimbun-make-contents): Normalize header values.

2004-05-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-home-page): Improve the customizing widget.

2004-05-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-expand-url): Bind file-name-handler-alist as nil.

2004-05-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-arrived-ignored-regexp): Add about:blank.
	(w3m-history-ignored-regexp): Ditto.
	(w3m-about-retrieve): Ditto.
	(w3m-buffer-setup): Prefer the last visited emacs-w3m buffer.

2004-05-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): Stricten
	checking whether images are successfully retieved or not.

2004-05-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-sankei.el (shimbun-clear-contents): Don't remove main
	text contents.

2004-05-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-mhonarc-get-headers): Enclosed
	with `save-excursion'.

	* shimbun/sb-namazu.el (shimbun-namazu-group-url-alist): Added
	"kakasi-dev".
	(shimbun-get-headers): Followed tha change of "emacs-w3m" ml
	archive.

2004-05-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-filter.el (w3m-filter-rules): Update its default value and
	its customize spec.

2004-05-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-w3m-dump-extra): Examine image data briefly to
	detect only gif, jpeg and png by itself.

	* w3m-util.el (w3m-image-type-from-data): Abolish.

2004-05-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-dump-extra): Check only 300 bytes at the top of
	the data.

2004-05-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-image-type-from-data): New function.  Suggested
	by KOSEKI Yoshinori <kose@meadowy.org>.

	* w3m.el (w3m-w3m-dump-extra): Use it.

2004-05-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-proc.el (w3m-process-start-process): Use
	set-process-query-on-exit-flag if it is available.

	* w3m.el (w3m-w3m-dump-extra): Trust the magic at the beginning of
	image data rather than the content-type header.

2004-05-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-copy-buffer): Prefer cached contents without
	checking their validity.

2004-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-spiegel.el (shimbun-rss-build-message-id): Use
	shimbun-replace-in-string instead of replace-regexp-in-string.

2004-05-08  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmoslove.el: Removed it since contents would not be
	updated anymore.

2004-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-emacswiki.el (shimbun-emacswiki-groups): Add `changes'.
	(shimbun-get-headers): Rewrite articles' URLs only when the
	current group is `diff'.

	* shimbun/sb-heise.el (shimbun-heise-get-newsticker-headers):
	(shimbun-heise-get-telepolis-headers): Takes an argument
	`shimbun', to suppress byte-compile warnings.
	(shimbun-get-headers): Follow the above changes.

2004-05-07  David Hansen  <david.hansen@gmx.net>

	* shimbun/sb-emacswiki.el:
	* shimbun/sb-heise.el:
	* shimbun/sb-spiegel.el: New files.

	* shimbun/sb-bbc.el (shimbun-bbc-content-start): Relaxed.

2004-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-atmarkit.el (shimbun-atmarkit-content-end): Updated
	to follow the change of the site design.

	* shimbun/shimbun.el (shimbun-index-url): Define its default
	method.

	* shimbun/sb-bbc.el (shimbun-index-url)
	* shimbun/sb-coldsync.el (shimbun-index-url)
	* shimbun/sb-dennou.el (shimbun-index-url)
	* shimbun/sb-digiko.el (shimbun-index-url)
	* shimbun/sb-fml.el (shimbun-index-url)
	* shimbun/sb-javaconf.el (shimbun-index-url)
	* shimbun/sb-jpilot.el (shimbun-index-url)
	* shimbun/sb-muchy.el (shimbun-index-url)
	* shimbun/sb-pilot-mailsync.el (shimbun-index-url)
	* shimbun/sb-pocketgames.el (shimbun-index-url)
	* shimbun/sb-sml.el (shimbun-index-url)
	* shimbun/sb-squeak-dev.el (shimbun-index-url)
	* shimbun/sb-squeak-ja.el (shimbun-index-url)
	* shimbun/sb-texfaq.el (shimbun-index-url)
	* shimbun/sb-wincefan.el (shimbun-index-url): Abolished.

2004-05-05  David Hansen  <david.hansen@gmx.net>

	* shimbun/sb-rss.el (shimbun-get-headers): Use the <dc:contributor>
	tag as an additional method to find the author.

2004-05-04  David Hansen  <david.hansen@physik.fu-berlin.de>

	* shimbun/sb-bbc.el (shimbun-bbc-content-start): Improve regexp.
	(shimbun-bbc-content-end): Ditto.

2004-05-01  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-nikkansports.el (shimbun-get-headers): Use
	shimbun-create-header() instead of shimbun-make-header() and don't
	encode subjects.

	* shimbun/sb-msports-nifty.el (shimbun-get-headers): Don't encode
	subjects.

	* shimbun/sb-makanai.el (shimbun-makanai-scan-articles): Ditto.

	* shimbun/sb-f1fan.el (shimbun-get-headers): Ditto.

	* shimbun/sb-f1express.el (shimbun-get-headers): Ditto.

2004-05-01  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-msports-nifty.el: New file.

	* shimbun/sb-makanai.el (shimbun-makanai-server-name): New
	variable.
	(shimbun-makanai-scan-articles): Use shimbun-create-header()
	instead of shimbun-make-header().

	* shimbun/sb-f1express.el (shimbun-f1express-server-name): New
	variable.
	(shimbun-get-headers): Use shimbun-create-header() instead of
	shimbun-make-header().

	* shimbun/sb-f1fan.el (shimbun-f1fan-server-name): New variable.
	(shimbun-get-headers): Use shimbun-create-header() instead of
	shimbun-make-header().

2004-05-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-waited): Revival.
	(w3m-process-with-wait-handler): Set t to the above.

	* w3m.el (w3m-w3m-dump-extra): Check the above.

2004-04-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Reset.

2004-04-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.4.

	* Makefile.in (install-package): Install w3m-load.el.
	(dist, tarball): Reimplemented, in order to keep time stamps of
	source files.

	* w3mhack.el (w3mhack-generate-xemacs-load-file): Simplified.

2004-04-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-generate-xemacs-load-file): Replace
	`replace-string' with basic functions.

2004-04-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-generate-xemacs-load-file): New function.
	(w3mhack-make-package): Use `w3mhack-generate-xemacs-load-file.

2004-04-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-update-files-autoloads): New function.
	(w3mhack-generate-load-file): Use `w3mhack-update-files-autoloads'.

2004-04-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-cgi-board.el (shimbun-clear-contents): Removed.
	(shimbun-make-contents): New method, which is a successor of the
	above method, but returns nil when missing a target article.

	* Makefile.in (tarball): Remove w3m-kwds.el and w3m-load.el.

	* configure.in, aclocal.m4: Add `--with-xml' option.

	* shimbun/sb-zdnet.el: Removed.

	* w3mhack.el (w3mhack-module-list): New function.
	(w3mhack-examine-modules): Use the above.
	(w3mhack-compile): Use `w3mhack-module-list' instead of
	`w3mhack-examine-modules'.
	(w3mhack-generate-load-file): Likewise; Insert ^L to avoid an
	error of `update-file-autoloads' of old emacsen.

2004-04-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-treat-image-size): Default to t.

	* w3m-filter.el (w3m-filter-asahi-shimbun): Use marker to limit
	the search bound.

2004-04-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-generate-load-file): Save w3m-load.el file
	before performing `update-file-autoloads'.

2004-04-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (install-lisp): Do not install w3mhack.el.
	(install-package): Install neither w3mhack.el nor w3m-load.el.

2004-04-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-treat-image-size): Default to nil.
	(w3m-rendering-half-dump): Fix a logic determining whether to
	specify `-ppl' and `-ppc' options to the w3m command.

2004-04-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el: Create w3m-load.el.
	(w3mhack-load-file): New variable.
	(w3mhack-examine-modules): Ignore `w3mhack-load-file'.
	(w3mhack-generate-load-file): New function.
	(w3mhack-compile): Call the above.

	* .cvsignore: Ignore w3m-load.el.

	* Makefile.in (clean): Remove w3m-load.el.

2004-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-prepare-article-markets):
	Don't show any text if the article seems to have been expired.

2004-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-expand-path-name): In Emacs, don't bind
	directory-sep-char which is an obsolete variable.

2004-04-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el, w3m-favicon.el: Move snippets managing
	`w3m-arrived-setup-functions' and `w3m-arrived-shutdown-functions'
	from w3m.el into w3m-favicon.el.

	* shimbun/sb-cnet-jp.el (shimbun-cnet-jp-group-alist): Add
	blog.inoue and blog.watanabe.

2004-04-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-hns-last-modified): Use 32400 as a
	correct timezone instead of JST (suggested by YAMAOKA-san).

2004-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-prepare-article): Break
	long lines.

	* shimbun/shimbun.el (shimbun-make-date-string): Get a correct day
	of week even in the west side of Greenwich.

2004-04-22  Christian Schmitt  <Christian.Schmitt@Dresdner-Bank.com>

	* w3m.el (w3m-expand-path-name): Bind directory-sep-char to `?/'.
	It is `?\' by default in XEmacs on Windows (native, not Cygwin).

2004-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-use-symbol): Don't activate it in Emacs 20.  Advised
	by Arisawa-san.

2004-04-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Simplify the rule of sending referers.
	(w3m-add-referer-regexps): Abolished.
	(w3m-add-referer-predicate-function): Abolished.
	(w3m-add-referer): New option.
	(w3m-add-referer-p): New function.
	(w3m-add-referer-predicate-by-referer-regexps): Removed.
	(w3m-add-referer-predicate-by-hosts): Removed.
	(w3m-request-arguments, w3m-header-arguments): Follow the above
	changes.

2004-04-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-add-w3m-initial-frames): Get the correct value
	for the newly created frame in Emacs 19.

	* w3m.el (w3m-about-retrieve): Load base64 for Emacs 19.
	(w3m-minor-mode-command-alist): Add w3m-print-this-url.

	* w3m-bitmap.el (w3m-bitmap-image-insert): Don't put the evaporate
	property on empty overlays (revert 2004-04-07 change).

2004-04-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-texfaq.el: Rewrite.

2004-04-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-mytown.el
	(shimbun-asahi-mytown-prepare-article): New function.
	(shimbun-make-contents): Use it to remove a subject line.

2004-04-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.3.90.

2004-04-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-link-numbering.el (w3m-view-numbered-link): Removed.
	(w3m-move-numbered-anchor): New command.
	(w3m-link-numbering-mode-map): Use `w3m-move-numbered-anchor'
	instead of `w3m-view-numbered-link'.

2004-04-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-input-coding-system): Use `w3m-output-coding-system'
	as its default value for w3m-m17n and w3mmee.
	(w3m-halfdump-command-arguments): Use "-I" option to disable
	automatic-detection of coding systems for w3m-m17n and w3mmee.

2004-04-16  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-meta-refresh-content-regexp): Allow quoted string as url.
	(w3m-meta-content-refresh-regexp): Ditto.
	(w3m-check-refresh-attribute): Decode entities.

2004-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add the
	borderless group.  There are wonderful pictures, so I strongly
	recommend using asahi-html, not asahi. :)

2004-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-link-numbering.el (w3m-link-numbering): Quit when links have
	already been numbered.

2004-04-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-link-numbering.el (w3m-link-numbering-mode): Delete all
	overlays that display link numbers, when deactivating.

2004-04-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-link-numbering.el (w3m-link-numbering): Add face to
	before-string correctly under XEmacs; don't bother to delete
	overlays (suggested by TSUCHIYA-san).

2004-04-14  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-link-numbering.el (w3m-link-numbering-face): New face.
	(w3m-link-numbering): Use it.

2004-04-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-link-numbering.el: New file.

	* w3m.el (w3m-browse-url): Load `browse-url' before calling
	`browse-url-interactive-arg'.

2004-04-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el: Rewrite.

2004-04-12  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* doc/ptexinfmt.el: Support @indicateurl, @LaTeX, @ordf, @ordm.
	@url is now a synonym for @uref.

2004-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify-anchors): No need to enable evaporation of
	overlays in XEmacs.

	* shimbun/sb-nikkei.el (shimbun-nikkei-prepare-article-markets):
	Don't show garbages if the article seems to have been expired.

2004-04-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers-default):
	Replace `shimbun-make-header' with `shimbun-create-header' in
	order to normalize subject strings; don't make any modifications
	on subject strings in advance.
	(shimbun-nikkei-get-headers-top): Ditto.
	(shimbun-nikkei-get-headers-markets): Ditto.
	(shimbun-nikkei-get-headers-sports): Ditto.
	(shimbun-nikkei-get-headers-newpro): Ditto.
	(shimbun-nikkei-get-headers-release): Ditto.
	(shimbun-nikkei-get-headers-shasetsu): Ditto.
	(shimbun-nikkei-get-headers-okuyami): Ditto.

2004-04-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-2ch.el (shimbun-2ch-group-alist): Declared as an
	option.
	* shimbun/sb-chalow.el (shimbun-chalow-group-alist): Ditto.
	* shimbun/sb-hns.el (shimbun-hns-group-alist): Ditto.

	* shimbun/sb-cgi-board.el: New file.

2004-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el: Rewrite.

	* shimbun/shimbun.el (shimbun-x-face): Don't use cached faces.

2004-04-08  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* w3m.el (w3m-delete-all-overlays): Revert.
	(w3m-highlight-current-anchor): Ditto.

2004-04-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-all-overlays): Remove.

2004-04-07  Masatake YAMATO  <jet@gyve.org>

	* w3m-bitmap.el (w3m-bitmap-image-insert): Enable the evaporate
	property on overlays.

	* w3m-e21.el (w3m-form-make-button): Enable the evaporate property
	on buttun overlays.

	* w3m.el (w3m-fontify-anchors): Ditto.
	(w3m-create-text-page): No need to delete zombie overlays.
	(w3m-create-image-page): Ditto.
	(w3m-highlight-current-anchor-1): Enable the evaporate property on
	overlays.
	(w3m-highlight-current-anchor): No need to delete overlays.

2004-04-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-rendering-extract-title): Remove too much whitespace.

2004-04-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-all-overlays): Simply delete all overlays if
	the optional arg is given.
	(w3m-create-text-page): Delete zombie overlays.
	(w3m-create-image-page): Ditto.

2004-04-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search-engine-alist): Improve custom.

2004-04-04  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-search.el (w3m-search-engine-alist): Add "amazon" entry.

2004-03-31  Yuya Nishida  <yuya@j96.org>

	* w3m-search.el (w3m-search-engine-alist): Add "amazon-ja" entry;
	"PostData" can be specified.
	(w3m-search): Support post-data.

2004-04-04  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-header-arguments): Set unibyte at work buffer.

	* w3m-form.el (w3m-form-make-form-data): Set unibyte at work buffer;
	Encode form data.

2004-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-kantei.el (shimbun-get-headers): Improve regexp in
	order to fetch articles of the English edition.

2004-03-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-mytown.el (shimbun-asahi-mytown-get-headers):
	Adjust the number of years correctly even if an article is very
	old.
	* shimbun/sb-asahi.el (shimbun-asahi-get-headers): Ditto.
	* shimbun/sb-sankei.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-get-headers): Ditto.

2004-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-prepare-article): Remove
	rectangle section.

2004-03-22  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-type): Check if w3m-compile-options contains "m17n".

2004-03-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-add-referer-regexps): Fix typo.
	(w3m-add-referer-predicate-function): New user option.
	(w3m-add-referer-predicate-by-referer-regexps): New function.
	(w3m-add-referer-predicate-by-hosts): Ditto.
	(w3m-request-arguments): Call w3m-add-referer-predicate-function.
	(w3m-header-arguments): Ditto.

	* octet.el (mime-view-octet): Avoid redundant invocation of
	`mime-entity-content'.

2004-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-kantei.el: Support the English edition.  It may need
	to be fixed when the regular distribution starts.
	(shimbun-kantei-url): Exclude the subdirectory.
	(shimbun-kantei-groups): Add m-magazine-en and m-magazine-ja.
	(shimbun-kantei-content-start): Support the English edition.
	(shimbun-kantei-content-end): Ditto.
	(shimbun-index-url): Ditto.
	(shimbun-from-address): Ditto.
	(shimbun-get-headers): Ditto.
	(shimbun-clear-contents): Ditto.

2004-03-14  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-symbol.el (w3m-mule-unicode-symbol): Fixed 32th character.
	Thanks to Taichi KAWABATA for his report.

2004-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-message): Handle ## correctly.

2004-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-make-date-string): Add a day of week.

2004-03-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-weather.el (w3m-weather-get-seikatu-sisu): Relax regular
	expressions to extract indices, to follow the change of the site
	design.

2004-03-06  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-f1express.el (shimbun-get-headers): Follow the change
	of the site.

2004-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-force-window-update): New function.
	(w3m-tab-drag-mouse-function, w3m-tab-click-mouse-function,
	w3m-tab-line, w3m-e21-switch-to-buffer, w3m-select-buffer-hook):
	Use `w3m-force-window-update' instead of
	`w3m-e21-wobble-window-size'.
	(w3m-e21-wobble-window-size): Abolish.

	* w3m-favicon.el (w3m-favicon-retrieve): Use
	`w3m-force-window-update'.

	* w3m-proc.el: Autoload `w3m-force-window-update' when compiling.
	(w3m-process-stop): Use `w3m-force-window-update'.

	* w3m.el (w3m-select-buffer-show-this-line): Use
	`w3m-force-window-update'.

2004-02-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.3.85.

2004-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-drag-mouse-function): Call
	`w3m-e21-wobble-window-size'.
	(w3m-tab-click-mouse-function): New function.
	(w3m-tab-make-keymap): Use it.

2004-02-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-mee-new): Use `w3m-form-normalize-action'
	for action.

2004-02-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-select-buffer-show-this-line): Call
	`w3m-e21-wobble-window-size' when Emacs 21 or 22 is running.

	* w3m-e21.el (w3m-tab-line-format): Make it buffer-local variable.
	(w3m-tab-timer): Ditto.
	(w3m-e21-wobble-window-size): New function.
	(w3m-tab-line): Make `w3m-tab-timer' hold boolean value; let a
	timer function run certainly in a buffer in which a timer started;
	use `w3m-e21-wobble-window-size'.
	(w3m-e21-switch-to-buffer): New command.
	(w3m-e21-subst-switch-to-buffer-keys): New function.
	(w3m-mode-setup-functions): Add
	`w3m-e21-subst-switch-to-buffer-keys'.
	(w3m-select-buffer-hook): Add `w3m-e21-wobble-window-size'.
	(w3m-spinner-image-index): Make it buffer-local variable.

2004-02-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-make-form-data): Align form by the number
	of `hseq'.

2004-02-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Added argument `referer'.
	(shimbun-mime-replace-image-tags): Call `shimbun-retrieve-url' with
	argument `referer'.

2004-02-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-sites): Add
	`w3m-antenna-check-another-page' to its customize spec.
	(w3m-antenna-check-another-page): New function.
	(w3m-about-antenna): Relaxed the condition to check changed sites.
	(w3m-antenna-add): Add a new site at the end of
	`w3m-antenna-sites' instead of adding it at the top.

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Relaxed the
	regular expression that matches spaces.

	* shimbun/sb-rss.el (shimbun-get-headers): Check channel's author.

	* shimbun/sb-slashdot-jp.el: Chenges to support sectioned RSS
	feeds and diaries.
	(shimbun-slashdot-jp-group-alist): New option.
	(shimbun-slashdot-jp-url): Abolished.
	(shimbun-slashdot-jp-from-address): Modified.
	(shimbun-slashdot-jp-content-start): Modified to support diaries.
	(shimbun-slashdot-jp-content-end): Ditto.
	(shimbun-groups): New method.
	(shimbun-index-url): Refer `shimbun-slashdot-jp-group-alist'.
	(shimbun-rss-build-message-id): Support diaries.
	(shimbun-slashdot-jp-comment-url): Return nil when diary pages are
	specified.
	(shimbun-clear-contents): Check the return value of the above
	function before insertion of the anchor to comments page.

2004-02-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-antenna.el (w3m-antenna-function): New widget.
	(w3m-antenna-sites): Use it.

2004-02-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-expand-path-name): Protect expand-file-name from
	cygwin-mount.el's behavior on Windows.

	* w3m-antenna.el (w3m-about-antenna): Check arrived-time if no
	last-modified.

2004-02-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-antenna.el (w3m-antenna-sites): Fix mis-implemented
	customizing widgets in Emacs 20.7 through 21.3 and XEmacs.
	(w3m-antenna-add): Support Emacs 20.

	* w3m-util.el (widget-default-get): Remove advice.

2004-02-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (widget-default-get): Advise the function to fix a
	bug in Emacs 21.1 through 21.3.

2004-02-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-resume): Fix for checkbox.

2004-02-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-itmedia.el (shimbun-get-headers): Remove newlines in
	the subject.

2004-02-11  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* doc/ptexinfmt.el: Support @docbook, @ifdocbook, @ifnotdocbook,
	and @registeredsymbol.

2004-02-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-active-region-or-url-at-point): Move the point
	backward from the end of the active region instead of moving it
	forward, in order to avoid enlarging the region.

2004-02-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-active-region-or-url-at-point): Find a url-like
	string in the region instead of extracting the whole substring
	when the region is active.  Don't use `w3m-url-at-point' for that
	since it doesn't work for all url string.
	(w3m-quit): Delete frames seemingly fast.

2004-02-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-sankei.el (shimbun-sankei-content-start): Improve.
	(shimbun-sankei-content-end): Improve.
	(shimbun-get-headers): Improve regexps.
	(shimbun-clear-contents): Ditto.

2004-02-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-favicon.el (w3m-favicon-retrieve): Because some broken
	servers provide empty contents as their favicons, check the length
	of the retrieved content, before calling `w3m-favicon-convert'.

2004-02-08  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-mhonarc-get-subject-value)
	(shimbun-mhonarc-get-from-r13-value): New methods.
	(shimbun-make-contents): Use the above methods.

	* shimbun/sb-meadow.el (shimbun-mhonarc-get-subject-value)
	(shimbun-mhonarc-get-from-r13-value): New methods.

2004-02-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Changes to validate cached contents.
	(w3m-follow-cache-control-header): Abolished.
	(w3m-prefer-cache): New option.
	(w3m-cache-available-p): Check whether a cached header includes
	cache control headers.
	(w3m-w3m-dump-extra): Always cache both a header and a content.
	(w3m-w3m-retrieve-1): Check whether a cache is available, before
	using it.
	(w3m-view-this-url): When visiting history pages, prefer cached
	contents without checking their validity.
	(w3m-view-previous-page, w3m-view-source, w3m-view-header):
	Prefer cached contents without checking their validity.

2004-02-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-show-error-information): Decode cache contents if
	necessary.

2004-02-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-edit-url): Define as a command.

2004-02-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-gnome.el (shimbun-get-headers): Removed last argument.

2004-02-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-examine-modules): Exclude w3m-e22.el except
	for Emacs 22.

2004-01-31  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-edit-function-alist): New option.
	(w3m-edit-url): Refer the above alist to find a suitable function
	for editing a specified page.
	(w3m-edit-function, w3m-edit-current-url): Its docstring is
	modified to follow the above change.
	(w3m-edit-this-url): Its docstring is modified likewise, and it is
	simplified.
	(w3m-goto-url): Ignore cached form data when reloading.

	* shimbun/nnshimbun.el: Changes to make nnshimbun.el more robust.
	(nnshimbun-goto-url): Abolished.
	(gnus-summary-refer-shimbun-article): New command.
	(nnshimbun-setup-article-mode): Use the above command instead of
	the abolished one.

	* w3m.el (w3m-safe-view-this-url): Call `w3m-goto-url' when a
	function set to `w3m-goto-article-function' returns nil.

2004-01-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Changes to follow anchors that point Shimbun articles.
	(w3m-goto-article-function): New variable.
	(w3m-safe-view-this-url): Refer the above.

	* shimbun/nnshimbun.el: Add autoloads of `gnus-group-short-name'
	and `gnus-summary-refer-article' to avoid byte-compile warnings.
	(nnshimbun-search-xref, nnshimbun-goto-url,
	nnshimbun-setup-article-mode): New functions.

2004-01-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-follow-cache-control-header): New option.
	(w3m-w3m-dump-extra): If `w3m-follow-cache-control-header' is
	nil, do not follow the chache control headers.

2004-01-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (tarball): Because Emacs-22 has not been released,
	remove w3m-e22.el from the creating tarball.

2004-01-27  Taichi KAWABATA  <batta@beige.ocn.ne.jp>

	* w3m-e22.el: New file.  This file is simply the copy of
	w3m-e21.el except that the ccl section has been removed.

	* w3m.el: Require w3m-e22 when Emacs 22 is running.

2004-01-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-after-cursor-move-hook): Add :group keyword.
	(w3m-auto-show): Check `truncate-lines' before scrolling.
	(w3m-check-current-position): Do not check `truncate-lines'.

	* mime-w3m.el: Changes to display URI of the current anchor.
	(mime-w3m-after-cursor-move-hook): New option.
	(mime-w3m-add-local-hook): New advice.
	(mime-w3m-check-current-position): New funcion.

2004-01-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-start-and-wait): Abolished.
	(w3m-process-with-wait-handler): Reimplemented.

	* w3m.el (w3m-input-url): Accept other symbols than `popup'.
	(w3m-copy-buffer): Fix the bug that drops an asynchronous handler
	returned by `w3m-goto-url'.

2004-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Register a url to the history even if it
	is failed to retrieve.  Suggested by Fujishima-san.

2004-01-23  Hiroshi Fujishima  <pooh@nature.tsukuba.ac.jp>

	* w3m.el (w3m-input-url): Fix a bug which causes an error when
	there's neither a frame nor a window for the emacs-w3m session and
	`url' is the symbol `popup' (it is because there's a url-like text
	around the cursor but deleted by a user in the minibuffer).

2004-01-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-input-url): Add "http://" to its return value, when
	its return value contains no scheme part.

2004-01-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-sankei.el (shimbun-clear-contents): Improve tags
	pointing to the advertisement; go to the beginning of the buffer.

2004-01-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el: Succeeded by sb-slashdot-jp-rss.el.

	* w3m.el (w3m-w3m-dump-extra): Check cache control headers before
	caching headers and contents.  This change is suggested by
	Mr. Amagai in [emacs-w3m:06255].
	(w3m-message): Make it verbose, even if a buffer related to
	emacs-w3m is not displayed.  w3m-print-this-url() has been broken
	in buffers displaying text/html messages, because w3m-message()
	was too silent.

2004-01-15  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-pocketgames.el (shimbun-make-contents): New method.
	(shimbun-pocketgames-article-1): Rename to
	`shimbun-pocketgames-article'.
	(shimbun-pocketgames-comment-article): Abolished.
	(shimbun-pocketgames-article): Ditto.
	(initialize-instance): Ditto.
	(shimbun-article): Ditto.
	(shimbun-pocketgames-content-hash-length): Ditto.

2004-01-15  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-tdiary.el (shimbun-tdiary-get-headers): Fix the
	regexp.

2004-01-15  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-parse-date-string): Fix the number of regexp.

2004-01-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-cnet-jp.el (shimbun-rss-build-message-id): Replace
	cammas included in URL with periods, because a camma is a special
	character.  Cf. RFC822.

2004-01-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-cnet.el (shimbun-cnet-content-start,
	shimbun-cnet-content-end): Abolished.
	(shimbun-cnet-extract-body, shimbun-cnet-remove-footer,
	shimbun-cnet-remove-useless-tags): New functions.
	(shimbun-clear-contents): Reimplemented.

	* shimbun/shimbun.el (shimbun-strip-cr): New function.

	* shimbun/sb-cnet.el (shimbun-clear-contents): Call
	`shimbun-strip-cr'.
	* shimbun/sb-cnet-jp.el (shimbun-clear-contents): Ditto.
	* shimbun/sb-mainichi.el (shimbun-get-headers,
	shimbun-clear-contents): Ditto.

	* shimbun/sb-rss.el (shimbun-get-headers): Simplified.

	* shimbun/sb-cnet.el: Rewritten for the original house of CNET.

	* shimbun/sb-cnet-jp.el: Renamed from sb-cnet-rss.el.

2004-01-12  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-lotusex.el (shimbun-get-headers): Remove wrong
	argument HEADER.
	* shimbun/sb-muchy.el (shimbun-get-headers): Ditto.

2004-01-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* sb-bbc.el: Renamed from sb-bbc-rss.el.

	* w3m.el (w3m-safe-view-this-url): Bind `w3m-pop-up-windows' to
	nil locally, in order to keep MUA's window configuration.

	* shimbun/sb-cnet-rss.el: Add blog groups.
	(shimbun-cnet-rss-group-alist): New variable.
	(shimbun-cnet-rss-url, shimbun-cnet-rss-groups): Abolished.
	(shimbun-cnet-rss-content-start): Follow the change of the site
	design.
	(shimbun-cnet-rss-content-end): Ditto.
	(shimbun-groups): New method.
	(shimbun-index-url): Refer `shimbun-cnet-rss-group-alist' instead
	of `shimbun-cnet-rss-url'.
	(shimbun-clear-contents): New method.
	(shimbun-rss-build-message-id): Add a regular expression to create
	message IDs for blog groups.

	* w3m-proc.el (w3m-process-do-with-temp-buffer): Save the current
	buffer while executing an asynchronous body.

	* w3m-util.el (w3m-insert-string): Define its `edebug-form-spec'.

	* shimbun/sb-jpo.el (shimbun-make-contents): Abolished.
	(shimbun-jpo-contents): Abolished.
	(shimbun-clear-contents): New method.

	* shimbun/sb-kantei.el (shimbun-make-contents): Abolished.
	(shimbun-clear-contents): New method.

	* shimbun/sb-linux-ja.el (shimbun-linux-ja-remove-tags): Abolished.
	(shimbun-make-contents): Abolished.
	(shimbun-clear-contents): New method.

	* shimbun/sb-mainichi.el (shimbun-clear-contents): New method.
	(shimbun-make-contents): Simplified.
	(shimbun-mainichi-remove-tags): Abolished.

	* shimbun/sb-pcweb-column.el (shimbun-pcweb-column-groups): Follow
	the change of the site.
	(shimbun-pcweb-column-content-start): Ditto.
	(shimbun-index-url): Ditto.
	(shimbun-get-headers): Ditto.
	(shimbun-make-contents): Ditto.
	(shimbun-article): New method that converts old URLs to new ones.

	* shimbun/sb-sankei.el (shimbun-make-contents): Abolished.
	(shimbun-clear-contents): New method.

	* shimbun/shimbun.el (shimbun-clear-contents): New method.
	(shimbun-make-html-contents): Call the above.
	(shimbun-remove-tags): New function.

	* shimbun/sb-f1fan.el (shimbun-clear-contents): New method.
	(shimbun-make-contents): Simplified.

	* shimbun/sb-itmedia.el (shimbun-itmedia-clean-text-page):
	Simplified.

	* shimbun/sb-slashdot-jp-rss.el
	(shimbun-slashdot-jp-rss-comment-arguments): New option.
	(shimbun-get-headers): Add "&mode=nocomment" to each article's
	URL, in order to reduce downloading time.
	(shimbun-slashdot-jp-rss-comment-url): New function.
	(shimbun-clear-contents): New method.

	* shimbun/sb-tdiary.el (shimbun-tdiary-group-alist): Declared as
	an option.

	* shimbun/sb-text.el (shimbun-make-contents): Simplified.

	* shimbun/sb-wiki.el (shimbun-wiki-group-alist): Declared as an
	option.

2004-01-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-parse-date-string): Follow the change of the
	site design.

2004-01-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-cnet.el (shimbun-get-headers): Don't use
	`file-name-sans-extension' for a url string.  In Emacs 21.3 and
	older, it expands a name into the absolute pathname.

2004-01-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-cnet.el (shimbun-cnet): Define class with
	`shimbun-japanese-newspaper'.
	(shimbun-cnet-content-start): Invalidate it with "".
	(shimbun-cnet-content-end): Exclude newlines.
	(shimbun-index-url): Change the return value.
	(shimbun-get-headers): Rewrite.
	(shimbun-make-contents): Find content-start.

2004-01-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-itmedia.el (shimbun-itmedia-clean-text-page): Follow
	the change of the site design.
	(shimbun-itmedia-retrieve-next-pages): Change the regular
	expression to detect next pages.

2004-01-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-itmedia.el: New file.

2004-01-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-util.el (w3m-keep-region-active): Renamed from
	`w3m-activate-zmacs-regions'.
	(w3m-deactivate-region): Declared as a macro.

	* w3m-search.el (w3m-search-read-query): Call
	`w3m-deactivate-region' instead of `w3m-deactivate-mark'; Call
	`region-beginning' and `region-end' instead of `point' and `mark'.

	* w3m.el (w3m-next-anchor, w3m-previous-anchor, w3m-next-form,
	w3m-previous-form, w3m-next-image, w3m-previous-image,
	w3m-scroll-up-or-next-url, w3m-scroll-down-or-previous-url,
	w3m-beginning-of-line, w3m-end-of-line): Call
	`w3m-keep-region-active' instead of `w3m-activate-zmacs-regions'.
	(w3m-active-region-or-url-at-point): Call `region-beginning' and
	`region-end' instead of `point' and `mark'.

2004-01-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-proc.el (w3m-process-wait-discard-input): New variable.
	(w3m-process-wait-process): If `w3m-process-wait-discard-input'
	is non-nil, call `discard-input'.

	* shimbun/mew-shimbun.el (mew-shimbun-headers)
	(mew-shimbun-article): New macro.
	(mew-shimbun-retrieve-article)
	(mew-shimbun-re-retrieve-article): Use macros.

2004-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-deactivate-mark): New function alias.

	* w3m.el (w3m-active-region-or-url-at-point): Use it.
	(w3m-open-all-links-in-new-session): Use it.

	* w3m-search.el (w3m-search-read-query): Use it.

	* shimbun/shimbun.el (shimbun-point-at-bol): New function
	replacing `gnus-point-at-bol' which has been abolished in the Gnus
	upstream.
	(shimbun-point-at-eol): New function replacing `gnus-point-at-eol'
	which has been abolished in the Gnus upstream.

	* shimbun/nnshimbun.el (nnshimbun-search-id): Use
	`shimbun-point-at-bol'.
	(nnshimbun-parse-nov): Use `shimbun-point-at-eol'.
	(nnshimbun-request-expire-articles): Ditto.

2004-01-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-rakuten.el (shimbun-rakuten-group-alist): Declared as
	an option with `defcustom' instead of `defvar'.

2004-01-04  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-rakuten.el: New file.

2004-01-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-month-alist):
	Abolished.
	(shimbun-slashdot-jp-parse-date-string): Follow the change of the
	site design.

	* w3m.el (w3m-active-region-or-url-at-point): New function.
	(w3m-input-url, w3m-view-this-url, w3m-goto-url): Call
	`w3m-active-region-or-url-at-point' instead of `w3m-url-at-point'.

2004-01-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-unseen-regex): Delete macro.
	(mew-shimbun-unseen-regex): New function.
	(mew-shimbun-set-form): Ditto.
	(mew-shimbun-pick): Ditto.
	(mew-shimbun-jump-msg): Ditto.
	(mew-shimbun-touch-folder-p): New variable.
	(mew-shimbun-goto-folder): Support Mew 4.
	(mew-shimbun-retrieve): Ditto.
	(mew-shimbun-retrieve-all): Ditto.
	(mew-shimbun-retrieve-article): Ditto.
	(mew-shimbun-re-retrieve): Ditto.
	(mew-shimbun-re-retrieve-all): Ditto.
	(mew-shimbun-expire-all): Ditto.
	(mew-shimbun-expire): Ditto.
	(mew-shimbun-get-id-msgs): Ditto.
	(mew-shimbun-folder-new-p): Ditto.
	(mew-shimbun-unseen-remove-advice): Ditto.

2004-01-04  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-util.el (w3m-region-active-p): New macro.

	* w3m.el (w3m-open-all-links-in-new-session): Deactivate the mark
	when it is active.
	(w3m-view-this-url-new-session): Use `w3m-region-active-p'.

	* w3m-search.el (w3m-search-read-query): Use `w3m-region-active-p'.

	* w3m-namazu.el (w3m-namazu): Use `w3m-search-read-query' to read
	a query from the minibuffer.

	* w3m-search.el (w3m-search-read-query): New function.
	(w3m-search): Use the above function.

2004-01-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-search.el (w3m-search): Use the region as an initial string
	if Transient Mark mode.
	(w3m-search-word-at-point): Follow the above change in its
	docstring.

	* w3m-e21.el (w3m-tab-line): Check the length of the current
	title, before checking the breadth of its first character.

2004-01-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Add `nankyoku'
	group and `whitemail' group.

2003-12-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-accept-languages): Split the option of w3m with a
	comma surrounded by some spaces.
	(w3m-dump-head-source-command-arguments): Use a comma instead of a
	white space to concatenate elements of `w3m-accept-languages'.
	Cf. Section 14.4 of RFC2047.

2003-12-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Add an advice to byte-optimize-form-code-walker to
	avoid the warning ``...called for effect'' for the pop form when
	running Emacs 21.3.

2003-12-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-create-text-page): Use the last directory as a title
	of text/plain page when its uri is terminated by a slash.

2003-12-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Release 1.3.80.

2003-12-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-rss.el (shimbun-get-headers): Convert CRLF to LF when
	running XEmacs since the coding systems *-dos provided by Mule-UCS
	don't work for decoding them.

2003-12-24  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-chalow.el (shimbun-get-headers): Erase buffer before
	retrieving.
	* shimbun/sb-debian-jp.el (shimbun-get-headers): Ditto.
	* shimbun/sb-kde.el (shimbun-get-headers): Ditto.

2003-12-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-wait-process): Return exit status; Use
	`accept-process-output' instead of `sit-for' in order to flush
	pending output.
	(w3m-process-with-wait-handler): Follow the above change.

2003-12-21  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-cnet-rss.el (shimbun-rss-build-message-id): Updated.

	* shimbun/sb-rss.el (shimbun-rss-build-message-id): Update doc string.
	(shimbun-rss-process-date): Ditto.
	(shimbun-rss-get-date): New method.
	(shimbun-get-headers): Use `shimbun-rss-get-date' to get a date if
	it is defined.

2003-12-21  Masatake YAMATO  <jet@gyve.org>

	* w3m.el (w3m-mode): Small doc fix.
	(w3m-relationship-estimate-rules): Relax the regular expression to
	detect result pages of Google.

2003-12-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-safe-toggle-inline-image): New function.
	(w3m-toggle-inline-images): Revoke the recent changes.
	(w3m-safe-toggle-inline-images): New function.
	(w3m-safe-view-this-url): Doc fix.
	(w3m-minor-mode-command-alist): Use `w3m-safe-toggle-inline-image'
	and `w3m-safe-toggle-inline-images'.

	* w3m-util.el (w3m-find-w3m-buffer): Abolish.
	(w3m-with-w3m-buffer): Abolish.

	* mew-w3m.el (mew-w3m-view-inline-image): Revert.

	* attic/vm-w3m.el (vm-w3m-safe-toggle-inline-images): New function.

2003-12-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-toggle-inline-images): Ignore `w3m-safe-url-regexp'
	when the prefix argument is given.

	* w3m-util.el (w3m-find-w3m-buffer): Bind `w3m-safe-url-regexp' to
	the value specified peculiarly by each MUA.
	(w3m-with-w3m-buffer): Ditto.

	* mew-w3m.el (mew-w3m-view-inline-image): Don't bind
	`w3m-safe-url-regexp' there.

2003-12-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-view-inline-image): Fix last change.

2003-12-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-view-inline-image): Use `w3m-toggle-inline-images'.
	(mew-mime-text/html-w3m): Put the `w3m-images' text property in
	the message buffer.

	* w3m-util.el (w3m-find-w3m-buffer): Fix for Mew.

2003-12-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-toggle-inline-images): Wrap it with
	`w3m-with-w3m-buffer'.

	* w3m-util.el (w3m-find-w3m-buffer): New function.
	(w3m-with-w3m-buffer): New macro.

2003-12-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-string): Renamed from
	`string-with-default'.
	(w3m-antenna-string-create): Renamed from
	`string-with-default-value-create'.
	(w3m-antenna-sites): Change its customize spec.

	* w3m-xmas.el (w3m-window-hscroll, w3m-current-column,
	w3m-set-window-hscroll): Import definitions from w3m.el.
	(w3m-run-at-time): Renamed from `w3m-xmas-run-at-time'.

	* w3m.el (w3m-window-hscroll, w3m-current-column,
	w3m-set-window-hscroll): Export definitions for XEmacs to
	w3m-xmas.el.

2003-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_SET_VANILLA_FLAG): New function specifying the
	`VANILLA_FLAG' variavle.  XEmacs 21.5 needs to be given `-vanilla'
	rather than `-q -no-site-file'.
	(AC_EMACS_LISP): Use `VANILLA_FLAG'.
	(AC_PATH_EMACS): Call `AC_SET_VANILLA_FLAG'.
	(AC_ADD_LOAD_PATH): Use `VANILLA_FLAG'.
	(AC_CHECK_ELISP): Ditto.

	* configure.in: Check for `EGREP' before calling `AC_PATH_EMACS'.

	* Makefile.in (VANILLA_FLAG): New variable.
	(FLAGS): Use it.
	(very-slow): Use it.

	* doc/Makefile.in (VANILLA_FLAG): New variable.
	(FLAGS): Use it.

	* w3m-xmas.el (w3m-xmas-run-at-time): Use a simple function
	definition if there is not a bug in `start-itimer'.

2003-12-11  KAMO Tomoyuki <kamo@ITmanage.co.jp>

	* octet.el (octet-suffix-type-alist): Add suffix of bzip-ed files.
	(octet-type-filter-alist): Add an entry of bzip2.
	(octet-guess-type-from-name): Relax the regular expression to
	detect suffix, in order to handle bzip-ed files.

2003-12-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Experimentally implement the estimation layer of
	relationships between pages.
	(w3m-relationship-estimate-rules): New option.
	(w3m-relationship-estimate, w3m-relationship-simple-estimate,
	w3m-relationship-magicpoint-estimate,
	w3m-relationship-search-patterns): New functions.
	(w3m-use-filter): Cancel the last change; its default value is
	changed to nil.

	* w3m-filter.el (w3m-filter-rules): Remove rules to find
	relationships.
	(w3m-filter-find-relationships): Abolished.

	* w3m-util.el (w3m-html-string-regexp): Import from w3m.el.

2003-12-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-header-insert): Never use BBDB if
	there is not the ~/.bbdb file.

2003-12-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-use-filter): Change its default value to t.

	* w3m-filter.el: Reconstructed completely.
	(w3m-filter-rules): Change its spec and its default value.
	(w3m-filter): Reimplemented.
	(w3m-filter-delete-regions, w3m-filter-find-relationships): New
	functions.
	(w3m-filter-db, w3m-filter-db-size, w3m-filter-server-regexp,
	w3m-filter-setup, w3m-filter-delete-region, w3m-filter-lwn.net,
	w3m-filter-google.com, w3m-filter-www.zdnet.co.jp): Removed.

2003-12-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-xmas-run-at-time): Rewrite w/o using fsf-compat.

	* w3m.el (w3m-run-at-time): New function alias.
	(w3m-refresh-at-time): Use it.

2003-12-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-xmas-run-at-time): New function.

	* w3m.el (w3m-refresh-at-time): Use it.

2003-12-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/sb-tdiary.el (shimbun-get-headers): Erase buffer before
	retrieving.

2003-12-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url-new-session): Abolish the optional arg.
	(w3m-mouse-view-this-url-new-session): Ditto.

2003-12-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-buffer-setup): Use `defun' instead of `defsubst'.

2003-12-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-current-anchor-face): Replace backquote with quote.
	(w3m-select-buffer-current-buffer): Ditto.
	(w3m-header-line-insert): Ditto.
	(w3m-about-retrieve): Use `defun' instead of `defsubst'.
	(w3m-cid-retrieve): Ditto.
	(w3m-current-column): Make it a function, not a macro.

2003-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-checking-new-news-format): New
	variable.
	(shimbun-verbose): New variable.
	(shimbun-message-enable-logging): New variable.
	(shimbun-headers): Say "Checking new news..." message.
	(shimbun-article): Replace `message' with `shimbun-message'.
	(shimbun-replace-in-string): Move from sb-rss.el.
	(shimbun-message): New function.

	* shimbun/sb-rss.el (shimbun-replace-in-string): Move to
	shimbun.el.

2003-11-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-minor-mode): Run hooks only when this minor mode is
	enabled.
	* w3m-bookmark.el (w3m-bookmark-mode): Ditto.
	* w3m-antenna.el (w3m-antenna-mode): Ditto.

	* w3m-antenna.el (w3m-antenna-alist): Simplified.

2003-11-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el: Define a new minor mode `w3m-antenna-mode'.
	(w3m-antenna-mode-map, w3m-antenna-mode): New variables.
	(w3m-antenna-mode, w3m-antenna-mode-setter, w3m-antenna-edit): New
	functions.

	* w3m-bookmark.el (w3m-bookmark-mode): Change its interactive
	spec, and improve its document.

	* w3m-favicon.el (w3m-favicon-retrieve): Abolish the 4th argument
	`handler' and wrap the asynchronous processing forms with
	`w3m-process-with-null-handler', in order to clarify this
	function's purpose.

	* w3m.el (w3m-message): Use `walk-windows' instead of `window-list',
	because the latter is not available at Meadow and Mule2.
	(w3m-w3m-retrieve): Check the status code.
	(w3m-show-error-information): Also use retrieved error pages.
	(w3m-minor-mode): Change its interactive spec.

2003-11-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el (w3m-favicon-convert): Make sure data of the ico
	type contains the correct magic numbers.

2003-11-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-util.el (w3m-last-visited-buffer): Abolished.
	(w3m-popup-buffer): Do not reset the above variable.

	* w3m.el (w3m-close-window): Do not set the above variable.
	(w3m): Do not refer the above variable.

2003-11-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-retrieve-and-render): Use `w3m-message' instead of
	`message'; don't let it be controlled by `w3m-verbose'.
	(w3m-alive-p): Don't sort the return value of `list-buffers' so
	that it returns the last visited emacs-w3m buffer as much as
	possible; don't inline the `w3m-list-buffers' function.

2003-11-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-verbose): Change its default value to nil.
	(w3m-message): When `w3m-verbose' is nil, display messages without
	logging.
	(w3m-make-help-echo, w3m-toggle-inline-image, w3m-zoom-in-image,
	w3m-zoom-out-image, w3m-view-this-url, w3m-submit-form,
	w3m-view-image, w3m-save-image, w3m-view-url-with-external-browser,
	w3m-download-this-url, w3m-print-this-url, w3m-edit-current-url,
	w3m-edit-this-url, w3m-quit, w3m-goto-ftp-url, w3m-select-buffer,
	w3m-select-buffer-show-this-line,
	w3m-select-buffer-show-this-line-and-switch): Call `w3m-message'
	instead of `w3m-display-message'.

	* w3m-util.el (w3m-display-message): Removed.
	(w3m-display-message-enable-logging): Abolished.

2003-11-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-message): Silent when the cursor is in minibuffer.

	* w3m-util.el (w3m-display-message): Ditto.

2003-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-html-string-regexp): Fix my fault; enclose it with
	`eval-and-compile' which is needed for compiling since it is used
	in a macro.

2003-11-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-real-url): New function.
	(shimbun-content-type, shimbun-url-exists-p): Removed.

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Call
	`shimbun-real-url' instead of calling `w3m-attributes' directly.

2003-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Extract a
	timestamp from the index page for okuyami and shasetsu groups;
	don't use `w3m-current-url' (temporally).

2003-11-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-wait-process): Invert the return value
	of sit-for() that waits an asynchronous process.
	(w3m-process-kill-process): Relax the condition that checks
	whether a given process has already finished or not.

2003-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search): Use `w3m-goto-url' instead of `w3m'.
	* w3m-weather.el (w3m-weather): Ditto.

	* w3m.el (w3m-obey-w3m-pop-up-frames): Abolish.
	(w3m-goto-url-new-session): Find an existing emacs-w3m buffer and
	then make a copy of it; use `w3m-goto-url' instead of `w3m' if
	there is no emacs-w3m buffer.
	(w3m-browse-url): Revert last change; rename the optional arg to
	`new-session'; call `w3m-goto-url-new-session' or `w3m-goto-url'.
	(w3m-select-buffer): Use `w3m-goto-url' instead of `w3m'.
	(w3m-safe-view-this-url): Ditto.

2003-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-antenna.el (w3m-antenna): Don't pass the interactive flag to
	`w3m-goto-url'.
	* w3m-bookmark.el (w3m-bookmark-view): Ditto.
	* w3m-cookie.el (w3m-cookie): Ditto.
	* w3m-dtree.el (w3m-dtree): Ditto.
	* w3m-namazu.el (w3m-namazu): Ditto.
	* w3m-perldoc.el (w3m-perldoc): Ditto.

	* w3m.el (w3m-copy-buffer): Don't pop up a window or a frame if
	`w3m-goto-url' is called.
	(w3m-goto-url): Abolish the 8th arg `interactive-p'; pop up a
	window or a frame anyway.
	(w3m-goto-url-new-session): Abolish the `interactive-p' argument;
	don't pass it to `w3m-goto-url'.
	(w3m-gohome): Ditto.
	(w3m): Don't pop up a window or a frame there.
	(w3m-browse-url): Make it work as `browse-url-w3'.

2003-11-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-proc.el (w3m-process-wait-process): Don't specify 3 args to
	`sit-for' for XEmacs.

2003-11-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-sites): Change its default value.
	Allow a list that consists of a function and its options, as the
	third element of each site.
	(w3m-antenna-html-skeleton): Remove the link to the antenna editor.
	(w3m-antenna-setup): Removed.
	(w3m-antenna-shutdown): Removed.
	(w3m-antenna-alist): New function.
	(w3m-antenna-site-update): Ditto.
	(w3m-antenna-check-hns): Ditto.
	(w3m-antenna-check-anchor): Ditto.
	(w3m-antenna-check-page): Ditto.
	(w3m-antenna-check-site): Use the above three functions.
	(w3m-antenna-check-all-sites): Follow the above change.  Use
	w3m-antenna-alist() and w3m-save-list() instead of
	w3m-antenna-setup() and w3m-antenna-shutdown().
	(w3m-antenna-check-site-after): Removed.
	(w3m-antenna-make-summary): Use a key attribute instead of an url
	attribute, when the latter is not set.
	(w3m-antenna-make-summary-like-natsumican): Ditto.
	(w3m-about-antenna): Call w3m-antenna-alist() instead of
	w3m-load-list().
	(w3m-about-antenna-edit): Removed.
	(w3m-antenna-edit-reset-post-data): Ditto.

2003-11-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-antenna.el (w3m-antenna): Pass the interactive flag to
	`w3m-goto-url'.
	* w3m-bookmark.el (w3m-bookmark-view): Ditto.
	* w3m-cookie.el (w3m-cookie): Ditto.
	* w3m-dtree.el (w3m-dtree): Ditto.
	* w3m-namazu.el (w3m-namazu): Ditto.
	* w3m-perldoc.el (w3m-perldoc): Ditto.
	* w3m.el (w3m-gohome): Ditto.
	(w3m-browse-url): Ditto.

2003-11-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-rendering-half-dump): Move point to the end of the
	region in order to avoid a bug of `call-process-region' in XEmacs
	21.5.7+ (see the comment).
	(w3m-decode-encoded-contents): Ditto.
	(w3m-x-moe-decode-buffer): Ditto.

	* w3m-perldoc.el (w3m-about-perldoc): Ditto.

	* w3m-xmas.el (w3m-initialize-graphic-icons): Ditto.

	* w3m-favicon.el (w3m-favicon-retrieve): Say "no favicon" if it is
	not available.

	* w3m-proc.el (w3m-process-with-environment): Rely on the
	`temp-directory' function and modify TEMP and TMPDIR env vars for
	XEmacs.

2003-11-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-normalize-action): New inline function.
	(w3m-form-parse-and-fontify): Use it.
	(w3m-form-new): Simply set action.
	(w3m-form-submit): Don't treat !CURRENT_URL! here.

2003-11-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_ADD_LOAD_PATH): Refine the help message for the
	--with-attic option.

2003-11-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-buffer-setup): Make sure that `truncate-lines' is t.
	(w3m-view-source): Don't set `truncate-lines' to nil when quitting
	viewing a source.
	(w3m-view-header): Set `truncate-lines' to nil when viewing a
	header.

2003-11-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-put-by-name): New function.
	(w3m-form-resume): Use w3m-form-get-by-name and w3m-form-put-by-name
	instead of w3m-form-get and w3m-form-put for radio buttons.
	(w3m-form-parse-and-fontify): Ditto.
	(w3m-form-input-radio): Ditto.

2003-11-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-check-current-position): Don't allow horizontal
	scrolling when `truncate-lines' is nil.
	(w3m-view-source): Set `truncate-lines' to nil.

	* w3m-favicon.el (w3m-favicon-setup): Retrieve favicon even when
	viewing the header or the page source.

2003-11-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (very-slow): Fix echo messages.

	* w3m.el (w3m-follow-redirection): Fix customization type.

	* w3m-e21.el: Bind `w3m-current-title' when compiling.

	* /: Bind `w3m-work-buffer-list' when compiling in: w3m-e21.el,
	w3m-favicon.el, w3m-image.el, w3m-proc.el and w3m-xmas.el.

	* /: Require `cl' when compiling in: w3m-cookie.el, w3m-form.el
	and w3m-tabmenu.el.

	* /: Remove unused non-global variables in: octet.el,
	w3m-cookie.el, w3m-tabmenu.el and w3m-weather.el.

	* shimbun/: Require `cl' when compiling in: sb-2ch.el, sb-airs.el,
	sb-chalow.el, sb-debian-jp.el, sb-debian.el, sb-digiko.el,
	sb-fml.el, sb-glimpse.el, sb-gnome.el, sb-javaconf.el, sb-kde.el,
	sb-m17n.el, sb-meadow.el, sb-namazu.el, sb-netbsd.el,
	sb-nikkei.el, sb-orca.el, sb-pocketgames.el, sb-redhat.el,
	sb-ruby.el, sb-savannah.el, sb-tdiary.el and sb-zdnet.el.

	* shimbun/: Remove unused non-global variables in: sb-2ch.el,
	sb-chalow.el, sb-debian.el, sb-f1fan.el, sb-gnome.el,
	sb-ibm-dev.el, sb-jpo.el, sb-lotusex.el, sb-makanai.el,
	sb-marc-aims.el, sb-mhonarc.el, sb-palmfan.el, sb-ruby.el,
	sb-slashdot-jp.el, sb-vinelinux.el and sb-yahoo.el.

2003-11-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Make `w3m-local-find-file-function' don't
	handle directories.

2003-11-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el: Bind `w3m-current-process', `w3m-pop-up-frames',
	`w3m-pop-up-windows', `w3m-popup-frame-parameters',
	`w3m-select-buffer-name' and `w3m-use-tab', and fbind
	`select-frame-set-input-focus' when compiling.
	(w3m-popup-frame-parameters): Move from w3m.el.
	(w3m-popup-frame-p): Ditto.
	(w3m-use-tab-p): Ditto.
	(w3m-popup-window-p): Ditto.
	(w3m-initial-frames): Ditto.
	(w3m-last-visited-buffer): Ditto.
	(w3m-popup-buffer): Ditto; also move the program to make
	`select-frame-set-input-focus' unbound from w3m.el.
	(w3m-add-w3m-initial-frames): Ditto; also move the program to add
	it to `create-frame-hook', `after-make-frame-functions' or
	`after-make-frame-hook' from w3m.el.
	(w3m-delete-frames-and-windows): Ditto.
	(w3m-display-progress-message): Mark a progress message with the
	`w3m-progress-message' text property.

	* w3m.el: Don't fbind `select-frame-set-input-focus'.
	(w3m-local-find-file-function): Use `w3m-popup-frame-p'.
	(w3m-initial-frames): Move to w3m-util.el.
	(w3m-popup-frame-parameters): Ditto.
	(w3m-popup-frame-p): Ditto.
	(w3m-use-tab-p): Ditto.
	(w3m-popup-window-p): Ditto.
	(w3m-last-visited-buffer): Ditto.
	(w3m-popup-buffer): Ditto; also move the program to make
	`select-frame-set-input-focus' unbound to w3m-util.el.
	(w3m-add-w3m-initial-frames): Ditto; also move the program to add
	it to `create-frame-hook', `after-make-frame-functions' or
	`after-make-frame-hook' to w3m-util.el.
	(w3m-delete-frames-and-windows): Ditto.
	(w3m-delete-buffer-if-empty): New function.
	(w3m-view-this-url-1): Use it.
	(w3m-goto-url-new-session): Use it.
	(w3m): Use it.

	* w3m-e21.el (w3m-euc-japan-encoder): Compute the ccl program in
	each time to load w3m-e21.elc to keep the compatibility of the
	module with Emacs 21.3 and the later versions.
	(w3m-iso-latin-1-encoder): Ditto.

2003-11-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-horizontal-scroll-division): Mega doc fix; eliminate
	illegal values.
	(w3m-horizontal-on-screen): Rearrange.

	* shimbun/shimbun.el (shimbun-entity-insert)
	[shimbun-multipart-entity]: Honor RFC2046 5.1.1 that the boundary
	delimiter must begin with a line break.

2003-11-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-last-visited-buffer): New variable.
	(w3m-popup-buffer): Clear `w3m-last-visited-buffer'.
	(w3m-close-window): Set the last emacs-w3m buffer as
	`w3m-last-visited-buffer'.
	(w3m): Preferably use the last emacs-w3m buffer kept in
	`w3m-last-visited-buffer'.

2003-11-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-horizontal-recenter): Do nothing besides resetting
	the window's hscroll if `truncate-lines' is nil.
	(w3m-beginning-of-line): Replace `w3m-set-window-hscroll' with
	`set-window-hscroll'.
	(w3m-end-of-line): Make it work identically as `end-of-line' if
	`truncate-lines' is nil.
	(w3m-display-width): Move downward (see the comment).

2003-11-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-parse-header): Because a broken server returns a
	relative URL in the location field, convert a URL to absolute.

	* w3m-proc.el (w3m-process-wait-process): New function.
	(w3m-process-start-and-wait): Call the above function.

	* w3m-weather.el (w3m-weather-run-filter-functions): New function
	to call filter functions asynchronously.
	(w3m-about-weather): Call the above.
	(w3m-weather-get-seikatu-sisu): Asynchronized.
	(w3m-weather-insert-seikatu-sisu): Ditto.

2003-11-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-initial-frames): Rename from `w3m-initial-frame';
	keep a list of the frame-IDs.
	(w3m-popup-window-p): Return nil if there is the selection window.
	(w3m-popup-buffer): Copy a copy of `w3m-initial-frames' from
	a visible emacs-w3m buffer to a popped-up emacs-w3m buffer; don't
	set `w3m-initial-frames' for newly created frames there.
	(w3m-add-w3m-initial-frames): New function; add it to
	`create-frame-hook', `after-make-frame-functions' or
	`after-make-frame-hook'.
	(w3m-copy-buffer): Copy a copy of `w3m-initial-frames'.
	(w3m-delete-buffer): Pop up another emacs-w3m buffer instead of
	deleting a frame; remove a deleted frame from `w3m-initial-frames'.
	(w3m-delete-frames-and-windows): Also allow a window or a frame as
	the optional argument; emulate XEmacs version's `one-window-p'.
	(w3m): Set the value for `w3m-initial-frames' even if it is
	invoked in the batch mode.
	(w3m-select-buffer): Delete other emacs-w3m frames and windows.
	(w3m-select-buffer-copy-buffer): Revert the 2003-11-11 change.
	(w3m-select-buffer-delete-buffer): Simplify.

	(w3m-display-width): New function for showing pages as if there is
	no selection window.
	(w3m-halfdump-command-common-arguments): Use it.
	(w3m-make-separator): Use it.
	(w3m-about-db-history): Use it.
	(w3m-header-line-insert): Work as if there is no selection window.

	* w3mhack.el (w3mhack-generate-colon-keywords-file): Preset
	`:strike-through' and `:strikethru' which aren't supported by the
	old cus-face.el.

2003-11-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-popup-buffer): Reuse an existing window or frame if
	it exists; set the value for `w3m-initial-frame' properly; raise,
	select and focus the new frame.
	(TopLevel): Make `select-frame-set-input-focus' unbound if it is a
	dummy.
	(w3m-view-this-url-1): Show a progress message.
	(w3m-copy-buffer): Simplify the code to call `w3m-popup-buffer'.
	(w3m-alive-p): Add an optional arg `visible' (see docs); use
	inlining `w3m-list-buffers'.
	(w3m): Simplify the code using `w3m-popup-buffer'; specify the
	optional arg to `w3m-alive-p'; protect against the case of no url.
	(w3m-select-buffer-copy-buffer): Bind `w3m-pop-up-windows' to nil.

	* w3m-util.el (w3m-list-buffers): Make it into a normal function;
	don't call itself recursively.

2003-11-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/mew-shimbun.el (static-if): New macro providing only
	when compiling.
	(mew-shimbun-visit-folder): Replace `w3m-static-if' with
	`static-if'.
	(function-max-args): New macro providing only when compiling with
	Emacs; make it work also with symbol function aliases.
	(mew-shimbun-goto-folder): Replace `w3m-function-max-args' with
	`function-max-args'.
	(mew-shimbun-retrieve-article): Replace `w3m-static-if' with
	`static-if'.
	(mew-shimbun-scan-message): Ditto.

	* w3m-util.el (w3m-function-max-args): Move to mew-shimbun.el.

	* w3m.el (w3m-popup-buffer): New function (it still needs to
	improved in order for the `w3m' function to use).
	(w3m-view-this-url-1): Specify the value of
	`w3m-view-this-url-new-session-in-background' to the 3rd arg of
	`w3m-copy-buffer'; don't pop up a window or a frame there.
	(w3m-copy-buffer): Change the meaning of the 3rd arg (see docs);
	don't pop up a window or a frame if it is non-nil, otherwise call
	`w3m-popup-buffer'.
	(w3m-goto-url): Change the name of the 8th arg to `interactive-p';
	don't pop up a window or a frame unless this function is called
	interactively, otherwise call `w3m-popup-buffer'.
	(w3m-goto-url-new-session): Specify nil to the 3rd arg of
	`w3m-copy-buffer'.
	(w3m-select-buffer-saved-window-config): Abolish.
	(w3m-select-buffer): Revert the 2003-11-05 change; delete other
	windows except for the current emacs-w3m window or create a new
	emacs-w3m buffer when it is called initially.
	(w3m-select-buffer-current-buffer): Use `line-beginning-position'.
	(w3m-select-buffer-copy-buffer): Revert the 2003-11-05 change;
	simplify.
	(w3m-select-buffer-delete-buffer): Call `w3m-quit' if there is the
	sole emacs-w3m buffer.
	(w3m-select-buffer-delete-other-buffers): Revert the 2003-11-07
	change.
	(w3m-select-buffer-quit): Revert the 2003-11-05 change; bind
	`pop-up-frames'.

2003-11-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-stop): Change `w3m-current-process' in
	the buffer specified in the argument, instead of changing it in
	the current buffer.

2003-11-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-canonicalize-url): New function.
	(w3m-w3m-attributes-1): New function.
	(w3m-w3m-attributes): Call the above functions to follow
	redirection.
	(w3m-w3m-retrieve): Call `w3m-w3m-canonicalize-url' before
	retrieving.

	* w3m-proc.el (w3m-process-start-process): Check the value of
	`w3m-current-url' before calling `w3m-url-authinfo'.
	(w3m-process-start-and-wait): Make sure synchronization with
	sub-process.
	(w3m-process-do-with-temp-buffer): Call `w3m-kill-buffer' instead
	of calling `kill-buffer' directly.

	* w3m-antenna.el (w3m-antenna-mapcar): Simplified and follow the
	change of `w3m-process-do-with-temp-buffer'.
	(w3m-antenna-mapcar-after): Ditto.

2003-11-07  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-atmarkit.el (shimbun-rss-build-message-id): Bug fixed.
	* shimbun/sb-bbc-rss.el (shimbun-rss-build-message-id): Ditto.
	* shimbun/sb-cnet-rss.el (shimbun-rss-build-message-id): Ditto.
	* shimbun/sb-slashdot-jp-rss.el (shimbun-rss-build-message-id): Ditto.
	* shimbun/sb-wiki.el (shimbun-rss-build-message-id): Ditto.

2003-11-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-other-buffers): Use
	`w3m-delete-frames-and-windows'.
	(w3m-delete-frames-and-windows): Take an optional argument for the
	exception; assume a buffer may be at two or more windows.
	(w3m-close-window): Assume a buffer may be at two or more windows.
	(w3m-select-buffer-delete-other-buffers): Save-window-excursion.

2003-11-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-popup-frame-parameters): Rename from
	`w3m-pop-up-frame-parameters' to make it easy to complete the
	`w3m-pop-up-frames' variable name.
	(w3m-popup-frame-parameters): Rename from
	`w3m-pop-up-frame-parameters'.
	(w3m-popup-frame-p): Make it a generic macro.
	(w3m-use-tab-p): New macro.
	(w3m-popup-window-p): Use `w3m-use-tab-p'.
	(w3m-view-this-url-1): Use `w3m-use-tab-p' and `w3m-popup-frame-p'.
	(w3m-copy-buffer): Ditto.
	(w3m-delete-buffer): Use `w3m-use-tab-p'.
	(w3m-goto-url): Use `w3m-use-tab-p' and `w3m-popup-frame-p'.
	(w3m): Modify to use new `w3m-popup-frame-p'.
	(w3m-header-line-insert): Use `w3m-use-tab-p'.

2003-11-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-current-redirect): Abolished.
	(w3m-clear-local-variables, w3m-copy-local-variables): Follow the
	above change.

	* w3m-proc.el (w3m-process-do-with-temp-buffer): Keep the current
	buffer after given FORM and BODY are evaluated.

2003-11-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-follow-redirection): Fix its docstring.
	(w3m-w3m-retrieve): When the above option is equal to nil, it is
	treated as 0.
	(w3m-retrieve-and-render): Check content type and charsets with
	redirected real URI instead of user-specified URI.

	* w3m-antenna.el (w3m-antenna-hns-last-modified): Do not accept
	`no-cache' argument.
	(w3m-antenna-check-site): Ditto.
	(w3m-antenna-mapcar, w3m-antenna-mapcar-after): New functions.
	(w3m-antenna-check-all-sites): Use the above functions.

2003-11-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-buffer): New implementation.
	(w3m-delete-frame-maybe): Abolish.
	(w3m-delete-frames-and-windows): New function.
	(w3m-quit): Use it.
	(w3m-close-window): New implementation.
	(w3m-select-buffer-show-this-line): Specify the 1st arg to
	`one-window-p'.
	(w3m-select-buffer-quit): Ditto.
	(w3m-select-buffer-close-window): Ditto.

2003-11-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-strike-through): Support <strike> element.
	(w3m-fontify): Change the turn `w3m-fontify-strike-through' and
	`w3m-fontify-underline'.

2003-11-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* attic/vm-w3m.el: New file.

2003-11-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Fbind `select-frame-set-input-focus' when compiling.
	(w3m-popup-window-p): Rename from `w3m-pop-up-window-p'; use
	'emacs-major-version' instead of `MULE' to examine the version.
	(w3m-view-this-url-1): Use `pop-to-buffer' instead of
	`switch-to-buffer' in order to be able to popup a window or a
	frame.
	(w3m-copy-buffer): Ditto; set the `w3m-initial-frame' variable
	only when `w3m-pop-up-frames' is non-nil.
	(w3m-delete-buffer): Select the most suitable buffer.
	(w3m-goto-url): Use `pop-to-buffer' instead of `switch-to-buffer'
	in order to be able to popup a window or a frame.
	(w3m): Ditto; rearrange the source code.
	(w3m-select-buffer-saved-window-config): New variable.
	(w3m-select-buffer): Save the window configuration.
	(w3m-select-buffer-copy-buffer): Bind `pop-up-frames'.
	(w3m-select-buffer-quit): Restore the window configuration;
	protect agains the absence of an emacs-w3m buffer.

	* w3m-xmas.el: Bind `w3m-use-tab' when compiling.
	(w3m-xmas-show-current-title-in-buffer-tab): Examine the value for
	the `gutter-buffers-tab-enabled' variable directly.
	(w3m-xmas-setup-tab-in-gutter): New function; add it to
	`w3m-mode-setup-functions' and `w3m-select-buffer-mode-hook'.
	(w3m-xmas-update-tab-in-gutter): Do update only when `w3m-use-tab'
	and `gutter-buffers-tab-enabled' are non-nil; always add it to
	`w3m-display-functions'.

	* octet.el: Don't make sure the `emacs-major-version' variable is
	bound.
	* w3m-bitmap: Ditto.
	* w3m-bug.el: Ditto.
	* w3m-proc.el: Ditto.
	* w3m-ucs.el: Ditto.
	* w3m-util.el: Ditto.
	* w3m.el: Ditto.
	* w3mhack.el: Ditto.

	* shimbun/sb-asahi-mytown.el (shimbun-asahi-mytown-group-table):
	Combine "kitakyu" and "fukuoka" into "fukuoka".
	(shimbun-asahi-mytown-get-headers): Improve regexp.

2003-11-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-delete-buffer, w3m-delete-other-buffers)
	(w3m-select-buffer-delete-buffer): Call `w3m-process-stop'.

	* w3m-proc.el (w3m-process-kill-stray-processes): New function.
	(w3m-process-start-queued-processes): Call
	`w3m-process-kill-stray-processes'.
	(w3m-process-filter): When parent-buffer was killed, call
	`w3m-process-kill-stray-processes'

2003-11-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-pop-up-windows): Default to t.
	(w3m-pop-up-window-p): New macro examining the value for the
	`w3m-use-tab' variable and the present situation.
	(w3m-copy-buffer): Use it.

	* shimbun/shimbun.el (shimbun-header-insert): Use `functionp'
	instead of `fboundp' to eximine the value for the
	`shimbun-x-face-database-function' variable.

2003-11-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-meta-content-type-charset-regexp)
	(w3m-meta-charset-content-type-regexp)
	(w3m-meta-refresh-content-regexp)
	(w3m-meta-content-refresh-regexp): Allow `\n' as whitespaces.

2003-10-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-backward): Return the current history
	if the number zero is given as an argument.

2003-10-29  OHASHI Akira  <bg66@koka-in.org>

	* w3m.el (w3m-process-connection-type): Set t when system is
	darwin version 7.0.0 or later.

2003-10-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify-strike-through (var)): Make it into the
	variable which is not a user option.
	(w3m-fontify-strike-through (fn)): Check dynamically whether the
	window system is used.
	(w3m-url-at-point): Unify iso646 chars to ascii on XEmacs-mule.

	* mew-w3m.el: Silence the compile warning for `mew-coding-system-p'
	for people having the Mew XEmacs package installed.

2003-10-24  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-2ch.el (shimbun-2ch-request-article): Use
	shimbun-header-number() instead of aref().
	(shimbun-headers)[shimbun-2ch]: Ditto.

	* shimbun/shimbun.el (shimbun-header-number): New function.
	(shimbun-header-set-number): Ditto.

2003-10-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-obey-w3m-pop-up-frames): New variable.
	(w3m-copy-buffer): Inherit the value of `w3m-initial-frame' into
	the new buffer if a new frame is not created for the new buffer.
	(w3m-delete-frame-maybe): Simplify it in the different way.

	* w3m-search.el (w3m-search): Specify the 3rd arg of `w3m'.

2003-10-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Revive `w3m-initial-frame' throughout.
	(w3m-delete-frame-maybe): Revert 2003-10-20 change.

2003-10-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-strike-through-face): Use the :strikethru attribute
	in XEmacs.
	(w3m-fontify-strike-through): Enable it also for XEmacs.

2003-10-22  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-2ch.el (shimbun-headers): Correct the index of
	article number.

2003-10-22  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-tdiary.el (shimbun-replace-in-string): Abolish.
	(shimbun-tdiary-get-headers): Use `shimbun-create-header' instead
	of `shimbun-make-header'.

2003-10-21  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-retrieve): Insert no data when either retrieval
	or decoding is failed.
	(w3m-w3m-parse-header): Do not return a base URI of retrieved
	page.

2003-10-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Fix some comments and docstrings (to be continued).
	(w3m-copy-local-variables, w3m-open-all-links-in-new-session,
	w3m-horizontal-scroll): Remove unused non-global variables.

2003-10-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-cnet.el (shimbun-make-contents): Keep tag strings to
	show a start position and an end position of each main content.

2003-10-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Abolish `w3m-initial-frame' throughout.
	(w3m-delete-frame-maybe): Simplify.

2003-10-19  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* shimbun/shimbun.el (shimbun-footer) [shimbun-japanese-newspaper]:
	Add <br> in order to make a newline certainly.
	* shimbun/sb-tdiary.el (shimbun-tdiary-get-headers): Encode group
	names.

2003-10-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-base-url): Removed.
	(w3m-attributes, w3m-local-attributes, w3m-w3m-attributes): Do not
	return a base URI of retrieved page.

2003-10-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-entity-insert)
	[shimbun-text-entity]: Simplified.

2003-10-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-entity-type)
	[shimbun-multipart-entity]: start=<ID> -> start="<ID>"
	(shimbun-entity-insert) [shimbun-text-entity]: Save point while
	performing `encode-coding-region'.

2003-10-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-make-multipart-entity): Change its
	argument spec to make `type' optional.
	(shimbun-make-mime-article): Follow the above change.
	(shimbun-entity-type) [shimbun-multipart-entity]: Add type
	parameter when a subtype is "related".  Thanks to Mr. Teranisi for
	his suggestion in [emacs-w3m:05964].
	(initialize-instance) [shimbun-text-entity]: Removed.
	(shimbun-text-entity-charset): New method.
	(shimbun-entity-type) [shimbun-text-entity]: Use the above.
	(shimbun-entity-insert) [shimbun-text-entity]: Ditto.
	(initialize-instance) [shimbun-image-entity]: Do not set a default
	value of a media type.

	* shimbun/sb-zdnet.el (shimbun-make-contents): Follow the above
	changes.

2003-10-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun.el: Define LUNA classes that represent MIME entities
	such as text/html, image/png etc.
	(shimbun-entitiy, shimbun-multipart-entity, shimbun-text-entity,
	shimbun-image-entity): New classes.
	(shimbun-entity-type, shimbun-entity-cid, shimbun-entity-insert):
	New methods.
	(shimbun-make-multipart-entity, shimbun-make-text-entity,
	shimbun-make-image-entity): New constructors.
	(shimbun-entity-add-child): New function.
	(shimbun-mime-replace-image-tags): New function.
	(shimbun-make-mime-article): Rewritten to use the above classes
	and functions.
	(shimbun-mime-boundary-counter): Removed.
	(shimbun-mime-make-multipart-message): Removed.
	(shimbun-mime-retrieve-images): Removed.

	* shimbun/sb-zdnet.el (shimbun-make-contents): Reimplemented.
	(shimbun-zdnet-retrieve-next-pages): Ditto.

2003-10-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-make-contents): Small fix.

	* shimbun/sb-zdnet.el (shimbun-zdnet-clean-text-page): New
	function.
	(shimbun-zdnet-retrieve-next-pages): Likewise.
	(shimbun-make-contents): Reimplemented.

	* shimbun/shimbun.el (shimbun-mime-replace-image-tags): New
	function.
	(shimbun-mime-boundary-counter): New internal variable.
	(shimbun-mime-make-multipart-message): New function.
	(shimbun-mime-retrieve-images): Likewise.
	(shimbun-make-mime-article): Rewritten to use the above functions.

2003-10-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Improve regexp
	for the english group.

2003-10-14  Jose A. Ortega Ruiz  <jao@abra.uab.es>

	* w3m.el (w3m-decode-entities-string): Move `save-match-data' to
	the exterior of `with-temp-buffer'.

2003-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-half-space, w3m-tab-separator): Use `:width'
	instead of `:relative-width' to specify the space width.
	(w3m-tab-line): Tidy it up.

	* w3m-favicon.el (w3m-favicon-set-image): Use `:width' instead of
	`:relative-width' to specify the space width.

2003-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-unselected-face,
	w3m-tab-unselected-retrieving-face, w3m-tab-selected-face,
	w3m-tab-selected-face): Exchange the default TTY colors between
	selected faces and unselected faces.
	(w3m-tab-drag-mouse-function): Compare buffer objects instead of
	buffer names.
	(w3m-tab-make-keymap): Use buffer objects instead of buffer names.
	(w3m-tab-line): Make all tab widths the same even if there are
	wide characters; never use graphic icons in TTY; close the left
	margin unless there's an icon; add a keymap to favicon; don't put
	mouse-face on icons.
	(w3m-initialize-graphic-icons): Don't make graphic icons for TTY;
	don't put mouse-face on icons.

	* w3m-favicon.el: Bind `w3m-modeline-favicon' when compiling.
	(w3m-favicon-set-image): Add a half space after favicon.

	* w3m-util.el (w3m-current-title): New function.
	(w3m-buffer-title): Use it.

	* w3m.el: Silence the byte-compiler for `w3m-info-like-map',
	`w3m-lynx-like-map', `w3m-minor-mode-map', `w3m-mode-map', and
	`w3m-setup-menu'.

2003-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el: Silence the compile warning for `w3m-message'.

	* w3m.el (w3m-url-to-file-name): Enable it to interpret
	file://localhost/ urls.

2003-10-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-parse-and-fontify): Fix for textarea on w3mmee.

2003-10-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (frame-current-scroll-bars): Alias to `ignore' if it
	is not available.
	(window-fringes): Ditto.
	(w3m-tab-width): Protect against setting illegal values.
	(w3m-tab-unselected-face): Don't specify the underline color.
	(w3m-tab-unselected-retrieving-face): Ditto.
	(w3m-tab-selected-face): Ditto.
	(w3m-tab-selected-retrieving-face): Ditto.
	(w3m-tab-background-face): Ditto.
	(w3m-tab-timer): Rename from `w3m-tab-line-timer'.
	(w3m-tab-half-space): New variable.
	(w3m-tab-separator): New variable.
	(w3m-tab-line): Show many tabs as far as possible.

	* w3m-favicon.el (w3m-favicon-retrieve): Clear the minibuffer
	after retrieving favicon.

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Improve regexp
	more.
	* shimbun/sb-mainichi.el (shimbun-get-headers): Ditto.
	* shimbun/sb-sankei.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Ditto.
	(shimbun-yomiuri-prepare-article): Ditto.

2003-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	We shouldn't use too simple elements like ".+" in the deep nested
	regexps.  It may cause high cpu or may make Emacs hang.

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Improve regexp.
	* shimbun/sb-mainichi.el (shimbun-get-headers): Ditto.
	* shimbun/sb-sankei.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Ditto.
	(shimbun-yomiuri-prepare-article): Ditto.

2003-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-use-favicon): Modify the doc-string.
	(w3m-show-graphic-icons-in-mode-line): New variable.
	(w3m-show-graphic-icons-in-header-line): New variable.
	(w3m-buffer-setup): Modify the value for
	`mode-line-buffer-identification' not to show favicon if
	`w3m-show-graphic-icons-in-mode-line' is nil.

	* w3m-e21.el: Bind `w3m-show-graphic-icons-in-header-line' and
	`w3m-show-graphic-icons-in-mode-line' when compiling.
	(w3m-tab-line): Don't show spinners nor favicons if
	`w3m-show-graphic-icons-in-header-line' is nil; call
	`w3m-make-spinner-image' only once.
	(w3m-initialize-graphic-icons): Don't make graphic icons if
	`w3m-show-graphic-icons-in-mode-line' is nil.

	* w3m-xmas.el: Bind `w3m-show-graphic-icons-in-mode-line' when
	compiling.
	(w3m-initialize-graphic-icons): Don't make graphic icons if
	`w3m-show-graphic-icons-in-mode-line' is nil.

2003-10-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-replace): Call `set-buffer-modified-p'.
	(w3m-form-field-parse): Do nothing when fid is nil.
	(w3m-form-input-radio): Likewise.
	(w3m-form-get-by-name): New function.
	(w3m-form-input-map): Use it.

2003-10-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-line): Fix the logic determining whether to
	display favicon.

2003-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-spinner-map-on-header-line): Abolish.
	(w3m-modeline-spinner-map): Rename from
	`w3m-spinner-map-on-mode-line'.
	(w3m-setup-header-line): Don't initialize
	`w3m-spinner-map-on-header-line'.
	(w3m-tab-spinner-map): New variable.
	(w3m-tab-make-keymap): Initialize it.
	(w3m-tab-line): Use it.

2003-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-modeline-separator): New variable.
	(w3m-modeline-favicon): New variable.
	(w3m-favicon-image): Move from w3m-favicon.el.
	(w3m-buffer-setup): Also call `w3m-initialize-graphic-icons' when
	Emacs 21 is running; simplify the value for
	`mode-line-buffer-identification'.

	* w3m-e21.el: Bind `w3m-favicon-image' and
	`w3m-modeline-process-status-on' when compiling.
	(w3m-spinner-map-on-header-line): New variable.
	(w3m-spinner-map-on-mode-line): New variable.
	(w3m-spinner-map-help-echo): New variable.
	(w3m-setup-header-line): Initialize the value for
	`w3m-spinner-map-on-header-line'; remove an excessive `list' from
	the value for `header-line-format'.
	(w3m-tab-map): New variable.
	(w3m-tab-make-keymap): Set the value for `w3m-tab-map' in the
	current buffer.
	(w3m-tab-line): Add a keymap to the spinner; don't call
	`w3m-tab-make-keymap', use `w3m-tab-map' instead.
	(TopLevel): Add-hook `w3m-tab-make-keymap' to
	`w3m-mode-setup-functions'.
	(w3m-space-before-modeline-icon): New variable.
	(w3m-modeline-process-status-on-icon,
	w3m-modeline-image-status-on-icon, w3m-modeline-status-off-icon,
	w3m-modeline-ssl-image-status-on-icon,
	w3m-modeline-ssl-status-off-icon): New variables.
	(w3m-initialize-graphic-icons): New function.
	(w3m-make-spinner-image): Don't initialize the value for
	`w3m-spinner-image-file' here; set the value for
	`w3m-modeline-process-status-on-icon'.

	* w3m-favicon.el: Bind `w3m-favicon-image' when compiling.
	(w3m-favicon-image): Move to w3m.el.
	(w3m-space-before-favicon): Move from w3m-xmas.el.
	(TopLevel): Make `w3m-modeline-favicon' and `w3m-favicon-image'
	buffer-local; modify the value or put the `risky-local-variable'
	property for `w3m-modeline-favicon'.
	(w3m-favicon-set-image): New macro.
	(w3m-favicon-setup): Use it.
	(w3m-favicon-retrieve): Use it.

	* w3m-xmas.el (w3m-xmas-space-before-favicon): Move to
	w3m-favicon.el and rename to `w3m-space-before-favicon'.
	(w3m-space-before-modeline-icon): Rename from
	`w3m-xmas-space-before-modeline-icon'.

2003-10-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-filter): Relax the regular expression
	to detect progress status.

2003-10-02  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-expand-arguments): Redefine as a function rather
	than a macro.
	(w3m-dump-head-source-command-arguments): Simplify.
	(w3m-halfdump-command-arguments): Ditto.

2003-10-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-proc.el (w3m-process-filter): Check return value of
	`w3m-process-handler-parent-buffer' to move current buffer safely.

2003-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-modeline-image-status-on,
	w3m-modeline-process-status-on, w3m-modeline-ssl-image-status-on,
	w3m-modeline-ssl-status-off, w3m-modeline-status-off): Use `defvar'
	instead of `defconst'.
	(w3m-buffer-setup): Call `w3m-initialize-graphic-icons' instead of
	`w3m-make-spinner-image'; simplify the value for
	`mode-line-buffer-identification'.

	* w3m-xmas.el (w3m-xmas-space-before-modeline-icon): Rename from
	`w3m-xmas-space-before-spinner'.
	(w3m-modeline-process-status-on-icon,
	w3m-modeline-image-status-on-icon, w3m-modeline-status-off-icon,
	w3m-modeline-ssl-image-status-on-icon,
	w3m-modeline-ssl-status-off-icon): New variables.
	(w3m-spinner-image): Abolish.
	(w3m-make-spinner-image): Abolish.
	(w3m-initialize-graphic-icons): New function.

	* icons/state-00.xpm:
	* icons/state-01.xpm:
	* icons/state-10.xpm:
	* icons/state-11.xpm: New files.

2003-10-02  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-halfdump-command-arguments): Add "ucs_conv" option
	when using w3m-m17n; check w3m-output-coding-system at run time.

2003-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-proc.el (w3m-process-start-after): Make sure the value for
	`w3m-current-buffer' is non-nil.

2003-10-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-process-modeline-format): New option.
	(w3m-buffer-setup): Set `mode-line-process'.

	* w3m-proc.el: Bind `w3m-process-modeline-format' to suppress
	byte-compile warning.
	(w3m-process-modeline-string): New buffer-local variable.
	(w3m-process-start-after): Reset the above variable.
	(w3m-process-filter): Check size of retrieved data and set the
	above variable.
	(w3m-process-modeline-format): New function.

2003-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-sankei.el (shimbun-sankei-content-start): Improve the
	value.
	(shimbun-make-contents): New function to remove ads.

2003-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-make-spinner-image): Make sure the gifsicle
	program is available.

2003-09-30  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-use-symbol): Use `w3m-mule-unicode-p'.

	* w3m-symbol.el (w3m-mule-unicode-symbol): Ditto.

2003-09-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-proc.el (w3m-process-stop): Redisplay the header-line.

	* w3m-e21.el (w3m-tab-line-format, w3m-tab-line-timer,
	w3m-tab-line): Revive the timer operation.
	(w3m-tab-line): Wobble the window size to force redisplay of the
	header-line using a timer; include spinner images in the return
	value when external processes are running.
	(w3m-spinner-image-file): New variable.
	(w3m-spinner-image-frames): New variable.
	(w3m-spinner-image-index): New variable.
	(w3m-make-spinner-image): New function.

	* w3m-favicon.el (w3m-favicon-retrieve): Always redraw Emacs frame
	using the timer; wobble the window size instead of redrawing;
	increase the delay time for the timer.

2003-09-30  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-form.el (w3m-form-parse-and-fontify): Fix problem when form_int
	appears after input_alt and action is specified.

2003-09-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-symbol.el (w3m-mule-unicode-symbol): Fix customization type.

2003-09-29  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-symbol.el: Bind `w3m-output-coding-system' when compiling.
	(w3m-mule-unicode-symbol): New variable.
	(w3m-symbol): Add it for candidate.
	(w3m-symbol): Use it.

	* w3m.el (w3m-use-symbol): Check capability for
	`w3m-mule-unicode-symbol'.

2003-09-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-line-format, w3m-tab-line-timer,
	w3m-tab-line): Remove the timer operation temporally.

2003-09-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-xmas.el (w3m-make-spinner-image): Bind `format-alist' to
	nil.

2003-09-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-tab-line-timer): New variable.
	(w3m-tab-line): Use it to control this function running too
	frequently; simplify the source code.

	* w3m-favicon.el (w3m-favicon-image-of): Abolish.
	(w3m-favicon-retrieve): Use a timer to redraw Emacs frame.

	* w3m-xmas.el (w3m-xmas-space-before-favicon): New user option.
	(w3m-xmas-space-before-spinner): New user option.
	(w3m-make-spinner-image): Make sure the `gif' feature is available.

	* w3m.el (w3m-buffer-setup): Use `w3m-xmas-space-before-spinner'
	and `w3m-xmas-space-before-favicon'.

2003-09-26  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mailarc.el (shimbun-get-headers): Allow double quoted
	string for href attribute.

	* shimbun/sb-quickml.el (shimbun-quickml-groups):
	Added "software-patent".

2003-09-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* icons/spinner.gif: New file (without LZW compression).
	* icons30/spinner.gif: Ditto.

	* Makefile.in (install-icons, install-icons30): Also install gifs.

	* w3m-xmas.el (w3m-make-spinner-image): Use the spinner.gif file.

	* w3m-e21.el (w3m-tab-line-format): New variable (see doc-string).
	(w3m-tab-line): Use it; use a timer to suppress this function
	running too frequently.

2003-09-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-spinner-image): New variable.
	(w3m-make-spinner-image): New function.

	* w3m.el (w3m-buffer-setup): Call `w3m-make-spinner-image', show a
	spinner in the modeline under XEmacs.

2003-09-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-put-property): Don't call intern if it is
	not a string.
	(w3m-form-get-property): Ditto.
	(w3m-form-put): Added argument ID.
	(w3m-form-get): Changed argument from NAME to ID.
	(w3m-form-make-form-data): Changed process to get NAME and VALUE.
	(w3m-form-resume): Follow the API change in w3m-form-put and
	w3m-form-get.
	(w3m-fontify-textareas): Ditto.
	(w3m-form-parse-and-fontify): Ditto.
	(w3m-form-input): Ditto.
	(w3m-form-input-password): Ditto.
	(w3m-form-input-checkbox): Ditto.
	(w3m-form-input-radio): Ditto.
	(w3m-form-input-file): Ditto.
	(w3m-form-input-textarea-set): Ditto.
	(w3m-form-textarea-info): Ditto.
	(w3m-form-input-select): Ditto.
	(w3m-form-submit): Ditto.
	(w3m-form-real-reset): Follow the structure change.
	(w3m-form-input-select-id): New buffer local variable.
	(w3m-form-input-select-set): Use it.
	(w3m-form-field-parse): New inline function.
	(w3m-form-parse-and-fontify): Put id for selectinfo.
	(w3m-form-resume): Fixed regexp.
	(w3m-form-input-textarea): Fixed line number.
	(w3m-fontify-textareas): Put w3m-form-id property.
	(w3m-form-parse-and-fontify): Store id to the textareainfo.

2003-09-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el (w3m-favicon-retrieve): Redisplay Emacs frame;
	rename from `w3m-retrieve-favicon'.
	(w3m-favicon-image): Rename from `w3m-current-favicon-image'.
	(w3m-favicon-setup): Rename from `w3m-setup-favicon'.
	(w3m-favicon-image-of): Rename from `w3m-buffer-favicon'.
	(w3m-favicon-convert): Rename from `w3m-convert-favicon'.
	(w3m-favicon-retrieve): Rename from `w3m-retrieve-favicon'.

	* w3m-e21.el (w3m-tab-line): Rename `w3m-buffer-favicon' with
	`w3m-favicon-image-of'.

	* w3m.el (w3m-clean-hook-options): Rename `w3m-setup-favicon' with
	`w3m-favicon-setup'.
	(w3m-buffer-setup): Rename `w3m-current-favicon-image' with
	`w3m-favicon-image'.

2003-09-23  OHASHI Akira  <bg66@koka-in.org>

	* w3m.el (w3m-process-connection-type): Set nil when system-type
	is darwin.

2003-09-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el: Bind `w3m-icon-data' when compiling.
	(w3m-current-favicon-data): Abolish.
	(w3m-favicon-converted): Abolish.
	(w3m-favicon-cache-data): Contain image data.
	(w3m-favicon-cache-favicon): Return an image instead of raw data.
	(w3m-setup-favicon): Fix the condition to check whether Emacs
	can display images; set the value of `w3m-current-favicon-image'
	instead of `w3m-current-favicon-data' for the about: pages.
	(w3m-buffer-favicon): Make it simply get the value of
	`w3m-current-favicon-image'.
	(w3m-convert-favicon): Accept raw data and type; simply return an
	image.
	(w3m-retrieve-favicon): Rearrange the arguments to accept url and
	type independently; set the value of `w3m-current-favicon-image'
	instead of `w3m-current-favicon-data'; store an image into
	`w3m-favicon-cache-data'.
	(w3m-favicon-save-cache-file): Save data only if they contained
	images; strip images from the cache for saving.
	(w3m-favicon-load-cache-file): Create images for all the cache.

	* w3m.el (w3m-buffer-setup): Use `w3m-current-favicon-image'
	instead of `w3m-favicon-converted' for
	`mode-line-buffer-identification' under XEmacs in order to check
	whether the favicon image is available.
	(w3m-examine-command-line-args): Use `member' instead of `memq'
	under XEmacs to check whether `command-line-args' contains the
	same string as the car of `command-line-args-left'.

2003-09-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el: Autoload w3m for `w3m-expand-url' when compiling.
	(w3m-setup-favicon): Fix the change of 2003-09-12 which was gone
	to far.

	* w3m.el (w3m-open-all-links-in-new-session): Improve the regexp.
	(w3m-examine-command-line-args): Don't let it misunderstand the
	next command as a url string; modify the arguments in
	`command-line-args' instead of removing them.
	(w3m): Use `w3m-examine-command-line-args' even if it is called
	non-interactively.

2003-09-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-open-all-links-in-new-session): Don't use
	`w3m-select-buffer'.

2003-09-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-popup-frame-p): Make it accept the `interactive-p'
	argument.
	(w3m-examine-command-line-args): New function.
	(w3m): Use it.

2003-09-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el: Bind some external variables when compiling.

2003-09-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-make-form-data): Insert "--" before the
	multipart post boundary.

2003-09-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-underline-face): New face.
	(w3m-strike-through-face): New user variable.
	(w3m-fontify-strike-through): New function.
	(w3m-fontify): Call `w3m-fontify-strike-through'

2003-09-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-favicon.el (w3m-setup-favicon): Convert favicon data to an
	image for the about: pages using `w3m-convert-favicon'.
	(w3m-buffer-favicon): Move the data conversion procedure to
	`w3m-convert-favicon'.
	(w3m-convert-favicon): New function detached from
	`w3m-buffer-favicon'; make it work synchronously.
	(w3m-retrieve-favicon): Convert favicon data to an image.

	* w3m-image.el (w3m-imagick-convert-buffer): Erase buffer before
	calling the convert program.

	* w3m.el (w3m-buffer-setup): Modify the value for
	`mode-line-buffer-identification' in order to make it possible to
	show favicon under XEmacs.

2003-09-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-open-all-links-in-new-session): New function.
	Suggested by Yoichi NAKAYAMA <yoichi@geiin.org>.
	(w3m-view-this-url-new-session): Call
	`w3m-open-all-links-in-new-session' if the region is active.

2003-09-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-key-binding): Don't use `custom-set-default'.
	(w3m-use-favicon): Ditto.
	* w3m-favicon.el (w3m-favicon-size): Ditto.

	* icons/*.xpm: Remove text.

2003-09-17  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-new): Use
	`application/x-www-form-urlencoded' instead of `urlencoded'.
	(w3m-form-parse-and-fontify): Ditto.
	(w3m-form-make-form-data): Use `multipart/form-data' instead of
	`multipart'.
	(w3m-form-mee-new): Likewise.

2003-09-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-e21-toolbar-configurations): Don't modify the
	values for `tool-bar-button-margin' and `tool-bar-button-relief'.

	* w3mhack.el (w3mhack-nonunix-install): Use icons30 for XEmacs.
	(w3mhack-make-package): Use icons30.

	* Makefile.in (SUBDIRS): Add icons30.
	(install-icons30): New rule.
	(install-package, install-package-ja): Use it.

	* icons/*.xpm: Shrink the size of all icons.
	* icons30/: Old icons are here.

2003-09-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-activate-zmacs-regions): New macro.
	* w3m.el (w3m-next-anchor, w3m-previous-anchor, w3m-next-form,
	w3m-previous-form, w3m-next-image, w3m-previous-image,
	w3m-scroll-up-or-next-url, w3m-scroll-down-or-previous-url,
	w3m-beginning-of-line, w3m-end-of-line): Use it.

2003-09-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-backward): Return nil if there is no
	previous element.

	* w3m.el (w3m-view-previous-page): Skip the current page if it
	seems broken; warn if there's no more history.
	(w3m-copy-buffer): Use the current history for the url string if
	the current page seems broken.
	(w3m-goto-url): Use `lexical-let' to pass the history position
	data to the asynchronous w3m process.

2003-09-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el: Move the favicon stuff to w3m-favicon.el.

	* w3m-favicon.el: New file detached from w3m-e21.el.
	(w3m-favicon-type): Adapt it to XEmacs as well.
	(w3m-setup-favicon): Ditto.
	(w3m-buffer-favicon): Ditto.
	(w3m-retrieve-favicon): Replace `float-time' with `w3m-float-time'.
	(w3m-arrived-setup-functions): Don't add-hook it here.
	(w3m-arrived-shutdown-functions): Ditto.

	* w3m-xmas.el: Require `w3m-favicon'.

	* w3m.el (w3m-arrived-setup-functions): Add
	`w3m-favicon-load-cache-file' if w3m-favicon is loaded.
	(w3m-arrived-shutdown-functions): Add `w3m-favicon-save-cache-file'
	if w3m-favicon is loaded.

	* w3m-util.el (w3m-float-time): New function.

	* w3mhack.el (w3mhack-examine-modules): Exclude w3m-favicon.el
	from the files to be byte-compiled.

	* shimbun/sb-sankei.el (shimbun-sankei-content-start): Improve the
	value to be able to fetch inline images.

2003-09-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-sankei.el (shimbun-sankei-x-face-alist): New variable.
	(shimbun-get-headers): Fix url for news pages; modify ID string.

2003-09-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-sankei.el: New file.

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Simplify the
	default regexp and the regexp for the sports group.
	(shimbun-asahi-get-headers): Simplify the regexp for the
	kansai-special group; indicate the jinmin-nippou in subject lines
	in the international group.

2003-09-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-time-parse-string): New function.
	(shimbun-sort-headers): New function.

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Simplify
	Japanese group names.
	(shimbun-yomiuri-get-headers): Sort headers.

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-search-comment-head): Replace
	`w3m-time-parse-string' with `shimbun-time-parse-string'.

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Sort headers.

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Improve regexps
	in order to fetch more articles; contain full folder names.
	(shimbun-index-url): Simplify.
	(shimbun-asahi-get-headers): Synch to shimbun-asahi-group-table's
	change; sort headers.

2003-09-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Rearrange
	regexps.
	(shimbun-yomiuri-get-headers): Synch to the change.

2003-09-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Add the
	kyoiku group; remove too much redundant expressions.
	(shimbun-yomiuri-shorten-brackets-in-string): Save-match-data.
	(shimbun-yomiuri-get-headers): Attempt to fetch the top news
	articles; modify url strings for the kyoiku group.
	(shimbun-yomiuri-prepare-article): Rename from
	`shimbun-yomiuri-adjust-date-header'; remove useless contents for
	the kyoiku group.

	* shimbun/sb-yomiuri-html.el (shimbun-make-contents): Rename
	`shimbun-yomiuri-adjust-date-header' to
	`shimbun-yomiuri-prepare-article'.

2003-09-05  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-group-table): Add the
	culture and the science groups.

2003-09-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-header-insert): Make it work in a
	multibyte temp buffer.
	(shimbun-mime-encode-string): Ditto.

	* shimbun/sb-nikkei.el: Don't require cl, shimbun.el does it.

2003-09-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-group-table): Add
	newpro-pc, newpro-soft, newpro-auto, newpro-av, newpro-life,
	newpro-leisure, newpro-price groups.
	(shimbun-nikkei-get-headers): Attempt to fetch the top news for
	newpro groups.
	(shimbun-nikkei-prepare-article): Put a warning message in the top
	news articles for newpro groups that contents may be renewed.

2003-09-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el: Require cl when compiling.
	(shimbun-nikkei-top-level-domain): New variable.
	(shimbun-nikkei-url): Don't include subdirectories.
	(shimbun-nikkei-group-table): Renew; add the "newpro" group.
	(shimbun-nikkei-content-start): Improve the value.
	(shimbun-nikkei-content-end): Ditto.
	(shimbun-current-group-name): Synch to shimbun-nikkei-group-table.
	(shimbun-index-url): Ditto.
	(shimbun-nikkei-get-headers): Renew; attempt to fetch the top
	news; make correct date headers if possible; modify subjects
	suitably.
	(shimbun-nikkei-prepare-article): New function.
	(shimbun-make-contents): Use it.

2003-09-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url-1): Fix a window configuration only
	when the buffer's major mode has changed from the w3m-mode to
	another.
	(w3m-goto-url): Don't erase a buffer when retrieving a local file.

2003-08-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-copy-buffer): Copy the history before visiting a
	page in order to show the about://history/ page correctly; adjust
	the position in the history after copying.
	(w3m-goto-url): Use buffer-local properties instead of global
	properties for form data.
	(w3m-reload-this-page): Specify the history element to the
	`w3m-goto-url' function in order to submit the form data.

2003-08-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url-1): Don't kill the emacs-w3m buffer
	when a process is in progress.
	(w3m-goto-url-new-session): Ditto.

2003-08-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-previous-page): Specify a history element of
	the previous page to the `w3m-goto-url' function as the 7th arg.
	(w3m-goto-url): Accept a history element as the 7th argument;
	specify nil as the 7th argument when recursively calling itself;
	use a given history element to examine the form data of the url
	to be visited.
	(w3m-goto-url-new-session): Specify nil to the `w3m-goto-url'
	function as the 7th argument.
	(w3m): Ditto.

2003-08-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-minimize-in-new-session): New user
	option.
	(w3m-history-set-current): Redefine as an inline function rather
	than a macro.
	(w3m-history-current-1): Abolish the function.
	(w3m-history-current-2): Abolish the function.
	(w3m-history-element): New function.
	(w3m-history-current): Abolish the funtction.
	(w3m-history-backward): Don't modify the current position pointer
	in the `w3m-history' variable.
	(w3m-history-forward): Simplify using `w3m-history-backward'.
	(w3m-history-copy): Minimize the history when
	`w3m-history-minimize-in-new-session' is non-nil.
	(w3m-history-plist-get): Abolish the `url' argument; complement
	the meaning of the `local' argument.
	(w3m-history-add-properties): Ditto.
	(w3m-history-plist-put): Ditto.
	(w3m-history-remove-properties): Ditto.
	(w3m-history-store-position): Don't specify the optional arguments
	to `w3m-history-add-properties'.
	(w3m-history-restore-position): Abolish the `url' argument; don't
	specify the optional arguments to `w3m-history-plist-get'.
	(w3m-history-minimize): Simplify using `w3m-history-element'.

	* w3m.el (w3m-view-previous-page): Don't specify the optional
	arguments to `w3m-history-plist-get' and
	`w3m-history-restore-position'.
	(w3m-goto-url): Don't specify the optional arguments to
	`w3m-history-plist-put', `w3m-history-plist-get',
	`w3m-history-remove-properties' and `w3m-history-add-properties'.
	(w3m-reload-this-page): Don't specify the optional arguments to
	`w3m-history-plist-get' and `w3m-history-remove-properties'.

2003-08-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-flat): Reduce the deepness of local
	prpoerties in the list structure.
	(w3m-history-assoc): Simplify; redefine as an inline function.
	(w3m-history-with-element): Abolish the macro.
	(w3m-history-current-2): New function.
	(w3m-history-set-plist): New function.
	(w3m-history-modify-properties): Rewrite.
	(w3m-history-seek-properties): Abolish the function.
	(w3m-history-seek-element): New function.
	(w3m-history-share-properties): Abolish the function.
	(w3m-history-tree): Tiny change.
	(w3m-history-push): Rewrite.
	(w3m-history-copy): Tiny change.
	(w3m-history-plist-get): Synch to the change of `w3m-history-flat'.
	(w3m-history-plist-put): Rewrite.
	(w3m-history-add-properties): Rewrite.
	(w3m-history-remove-properties): Rewrite.
	(w3m-history-rename-url): Abolish the function.
	(w3m-history-store-position): Abolish the optional argument.
	(w3m-history-minimize): New command.

2003-08-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-current-1): Redefine as a function
	rather than a macro.
	(w3m-history-previous-position): Ditto.
	(w3m-history-next-position): Ditto.
	(w3m-history-modify-properties): Ditto.
	(w3m-history-save-position): Abolish the macro.
	(w3m-history-forward-1): Ditto.
	(w3m-history-backward-1): Ditto.
	(w3m-history-with-element): Abolish the `set-current' argument.
	(w3m-history-assoc): Ditto.
	(w3m-history-plist-get): Ditto.
	(w3m-history-plist-put): Ditto.
	(w3m-history-add-properties): Ditto.
	(w3m-history-remove-properties): Ditto.
	(w3m-history-rename-url): Ditto.
	(w3m-history-set-current): New macro.
	(w3m-history-forward): Abolish the `set-current' argument; use
	`w3m-history-set-current'.
	(w3m-history-backward): Ditto.
	(w3m-history-tree): Use `w3m-history-set-current' instead of
	`w3m-history-forward-1'.
	(w3m-history-push): Use `w3m-history-set-current'.
	(w3m-history-store-position): Don't specify the `set-current'
	argument to `w3m-history-add-properties'.
	(w3m-history-restore-position): Don't specify the `set-current'
	argument to `w3m-history-plist-get'.

	* w3m.el (w3m-view-previous-page): Don't specify the `set-current'
	argument to `w3m-history-plist-get'.
	(w3m-goto-url): Don't specify the `set-current' argument to
	`w3m-history-plist-put', `w3m-history-plist-get',
	`w3m-history-remove-properties' and `w3m-history-add-properties'.
	(w3m-reload-this-page): Don't specify the `set-current' argument
	to `w3m-history-plist-get' and `w3m-history-remove-properties'.

2003-08-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url-1): Fix a window configuration if a
	new buffer visiting the specified url is not in the `w3m-mode';
	remove a newly created buffer if it is useless.
	(w3m-goto-url): Don't use `save-excursion' when performing
	find-file directly.
	(w3m-goto-url-new-session): Remove a newly created buffer if it is
	useless.

2003-08-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* Makefile.in (what-where): Add space to avoid error on Solaris.

	* w3m-namazu.el (w3m-about-namazu): Fix last change.

2003-08-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-mytown.el: New file.

2003-08-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-previous-position): New macro.
	(w3m-history-next-position): New macro.
	(w3m-history-forward-1): Simplified using new macro(s).
	(w3m-history-backward-1): Ditto.
	(w3m-history-regenerate-pointers): Ditto.
	(w3m-history-assoc): Ditto.
	(w3m-history-current-1): Don't use old-fashioned backquotes.
	(w3m-history-save-position): Ditto.
	(w3m-history-modify-properties): Ditto.
	(w3m-history-with-element): Ditto.

2003-08-10  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-namazu.el (w3m-about-namazu): Fixed problem when further links
	contain "&amp;".

	* shimbun/sb-japantimes.el (shimbun-japantimes-coding-system): Removed.

2003-08-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-get-header): Removed.
	(w3m-w3m-parse-header, w3m-w3m-dump-head): New function.
	(w3m-w3m-attributes): Call the above functions.
	(w3m-w3m-dump-head-source): Removed.
	(w3m-w3m-dump-extra): New function.
	(w3m-w3m-retrieve, w3m-w3m-retrieve-1): Reimplemented.
	(w3m-about-header): Call `w3m-w3m-dump-head' instead of
	`w3m-w3m-get-header'.

	* w3m-proc.el: Changes to support recursive call of functions
	creating asynchronous processes.
	(w3m-process-waited): Abolished.
	(w3m-process-handler-new): Add result slot.
	(w3m-process-handler-functions): Renamed from
	`w3m-process-handler-function'.
	(w3m-process-handler-result): New macro.
	(w3m-process-with-null-handler): Reimplemented.
	(w3m-process-start-and-wait): New function.
	(w3m-process-with-wait-handler): Reimplemented.
	(w3m-process-do): Reimplemented.
	(w3m-process-do-with-temp-buffer): Reimplemented.
	(w3m-process-sentinel): Accept the 3rd argument.  Follow the above
	changes.

2003-08-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-reuse-history-elements): New user
	option.
	(w3m-history-forward): Return a cons of a new history element and
	new position pointers of a history.
	(w3m-history-backward): Ditto.
	(w3m-history-regenerate-pointers): New function.
	(w3m-history-push): If `w3m-history-reuse-history-elements' is nil,
	sprout a new history branch even if history elements for the same
	url already exist.
	(w3m-history-add-arrived-db): Abolish the optional argument; bind
	`w3m-history-reuse-history-elements' to t.

	* w3m.el (w3m-view-previous-page): Assume `w3m-history-backward'
	returns cons data; bind `w3m-history-reuse-history-elements' to t;
	fix position pointers of a history after visiting a page.
	(w3m-goto-url): Fix position pointers of a history when a page is
	referred to by the about://history/ page.
	(w3m-about-history): Include position pointers in an html form.
	(w3m-history-highlight-current-url): Make history position data
	invisible.

2003-08-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Fix last change.

2003-08-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-rss.el (shimbun-replace-in-string): Silence the
	byte-compiler (see the comment in the sb-rss.el file).

2003-08-06  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-impress.el (shimbun-impress-groups-alist): Improve
	the regexp for the internet group.

2003-08-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-group-table): Improve the
	default regexp; add kansai and kansai-special.
	(shimbun-index-url): Add a special treatment for kansai-special.
	(shimbun-asahi-get-headers): Ditto.

2003-07-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-decode-entities): Don't trust in the `match-data'
	after the `w3m-entity-value' function is performed.

2003-07-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-x-face,
	shimbun-server-additional-path, shimbun-x-face-database-function):
	Improve the customizing widgets.
	* shimbun/sb-sourceforge-jp.el
	(shimbun-sourceforge-jp-mailing-lists): Ditto.
	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-threshold): Diito.
	* shimbun/sb-marc-aims.el (shimbun-marc-aims-group-alist): Ditto.
	* shimbun/sb-geocrawler.el (shimbun-geocrawler-group-alist): Ditto.

	* shimbun/nnshimbun.el (nnshimbun-keep-backlog): Improve the
	customizing widget.
	(nnshimbun-group-parameters-custom): Use `integer' instead of
	`number' for the expiry days.

	* shimbun/mew-shimbun.el (mew-shimbun-folder,
	mew-shimbun-folder-groups, mew-shimbun-db-file,
	mew-shimbun-expires, mew-shimbun-db-length,
	mew-shimbun-unknown-from): Improve the customizing widgets.

	* w3m.el (w3m-command, w3m-user-agent, w3m-command-arguments,
	w3m-command-arguments-alist, w3m-no-proxy-domains,
	w3m-command-environment, w3m-fill-column, w3m-mailto-url-function,
	w3m-mailto-url-popup-function-alist, w3m-imitate-widget-button,
	w3m-pixels-per-character, w3m-coding-system,
	w3m-terminal-coding-system, w3m-input-coding-system,
	w3m-output-coding-system, w3m-file-coding-system,
	w3m-file-name-coding-system, w3m-default-coding-system,
	w3m-coding-system-priority-list, w3m-profile-directory,
	w3m-init-file, w3m-default-save-directory, w3m-accept-languages,
	w3m-icon-directory, w3m-home-page, w3m-arrived-file,
	w3m-keep-arrived-urls, w3m-keep-cache-size, w3m-follow-redirection,
	w3m-resize-image-scale, w3m-default-content-type,
	w3m-content-type-alist, w3m-encoding-type-alist, w3m-decoder-alist,
	w3m-charset-coding-system-alist, w3m-correct-charset-alist,
	w3m-horizontal-scroll-columns, w3m-horizontal-shift-columns,
	w3m-edit-function, w3m-url-local-directory-alist,
	w3m-pop-up-frame-parameters, w3m-horizontal-scroll-division,
	w3m-mbconv-command, w3m-local-find-file-regexps,
	w3m-local-find-file-function, w3m-local-directory-view-method,
	w3m-dirlist-cgi-program, w3m-add-referer-regexps,
	w3m-touch-command, w3m-uri-replace-alist,
	w3m-db-history-display-size, w3m-select-buffer-window-ratio):
	Improve the customizing widgets.

	* w3m-symbol.el (w3m-symbol-custom-type): New variable.
	(w3m-default-symbol, w3m-Chinese-BIG5-symbol,
	w3m-Chinese-CNS-symbol, w3m-Chinese-GB-symbol,
	w3m-Japanese-symbol, w3m-Korean-symbol): Use it.
	(w3m-symbol): Improve the customizing widgets.

	* w3m-search.el (w3m-search-engine-alist,
	w3m-search-default-engine): Improve the customizing widgets.
	* w3m-perldoc.el (w3m-perldoc-command,
	w3m-perldoc-pod2html-command, w3m-perldoc-pod2html-arguments):
	Ditto.
	* w3m-filter.el (w3m-filter-rules): Ditto.

2003-07-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-servers-list): Count byte-compiled
	files also.

2003-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-namazu.el (w3m-namazu-command, w3m-namazu-arguments,
	w3m-namazu-page-max, w3m-namazu-default-index-customize-spec,
	w3m-namazu-index-alist, w3m-namazu-output-coding-system,
	w3m-namazu-input-coding-system): Improve the customizing widgets.
	* w3m-image.el (w3m-imagick-convert-program): Ditto.
	* w3m-form.el (w3m-form-input-textarea-buffer-lines,
	w3m-form-input-select-buffer-lines,
	w3m-form-input-map-buffer-lines): Ditto.
	* w3m-filter.el (w3m-filter-rules): Ditto.
	* w3m-e21.el (w3m-favicon-size, w3m-favicon-cache-file,
	w3m-favicon-cache-expire-wait, w3m-favicon-type, w3m-tab-width):
	Diito.
	* w3m-dtree.el (w3m-dtree-directory-depth,
	w3m-dtree-indent-strings, w3m-dtree-stop-strings): Ditto.
	* w3m-cookie.el (w3m-cookie-accept-domains,
	w3m-cookie-reject-domains, w3m-cookie-accept-bad-cookies,
	w3m-cookie-file): Ditto.
	* w3m-bookmark.el (w3m-bookmark-file,
	w3m-bookmark-file-coding-system, w3m-bookmark-default-section):
	Ditto.
	* w3m-bitmap.el (w3m-bitmap-convert-arguments): Ditto.
	* w3m-antenna.el (w3m-antenna-sites,
	w3m-antenna-make-summary-function,
	w3m-antenna-sort-changed-sites-function,
	w3m-antenna-sort-unchanged-sites-function, w3m-antenna-file):
	Ditto.
	* mime-w3m.el (mime-w3m-safe-url-regexp): Ditto.

2003-07-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-server-list): Check duplicate
	servers before adding them.

2003-07-27  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-accept-japanese-characters): Checked loosely.

2003-07-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (clean): Do not remove `shimbun-servers.el'.

	* shimbun/shimbun.el: Do not require `shimbun-servers.el'.
	(shimbun-server-additional-path): New option.
	(shimbun-servers-list, shimbun-servers-alist): New functions.
	(shimbun-open): Use the above option to override `load-path'.

	* w3mhack.el: Do not generate `shimbun-servers.el'.
	(shimbun-servers-file): Abolished.
	(w3mhack-compile, w3mhack-batch-compile): Do not call
	`w3mhack-check-shimbun-servers-file'.
	(w3mhack-generate-shimbun-servers-file): Removed.
	(w3mhack-check-shimbun-servers-file): Removed.

	* w3m.el (w3m-fontify-anchors): Handle `id' attributes of anchors.
	Thanks to Shinichiro HIDA and TAKAISHI Hayato for their reports.
	(w3m-fontify-bold, w3m-fontify-underline): Stricten regular
	expressions to detect tags.  For more detail, see [emacs-w3m:05600].

2003-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mime-w3m.el (mime-w3m-display-inline-images): Improve the
	customizing widget.

2003-07-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/sb-tdiary.el (shimbun-tdiary-get-headers): Change
	regexp of headers.
	(shimbun-get-headers): Remove `\r' from buffer.

2003-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-language, w3m-command-environment,
	w3m-content-type-alist, w3m-encoding-type-alist, w3m-decoder-alist,
	w3m-charset-coding-system-alist, w3m-correct-charset-alist,
	w3m-url-local-directory-alist, w3m-pop-up-frame-parameters):
	Improve the customizing widgets.

2003-07-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/sb-tdiary.el (shimbun-tdiary-content-start): Change value.
	(shimbun-tdiary-footnote-regex): New internal variable.
	(shimbun-make-contents): Keep subtitle in body. Handle footnotes.

2003-07-25  Koichiro Ohba  <koichiro@meadowy.org>

	* shimbun/sb-rss.el (shimbun-rss-replace-in-string): Removed.
	(shimbun-rss-node-text): Use `shimbun-replace-in-string'.

2003-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-generate-shimbun-servers-file): Exclude rss.

2003-07-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-form.el (w3m-form-set-method): New inline function, that is
	a `setf' method of `w3m-form-method'.

	* w3mhack.el (w3mhack-examine-modules): Because Mew 2.x and later
	do not support Mule2.3 and Emacs19, ignore mew-shimbun.el when
	compiling on such Emacsen.

2003-07-24  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-output-coding-system): Changed condition to use
	utf-8 with w3m-m17n.
	(w3m-halfdump-command-arguments): Ditto.

2003-07-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-parse-and-fontify): Fix for the pages in
	which form_int appears after input_alt.

2003-07-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/nnshimbun.el (nnshimbun-possibly-change-group): Create
	parent directories if they do not exist, for hierarchical groups
	that include periods in their group names.

2003-07-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Force texinfmt.elc to load
	texinfo.elc from the correct place.  <cf. [emacs-w3m:05573]>

2003-07-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-get-headers): Convert CRLF to LF.
	(shimbun-make-contents): Convert CRLF to LF instead of removing CR.

2003-07-19  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-e21.el (w3m-euc-japan-encoder): Fixed comment.

	* shimbun/sb-h14m.el: Removed.

2003-07-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.6 from emacs-w3m-1_3 branch.

2003-07-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-fml.el (shimbun-get-headers): Call
	`shimbun-create-header' instead of `shimbun-make-header'
	(shimbun-make-contents): Do not encode header attributes, to
	follow the change of shimbun header structure.

	* shimbun/shimbun.el (shimbun-header): New class.
	(shimbun-header-subject, shimbun-header-set-subject,
	shimbun-header-from, shimbun-header-set-from, shimbun-header-date,
	shimbun-header-set-date, shimbun-header-id, shimbun-header-set-id,
	shimbun-header-references, shimbun-header-set-references,
	shimbun-header-chars, shimbun-header-set-chars,
	shimbun-header-lines, shimbun-header-set-lines,
	shimbun-header-xref, shimbun-header-set-xref,
	shimbun-header-extra, shimbun-header-set-extra): Lunafied.
	(shimbun-header-normalize): New internal function.
	(shimbun-create-header): New function.
	(shimbun-make-header): Rewritten to use the above function.
	(shimbun-header-insert, shimbun-from-address): Follow the above
	changes.

	* w3m-e21.el (w3m-ccl-get-ucs-codepoint-with-emacs-unicode):
	Remove `translate-character'.
	(w3m-euc-japan-encoder, w3m-iso-latin-1-encoder): Select
	appropriate encoders when thie file is loaded.

	* w3m-ccl.el (w3m-ccl-write-repeat): Use a literal list of unibyte
	character sets, instead of calling `charset-bytes', in order to
	avoid difference between FSF Emacs and XEmacs.
	(w3m-euc-japan-encoder, w3m-iso-latin-1-encoder): Do not
	overwrite, if they have already been defined.

2003-07-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-examine-modules): Ignore w3m-ccl.el when
	XEmacs doesn't provide the mule feature.

2003-07-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-correct-charset-alist): New user option.
	(w3m-correct-charset): New inline macro.
	(w3m-detect-meta-charset): New function.
	(w3m-decode-buffer): Use `w3m-correct-charset' and
	`w3m-detect-meta-charset'.
	(w3m-create-page): Set `charset' to `w3m-current-content-charset'
	if it is nil.
	(w3m-region): If `charset' is nil, check `content-charset' in
	`META Tag'.

2003-07-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-ccl.el (toplevel): Add autoload for `charset-id' defined at
	w3m-om.el.
	(w3m-ccl-write-repeat): Simplified.
	(w3m-ccl-write-euc-japan-character): Set nil, when
	`read-multibyte-character' is not available.
	(w3m-ccl-write-iso-latin-1-character): Ditto.

	* w3m-om.el: Remove redundant `function'.
	(w3m-om-character-set-alist): New variable.
	(charset-id): New function.

	* w3m.el (w3m-input-coding-system): Change its default value for
	Mule2.3 and Emacsen without Mule.

2003-07-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-examine-modules): Ignore w3m-ccl.el when
	ccl.el is missing.

	* w3m-e21.el (w3m-ccl-get-ucs-codepoint-with-emacs-unicode):
	Import from w3m-ccl.el.

	* w3m-ucs.el (w3m-ccl-get-ucs-codepoint-with-mule-ucs): Import
	from w3m-ccl.el.

	* w3m-ccl.el: Export the above constants.

	* w3m.el (w3m-retrieve-and-render): Check current content charset
	before `w3m-create-page' is called.

2003-07-17  ARISAWA Akihiro <ari@mbf.sphere.ne.jp>
	    TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (toplevel): Do not require `ccl'.
	(w3m-input-coding-system): Change its default value.
	(w3m-internal-characters-alist): Moved to w3m-ccl.el
	(w3m-ccl-write-repeat): Ditto.
	(w3m-euc-japan-decoder): Ditto.
	(w3m-euc-japan-encoder): Ditto.
	(w3m-iso-latin-1-decoder): Ditto.
	(w3m-iso-latin-1-encoder): Ditto.

	* w3m-ccl.el: New file.

	* w3m-ucs.el: Completely rewritten.
	(w3m-euc-japan-mule-ucs, w3m-iso-latin-1-mule-ucs): New coding
	systems.

	* w3m-e21.el (toplevel): Require `w3m-ccl'.
	(w3m-euc-japan-encoder, w3m-iso-latin-1-encoder): New encoder.

	* w3m-om.el, w3m-e20.el, w3m-xmas.el (toplevel): Require `w3m-ccl'.

2003-07-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-content-start):
	Simplify.
	(shimbun-mainichi-content-end): Ditto.
	(shimbun-make-contents): Remove ^M's, table forms and adv's.

2003-07-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-db-history): Call `w3m-arrived-time' with string.

2003-07-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-uri-replace-alist): Improve the customizing widget.

2003-07-16  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/shimbun.el (shimbun-lsdb-get-x-face): Handle multi
	X-Faces.  Return nil when a full name is not extracted.

2003-07-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-use-bbdb-for-x-face): Abolished.
	(shimbun-use-lsdb-for-x-face): Abolished.
	(shimbun-x-face-database-function): New option.
	(shimbun-bbdb-get-x-face): New function.
	(shimbun-lsdb-get-x-face): New function.
	(shimbun-header-insert): Use the above option and functions
	instead of abolished ones.

	* w3m.el (w3m-copy-buffer): Fix the logical error installed by the
	last change at 2003-07-15.

2003-07-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-content-start): Improve
	the value.
	(shimbun-mainichi-content-end): Ditto.

2003-07-15  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/shimbun.el (shimbun-header-insert): Use LSDB records for
	choosing the author's X-Face.
	(shimbun-use-lsdb-for-x-face): New customize option. Users can set
	this to `never' to inhibit the use of LSDB.
	(toplevel): Attempt to load `lsdb' when compiling.

2003-07-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-image-only-page): Abolished.
	(w3m-show-error-information): Return nil.
	(w3m-create-text-page): Return 'text-page.
	(w3m-create-image-page): Return 'image-page.
	(w3m-create-page): Return 'external-view when `w3m-external-view'
	is called.
	(w3m-goto-url): Do not encode a given URL when it points a local
	page.  Bind `w3m-current-buffer' locally.  Follow the change of
	`w3m-create-page'.
	(w3m-copy-buffer): Wrap `w3m-goto-url' with
	`w3m-process-with-wait-handler', to avoid unexpected asynchronous
	processes.
	(w3m-region): Bind `w3m-current-buffer' locally.

	* w3m-util.el (w3m-url-local-p): Stricten its regexp.
	(w3m-url-dtree-p): Removed.

2003-07-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-tdiary.el (shimbun-replace-in-string): New function.
	(shimbun-tdiary-get-headers): Use it.

2003-07-14  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-tdiary.el: New backend.

	* shimbun/sb-chalow.el (shimbun-chalow-get-headers): Fix regexp.

2003-07-12  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-alist): Fix the folder
	name for `enterprise'.

	* shimbun/sb-mainichi.el (shimbun-mainichi-content-start): Exclude
	an advertisement.

2003-07-12  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-chalow.el: New backend.

2003-07-10  Koichiro Ohba  <koichiro@meadowy.org>

	* shimbun/sb-tdiary-ml.el: Rename from sb-tdiary.el.

2003-07-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-uri-replace-alist): Revert 2003-07-09 change;
	improve the customizing widget.

	* doc/ptexinfmt.el (texinfo-discard-command-and-arg): New function
	for old Emacsen.

2003-07-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-linux-ja.el: New backend.

2003-07-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-decoder-alist): Simplified.

2003-07-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-decoder-alist): Look for the newest inflate command.

2003-07-09  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (w3m-mew-support-cid): Check `mew-version-number'.
	(mew-w3m-cid-retrieve): Support Mew 4.0.53 and later.
	Thanks to Kazu YAMAMOTO for his patch.

2003-07-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-uri-replace-alist): Add `rpm', `waei', `eiwa',
	`kokugo' and `eiei'.
	(w3m-input-url): Do not encode its return value.
	(w3m-goto-url): Call `w3m-url-transfer-encode-string' to encode a
	given URL.

2003-07-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.5 from emacs-w3m-1_3 branch.

2003-07-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url-1): Simply copy buffer's contents to
	the new session rather than to call `w3m-goto-url'.

2003-07-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-local-file-type): Check whether a regular expression
	is specified, before matching it on a URL.

	* Following changes are to check whether required libraries are
	available.

	* w3mhack.el (toplevel): Do not create
	`shimbun/shimbun-servers.el' and `w3m-kwds.el' only when this file
	is loaded, to suppress excessive messages.
	(w3mhack-check-shimbun-servers-file): New function.
	(w3mhack-check-colon-keywords-file): New function.
	(w3mhack-compile): Call these functions explicitly.
	(w3mhack-batch-compile, w3mhack-locate-library,
	w3mhack-print-status): New functions.

	* configure.in: Check that egrep is available and that
	regexp-opt.el and xml.el are available.

	* aclocal.m4 (AC_EMACS_LISP): Add `-q' option and `-no-site-file'
	option.
	(AC_ADD_LOAD_PATH): Define `--with-attic' option.
	(AC_CHECK_ELISP): New function.

	* Makefile.in (.el.elc): Call `w3mhack-batch-compile' instead of
	`batch-byte-compile'.
	(very-slow): Always call `keywords' target.
	(keywords): Call `w3mhack-check-colon-keywords-file'.

2003-07-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-cnet.el: Major change for the new CNET Japan site.
	(shimbun-cnet-url, shimbun-cnet-groups, shimbun-cnet-from-address,
	shimbun-cnet-content-start, shimbun-cnet-content-end): Do.
	(shimbun-cnet-server-name): New.
	(shimbun-index-url): Use the top page.
	(shimbun-get-headers): Rewrite.
	(shimbun-make-contents): Remove advertisements embedded with table
	forms.

2003-07-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-about-antenna): Fix the expression to decide
	changed sites.

	* w3m.el (w3m-retrieve-and-render): Do not overwrite an arrived
	time with a modified time, even if the modified time is newer than
	the arrived time.  Store a real URL to arrived DB.
	(w3m-about-db-history): Small clean up.

	* attic/xml.el: Import contrib/xml.el of Oort Gnus.  Require cl
	and poe.

2003-07-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-bookmark.el (w3m-bookmark-add): Encode special characters
	included in a URL and a title.

	* w3m-antenna.el (w3m-antenna-check-all-sites): Use
	`w3m-antenna-alist' instead of `w3m-antenna-sites'; this change
	must have no ill effects because `w3m-use-setup' merges site
	informations kept by `w3m-antenna-sites' into `w3m-antenna-alist'.
	(w3m-about-antenna): Fix.
	(w3m-antenna-add-current-url): Encode special characters included
	in `w3m-current-title'.

	* w3m.el: Changes of functions handling the arrived database, and
	clean up w3m-retrieve-and-render() and related parts.
	(w3m-content-type-alist): Change spec.
	(w3m-attributes): Strip authentication part from URL before
	checking charsets given by a user.
	(w3m-arrived-add-1): Removed.
	(w3m-arrived-add): Reimplemented.
	(w3m-arrived-modify): Removed.
	(w3m-arrived-time): Define its `setf' method.
	(w3m-arrived-get, w3m-arrived-put): New inline functions.
	(w3m-arrived-title): Define as a macro using `w3m-arrived-get'.
	(w3m-arrived-last-modified): Ditto
	(w3m-arrived-content-charset): Ditto
	(w3m-arrived-content-type): Ditto.
	(w3m-arrived-shutdown): Modify a predicate used for comparing
	arrived elements, to ensure that every URL precedes its variants
	with fragments.
	(w3m-encode-specials-string): New function.
	(w3m-safe-decode-buffer): New function.
	(w3m-rendering-extract-title): Simplified.
	(w3m-rendering-half-dump): Define as a normal function.
	(w3m-rendering-buffer): Do not call `w3m-filter'.
	(w3m-retrieve-and-render): Reimplemented.
	(w3m-show-error-information): Change its argument spec.
	(w3m-content-prepare-functions): Abolished.
	(w3m-prepare-content): Reimplemented.
	(w3m-prepare-text-content, w3m-prepare-image-content): Removed.
	(w3m-create-text-page, w3m-create-image-page): New functions; the
	successors of the aboves.
	(w3m-create-page): New function.
	(w3m-goto-url): Follow above changes and clean up.
	(w3m-redisplay-and-reset): Call `setf' methods instead of using
	`w3m-arrived-modify'.
	(w3m-redisplay-with-charset): Ditto.
	(w3m-redisplay-with-content-type): Ditto.
	(w3m-about-header): Strip authentication part from URL before
	extracting titles.
	(w3m-about-history): Encode special characters included in a
	title.
	(w3m-about-db-history): Encode special characters in the title.
	Ignore URLs that include fragments.

2003-07-02  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-atmarkit.el: Rename from sb-atmarkit-rss.el.
	(shimbun-rss-build-message-id): Build message-id without string
	`rss'.
	Bug fixed.

	* shimbun/sb-wiki.el: Rename from sb-pukiwiki-rss.el.
	(shimbun-wiki-group-alist): Add optional 4th and 5th elements to
	each inner list.  Add doc string.
	(shimbun-headers): New method.
	(shimbun-make-contents): Ditto.
	(shimbun-rss-build-message-id): Modify regexp to support Hiki.
	Build message-id without string `rss'.
	(shimbun-index-url): Pick up URL from shimbun-wiki-group-alist and
	simply return it.
	(shimbun-wiki-group-alist): Modify ADDRESS of hiki.
	(shimbun-rss-build-message-id): Modify message-id format.

	* shimbun/sb-rss.el (shimbun-rss-get-encoding): Bug fixed.
	Return interned encoding with suffix `-dos'.
	(shimbun-headers): Simplified.

2003-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-kde.el (shimbun-kde-x-face-alist): New.
	(shimbun-get-headers): Silence the byte-compiler which says
	"called for effect".

2003-07-01  TAKAHASHI Kaoru  <kaoru@kaisei.org>

	* doc/ptexinfmt.el: @verb, @tie, @/ support.
	(ptexinfmt-broken-facility): Abolish NO-NOTICE argument.
	Use `ptexinfmt-disable-broken-notice-flag' instead.

2003-07-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-mime-text/html-w3m): Add CHARSET argument of
	`w3m-region' when no w3m-m17n.

2003-07-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Remove local binding
	of `w3m-use-refresh', because `w3m-decode-buffer' do not activate
	a refresh timer.

	* mime-w3m.el (mime-w3m-preview-text/html): Call `w3m-region' with
	`charset' option.

2003-07-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Use `w3m-url-strip-fragment' instead of
	`w3m-base-url' for local files.

2003-07-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-arrived-load-list): Check that `w3m-arrived-file'
	exists before deleting it.
	(w3m-check-refresh-attribute): Condition relaxed.
	(w3m-region): Disable checking refresh attribute.

2003-06-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Some miscellaneous changes and large changes to make a
	filter module cooperate with w3mmee and w3m-m17n.
	(w3m-language): Stricten its customize spec.
	(w3m-attributes): Call `w3m-url-strip-fragment' instead of using a
	literal regular expression.
	(w3m-arrived-load-list): New function.
	(w3m-arrived-setup, w3m-arrived-shutdown): Use the above.
	(w3m-url-decode-string): Call `vector' instead of `string' to
	avoid making unexpected multibyte characters.
	(w3m-decode-buffer): Do not call `w3m-decode-get-refresh'.
	(w3m-decode-get-refresh): Removed.
	(w3m-check-refresh-attribute): New function, the successor of the
	above.
	(w3m-rendering-half-dump): Encode a content for w3mmee and
	w3m-m17n with `w3m-current-coding-system' instead of giving it as
	a binary data.  Because `w3m-current-coding-system' keeps a coding
	system used to decode the current buffer, all characters should be
	recovered by this encoding.
	(w3m-rendering-buffer-1): Removed.
	(w3m-rendering-buffer): New function, the successor of the above.
	(w3m-rendering-unibyte-buffer): Removed.
	(w3m-rendering-multibyte-buffer): Removed.
	(w3m-prepare-text-content): Always call `w3m-decode-buffer'. Call
	`w3m-rendering-buffer' instead of `w3m-rendering-unibyte-buffer'.
	(w3m-goto-url): Fix regular expressions.
	(w3m-region): Accept the 4th optional argument, `charset'.  Set
	`w3m-current-coding-system' to the coding system based on the
	given charset.  Call `w3m-rendering-buffer' with the charset.

2003-06-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Include other files first.

2003-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-shimbun-modules-using-rss): Don't use
	`with-temp-buffer'.

2003-06-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-shimbun-modules-using-rss): New function.
	(w3mhack-examine-modules): Call the above instead of a literal
	list.

2003-06-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/Makefile.in (install): Don't run install-info for non-
	existent info files.

	* w3mhack.el (w3mhack-examine-modules): Also examine
	"sb-pukiwiki-rss.el".

2003-06-20  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-rss.el (shimbun-rss-build-message-id): Add new arg
	DATE.
	(shimbun-get-headers): Call `shimbun-rss-build-message-id' with
	new arg DATE.

	* shimbun/sb-bbc-rss.el (shimbun-rss-build-message-id): Add new
	arg DATE.
	* shimbun/sb-slashdot-jp-rss.el (shimbun-rss-build-message-id): Ditto.
	* shimbun/sb-cnet-rss.el (shimbun-rss-build-message-id): Ditto.
	* shimbun/sb-atmarkit-rss.el (shimbun-rss-build-message-id): Ditto.

	* shimbun/sb-pukiwiki-rss.el: New file.

2003-06-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/shimbun.el (shimbun-x-face): Renew.

	* shimbun/sb-mainichi.el (shimbun-get-headers): Enrich subjects.

2003-06-19  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-namazu.el (w3m-namazu-complete-index): Consider `predicate'
	option.

	* w3m-weather.el (w3m-weather-completion-table): Add `oki' as the
	shortend form of `shimanekenoki'.

2003-06-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-fontify-anchors): Do not encode fragment parts.

2003-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-examine-modules): Ignore the shimbun modules
	which need xml.el if it is not available.

2003-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers): Don't use
	`save-match-data'
	* shimbun/sb-gnome.el (shimbun-get-headers): Ditto.
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-get-headers): Ditto.

2003-06-18  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/shimbun.el (shimbun-mime-encode-string): Use
	`save-match-data'.

2003-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Improve the last change.

2003-06-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-anthy.el: Removed.

	* shimbun/sb-canna-dev.el: Removed.

	* shimbun/sb-mozilla-jp.el: Renamed from `shimbun/sb-moz-users.el'.

2003-06-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.4 from emacs-w3m-1_3 branch.

2003-06-18  Koichiro Ohba  <koichiro@meadowy.org>

	* shimbun/sb-rss.el (shimbun-rss-get-encoding): Simplify.

2003-06-18  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-pocketgames.el (shimbun-reply-to): Insert docstring
	to avoid the bug of XEmacs's byte compiler.

	* shimbun/sb-pilot-mailsync.el (shimbun-reply-to): Ditto.

	* shimbun/sb-dennou.el (shimbun-reply-to): Ditto.

	* shimbun/sb-security-memo.el (shimbun-reply-to): Ditto.

	* w3m.el (w3m-arrived-ignored-regexp): Use "\`" instead of "^".
	(w3m-history-ignored-regexp): Ditto.
	(w3m-url-transfer-encode-string): New inline function.
	(w3m-fontify-anchors): Encode URL with the attribute `charset'.
	(w3m-input-url): Encode URL with `w3m-default-coding-system'.
	(w3m-about-header): Display the current anchor information.

	* w3m-form.el (w3m-form-parse-and-fontify): Encode URL with the
	attribute `charset'.

2003-06-18  Koichiro Ohba  <koichiro@meadowy.org>

	* shimbun/sb-bbc-rss.el: New backend.

	* shimbun/sb-rss.el (shimbun-rss-process-date): Added nil check.

2003-06-18  Koichiro Ohba  <koichiro@meadowy.org>

	* shimbun/sb-rss.el (shimbun-rss-get-encoding): New function.
	(shimbun-headers): Use (shimbun-rss-get-encoding).

2003-06-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Encode messages to terminal while
	formatting info pages.

2003-06-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-sourceforge-jp.el: New backend.

	* shimbun/shimbun.el (shimbun-footer): Insert docstring to avoid
	the bug of XEmacs's byte compiler.

	* shimbun/sb-w3m-dev.el (shimbun-reply-to): Insert docstring to
	avoid the bug of XEmacs's byte compiler.

2003-06-17  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-rss.el (shimbun-get-headers): Remove unnecessary
	temporary variables STIME, ST, BODY, AUTHOR, EXTRA, RDF-NS and
	CONTENT-NS.
	(shimbun-rss-get-namespace-prefix): Add doc string.

2003-06-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-asahi.el (shimbun-server-name): Removed.
	(shimbun-from-address): Removed.
	(initialize-instance): Initialize `server-name', `from-address',
	`x-face-alist' and `expiration-days'.

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-x-face-alist):
	(shimbun-asahi-html-expiration-days): Abolished.

	* shimbun/sb-yomiuri.el (shimbun-server-name): Removed.
	(shimbun-from-address): Removed.
	(initialize-instance): Initialize `server-name', `from-address',
	`x-face-alist' and `expiration-days'.

	* shimbun/sb-yomiuri-html.el (shimbun-yomiuri-html-x-face-alist):
	(shimbun-yomiuri-html-expiration-days): Abolished.

2003-06-17  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-rss.el (shimbun-rss-process-date): Handle UTC
	timezone.

2003-06-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei): Make it inherit `shimbun'
	which was missed.

	* shimbun/shimbun.el: Changes to consider `coding-system' slot of
	SHIMBUN class.
	(shimbun-fetch-url): New function.
	(shimbun-make-mime-article, shimbun-headers, shimbun-article):
	Call `shimbun-fetch-url' instead of `shimbun-retrieve-url'.

	* shimbun/sb-w3m-dev.el (shimbun-get-headers, shimbun-article):
	Removed.

	* shimbun/sb-atmarkit-rss.el (shimbun-article): Removed.

	* shimbun/sb-slashdot-jp-rss.el (shimbun-article): Removed.

	* shimbun/shimbun.el: Changes to add a copyright notice to every
	article.
	(shimbun-footer): New method.
	(shimbun-japanese-newspaper): New base class.
	(shimbun-make-html-contents): Insert a footer generated by
	`shimbun-footer'.
	(shimbun-header-insert-and-buffer-string): Ditto.

	* shimbun/sb-yomiuri.el (shimbun-yomiuri): Make it inherit
	`shimbun-japanese-newspaper'.
	(shimbun-server-name, shimbun-current-group-name): New methods.
	(shimbun-from-address): Use the above new methods.

	* shimbun/sb-sponichi.el (toplevel): Make this module independent
	from `sb-text.el'
	(shimbun-sponichi): Likewise; Make it inherit
	`shimbun-japanese-newspaper'.
	(shimbun-sponichi-groups): Removed, and its information is moved
	to `shimbun-sponichi-group-table'.
	(shimbun-sponichi-group-table): New variable.
	(shimbun-sponichi-server-name): Ditto.
	(shimbun-groups, shimbun-current-group-name): New method.
	(shimbun-from-address): Ditto.

	* shimbun/sb-nikkei.el (toplevel): Make this module independent
	from `sb-text.el'
	(shimbun-nikkei): Likewise; Make it inherit
	`shimbun-japanese-newspaper'.
	(shimbun-nikkei-groups): Removed, and its information is moved to
	`shimbun-nikkei-group-table'.
	(shimbun-nikkei-group-table): New variable.
	(shimbun-nikkei-server-name): Ditto.
	(shimbun-groups, shimbun-current-group-name): New method.

	* shimbun/sb-nikkansports.el (toplevel): Make this module
	independent from `sb-text.el'
	(shimbun-nikkansports): Likewise; Make it inherit
	`shimbun-japanese-newspaper'.

	* shimbun/sb-mainichi.el (toplevel): Make this module independent
	from `sb-text.el'
	(shimbun-mainichi): Likewise; Make it inherit
	`shimbun-japanese-newspaper'.
	(shimbun-mainichi-remove-tags): New function.
	(shimbun-make-contents): Reimplemented.

	* shimbun/sb-asahi.el (shimbun-asahi): Make it inherit
	`shimbun-japanese-newspaper'.
	(shimbun-server-name, shimbun-current-group-name): New methods.
	(shimbun-from-address): Use the above new methods.

2003-06-15  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-atmarkit-rss.el: New file.
	* shimbun/sb-slashdot-jp-rss.el: Ditto.
	* shimbun/sb-cnet-rss.el: Ditto.
	* shimbun/sb-rss.el: Ditto.

2003-06-14  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-moz-users.el: New file.

2003-06-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-w3m-attributes): Improve the regexp to extract
	content-types.

2003-06-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-parse-and-fontify): Apply
	`w3m-decode-anchor-string' to the form action url.

2003-06-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun.el (toplevel): Slot definition order of `shimbun' class
	is changed to avoid mismatching.

	* shimbun.el: Changes to eliminate dependence between modules
	caused by compiled macros of internal accesors.
	(shimbun-server, shimbun-current-group, shimbun-mua-shimbun): New
	function.
	(shimbun-header-subject, shimbun-header-set-subject,
	shimbun-header-from, shimbun-header-set-from, shimbun-header-date,
	shimbun-header-set-date, shimbun-header-id, shimbun-header-set-id,
	shimbun-header-references, shimbun-header-set-references,
	shimbun-header-chars, shimbun-header-set-chars,
	shimbun-header-lines, shimbun-header-set-lines,
	shimbun-header-xref, shimbun-header-set-xref,
	shimbun-header-extra, shimbun-header-set-extra): Use `defun'
	instead of `defsubst'.
	(shimbun-header-field-value): Removed.

	* nnshimbun.el (shimbun-mua-search-id):
	Call `shimbun-current-group' instead of `shimbun-current-group-internal';
	Call `shimbun-mua-shimbun' instead of `shimbun-mua-shimbun-internal'.
	(nnshimbun-current-group):
	Call `shimbun-current-group' instead of `shimbun-current-group-internal'.

	* mew-shimbun.el (mew-shimbun-retrieve-article):
	Call `shimbun-server' instead of `shimbun-server-internal';
	Call `shimbun-current-group' instead of `shimbun-current-group-internal';
	Call `shimbun-mua-shimbun' instead of `shimbun-mua-shimbun-internal'.
	(mew-shimbun-re-retrieve-article): Ditto.

	* sb-mhonarc.el (shimbun-mhonarc-header-value): New function.
	(shimbun-make-contents): Call `shimbun-mhonarc-header-value'
	instead of `shimbun-header-field-value'.

2003-06-06  Koichiro Ohba  <koichiro@meadowy.org>

	* shimbun/sb-tdiary.el: New file.

2003-06-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* doc/emacs-w3m.texi, doc/emacs-w3m-ja.texi: Their license is
	changed from GNU Free Documentation License to GNU General Public
	License.

2003-06-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html): Make it inherit
	the `shimbun-asahi' class instead of the `shimbun' class.
	(shimbun-groups, shimbun-from-address, shimbun-index-url,
	shimbun-get-headers): Remove methods.
	(shimbun-make-contents): Define it for the `shimbun-asahi-html'
	class independently.

	* shimbun/sb-yomiuri.el: Require `sb-text'.
	(shimbun-yomiuri): Make it inherit the `shimbun-text' class.
	(shimbun-yomiuri-groups, shimbun-yomiuri-from-address): Remove.
	(shimbun-yomiuri-group-table): Rename from
	`shimbun-yomiuri-group-regexp-alist'; include Japanese
	translations and index names.
	(shimbun-groups, shimbun-from-address): New methods.
	(shimbun-yomiuri-index-url): Remove.
	(shimbun-index-url): Use `shimbun-yomiuri-group-table'.
	(shimbun-yomiuri-get-headers): Fit it to
	`shimbun-yomiuri-group-table'; use `shimbun-yomiuri-url' instead
	of to call the `shimbun-url-internal' function.
	(shimbun-yomiuri-make-contents): Remove.
	(shimbun-yomiuri-adjust-date-header): New function.
	(shimbun-make-contents): Use `shimbun-yomiuri-adjust-date-header'
	as a preprocessor.

	* shimbun/sb-yomiuri-html.el (shimbun-yomiuri-html): Make it
	inherit only the `shimbun-yomiuri' class.
	(shimbun-yomiuri-html-url, shimbun-yomiuri-html-groups,
	shimbun-yomiuri-html-from-address): Remove.
	(shimbun-yomiuri-html-make-contents): Remove.
	(shimbun-make-contents): Define it for the `shimbun-yomiuri-html'
	class independently.

2003-06-03  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-nikkansports.el: Follow the change of the Web site.
	(shimbun-nikkansports-group-table): New variable.
	(shimbun-nikkansports-groups): Removed and its infomation is moved
	to `shimbun-nikkansports-group-table'.
	(shimbun-groups): New method.
	(shimbun-current-group-name): Ditto.

2003-06-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el: Require `sb-text'.
	(shimbun-asahi): Make it inherit the `shimbun-text' class.
	(shimbun-from-address): Encode names collectively.
	(shimbun-asahi-adjust-date-header): New function suggested by
	TSUCHIYA-san.
	(shimbun-asahi-make-contents): Remove.
	(shimbun-make-contents): Use `shimbun-asahi-adjust-date-header' as
	a preprocessor.

	* shimbun/sb-asahi-html.el (shimbun-asahi-html): Make it inherit
	the `shimbun' class.
	(shimbun-groups, shimbun-from-address, shimbun-index-url,
	shimbun-get-headers): New methods copied from sb-asahi.el.
	(shimbun-asahi-html-make-contents): Remove.
	(shimbun-make-contents): Use `shimbun-asahi-adjust-date-header' as
	a preprocessor.

	* shimbun/sb-text.el (shimbun-shallow-rendering): Revert last
	change.

2003-06-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mainichi.el (shimbun-mainichi-server-name): New
	variable.
	(shimbun-mainichi-group-table): New variable.
	(shimbun-mainichi-groups, shimbun-mainichi-group-path-alist):
	Removed and their infomation is moved to
	`shimbun-mainichi-group-table'.
	(shimbun-groups, shimbun-current-group-name): New method.
	(shimbun-index-url, shimbun-get-headers): Refer
	`shimbun-mainichi-group-table' instead of
	`shimbun-mainichi-group-path-alist'.

	* shimbun/sb-zdnet.el (shimbun-zdnet-server-name): New variable.

	* shimbun/shimbun.el (toplevel): Add a new slot `server-name' to
	`shimbun' class.
	(shimbun-attributes): Add `server-name'.
	(shimbun-open): Bind `server-name' locally.
	(shimbun-server-name): New method.
	(shimbun-current-group-name): New method.

	* shimbun/sb-gyve.el: Removed.

2003-06-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-text.el (shimbun-shallow-rendering): Use defun
	instead of defsubst.

	* shimbun/sb-asahi.el: Autoload sb-text instead of always to
	require the feature.
	(shimbun-asahi-make-contents): Make an article in the text/plain
	format.
	* shimbun/sb-asahi-html.el (shimbun-asahi-html-make-contents): New
	function moved from sb-asahi.el.

	* shimbun/sb-yomiuri.el: Autoload sb-text instead of always to
	require the feature.
	(shimbun-yomiuri-make-contents): Make an article in the text/plain
	format.
	* shimbun/sb-yomiuri-html.el (shimbun-yomiuri-html-make-contents):
	New function moved from sb-yomiuri.el.

2003-06-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el: Changes to add a server name and a current
	group name to From: header.
	(shimbun-from-address): New method.

	* shimbun/sb-asahi.el (shimbun-asahi-groups,
	shimbun-asahi-group-index-alist,
	shimbun-asahi-group-regexp-alist): Abolished.
	(shimbun-asahi-group-table): New variable.
	(shimbun-groups, shimbun-from-address): New methods.
	(shimbun-index-url): Reimplemented.
	(shimbun-asahi-index-url): Removed.
	(shimbun-asahi-get-headers): Use `shimbun-from-address' instead of
	`shimbun-from-address-internal'; Refer `shimbun-asahi-group-table'
	instead of `shimbun-asahi-group-regexp-alist'; Refer
	`shimbun-asahi-url' instead of using `shimbun-url-internal'.

	* shimbun/sb-asahi-html.el (toplevel): Inherit only from
	`shimbun-asahi'.
	(shimbun-asahi-html-url, shimbun-asahi-html-groups,
	shimbun-asahi-html-from-address): Abolished.

	* shimbun/sb-kantei.el (shimbun-kantei-from-address): Changed its
	default value.
	(shimbun-from-address): New method.
	(shimbun-get-headers): Use `shimbun-from-address' instead of
	`shimbun-from-address-internal'.

	* shimbun/sb-palmfan.el (shimbun-palmfan-palmwarefan-headers): Use
	`shimbun-from-address' instead of using literal string.

	* shimbun/sb-palmoslove.el (shimbun-palmoslove-from-address): New
	variable.
	(shimbun-headers): Use `shimbun-from-address' instead of using
	literal string.

	* shimbun/sb-vinelinux.el (shimbun-get-headers): Use
	`shimbun-from-address' instead of using the value of
	`shimbun-vinelinux-from-address'.

	* shimbun/sb-cnet.el (shimbun-get-headers)
	* shimbun/sb-dennou.el (shimbun-headers)
	* shimbun/sb-f1express.el (shimbun-get-headers)
	* shimbun/sb-f1fan.el (shimbun-get-headers)
	* shimbun/sb-ibm-dev.el (shimbun-headers)
	* shimbun/sb-impress.el (shimbun-get-headers)
	* shimbun/sb-japantimes.el (shimbun-get-headers)
	* shimbun/sb-jpo.el (shimbun-jpo-headers-1)
	* shimbun/sb-lotusex.el (shimbun-get-headers)
	* shimbun/sb-mainichi.el (shimbun-get-headers)
	* shimbun/sb-makanai.el (shimbun-makanai-scan-articles)
	* shimbun/sb-muchy.el (shimbun-get-headers)
	* shimbun/sb-nikkansports.el (shimbun-get-headers)
	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers)
	* shimbun/sb-pcweb-column.el (shimbun-get-headers)
	* shimbun/sb-sponichi.el (shimbun-get-headers)
	* shimbun/sb-wincefan.el (shimbun-get-headers)
	* shimbun/sb-wired.el (shimbun-get-group-header-alist)
	* shimbun/sb-yahoo.el (shimbun-get-headers)
	* shimbun/sb-yomiuri.el (shimbun-yomiuri-get-headers)
	* shimbun/sb-zdnet.el (shimbun-get-headers): Use
	`shimbun-from-address' instead of `shimbun-from-address-internal'.

2003-06-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-jpo.el (shimbun-jpo-headers-1): Use
	`shimbun-expand-url' instead of `w3m-expand-url'.
	(shimbun-jpo-headers-group-details): Ditto.
	(shimbun-jpo-headers-group-details): Ditto.

	* shimbun/sb-ibm-dev.el (shimbun-headers): Ditto.
	(shimbun-make-contents): Ditto.

	* shimbun/sb-wincefan.el (shimbun-get-headers): Ditto.

	* shimbun/sb-marc-aims.el (shimbun-marc-aims-group-alist):
	Declared as an option with `defcustom' instead of `defvar'.

2003-05-31  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-yahoo.el (shimbun-get-headers): Modify regexp to pick
	up all articles.

2003-05-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el (toplevel): Require poe.
	(octet-filter-call1): Use `make-temp-file' instead of
	`make-temp-name'.
	(octet-filter-call2): Ditto.
	(octet-filter-call2-extra): Ditto.
	(octet-temp-directory): Changed default value to
	`temporary-file-directory'.

2003-05-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (DOCS): FAQ, FAQ.ja, README.namazu.ja,
	README.shimbun.ja, TIPS and TIPS.ja are merged into Info.

2003-05-29  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-pilot-link.el: Require sendmail.el.
	(shimbun-make-contents): New method.
	(shimbun-index-url): Bug fixed.

2003-05-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* doc/Makefile.in (dvi): New target to create dvi files; related
	targets and macros are installed.

	* doc/.cvsignore: Ignore dvi files.

	* configure.in: Check whether texi2dvi, ptex and jbibtex exists.

2003-05-29  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-ibm-dev.el (shimbun-index-url): Removed.
	(shimbun-ibm-dev-content-start, shimbun-ibm-dev-content-end): New
	user variables.
	(shimbun-get-headers): Rename to shimbun-headers.
	(shimbun-headers): Use `w3m-expand-url' to expand relative url to
	absolute one.
	Build message-id using domain www-6.ibm.com.
	(shimbun-make-contents): Change its method-qualifier to :before.
	Use `when' instead of `if' if there aren't `else S expressions'.
	(shimbun-ibm-dev-groups): Remove "components", "security",
	"unicode", "usability" and "web" from its default value.

2003-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* .cvsignore: Ignore tarballs.

	* Makefile.in (SUBDIRS): New macro.
	(tarball): Refer the above macro, and put texinfo sources into a
	tarball.

	* aclocal.m4 (AC_ADD_LOAD_PATH): Use the variable `EGREP' instead
	of the literal `grep'.

2003-05-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (byte-optimizer for match-string-no-properties):
	`lenght' -> `length'.

2003-05-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Simplify functions that rewrite URIs.
	(toplevel): Autoload `w3m-search-uri-replace' instead of
	`w3m-search-quick-search-handler'.
	(w3m-uri-replace-alist): Changed its default value and its
	customize spec.
	(w3m-pattern-uri-replace): New function.
	(w3m-uri-replace): Reimplemented.

	* w3m-search.el (w3m-search-quick-search-engine-alist): Abolished.
	(w3m-search-quick-search-engines): Removed.
	(w3m-search-quick-search-handler): Removed.
	(w3m-search-uri-replace): New function.

2003-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-highlight-current-anchor): Don't infloop even if a
	w3m buffer is narrowed.

2003-05-24  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-lotusex.el: New file.

2003-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-make-package): Make it work under non-Mule
	XEmacs.

2003-05-22  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-muchy.el (shimbun-muchy-get-headers): Modify regexp
	slightly.

2003-05-21  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-jpo.el (shimbun-jpo-headers): Use `w3m-expand-url' to
	get full URL.
	(shimbun-jpo-headers-1): Ditto.
	Bug fixed.
	(shimbun-jpo-headers-group-details): Use `dolist' to simplify code.
	Use `w3m-expand-url' to get full URL.

2003-05-19  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-jpo.el (shimbun-jpo-contents): Modify regexp to pick
	up email address properly.

2003-05-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-use-safe-url-regexp): New variable.
	(mew-w3m-view-inline-image, mew-mime-text/html-w3m): Use
	`mew-w3m-use-safe-url-regexp' for `w3m-safe-url-regexp'.

2003-05-18  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-yahoo.el (shimbun-yahoo-groups-alist): Add topnews
	group entry.

2003-05-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (Top): Use w3m-treat-drive-letter for
	`w3m-expand-path-name'.

2003-05-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yahoo.el (shimbun-yahoo-x-face-alist): New face.

2003-05-11  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-yahoo.el (shimbun-yahoo-content-start): Improved the
	default value.

2003-05-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-2ch.el (shimbun-headers): Correct the wrong use of
	`message'.  Thanks to Yoichi NAKAYAMA <yoichi@geiin.org> for his
	suggestion.

	* mime-w3m.el (mime-w3m-preview-text/html): Apply the patch posted
	by Yoichi NAKAYAMA <yoichi@geiin.org> in [emacs-w3m:04836], that
	correct the wrong usage of `message'.

2003-05-06  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-pocketgames.el
	(shimbun-pocketgames-make-mime-article): Modify regexp to pick up
	url properly.

2003-05-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-fontify-anchors): Invalidate the widget keymap in
	XEmacs; add a help-echo to the widget button.
	(w3m-make-minor-mode-keymap): Bind [down-mouse-2] to `undefined'
	to invalidate the `widget-button-click' command in FSF Emacs.

2003-05-05  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-pocketgames.el
	(shimbun-pocketgames-article): New function.
	(shimbun-pocketgames-article-1): Ditto.
	(shimbun-pocketgames-make-mime-article): Ditto.
	(shimbun-pocketgames-headers): New function (Building Message-ID
	with '@' instead of `:' to display inline)
	(shimbun-pocketgames-headers-1): New function.
	(shimbun-article): Use `shimbun-pocketgames-article'.
	(shimbun-headers): Use `shimbun-pocketgames-headers'.
	(shimbun-pocketgames-comment-article): Clean up unnecessary link
	from shimbun working buffer.
	Building Message-ID with '@' instead of `:' to display inline
	images.

2003-05-04  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-plucker.el: New file.

2003-05-04  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-makanai.el (shimbun-index-url): Follow the change of
	the web site.

2003-05-03  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-squeak-dev.el: New file.

	* shimbun/sb-jpo.el (shimbun-jpo-cleanup-article): Modify regexps.

	* shimbun/sb-jpilot.el: Require sendmail.
	(shimbun-make-contents): New method.

2003-04-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-imitate-widget-button): New variable.
	(w3m-imitate-widget-button): New function.
	(w3m-fontify-anchors): Imitate the widget button.
	(w3m-next-anchor): Look for the widget button.
	(w3m-previous-anchor): Ditto.

2003-04-30  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-jpo.el (shimbun-make-contents): Bug fixed.
	(shimbun-headers): Ditto.

2003-04-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-retrieve-and-render): Hide a exit status from an
	error message unless `w3m-process-exit-status'.

2003-04-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Improve and bug fix the find-file code.

2003-04-29  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-jpo.el: New file.
	(shimbun-jpo-contents): Modified regexp to pick up more email
	address of JPO's section.

2003-04-28  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-sml.el: New file.
	* shimbun/sb-squeak-ja.el (shimbun-headers): Removed (use
	sb-mailman.el's original method).
	(shimbun-squeak-ja-headers): Removed.

2003-04-26  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-mailman.el (shimbun-mailman-headers): Call
	`shimbun-mime-encode-string' for FROM.

	* shimbun/sb-squeak-ja.el: New file.
	Require cl when compiling.
	(shimbun-squeak-ja-make-contents): New function.
	(shimbun-make-contents): New method.
	(shimbun-squeak-ja-make-contents): Declare ADDRESS, NAME and DATE
	as temporary variable.
	Set proper address to HEADER.
	(shimbun-squeak-ja-headers): New function.
	(shimbun-headers): New method.

2003-04-16  Chihiro Kuroda  <chee@iijmio-mail.jp>

	* w3m.el (w3m-download): Download a directory url to index.html
	(by default) instead of signaling an error.

2003-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mainichi.el (shimbun-make-contents): Return nil when
	an article couldn't be gotten.

2003-04-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-local-find-file-regexps): New user option.
	(w3m-local-find-file-function): New user option.
	(w3m-goto-url): Use the function specified by the
	`w3m-local-find-file-function' variable for local files when
	the file name matches the `w3m-local-find-file-regexps' variable.

2003-04-07  ARISAWA Akihiro  <ari@namazu.org>

	* shimbun/sb-ding.el: Removed.

2003-04-05  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-anthy.el (shimbun-anthy-url): Remove slash at the end.

2003-04-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-search.el (w3m-search-engine-alist): Change coding-system to
	`euc-japan' of "waei" and "kokugo". Tnx, Mr. Saito (sai@yedo.com)
	for his report.

2003-03-30  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-canna-dev.el: New file.

2003-03-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-check-all-sites): Call `make-symbol'
	instead of `gensym', in order to make this function free from
	runtime CL functions.

2003-03-21  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-muchy.el (shimbun-muchy-get-headers): Bug fixed,

2003-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-make-contents): New function
	used to get a correct date header for the science group.
	(shimbun-make-contents): Use it.
	* shimbun/sb-asahi-html.el (shimbun-make-contents): Use it.

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-make-contents): New
	function used to get a correct date header.
	(shimbun-make-contents): Use it.
	* shimbun/sb-yomiuri-html.el (shimbun-make-contents): Use it.

	* shimbun/sb-mainichi.el (shimbun-make-contents): New function
	used to get a correct date header.

2003-03-16  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-wincefan.el (shimbun-make-contents): Remove some more
	advertisements.
	(shimbun-get-headers): Search message-id before seaching html file
	diligently.
	Fix regexp.
	Use `w3m-expand-url for URL.
	(shimbun-wincefan-from-address): Typo fixed.
	Declare with defconst.

2003-03-14  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-muchy.el (shimbun-muchy-content-start): Updated.
	(shimbun-muchy-content-end): Ditto.
	(shimbun-get-headers): Ditto.
	(shimbun-muchy-get-headers): Ditto.
	(shimbun-make-contents): Removed.
	(shimbun-muchy-get-headers): Bug fixed.

2003-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-palmoslove.el (shimbun-headers): Bind the unbound
	variable `body'.

	* shimbun/sb-savannah.el (shimbun-savannah-get-headers): Revoke
	the last change.

2003-03-12  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-palmoslove.el: New file.
	(shimbun-headers): Remove \n and \r from SUBJECT.

2003-03-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-savannah.el (shimbun-savannah-group-path-alist): Add
	tramp-devel.
	(shimbun-savannah-get-headers): Attempt to retrieve the default
	index page (w/o "index.html") first.

2003-03-11  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-wincefan.el: New file.

2003-03-11  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-f1fan.el (shimbun-index-url): Remove a redundant
	slash.

2003-03-10  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-pocketgames.el (shimbun-headers): Bug fixed.
	(shimbun-pocketgames-comment-article): Ditto.

2003-03-09  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-palmfan.el (shimbun-palmfan-pickup-date): Bug fixed.

	* shimbun/sb-dennou.el (shimbun-dennou-expiration-days): New user
	variable.
	(shimbun-article): Sync up with `shimbun-article' of
	sb-pocketgames.el.

	* shimbun/sb-muchy.el (shimbun-muchy-expiration-days): New user
	variable.

	* shimbun/sb-palmfan.el (shimbun-palmfan-pickup-date): Pick up
	Japanese style date information, too.
	(shimbun-article): Sync up with `shimbun-article' of
	sb-pocketgames.el.
	(shimbun-palmfan-palmwarefan-headers): Don't expand relative path.
	(shimbun-palmfan-expiration-days): New user variable.

	* shimbun/sb-anthy.el: New file.

2003-03-08  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-pocketgames.el: New file.

2003-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el (report-emacs-w3m-bug): Make it possible to send a
	bug report even if emacs-w3m is not running.

2003-03-06  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-alist): Followed the
	change of gamespot url.

2003-03-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-elips.el: New file.

2003-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el (nnshimbun-request-article-1): Protect
	against non-existent articles.

	* shimbun/sb-yomiuri-html.el (shimbun-yomiuri-html-url,
	shimbun-yomiuri-html-groups, shimbun-yomiuri-html-from-address,
	shimbun-yomiuri-html-expiration-days): Default to the values which
	are defined in sb-yomiuri.el.
	(shimbun-yomiuri-html-content-start): Follow the change of the web
	site.
	(shimbun-yomiuri-html-x-face-alist): New variable.

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-top-level-domain): New.
	(shimbun-yomiuri-url): Use `s-y-top-level-domain'.
	(shimbun-yomiuri-groups): Follow the change of the web site.
	(shimbun-yomiuri-from-address): Use `s-y-top-level-domain'.
	(shimbun-yomiuri-group-path-alist): Abolish.
	(shimbun-yomiuri-group-regexp-alist): New variable.
	(shimbun-yomiuri-index-url): New function.
	(shimbun-index-url): Use `s-y-index-url'.
	(shimbun-yomiuri-japanese-string-to-number): New macro.
	(shimbun-yomiuri-shorten-brackets-in-string): New function.
	(shimbun-yomiuri-get-headers): New function.
	(shimbun-get-headers): Use `s-y-get-headers'.

2003-03-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-scan-message): Support New
	Mew after 2003.03.03.

2003-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-content-start,
	shimbun-asahi-html-content-end): Improve regexps.
	(shimbun-asahi-html-url, shimbun-asahi-html-groups,
	shimbun-asahi-html-from-address, shimbun-asahi-html-x-face-alist,
	shimbun-asahi-html-expiration-days): Default to the values which
	are defined in sb-asahi.el.

	* shimbun/sb-asahi.el (shimbun-asahi-groups): Add "english" and
	"science".
	(shimbun-asahi-content-start, shimbun-asahi-content-end): Improve
	regexps.
	(shimbun-asahi-group-index-alist): New variable.
	(shimbun-asahi-group-regexp-alist): New variable.
	(shimbun-asahi-index-url): Use `shimbun-asahi-group-index-alist'.
	(shimbun-asahi-get-headers): Rewrite.

2003-03-03  Michael Shields  <shields@msrl.com>

	* w3m-xmas.el (w3m-create-image): Protect against images which are
	not permitted to be loaded according to `w3m-safe-url-regexp'.

2003-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-groups-should-use-list-page):
	Abolish.
	(shimbun-asahi-content-start, shimbun-asahi-content-end): Follow
	the change of the web site.
	(shimbun-asahi-index-url): New function.
	(shimbun-index-url): Use it.
	(shimbun-asahi-get-headers-in-the-list-page): Abolish.
	(shimbun-asahi-get-headers): Rename from
	`shimbun-asahi-get-headers-in-the-top-page'.
	(shimbun-get-headers): Use it.

2003-02-28  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-util.el (w3m-get-server-hostname): Rename and move from
	`w3m-process-get-server-root' in `w3m-proc.el'.

	* w3m-proc.el (w3m-process-set-authinfo, w3m-process-read-user)
	(w3m-process-read-passwd, w3m-process-y-or-n-p): Use
	`w3m-get-server-hostname' instead of
	`w3m-process-get-server-root'.

	* w3m.el (w3m-show-error-information): New customized variable.
	(w3m-w3m-attributes): Message strange `Location:' like lynx.
	(w3m-retrieve-and-render): When error occur, show error message
	in `w3m buffer' to be accompanied by `w3m-show-error-information'.
	(w3m-show-error-information): New function.
	(w3m-reload-this-page, w3m-redisplay-this-page)
	(w3m-redisplay-and-reset, w3m-redisplay-with-charset)
	(w3m-view-source, w3m-view-header): If `w3m-current-url' is nil,
	dont' execute command.
	(w3m): Guard from the bug of `select-frame-set-input-focus' in
	Emacs-21.3.x. If `w3m-current-url' is nil in `w3m buffer'

2003-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-generate-shimbun-servers-file): Exclude fml,
	glimpse, lump, mailarc, mailman, mhonarc and text; indent.
	(w3mhack-generate-colon-keywords-file): indent.

	* shimbun/nnshimbun.el (gnus-group-make-shimbun-group): Accept
	arguments.

2003-02-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el (nnshimbun-is-compiled-for-modern-gnus):
	Make sure the `gnus-define-group-parameter' macro really works.

2003-02-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search-engine-alist): Add www.alltheweb.com
	suggested by Chris Beggy <chrisb@kippona.com>; make the default
	value more suitable to the language environment; don't use the old
	fashioned backquotes.
	(w3m-search-default-engine): Always default to google.
	(w3m-search-prefer-japanese-site): Remove.
	(w3m-search-inhibited-japanese-engines): Remove.
	(w3m-search): Bind `completion-ignore-case' to t.
	(w3m-search-quick-search-handler): Remove
	`w3m-search-prefer-japanese-site' and
	`w3m-search-inhibited-japanese-engines'.

2003-02-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el (nnshimbun-is-compiled-for-modern-gnus):
	New constant.
	(nnshimbun-find-group-parameters): Define it if nnshimbun.elc is
	compiled for the old Gnus but the newer Gnus is running.

2003-02-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-attributes): Allow imperfect Status-Line like no
	Reason-Phrase. Guard broken header like no location field.

2003-02-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el: Doc fixes.
	(nnshimbun-keep-unparsable-dated-articles): Move forward.
	(nnshimbun-keep-backlog): Make it into a user option.

2003-02-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-util.el (w3m-url-local-p): Use `\`' instead of `^'.

2003-02-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-debian.el (shimbun-get-headers): Relax the regexp
	detecting the maximum limit of pages, in order to follow the
	change of archive pages.

2003-02-25  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-dennou.el (shimbun-headers): Bug fixed.

2003-02-24  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-palmfan.el (shimbun-palmfan-get-first-article-date):
	Bug fixed.

2003-02-23  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-palmfan.el (shimbun-palmfan-get-first-article-date):
	Declare temporary variable properly.
	(shimbun-palmfan-news-headers): Ditto.
	(shimbun-palmfan-coding-system): New constant.
	(shimbun-palmfan-palmwarefan-headers): Refer coding-system using
	`shimbun-coding-system-internal'.
	(shimbun-palmfan-news-headers): Ditto.

	* shimbun/sb-dennou.el (shimbun-headers): Declare temporary
	variable properly.

2003-02-23  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-dennou.el (shimbun-headers): Bug fixed.
	(shimbun-reply-to): Ditto.

2003-02-22  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-dennou.el: New file.

	* shimbun/sb-palmfan.el (shimbun-palmfan-pickup-date): New
	function.
	(shimbun-palmfan-get-first-article-date): Ditto.
	(shimbun-palmfan-news-headers): Use the functions above.

2003-02-21  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-dirlist-cgi): Treat a `local cookie file',
	again.

2003-02-18  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-palmfan.el (shimbun-palmfan-date-regexp): Removed.
	(shimbun-palmfan-news-headers): Do not use
	`shimbun-palmfan-date-regexp'.

2003-02-16  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-type): Support "release candidate" of w3m.

2003-02-15  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-jpilot.el (shimbun-index-url): Bug fixed.
	* shimbun/sb-pilot-mailsync.el (shimbun-index-url): Ditto.

2003-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-insert-image): Use `map-extents' instead of
	`extent-at' repeatedly.
	(w3m-remove-image): Ditto.

2003-02-12  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-pilot-mailsync.el (shimbun-reply-to): Bug fixed.

2003-02-11  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-pilot-mailsync.el: New file.

2003-02-10  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-palmfan.el: Update copyright notice.

	* shimbun/sb-vinelinux.el: Update copyright notice.
	(shimbun-vinelinux-from-address): Typo fixed.

2003-02-09  NAKAJIMA Mikio  <minakaji@namazu.org>

	* shimbun/sb-coldsync.el: New file.
	* shimbun/sb-jpilot.el: Ditto.

	* shimbun/sb-vinelinux.el (shimbun-make-contents): Change for web
	page rearranging.

2003-02-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-submit): Remove `!CURRENT_URL!' from
	action tag.

2003-02-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (TopLevel): Don't gererate the w3m-kwds.el file if
	there is no permission to write.

	* shimbun/.cvsignore: New file.

	* Makefile.in (clean): Remove shimbun/shimbun-servers.el.

2003-02-04  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>
	Katsumi Yamaoka <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-generate-shimbun-servers-file): New function.
	(TopLevel): Call it.

2003-02-04  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* w3mhack.el (shimbun-servers-file): New constant.

	* shimbun/shimbun.el (TopLevel): Require `shimbun-servers'.

	* shimbun/nnshimbun.el (gnus-group-make-shimbun-group): Use
	`shimbun-servers-alist'.

2003-02-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mode): Bind `auto-hscroll-mode' for Emacs-21.3.

2003-01-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-image-type): Move forward.
	(w3m-fontify-images): Use `w3m-action' and `w3m-anchor' instead of
	`get-text-property'.
	(w3m-toggle-inline-images-internal): Use `w3m-image' instead of
	`get-text-property'.
	(w3m-toggle-inline-image): Don't specify the arg to `w3m-image'.
	(w3m-resize-inline-image-internal): Use `w3m-image' instead of
	`get-text-property'.
	(w3m-zoom-in-image): Don't specify the arg to `w3m-image'.
	(w3m-zoom-out-image): Ditto.
	(w3m-view-this-url): Don't bother to call `w3m-anchor' if it is
	needless.
	(w3m-print-this-url): Don't pull-in the point into the link if it
	is called non-interactively.
	(w3m-highlight-current-anchor-1): Use `w3m-anchor-sequence'
	instead of `get-text-property'.
	(w3m-next-anchor): Don't put `nil' element into
	`w3m-goto-anchor-hist'; use `push' instead of `cons'.
	(w3m-previous-anchor): Ditto.
	(w3m-next-form): Use `w3m-action' instead of `get-text-property';
	don't put `nil' element into `w3m-goto-anchor-hist'; specify the
	current position to `w3m-action'; use `push' instead of `cons'.
	(w3m-goto-previous-form): indent.
	(w3m-previous-form): Use `w3m-action' instead of
	`get-text-property'; don't put `nil' element into
	`w3m-goto-anchor-hist'; specify the current position to
	`w3m-action'; use `push' instead of `cons'.
	(w3m-next-image): Use `w3m-image' instead of `get-text-property';
	don't put `nil' element into `w3m-goto-anchor-hist'; specify the
	current position to `w3m-image'; use `push' instead of `cons'.
	(w3m-previous-image): Ditto.

	* w3m-form.el (w3m-form-resume): Use `w3m-action' instead of
	`get-text-property'; specify the current position to `w3m-action'.
	(w3m-fontify-textareas): Use `w3m-anchor-sequence' instead of
	`get-text-property'.
	(w3m-form-replace): Use `w3m-action' instead of
	`get-text-property'.
	(w3m-form-textarea-info): Use `get-text-property' instead of
	`w3m-get-text-property-around'.
	(w3m-form-reset): Use `w3m-action' instead of `get-text-property'.

	* w3m-util.el (w3m-get-text-property-around): Always search for
	the text prop around there and pull-in the point into the position
	where the prop exists.
	(w3m-action, w3m-anchor, w3m-image, w3m-submit): Use
	`get-text-property' if the argument is omitted.
	(w3m-image-scale): Abolished.
	(w3m-anchor-sequence): Simplified.

	* mime-w3m.el (mime-w3m-mode-map): Bind it when compiling.

2003-01-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (top): Move the last addition (modifying the value
	for `shell-file-name') just after loading `cl'.

2003-01-28  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3mhack.el (top): Set `cmdproxy.exe' to `shell-file-name' when
	Win32 environment.

2003-01-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el: Autoload `gnus-group-make-group'; don't
	require `gnus-sum'.
	(nnshimbun-replace-date-header): New function.
	(nnshimbun-request-article-1): Use it.

2003-01-28  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-dirlist-cgi): Treat a `local cookie file'.

2003-01-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/nnshimbun.el (nnshimbun-group-parameters-custom): Show a
	title string; use "pages" instead of "days" for the "index range".

2003-01-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-ucs.el (w3m-ucs-to-char): Guard error for Mule-UCS 0.85.

2003-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-byte-optimize-letX): Add
	`pathname-coding-system' to be removed from `let' bindings.

2003-01-26  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* w3m-e21.el (w3m-favicon-type): Add BMP at the head of the list.
	(w3m-favicon-type): Undo the last change and make the priority of
	BMP the lowest.

2003-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Withdraw the change of 2003-01-09.

2003-01-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-examine-modules, w3mhack-load-path): Check
	the existence of Gnus for shimbun/nnshimbun.el.

2003-01-23  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/nnshimbun.el: Import from Semi-gnus.

2003-01-23  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-date-regexp): Typo fixed.

2003-01-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-function-max-args): Don't use the arglist
	destructively.

	* mime-w3m.el (kill-new): Don't refer to the whole arglist of the
	original function.

2003-01-21  Masatake YAMATO  <jet@gyve.org>

	* w3m.el (w3m-scroll-down-or-previous-url): Added doc string.

2003-01-19  TSUCHIYA Masatoshi  <tsuchiya@pine.kuee.kyoto-u.ac.jp>

	* w3m.el (toplevel): Strict checking that buggy
	`w3m-time-parse-string' is used.

2003-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-savannah.el (shimbun-savannah-reverse-flag): New var.
	(shimbun-savannah-get-headers): Don't use `nreverse'; modify id.

2003-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-savannah.el: Change it to be based on MHonArc.
	(shimbun-savannah-url): Change the value.
	(shimbun-savannah-group-path-alist): Add some groups.
	(shimbun-savannah-litemplate-regexp): New variable.
	(shimbun-savannah-x-face-alist): Improve the appearance.
	(shimbun-savannah-index-url): New function.
	(shimbun-index-url): Use it.
	(shimbun-savannah-get-headers): New function.
	(shimbun-get-headers): Use it.

2003-01-14  Katsumi Yamaoka  <yamaoka@jpl.org>
	Suggested by KURIHARA Kenichi <kenichi_kurihara@nifty.com>.

	* w3m.el (w3m-async-exec): Always default to `t'.
	(w3m-process-connection-type): Default to `nil' under MacOS X.

2003-01-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Insert one excessive newline
	after a @foo{bar} thing to prevent clinging of a line and a line
	(old texinfmt bug?) if it should be considered only one thing in a
	line.

2003-01-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-ext-url-show): Use `mew-buffer-message'
	instead of `mew-window-configure'.

2003-01-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-ext-url-show): New funcition.
	(mew-w3m-ext-url-fetch): Ditto.
	(top): Modify comment. Avoid byte-compile warning for
	`mew-window-configure'.

2002-12-28  NABEYA Kenichi  <emacs-w3m@nabeken.com>

	* shimbun/sb-mew.el (shimbun-mew-group-url-alist): Update.

2002-12-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mailman.el (shimbun-mailman-make-contents): Make
	regexps more redundant.

2002-12-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-savannah.el (shimbun-savannah-x-face-alist): New.

2002-12-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-db-history): Display the information of page.

2002-12-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-dirlist-cgi): Treat a local cookie.

2002-12-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-yomiuri-x-face-alist): New.

2002-12-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-e21.el (w3m-favicon-type): Change default value and type of
	custom.
	(w3m-favicon-type-alist): New internal variable.
	(w3m-setup-favicon): Don't check 'xpm.
	(w3m-buffer-favicon): Decide image type of Emacs use
	`w3m-favicon-type-alist'.

2002-12-18  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-impress.el (shimbun-impress-groups-alist): Add url
	for "internet" and "pc".
	(shimbun-index-url): Treat 4th element of
	`shimbun-impress-groups-alist' as index url.
	(shimbun-get-headers): Use `shimbun-expand-url'.

2002-12-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-type): Suppert `stable version notation' of
	w3m-m17n.

2002-12-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-use-favicon): Moved from w3m-e21.el.

	* w3m-image.el (w3m-favicon-usable-p): Moved from w3m-e21.el.

	* w3m-e21.el : Bind `w3m-use-favicon' when compiling.
	(w3m-favicon-usable-p): Moved to w3m-image.el.
	(w3m-use-favicon): Moved to w3m.el.

2002-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-yomiuri.el (shimbun-get-headers): Remove garbages.

2002-12-08  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-date-regexp): Modify
	regexp.
	(shimbun-palmfan-news-headers): Pick up MONTH, DAY and YEAR
	properly.

2002-12-07  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-quickml.el (shimbun-quickml-groups): Added some groups.

	* w3m-form.el (w3m-form-text-chop): Added nil check.

2002-12-07  YAMASHITA Junji  <ysjj@unixuser.org>

	* shimbun/sb-ibm-dev.el (shimbun-get-headers): Follow the change
	of date format.

2002-12-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-what-where): Don't say [-ja] especially.

2002-12-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/ptexinfmt.el: Modify it not to use APEL functions.

	* w3mhack.el (w3mhack-makeinfo): Remove last temporal mod.

2002-12-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Temporally fix to help users who
	don't have APEL that use texinfmt if loading doc/ptexinfmt.el is
	failed.

2002-12-02  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* doc/Makefile.in: Remove GNU make things.

2002-12-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (w3mhack-makeinfo): Don't format Japanes info if the
	mule feature is not provided.

	* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_ICONDIR): Undo last change.

	* doc/Makefile.in (INSTALL_INFO): New variable.
	(install): Use it.

2002-11-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (srcdir): New variable.
	(FLAGS): Specify an absolute path to w3mhack.el.
	(all-en): New rule.
	(all-ja): Made it make only Japanese info.
	(info-en): New rule.
	(install-en): New rule.
	(install-ja): Made it install only Japanese info.
	(install-lisp): Use `$(srcdir)/' instead of `./'.
	(install-icons): Ditto.
	(install-info-en): New rule.
	(Makefile): Use `$(srcdir)/' instead of `./'.
	(config.status): Ditto.
	(very-slow): Specify an absolute path to attic/addpath.el.

	* doc/.cvsignore: Add version.texi.

	* doc/ChangeLog: Removed.

	* doc/Makefile.in (srcdir, subdir, top_srcdir): New variables.
	(FLAGS): Specify an absolute path to w3mhack.el.
	(EMACSINFO): Use `$(top_srcdir)' instead of `..'.
	(INFO_DEPS): Include both emacs-w3m.info and emacs-w3m-ja.info.
	(INFO_DEPS_EN): New variable.
	(en): New rule.
	(version.texi): New rule.
	(emacs-w3m.info): Made it depend on version.texi.
	(emacs-w3m-ja.info): Ditto.
	(install): Use `$(top_srcdir)/' instead of `../'.
	(install-en): New rule.

	* doc/version.texi: Removed from the CVS repository.

2002-11-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* doc/Makefile.in (clean): Fix target.

2002-11-29  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3mhack.el (w3mhack-nonunix-install): Create parent directories.

2002-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/texinfo.tex: Replaced with the latest version.

2002-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-header-line-map): Prevent tool-bar from being
	doubled under Emacs 21.

2002-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (infodir): Add a variable.
	(default): Use `all'.
	(all, all-ja): New rules.
	(lisp): Renamed from `default'.
	(what-where): Pass `infodir' to `w3mhack-what-where'.
	(info, info-ja): New rules.
	(install): Use `install-lisp' and `install-info'.
	(install-ja): New rule.
	(install-lisp): Renamed from `install'.
	(install-info, install-info-ja): New rules.
	(install-package): Use `install-lisp' instead of `install';
	install info files as well.
	(install-package-ja): New rule.
	(clean): Remove info files as well.
	(distclean): Remove doc.Makefile as well.

	* aclocal.m4 (AC_PATH_LISPDIR, AC_PATH_ICONDIR): Modify a message
	for `install-package'.

	* configure.in: Check for the makeinfo command; create
	doc/Makefile.

	* w3mhack.el (w3mhack-make-package): Add info file names into
	a MANIFEST file.
	(w3mhack-what-where): Show where info files will go.
	(w3mhack-makeinfo): New function.

2002-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/Makefile.in, .cvsignore: New file.

	* doc/emacs-w3m.texi, emacs-w3m-ja.texi: Correct copyright holder.

	* doc/emacs-w3m.texi: Renamed from emacs-w3m-en.texi.

	* doc/txi.tex: Renamed from txi-en.tex.

2002-11-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search-engine-alist): Specify coding-system
	for the waei and kokugo entries.  Suggested by Hideyuki SHIRAI.

2002-11-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* doc/emacs-w3m-en.texi, emacs-w3m-en.texi: Convert to GFDL.

2002-11-27  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* doc/emacs-w3m-en.texi: New files.
	* doc/emacs-w3m-ja.texi:
	* doc/ptexinfmt.el:
	* doc/texinfo.tex:
	* doc/txi-en.tex:
	* doc/txi-ja.tex:
	* doc/version.texi:

2002-11-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-tabmenu.el (w3m-tab-menubar-update): Do nothing when there's
	no menubar.

2002-11-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-use-unseen): Remove
	duplicate definition.
	(mew-shimbun-unseen-regex): New inline macro.
	(mew-shimbun-goto-folder, mew-shimbun-unseen-remove-advice): Use
	`mew-shimbun-unseen-regex' macro.

2002-11-26  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/shimbun.el (shimbun-mime-encode-string): Wrap with
	`condition-case'.

2002-11-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-view-this-url-1): Keep position when new-session
	and `w3m-view-this-url-new-session-in-background' is non-nil.

2002-11-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-mime-text/html-w3m): Use
	`match-string-no-properties' if it exist.

2002-11-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-goto-url): Use an optional argument and the function
	`interactive' to examine whether it is called interactively
	instead of the function `interactive-p'.
	Suggested by TSUCHIYA Masatoshi.
	(w3m-goto-url-new-session): Ditto.
	(w3m): Ditto.
	(w3m-select-buffer-show-this-line): Ditto.

2002-11-14  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-attributes): Bind `case-fold-search' to t.

2002-11-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search-engine-alist): Add some dictionaries.
	(w3m-search-default-engine): Default to google.
	(w3m-search-quick-search-engine-alist): Add iij-archie; add
	customization type.
	(w3m-search-prefer-japanese-site): New user option.
	(w3m-search-inhibited-japanese-engines): New user option.
	(w3m-search-quick-search-engines): New function.
	(w3m-search-quick-search-handler): Maybe use a Japanese site; use
	`w3m-search-quick-search-engines' to merge
	`w-s-engine-alist' and `w-s-quick-search-engine-alist'.

	* w3m.el (w3m): Allow quicksearch urls if interactive.

2002-11-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3.el (w3m-view-this-url-1): Copy `w3m-current-url' into a
	copied buffer.
	(w3m-goto-url): Allow the 7th argument `qsearch'; use it to
	recursive call the function itself if the quicksearch feature is
	permitted.
	(w3m-goto-url-new-session): Specify the 7th arg of `w3m-goto-url'
	if it is called interactively.

2002-11-08  Romain FRANCOISE  <romain@orebokech.com>

	* w3m-search.el (w3m-search-engine-alist): Add "google groups".
	(w3m-search-quick-search-engine-alist): New user option.
	(w3m-search-quick-search-handler): New function.

	* w3m.el: Autoload `w3m-search-quick-search-handler'.
	(w3m-goto-url): Use `w3m-search-quick-search-handler' to parse
	quicksearch url schemes.

2002-11-06  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-date-regexp): Updated.
	(shimbun-palmfan-month-alist): Change month string (full spell,
	not abbreviation) and number pairs.
	(shimbun-palmfan-news-headers): Bug fixed.

2002-11-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-bookmark.el (w3m-bookmark-safe-string): Abolish its 2nd
	`coding' argument.  Instead of it, use the coding system to be
	used for encoding the buffer contents on saving.
	(w3m-bookmark-write-file): Follow the above change.

2002-11-06  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-fontify-textareas): Replace textarea string
	only when form data contains non-nil data.

2002-11-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (toplevel): Added autoload setting for
	`w3m-fontify-textareas'.
	(w3m-fontify): Don't remove tag strings in the textareas;
	Call `w3m-fontify-textareas'.

	* w3m-form.el (w3m-form-treat-textarea-size): New option.
	(w3m-form-resume): Do nothing if forms is nil.
	(w3m-fontify-textareas): New function.
	(w3m-form-parse-and-fontify): Decode entities for form value;
	Record textarea rows as text property.
	(w3m-form-parse-and-fontify): Treat CRLF as a newline character.
	(w3m-form-search-textarea): New function.
	(w3m-form-textarea-replace): Rewrite.
	(w3m-form-textarea-info): Ditto.

2002-11-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-bookmark.el (w3m-bookmark-file-coding-system): Fix its
	docstring.
	(w3m-bookmark-verify-modtime): Keep buffer modified status.
	(w3m-bookmark-safe-string): New function.
	(w3m-bookmark-write-file): Call it to make given strings be safe.

2002-11-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-visit-folder): New
	definition.
	(mew-shimbun-retrieve-all, mew-shimbun-expire-all): Use
	`mew-shimbun-visit-folder'.

2002-11-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-bookmark.el: Use non-visiting working buffer; Auto-detection
	of bookmark file coding system.
	(w3m-bookmark-file-coding-system): Fix its docstring.
	(w3m-bookmark-buffer-file-name): New internal variable.
	(w3m-bookmark-mode): Add documents for commands.
	(w3m-bookmark-mode-setter): Set `default-directory'.
	(w3m-bookmark-buffer): Use non-visiting working buffer.
	(w3m-bookmark-sections): Follow the above change.
	(w3m-bookmark-kill-entries): Likewise.
	(w3m-bookmark-file-modtime, w3m-bookmark-verify-modtime)
	(w3m-bookmark-save-buffer): New functions.
	(w3m-bookmark-write-file): Use it; Stricten check.
	(w3m-bookmark-add-current-url-group): Call `w3m-bookmark-add'
	without 2nd argument.
	(w3m-about-bookmark): Give unique id to sections.
	(w3m-bookmark-current-number): Follow the above change.
	(w3m-bookmark-kill-entry): If the bookmark file is reverted,
	reload it.
	(w3m-bookmark-undo): Ditto.
	(w3m-bookmark-edit): New function.

2002-11-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-bookmark.el (w3m-about-bookmark): Fix.
	(w3m-bookmark-current-number): Return nil on no entry line.
	(w3m-bookmark-kill-entry): On no entry line, do not call
	`w3m-bookmark-kill-entries'.
	(w3m-bookmark-kill-entries): Fix.

2002-11-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-namazu.el (w3m-namazu): Change prompt.
	(w3m-namazu): Change prompt; Small fix.

	* w3m-bookmark.el: Experimental bookmark editer.
	(w3m-bookmark-read-file): Removed.
	(w3m-bookmark-buffer): New function.
	(w3m-bookmark-sections): Use it.
	(w3m-bookmark-write-file): Use it; Call `basic-save-buffer'.
	(w3m-bookmark-view): View about://bookmark/ instead of
	w3m-bookmark-file directly.
	(w3m-about-bookmark, w3m-bookmark-current-number)
	(w3m-bookmark-kill-entry, w3m-bookmark-kill-entries)
	(w3m-bookmark-undo): New functions.
	(w3m-bookmark-mode, w3m-bookmark-mode-map): New variables.
	(w3m-bookmark-mode-hook): New hook.
	(w3m-bookmark-mode): New minor mode.
	(w3m-bookmark-mode-setter): New function.
	(toplevel): Register it to `w3m-display-functions'.

2002-10-31  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el: Fix comment.

2002-10-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-generate-colon-keywords-file): Protect
	against unexpected data structure.

2002-10-29  Ken'ichi SATO  <ksato@iijmio-mail.jp>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-alist): Follow the
	change of the web site.
	(shimbun-zdnet-content-end): Ditto.

2002-10-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-attributes): Remove workaround for servers which
	do not support HEAD operations.

2002-10-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.3 from emacs-w3m-1_3 branch.

2002-10-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (find-charset): Alias to ignore if no-Mule.

2002-10-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-entity-alist): Use `w3m-mule-unicode-p' instead of
	`w3m-use-mule-ucs'.

	* w3m-xmas.el (w3m-mule-unicode-p): New function.

	* w3m-fsf.el (w3m-mule-unicode-p): New function.

	* w3m-om.el (w3m-mule-unicode-p): Set aliase to `ignore'.

	* w3m-e19.el (w3m-mule-unicode-p): Set aliase to `ignore'.

2002-10-25  Masayuki Ataka  <ataka@milk.freemail.ne.jp>

	* w3m.el (w3m-entity-alist): Support all entities using Mule-UCS.

2002-10-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mew-w3m.el: Cancel the last change.  Use `w3m-minor-mode'.

	* mime-w3m.el (mime-w3m-display-inline-images): Fix its docstring.
	(mime-w3m-safe-url-regexp): Fill its docstring.
	(mime-w3m-setup-hook): New hook.
	(mime-w3m-setup): Do not initialize `mime-w3m-mode-map'; Run the
	above hook.
	(mime-w3m-mode-map): It is not defined for XEmacs and Emacs21.
	(mime-w3m-local-map-property): New function.
	(mime-w3m-preview-text/html): Call it.

	* w3m.el (w3m-key-binding): Cancel the last change.
	(w3m-region): Change the interactive form; Do not process <base>
	tag by itself.
	(w3m-minor-mode-command-alist): Cancel the last change.
	(w3m-minor-mode-map, w3m-minor-mode-hook, w3m-minor-mode): Revival.

2002-10-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-toggle-inline-images-internal)
	(w3m-toggle-inline-image, w3m-view-this-url, w3m-view-this-url)
	(w3m-submit-form, w3m-external-view, w3m-view-image)
	(w3m-save-image, w3m-view-url-with-external-browser)
	(w3m-download-this-url, w3m-edit-this-url, w3m-goto-url)
	(w3m-goto-url-with-timer, w3m-safe-view-this-url)
	(w3m-safe-view-this-url): Check validity of the URL.
	(w3m-print-current-url, w3m-edit-current-url): Check
	`w3m-current-url'.

	* w3m-util.el (w3m-url-fallback-base): Move from `w3m.el'.
	(w3m-url-invalid-regexp): New constant.
	(w3m-url-valid): New inline function.

	* mew-w3m.el (mew-mime-text/html-w3m): Remove any properties from
	`xref'.

2002-10-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-om.el (coding-system-list): Use `defalias' and `lambda'
	instead of `defun'; allow an optional dummy argument; don't ignore
	`*noconv*'.
	(read-passwd): Use `defalias' and `lambda' instead of `defun'.
	(compose-mail): Ditto.

2002-10-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-key-binding): Remove the code to reset
	`w3m-minor-mode-map'.
	(w3m-minor-mode-command-alist): Update its docstring.
	(w3m-minor-mode-map, w3m-minor-mode-hook, w3m-minor-mode):
	Abolished.
	(w3m-minor-mode): Removed.

	* mime-w3m.el (mime-w3m-setup): Call `w3m-make-minor-mode-keymap'
	without using `w3m-minor-mode-map'.

	* mew-w3m.el (mew-use-w3m-minor-mode): Update its docstring.
	(mew-w3m-minor-mode-map): New variable.
	(toplevel): Revival the code to add a minor mode.
	(mew-w3m-minor-mode-setter): Cancel the last change.

2002-10-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-key-binding): Revival the code to reset
	`mime-w3m-mode-map'.

	* mime-w3m.el (mime-w3m-mode-map): Revival.
	(mime-w3m-setup): Initialize `mime-w3m-mode-map' based on
	`w3m-minor-mode-map'; Modify it to set its parent map to
	`mime-view-mode-default-map'.
	(mime-w3m-preview-text/html) [XEmacs,Emacs21]: Unify `local-map'
	as text property.

	* w3m.el (w3m-make-minor-mode-keymap): Call `make-spase-keymap'
	instead of `make-keymap'.

2002-10-22  Shun-ichi GOTO  <gotoh@taiyo.co.jp>

	* w3m.el (w3m-entity-regexp): As simple regexp. Existance of final
	semi-collon is to be detected.
	(w3m-entity-value): 2nd argument STRICT is added. If not STRICT,
	find entity from db by maxmum length matching, and returns it with
	appending unused chars. Returns nil if not match.
	And also use defun instead of defsubst.
	(w3m-decode-entities): Use new `w3m-entity-value' with 2nd arg.

2002-10-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-minor-mode): Define without `define-minor-mode'.
	(w3m-minor-mode): Ditto.
	(w3m-minor-mode-hook): Ditto.
	(w3m-entity-regexp): Set 3000 to `max-specpdl-size' locally to
	avoid max-specpdl-size error.

	* w3m-e19.el: Cancel the last change to define
	`define-minor-mode'.
	* w3m-fsf.el: Ditto.
	* w3m-om.el: Ditto.

	* attic/easy-mmode.el: Removed.

2002-10-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e19.el: Require `easy-mmode'; make the alias
	`define-minor-mode' to `easy-mmode-define-minor-mode'.
	* w3m-fsf.el: Ditto.
	* w3m-om.el: Ditto.

	* attic/easy-mmode.el: New file imported from Emacs 20.7.

2002-10-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-lynx-like-map, w3m-info-like-map): Add [tab] for
	`w3m-next-anchor'.
	(w3m-safe-view-this-url, w3m-mouse-safe-view-this-url): New
	command.
	(w3m-minor-mode-command-alist): New constant.
	(w3m-make-minor-mode-keymap): New function.
	(w3m-minor-mode-map): New keymap.
	(w3m-minor-mode): New function.

	* mime-w3m.el (mime-w3m-mode-map): Abolished.
	(mime-w3m-mode-command-alist): Abolished.
	(mime-w3m-mode-dont-bind-keys): Abolished.
	(mime-w3m-mode-ignored-keys): Abolished.
	(mime-w3m-setup): Do not initialize `mime-w3m-mode-map'.
	(mime-w3m-preview-text/html): Use `w3m-minor-mode-map' instead of
	`mime-w3m-mode-map'.
	(mime-w3m-view-this-url, mime-w3m-mouse-view-this-url): Removed.

	* mew-w3m.el (mew-w3m-minor-mode): Abolished.
	(mew-w3m-minor-mode-setter): Call `w3m-minor-mode'.

2002-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e19.el: Cancel last change for providing the base64 codec.

2002-10-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-goto-url): Use 'group:' scheme instead of
	'about://group/...';
	Use url encoding for the member of URL group instead of
	base64 encoding.

	* w3m-bookmark.el (w3m-bookmark-add-current-url-group): Follow
	the change above.

2002-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e19.el: Require `poe' and `path-util'; attempt to define the
	functions `base64-decode-string' and `base64-encode-string'.

	* w3m-util.el (w3m-display-progress-message): New function.
	* w3m.el (w3m-goto-url-new-session): Use it.
	(w3m): Use it.

2002-10-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-goto-url): Process 'about://group/...'.

	* w3m-bookmark.el (w3m-bookmark-add-current-url-group): New function.

2002-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-buffer): Run `w3m-delete-buffer-hook' only
	when a buffer is killed.
	(w3m-pack-buffer-numbers): Arrange buffers sequentially from 1
	instead of 0.
	(w3m-select-buffer-next-line): Update gutter tabs for XEmacs.
	(w3m-select-buffer-delete-buffer): Run `w3m-delete-buffer-hook'.

	* w3m-util.el (w3m-buffer-number): Assume the buffer number has
	begun from 1 instead of 0.
	(w3m-buffer-set-number): Ditto.
	(w3m-buffer-name-lessp): Ditto.

2002-10-19  Masayuki Ataka  <ataka@milk.freemail.ne.jp>

	* w3m.el (w3m-entity-alist): Support Greek.

2002-10-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-goto-url): Display a help message to stop
	asynchronous process.

2002-10-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-form.el (w3m-form-input-textarea-keymap): Don't bind C-g.
	(w3m-form-input-select-keymap): Ditto.
	(w3m-form-input-map-keymap): Ditto.

	* w3m.el (w3m-select-buffer-mode): Add some key descriptions to
	the doc-string.

2002-10-17  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* icons/db-history-up.xpm: Add missing comma.

2002-07-19  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-symbol.el: New file.

	* w3m.el: Autoload "w3m-symbol" for `w3m-replace-symbol'.
	(w3m-use-symbol): New variable.
	(w3m-fontify): Call `w3m-replace-symbol'.

	* w3mhack.el (w3mhack-examine-modules): Don't byte-compile
	w3m-symbol.el if no-MULE.

2002-10-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-e21.el (w3m-buffer-favicon): Bind local null handler with
	`w3m-process-with-null-handler' instead of `lexical-let'.

2002-10-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-proc.el (w3m-process-push, w3m-process-start): Fix last
	change.

2002-10-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-rendering-half-dump): To decide whether
	`w3m-treat-image-size' is ignored, use
	`w3m-display-inline-images-p' instead of `w3m-display-graphic-p'.
	Thanks to Mito for his report.
	(w3m-about): Add `witdh' and `height' property to <img> tag.

2002-10-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-emacs-w3m-icon): Use helvetica-bold to widen image.

2002-10-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-lynx-like-map): Don't define key bindings for
	`w3m-zoom-out-image' and `w3m-zoom-in-image' when emacs-w3m in
	running in non-graphical display.
	(w3m-info-like-map): Ditto.

2002-10-15  KAMO Tomoyuki  <kamo@ITmanage.co.jp>

	* shimbun/sb-tcup.el (shimbun-tcup-get-group-key): Return
	(hostname . board-id) to support Tripod "personal BBS".
	(shimbun-tcup-make-id): Follow the above change.

2002-10-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>
	    Mito <mito@mxa.nes.nec.co.jp>

	* w3m.el (w3m-rendering-half-dump): Ignore `w3m-treat-image-size'
	when emacs-w3m is running in non-graphical display.

2002-10-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-local-dirlist-cgi): Follow the change of
	`w3m-process-start'.
	(w3m-w3m-get-header): Ditto.
	(w3m-w3m-dump-head-source): Ditto.

	* w3m-image.el (w3m-imagick-convert-async-exec): Abolished.
	(w3m-imagick-start): Removed.
	(w3m-imagick-start-convert-buffer): Call `w3m-process-start'
	instead of the above function.

	* w3m-proc.el (w3m-process-push): Accept `command' argument.
	(w3m-process-start): Ditto.

2002-10-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-dump-head-source): Do not display the help
	message when `w3m-process-with-wait-handler' is evaluated.
	(w3m-make-separator): New function.
	(w3m-about-header): Use the above function.

	* w3m-proc.el (w3m-process-waited): New variable.
	(w3m-process-error-handler): New function.
	(w3m-process-with-wait-handler): Wrap the critical part with
	`condition-case' to clean running processes up when `quit' signal
	is occured.

2002-10-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-dump-head-source): Display the message which
	describes how to stop asynchronous process.
	(w3m-lynx-like-map): Changed the key binded to `w3m-process-stop'
	from `C-c C-g' to `C-c C-k'.
	(w3m-info-like-map): Ditto.

2002-10-08  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* README.shimbun.ja: Add notice that f1express requires Mule-UCS.

	* shimbun/sb-f1express.el: Follow the change of the Web site.

	* shimbun/sb-f1fan.el: Ditto.

	* README.shimbun.ja: Ditto.

	* shimbun/sb-isize-sports.el: Removed.

2002-10-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-toggle-inline-images-internal): Simplify the code.
	(w3m-resize-inline-image-internal): Remove an existing bitmap
	image first.

	* w3m-bitmap.el (w3m-bitmap-image-insert): Replace
	`insert-before-markers' with `insert' (return to the state before
	2002-04-15).

2002-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-create-resized-image): Return nil when
	resizing is failed; set buffer multibyte before converting xbm to
	bitmap.

	* w3m-xmas.el (w3m-create-resized-image): Return nil when resizing
	is failed.

	* w3m-image.el (w3m-resize-image-by-rate): Undo last change.

2002-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-create-resized-image): New function.

	* w3m-e19.el (w3m-create-resized-image): Alias to `ignore'.
	* w3m-e20.el (w3m-create-resized-image): Alias to `ignore' if the
	BITMAP-MULE is not available.
	* w3m-om.el (w3m-create-resized-image): Ditto.

	* w3m-image (w3m-resize-image-by-rate): Limit the minimum scale.

	* w3m.el (w3m-resize-inline-image-internal): Remove an existing
	image only for XEmacs.

2002-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-create-resized-image): New function.

	* w3m.el (w3m-resize-inline-image-internal): Remove an existing
	image before resizing.

2002-10-02  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-all)
	(mew-shimbun-expire-all): Don't kill-buffer when original.

2002-10-01  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* shimbun/sb-airs.el (shimbun-airs-group-path-alist): Add entry
	for wl-en@lists.airs.net.

2002-10-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-e21.el (w3m-favicon-type): New user variable.
	(w3m-setup-favicon): Check `w3m-favicon-type'.
	(w3m-buffer-favicon): Convert image to `w3m-favicon-type' instead
	of 'xpm.

	* shimbun/mew-shimbun.el (mew-shimbun-use-expire-pack): New user
	variable.
	(mew-shimbun-scan): Remove.
	(mew-shimbun-goto-unseen-folder): New function.
	(mew-shimbun-goto-folder): Don't display the unseen indicator of
	folder.
	(mew-shimbun-retrieve): Change how to scan the summary.
	(mew-shimbun-retrieve-article): Ditto.
	(mew-shimbun-re-retrieve-all): Ditto.
	(mew-shimbun-re-retrieve-article): Ditto.
	(mew-shimbun-retrieve-all): Rewrite.
	(mew-shimbun-scan-message): New function.
	(mew-shimbun-all-unseen): Remove.
	(mew-shimbun-unseen-check): Ditto.
	(mew-shimbun-unseen-remove): Ditt.
	(mew-shimbun-unseen-remove-all): Ditto.
	(mew-shimbun-unseen-remove-advice): Rewrite.
	(mew-shimbun-unseen-setup): Ditto.

2002-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-filter.el (w3m-filter-server-regexp): Fix the value;
	translate the comment into English.

2002-10-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-ibm-dev.el (shimbun-make-contents): Strip SPAN tag
	from subject.

2002-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-lynx-like-map): Bind key M-] to `w3m-zoom-in-image';
	bind key M-[ to `w3m-zoom-out-image'.
	(w3m-info-like-map): Ditto.
	(w3m-mode): Document those new keys.

2002-09-30  KURODA Chihiro  <chee@iijmio-mail.jp>

	* w3m.el (w3m-resize-image-scale): New user option.
	(w3m-toggle-inline-image): Call `w3m-zoom-in-image' without
	resizing.
	(w3m-resize-inline-image-internal): New inline function.
	(w3m-zoom-in-image): New command.
	(w3m-zoom-out-image): New command.

	* w3m-util.el (w3m-image-scale): New macro.

	* w3m-image.el (w3m-resize-image-by-rate): New function.

	* w3m-e21.el (w3m-create-resized-image): New function.

2002-09-21  Kahlil HODGSON  <dorge@tpg.com.au>

	* w3m.el (ffap-url-regexp): Make sure it is non-nil.

2002-09-27  Katsumi Yamaoka  <yamaoka@jpl.org>
	Follow the change in Gnus.

	* mime-w3m.el (mime-w3m-mode-ignored-keys): New variable.
	(mime-w3m-setup): Use it.

2002-09-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-lynx-like-map): Unbind the key "N" to the command
	`w3m-namazu' in order to avoid binding collision to
	`w3m-view-next-page'.  Thanks to Satoshi TAOKA for his report.
	(w3m-mode): Fix its docstring for `w3m-antenna-add-current-url'.
	Thanks to Satoshi TAOKA and Yoichi NAKAYAMA for the advice.

2002-09-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-expire-all): Don't expire
	sure if not shimbun folder.

2002-09-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-make-contents): Set date string.
	Remove the part which is not considered as the body.

	* shimbun/shimbun.el (shimbun-make-date-string): Accept the 5th
	optional argument, `timezone'.

2002-09-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Ignore byte-compile warnings for the dummy autoloads,
	mis-judging of cl run-time functions and the obsoleteness of
	`make-local-hook' under Emacs CVS.

2002-09-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3mhack.el (w3mhack-examine-modules): Do not compile
	`mew-shimbun.el' with old Mew.

	* mew-w3m.el (top): Avoid byte-compile error and warning for old
	Mew. Do not push 'mew-w3m-cid-retrieve' for old Mew.

2002-09-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-arrived-setup): Use 0 instead of nil as the initial
	value for the new obarray.

	* w3m-filter.el (w3m-filter-setup): Use 0 instead of nil as the
	initial value for the new obarray.

2002-09-24  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (top): Add comment for expire.
	(mew-shimbun-expires): New user variable.
	(mew-shimbun-expire-all, mew-shimbun-expire)
	(mew-shimbun-expire-day): New functions.

2002-09-22  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-mode): Fix typo in its docstring.

2002-09-20  Kahlil HODGSON  <dorge@tpg.com.au>

	* w3m.el (w3m-fontify-bold): Permit class attributes, newlines or
	whitespaces in the tag.
	(w3m-fontify-underline): Ditto.

2002-09-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-treat-drive-letter): New constant.
	(w3m-url-to-file-name): Check `w3m-treat-drive-letter'.

	* w3m-dtree.el (w3m-dtree-directory-name): Check
	`w3m-treat-drive-letter'.

2002-09-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-filter.el (w3m-filter-rules): Add 'assahi shimbun' rule.
	(w3m-filter-asahi-shimbun): New function.

2002-09-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-unseen-remove-one): Use
	`mew-cinfo-set-fld|msg|time|size' instead of `mew-cinfo-set'.

2002-09-05  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-antenna.el (w3m-antenna-setup): Check new entries registered
	in `w3m-antenna-sites'.
	(w3m-antenna-shutdown): Return the value of `w3m-antenna-alist'.
	(w3m-antenna-check-all-sites): Simplified.
	(w3m-about-antenna): Do not call `w3m-antenna-setup'.

2002-09-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.2 from emacs-w3m-1_3 branch.

	* w3m.el (w3m-init-file): Changed its default value.

	* Makefile.in (PACKAGE): Use `emacs-w3m' instead of `w3m_el'.

	* w3m-antenna.el (w3m-antenna-make-summary-function): Use
	`function-item' instead of `const'.
	(w3m-antenna-sort-changed-sites-function): Ditto.
	(w3m-antenna-sort-unchanged-sites-function): Ditto.
	(w3m-antenna-hns-last-modified): Asynchronized.
	(w3m-antenna-last-modified): Removed.
	(w3m-antenna-check-site): New function
	(w3m-antenna-check-site-after): New function.
	(w3m-antenna-check-sites): Removed.
	(w3m-antenna-check-all-sites): New function.
	(w3m-about-antenna): Asynchronized.
	(w3m-about-antenna-edit): Reset post-data after its content is displayed.
	(w3m-antenna-edit-reset-post-data): New function.

2002-09-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-init-file): Changed its default value.
	(toplevel): When Emacs is running without interactive terminal, do
	not load the startup file and do not evaluate `w3m-load-hook'.
	Load a byte compiled startup file safely.

2002-09-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-mailto-url-popup-function-alist): New user option.
	(w3m-view-this-url-1): Don't save a window configuration for
	mailto urls here.
	(w3m-goto-mailto-url): Save a window configuration while composing
	a mail message; popup a mail window if the major-mode of a mail
	buffer matches to `w3m-mailto-url-popup-function-alist'.

2002-09-01  Andrew M. Scott  <ascott@sedona.ch.intel.com>

	* w3m-weather.el (w3m-weather-default-area): Fix typo in its
	docstring.

2002-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el: Provide the feature `w3m' before loading an init file or
	evaluating `w3m-load-hook'.
	Suggested by Seiichi NAMBA <sn@asahi-net.email.ne.jp>.

2002-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-alist): Share the
	regexp templates.
	(shimbun-zdnet-x-face-alist): Blur the default face.
	(shimbun-get-headers): Arrange the return value in the reverse
	order.

2002-08-28  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-alist): Add `biztrends'.

2002-08-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-init-file, w3m-load-hook): New option.
	(toplevel): Load `w3m-init-file' and run `w3m-load-hook'.

2002-08-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el: Require `custom' for Emacs 19 because of the
	function `custom-initialize-set'.

2002-08-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el: Clean up hook options.
	(toplevel): Define the dummy function of `w3m-update-tab-line'.
	(w3m-mode-hook, w3m-fontify-after-hook, w3m-select-buffer-hook):
	Clean up its default value to nil.
	(w3m-display-hook, w3m-delete-buffer-hook): Minimize its default
	value and use `w3m-custom-hook-initialize' as the initialize
	function.
	(w3m-arrived-setup-hook, w3m-arrived-shutdown-hook): Abolished.
	(w3m-arrived-setup-functions, w3m-arrived-shutdown-functions,
	w3m-mode-setup-functions, w3m-display-functions): New interanal
	variables.
	(w3m-arrived-setup): Refer `w3m-arrived-setup-functions' instead
	of `w3m-arrived-setup-hook'.
	(w3m-arrived-shutdown): Refer `w3m-arrived-shutdown-functions'
	instead of `w3m-arrived-shutdown-hook'.
	(w3m-fontify): Call `w3m-header-line-insert' by itself.
	(w3m-next-buffer, w3m-delete-buffer, w3m-delete-other-buffers):
	Call `w3m-select-buffer-update' by itself.
	(w3m-clean-hook-options): New function.
	(w3m-mode): Call `w3m-clean-hook-options', and run functions
	registered to `w3m-mode-setup-functions'.
	(w3m-goto-url): Call `w3m-select-buffer-update' by itself, and Run
	functions registered to `w3m-display-functions'.
	(w3m-select-buffer-update): Call `w3m-update-tab-line'.

	* w3m-util.el (w3m-custom-hook-initialize): New function.

	* w3m-xmas.el: Cancel the last change and refer
	`w3m-display-functions' instead of `w3m-display-hook'.

	* w3m-e21.el (toplevel): Add `w3m-setup-favicon' to
	`w3m-display-functions', `w3m-favicon-load-cache-file' to
	`w3m-arrived-setup-functions', `w3m-favicon-save-cache-file' to
	`w3m-arrived-shutdown-functions', and add `w3m-setup-header-line'
	and `w3m-setup-widget-faces' to `w3m-mode-setup-functions'

	* w3mhack.el (w3mhack-load-path) [Mule]: Add the path of bitmap.el
	to `load-path'.

	* w3m.el (w3m-select-buffer-hook): Renamed from
	`w3m-change-buffer-hook'.
	(w3m-next-buffer): Accept a numerical argument.
	(w3m-previous-buffer): Accept a numerical argument, and call
	`w3m-next-buffer'.
	(w3m-delete-buffer): Call `w3m-next-buffer' instead of
	`w3m-previous-buffer'.

	* w3m.el (w3m-delete-buffer-hook): Change its default value.
	(w3m-change-buffer-hook): New option.
	(w3m-delete-other-buffers-hook, w3m-previous-buffer-hook,
	w3m-next-buffer-hook): Abolished.
	(w3m-next-buffer): Run `w3m-change-buffer-hook' instead of
	`w3m-next-buffer-hook'.
	(w3m-previous-buffer): Run `w3m-change-buffer-hook' instead of
	`w3m-previous-buffer-hook'.
	(w3m-delete-buffer): Not call `w3m-select-buffer-update', which is
	added to `w3m-delete-buffer-hook'.
	(w3m-delete-other-buffers): Likewise.  Run
	`w3m-delete-buffer-hook' instead of `w3m-delete-other-buffers-hook'.

2002-08-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (toplevel): Remove expressions to register hook functions
	to `w3m-delete-buffer-hook', `w3m-delete-other-buffers-hook',
	`w3m-display-hook', and `w3m-fontify-after-hook'.
	(w3m-mode-hook, w3m-fontify-after-hookk, w3m-display-hook,
	w3m-arrived-setup-hook, w3m-arrived-shutdown-hook,
	w3m-delete-buffer-hook, w3m-delete-other-buffers-hook,
	w3m-previous-buffer-hook, w3m-next-buffer-hook): Changed their
	default values to avoid inconsistency of their customize.
	(w3m-toolbar): Fix its help messages.
	(w3m-arrived-file, w3m-keep-arrived-urls,
	w3m-db-history-display-size): Fix their docstrings.
	(w3m-history): Moved to avoid a byte compile warning.

	* w3m-xmas.el (toplevel): Remove an expression to register
	`w3m-xmas-update-tab-in-gutter' to `w3m-display-hook'.
	(w3m-xmas-show-current-title-in-buffer-tab): Remove expressions to
	handle `w3m-display-hook' from the form to change its value.

	* w3m-e21.el (toplevel): Remove expressions to register hook
	functions to `w3m-display-hook', `w3m-arrived-setup-hook',
	`w3m-arrived-shutdown-hook', `w3m-mode-hook',
	`w3m-fontify-after-hook', `w3m-next-buffer-hook',
	`w3m-previous-buffer-hook', `w3m-delete-buffer-hook' and
	`w3m-delete-other-buffers-hook'.

2002-08-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-delete-buffer-hook): New hook.
	(w3m-other-delete-buffers-hook): Ditto.
	(w3m-previous-buffer-hook): Ditto.
	(w3m-next-buffer-hook): Ditto.
	(w3m-view-this-url-new-session-in-background): Fixed docstring.
	(w3m-next-buffer): Run `w3m-next-buffer-hook'.
	(w3m-previous-buffer): Run `w3m-previous-buffer-hook'.
	(w3m-delete-buffer): Run `w3m-delete-buffer-hook'.
	(w3m-delete-other-buffers): Run `w3m-delete-other-buffers-hook'.
	(w3m-pack-buffer-numbers): New function.
	(w3m-delete-buffer-hook): Add `w3m-pack-buffer-numbers'.
	(w3m-delete-other-buffer-hook): Add `w3m-pack-buffer-numbers'.

	* w3m-util.el (w3m-buffer-number): New inline function.
	(w3m-buffer-set-number): Ditto.

	* w3m-e21.el (w3m-update-tab-line): New function.
	(w3m-mode-hook): Add `w3m-update-tab-line'.
	(w3m-fontify-after-hook): Ditto.
	(w3m-previous-buffer-hook): Ditto.
	(w3m-next-buffer-hook): Ditto.
	(w3m-delete-buffer-hook): Ditto.
	(w3m-delete-other-buffers-hook): Ditto.
	(w3m-tab-width): Changed default value to 16.
	(w3m-tab-line): Calculate tab width dynamically.

2002-08-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-output-coding-system,
	w3m-halfdump-command-arguments): Use 'utf-8 when `w3m-m17n'
	with Mule-UCS environment.
	(w3m-charset-coding-system-alist): Add Windows Code Point.
	(w3m-current-content-charset): New buffer-local variable.
	(w3m-clear-local-variables, w3m-copy-local-variables): Handle it.
	(w3m-decode-buffer): Set `w3m-current-content-charset'.
	(w3m-rendering-half-dump): Use
	`w3m-current-content-charset' when `w3m-m17n' or `w3mmee'.

2002-08-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Encode the value
	of X-From-R13 before it is refered as the from address.

2002-08-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-lynx-like-map): Change the key `C-c w' to `C-c M-w'
	for the command `w3m-delete-other-buffers'.
	(w3m-info-like-map): Ditto.

2002-08-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (emacs-w3m-version): Reset for development series toward
	emacs-w3m-1.4.

2002-08-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-history): Call `w3m-db-history' instead of goto
	`about://db-history/'.

2002-08-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-delete-other-buffers): New user command.
	(w3m-lynx-like-map): Bind the key `C-c w' to the command
	`w3m-delete-other-buffers'.
	(w3m-info-like-map): Ditto.
	(w3m-select-buffer-mode-map): Bind the key to the command
	`w3m-select-buffer-delete-other-buffers'.
	(w3m-select-buffer-delete-other-buffers): New user command.

2002-08-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-check-header-tags): Ignore case of tags.
	(w3m-about-db-history): Accept range specification in URL.
	(w3m-db-history-display-size): New option.
	(w3m-db-history): Refer it.

	* w3m-antenna.el (w3m-antenna-html-skeleton): Add link to
	about://antenna-edit/.
	(w3m-about-antenna-edit): New function.  This is an experimental
	imprement of the editor for Antenna sites.

2002-08-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (char-after): Byte-optimize it for old Emacsen.
	(char-before): Ditto.

2002-08-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mhonarc.el (shimbun-mhonarc-rot13-table): New
	constant.
	(shimbun-mhonarc-rot13-decode): New function.
	(shimbun-make-contents): Call the above function to decode the
	field of X-From-R13.

2002-08-23  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-view-this-url-new-session-in-background):
	New user option.
	(w3m-view-this-url-1): Use it; enclose `w3m-goto-url' with
	`save-window-excursion'.

	* w3m-form.el (w3m-form-resume): Confirm `value' for text form
	is a string.

2002-08-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (ffap-url-regexp): Fix last change.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (ffap-url-regexp): Modify the value to make it match to
	nntp urls.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (very-slow): New rule.

	* attic/addpath.el: New file.

2002-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el: Require `cl' when compiling to provide the function
	`gensym'.  It is needed to byte-compile this file alone because of
	the w3m-proc macros.
	* w3m-image.el: Ditto.
	* w3m-bitmap.el: Don't bother to load cl-macs.

2002-08-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-display-message-enable-logging): New variable.
	(w3m-display-message): Use it.

2002-08-21  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-scan): Support Mew 3.0.64
	or later.

2002-08-21  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-macosx-jp.el: New file.
	* shimbun/sb-fml.el (shimbun-get-headers): Use `shimbun-index-url'
	instead of `shimbun-url-internal'.

	* shimbun/sb-redhat.el: Fix.

2002-08-18  OHASHI Akira  <bg66@koka-in.org>

	* shimbun/sb-redhat.el: New file.

2002-08-15  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-retrieve-url): Disable reflesh
	feature.  Move point to top of buffer.

2002-08-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-top-level-domain): New
	variable.
	(shimbun-asahi-url): Use it.
	(shimbun-asahi-from-address): Use it.
	(shimbun-asahi-get-headers-in-the-list-page): Enhance the
	uniqueness of Message-IDs.
	(shimbun-asahi-get-headers-in-the-top-page): Ditto.

2002-08-08  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-w3m-retrieve-1): Do not make error but return nil,
	even if decoding is failed.

2002-08-08  Nishimoto Masaki  <nishimoto@gaju.org>

	* w3m-proc.el (w3m-process-with-environment): Copy
	`process-environment' before `getenv' is called, in order to avoid
	putting side effects to environment variables.

2002-08-07  Takenobu Sugiyama  <sugiyama@ae.advantest.co.jp>

	* shimbun/sb-nikkansports.el (shimbun-nikkansports-groups-alist):
	Follow the change of the Web site.

2002-08-02  Hiroya Murata  <hiroya@use-ebisu.co.jp>

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers-in-the-list-page):
	Follow the change of the Web site.

2002-08-01  TOMITA Yoshinori  <yoshint@flab.fujitsu.co.jp>

	* shimbun/sb-fml.el (shimbun-get-headers): Go to the beginning of
	a buffer before searching for index patterns.

2002-07-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Follow the
	change of the Web site.

2002-07-31  YAMASAKI  <tyms_ml@plum.freemail.ne.jp>

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-make-story-article): Go to the beginning of
	a buffer before searching for a significant pattern.
	(shimbun-slashdot-jp-make-comment-article): Ditto.
	(shimbun-slashdot-jp-make-story-headers): Ditto.
	(shimbun-slashdot-jp-make-comment-headers): Ditto.

2002-07-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-asahi.el (shimbun-asahi-get-headers-in-the-list-page):
	Follow the change of the Web site.

2002-07-30  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-content-start):
	Follow the change of the Web site.

2002-07-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/mew-shimbun.el (toplevel): Make the dummy function
	`mew-set-file-modes' allow one argument.

2002-07-29  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-pilot-link.el (shimbun-pilot-link-group-path-alist):
	Add unix-ng entry.

2002-07-25  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (toplevel): Bind `mew-set-file-modes' and
	`mew-file-mode' to avoid byte-compile warnings.
	(mew-shimbun-retrieve-article, mew-shimbun-re-retrieve-article):
	Use `mew-set-file-modes' if exist.

2002-07-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e21.el (w3m-ucs-to-char): Return char for tilde by default.

2002-07-17  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3.1 from emacs-w3m-1_3 branch.

2002-07-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mime-w3m.el (toplevel): Bind `mime-preview-condition' to avoid
	byte-compile warnings.
	(mime-w3m-insinuate): Install code to overwrite
	`mime-preview-condition' which is already initialized before this
	functions is called.

2002-07-11  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-image-viewer): New option.
	(w3m-content-type-alist): Refer it.

	* shimbun/sb-f1fan.el (shimbun-make-contents): Call
	`shimbun-header-insert-and-buffer-string' to insert <base> tag.

	* shimbun/sb-vinelinux.el (shimbun-make-contents): Insert <html>,
	<head>, <base> and <body> tag.

	* shimbun/sb-ruby.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-pcweb-column.el (shimbun-make-contents): Call
	`shimbun-header-insert-and-buffer-string' to insert <base> tag.

	* shimbun/sb-ibm-dev.el (shimbun-make-contents): Call
	`shimbun-header-insert-and-buffer-string' to insert <base> tag.

	* shimbun/sb-wired.el (shimbun-wired-content-start): Update.
	(shimbun-wired-content-end): Update.

2002-07-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-decoder-alist): Don't examine the existence of w3m
	command when compiling.
	(w3m-dirlist-cgi-program): Ditto.

2002-07-09  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mailarc.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Insert <base> tag.

2002-07-09  Hironori FUJII  <fujii@chi.its.hiroshima-cu.ac.jp>

	* w3m.el (w3m-highlight-current-anchor): Don't infloop at the
	beginning of a buffer.

2002-07-09  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-fml.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-kantei.el (shimbun-make-contents): Insert <base> tag.

	* shimbun/sb-mailman.el (shimbun-mailman-make-contents): Use
	`shimbun-header-insert-and-buffer-string'.

	* shimbun/sb-text.el (shimbun-make-contents): Use
	`shimbun-header-insert-and-buffer-string'.

	* shimbun/shimbun.el (shimbun-header-insert-and-buffer-string):
	New function.

	* w3m-perldoc.el (w3m-about-perldoc): Install workaround to
	specify the place in which pod2html generates its cache files.
	Adjust links pointing other perldocs.

2002-07-08  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-namazu.el (shimbun-namazu-group-url-alist): Add
	migemo entry.

2002-07-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-mode): Make `list-buffers-directory' to buffer
	local variable.
	(w3m-goto-url): Set title of the URL to `list-buffers-directory'.

	* w3m-tabmenu.el (w3m-switch-buffer): Bind
	`completion-ignore-case' to `t'.

2002-07-08  OKAZAKI Tetsurou  <okazaki@be.to>

	* configure.in: Use `AC_PATH_EMACS' instead of `AC_CHECK_EMACS'.

	* aclocal.m4 (AC_PATH_EMACS): New macro.
	(AC_CHECK_EMACS): Removed.

2002-07-08  SAITO Takuya  <reed@lily.freemail.ne.jp>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Not insert
	`Reply-To' header.

2002-07-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.3 from emacs-w3m-1_3 branch.

2002-07-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (byte-optimize-form-code-walker): Advise to make it
	optimize throughout the and/or forms.
	(max-specpdl-size): Increase the value by 5 times for Mule 2.

2002-07-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-accept-japanese-characters): Don't call the external
	command when compiling.
	(examining the value for `w3m-command'): Ditto.

2002-07-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-lynx-like-map): Use the key `(control space)'
	instead of `C- ' for the command `w3m-history-store-position'
	under XEmacs.

2002-06-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3mhack.el (w3mhack-nonunix-lispdir): New option.
	(w3mhack-nonunix-icondir): Ditto.
	(w3mhack-nonunix-dryrun): Ditto.
	(w3mhack-nonunix-install): New function.

2002-06-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (DOCS): Add `TIPS'.

2002-06-26  Ando Tsutomu  <ando-tom@ff.iij4u.or.jp>

	* w3m-weather.el (w3m-weather-completion-table): Fix typo.

2002-06-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-info-like-map): Remove redundant code.

2002-06-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-anchors): Put `w3m-name-anchor' property to
	point-max().
	(w3m-fontify): Remove `w3m-name-anchor' handling.
	(w3m-search-name-anchor): Move in the screen.

2002-06-26  Tadashi Watanabe  <watanabe@sigmaitec.co.jp>

	* w3m.el (w3m-info-like-map): Don't use FSF Emacs style key format
	for XEmacs.

2002-06-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (toplevel): Stricten the pattern to detect w3m version.
	(w3m-info-like-map): Changed key bindings of `w3m-shift-left' and
	`w3m-shift-right'.

2002-06-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-use-ange-ftp): Chenged its default value to nil.

2002-06-21  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-retrieve-1): Specify -no-cookie option only when
	the w3m command is configured to accept it.

2002-06-03  Hidetaka Iwai <tyuyu@mb6.seikyou.ne.jp>

	* sb-texfaq.el (shimbun-texfaq-group-path-alist): Fix path
	to get latest articles.

2002-06-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el (octet-type-filter-alist): Fixed parenthesis.
	(octet-filter-call1, octet-filter-call2, octet-filter-call2-extra):
	Enclose call-process with as-binary-process.

2002-05-31  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* octet.el (octet-find-file): Bind `buffer-read-only', only while
	calling `octet-buffer'.

2002-06-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.8 from emacs-w3m-1_2 branch.

2002-06-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el: Require `w3m-e19' for Emacs 19 to be able to compile
	this module alone.

2002-06-18  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-mailarc.el: New file.

	* shimbun/sb-quickml.el: Ditto.

2002-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-search.el (w3m-search): Don't extract a default word from
	the header line.

2002-06-18  NOKUBI Takatsugu  <knok@daionet.gr.jp>

	* shimbun/sb-marc-aims.el: New file.

2002-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-header-line-insert): Use the property `keymap'
	instead of `local-map' for the recent Emacsen; add a help echo;
	fix a typo.

	* w3m-xmas.el (w3m-setup-header-line): Remove.

2002-06-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-e19.el: Remove many emulating functions on the condition
	that APEL should be used; require `cl' only when compiling;
	require `pcustom' instead of `custom'.
	(compose-mail): New function.
	(read-passwd): Autoload "ange-ftp".

	* w3m-proc.el (read-passwd): Autoload "w3m-e19" for Emacs 19.

	* w3m-util.el (cancel-timer): Autoload "timer" for not only Mule 2
	but also Emacs 19.

	* w3m.el: Require `w3m-e19' for Emacs 19.

	* w3mhack.el (w3mhack-emacs-major-version): New constant.
	(TopLevel): Silence the byte-compiler for not only Mule 2 but also
	Emacs 19.
	(w3mhack-mdelete): New function.
	(w3mhack-examine-modules): Use it to make the code simple.
	(w3mhack-generate-colon-keywords-file): Be sure to go to the
	beginning of each file before looking for colon keywords (I
	noticed that `insert-file-contents' doesn't always position point
	to the top).

	* README.ja: Update for the use of Emacs 19.

2002-05-30  Kevin Rodgers  <kevin.rodgers@ihs.com>

	NOTE: The following changes have been posted to the emacs-w3m
	mailing list, they were not installed in the CVS repository at the
	time.  The original article has been archived in:

	http://emacs-w3m.namazu.org/ml/msg03472.html

	* w3m-e19.el: New file.

	* w3m.el: Require `w3m-e19' for Emacs 19.
	(w3m-key-binding): Replace the widget `other' with `const'.

	* w3mhack.el (w3mhack-examine-modules): Include w3m-e19.el in the
	listing for Emacs 19.

	* README: Update for the use of Emacs 19.

2002-06-13  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-prepare-content): When cdr of
	`w3m-content-prepare-functions' element is not function,
	call `w3m-prepare-content' recursively.
	(w3m-content-prepare-functions): Add "application/xhtml+xml" entry.

2002-06-13  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-make-contents): Remove image tags
	to `a1100.g.akamai.net'.

2002-06-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-uri-replace-alist): New user option.
	(w3m-uri-replace): New function.
	(w3m-goto-url): Call `w3m-uri-replace'.

2002-06-05  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-muchy.el (shimbun-muchy-content-start): New variable.
	(shimbun-muchy-content-end): Ditto.
	(shimbun-make-contents): Just remove advertisements or so and
	call next method.

2002-06-02  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-e21.el (w3m-ucs-to-char): Don't define it when already defined.

	* w3m-xmas.el (w3m-ucs-to-char): Ditto.

2002-06-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.7 from emacs-w3m-1_2 branch.

	* w3m-weather.el: Require CL when this module is byte-compiled.
	(w3m-weather-completion-table): Fix typos, which are noticed by
	Ando Tsutomu <ando-tom@ff.iij4u.or.jp> in [emacs-w3m:03487].

2002-06-03  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-kde.el (shimbun-kde-reverse-flag): Set this variable
	to t.
	(shimbun-get-headers): Set URL properly.
	Do not use `nreverse' for HEADERS.

2002-05-31  Mito <mito@mxa.nes.nec.co.jp>

	* w3m-weather.el (w3m-weather-completion-table): Fix "niigata-kaetsu".

2002-05-30  Kenichi SATO <ksato@iijmio-mail.jp>

	* sb-sponichi.el (shimbun-sponichi-groups): Add golf and battle.
	(shimbun-get-headers): Follow the change of the Web site.
	Modify regexp to get flash articles.
	(shimbun-get-headers): Change Message-ID format.

2002-05-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-make-ccl-coding-system): Make it recallable for
	the existing coding-systems (we can now reload w3m.elc under
	XEmacs 21.5-b6 and later).

2002-05-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-retrieve-1): Don't decode the contents when
	redirect.

2002-05-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (define-ccl-program): Remove advice when non-MULE.
	It might be specified by pccl.elc if it has been mis-compiled for
	XEmacs with MULE.

	* w3m.el (w3m-delete-frame-maybe): Don't delete the current frame
	if it is the sole frame in the screen.

2002-05-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-zdnet.el (shimbun-make-contents): Small clean up.

2002-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-geocrawler.el (customize-save-variable): Shut old
	Emacsen up when compiling.
	* shimbun/sb-makanai.el (md5): Ditto.
	* w3m-xmas.el (unicode-to-char): Shut XEmacs 21.5-b5 and earlier
	up when compiling.

2002-05-29  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-make-html-contents): Insert HTML,
	HEAD, BASE, and BODY tag.

	* shimbun/sb-zdnet.el (shimbun-get-headers): Restore Message-ID
	format.
	(shimbun-zdnet-groups): Abolishded.
	(shimbun-groups): New method.
	(shimbun-get-headers): Small clean up.

2002-05-28  Kenichi SATO <ksato@iijmio-mail.jp>

	* sb-zdnet.el (shimbun-zdnet-group-url-alist): Abolishded.
	(shimbun-zdnet-group-alist): New variable.
	(shimbun-zdnet-groups): Refer `shimbun-zdnet-group-alist'.
	(shimbun-index-url): Ditto.
	(shimbun-zdnet-content-end): Relaxed.
	(shimbun-zdnet-comp-get-headers): Removed.
	(shimbun-zdnet-gamespot-get-headers): Ditto.
	(shimbun-get-headers): Reimplemented.
	(shimbun-make-contents): Remove links and images at
	`ad.zdnet.co.jp'.

2002-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-geocrawler.el (shimbun-geocrawler-add-group): Clean up.

2002-05-28  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-e21.el (w3m-ucs-to-char): New function.

	* w3m-xmas.el (w3m-ucs-to-char): New function for XEmacs-21.5.

2002-05-28  MIYOSHI Masanori  <miyoshi@boreas.dti.ne.jp>

	* shimbun/sb-makanai.el (shimbun-makanai-scan-articles): Follow
	the change of the Web site.

2002-05-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-geocrawler.el (shimbun-geocrawler-group-alist):
	Changed its default value.
	(shimbun-index-url): Fix typo.
	(shimbun-geocrawler-add-group): New command.

2002-05-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/shimbun.el (shimbun-header-insert): Insert `Reply-To'
	header.

	* shimbun/sb-geocrawler.el: New file.

2002-05-26  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-kde.el: New file.

2002-05-23  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-zdnet.el (shimbun-zdnet-group-url-alist): Changed URL of
	"comp".
	(shimbun-zdnet-expiration-days): New variable.
	(shimbun-zdnet-comp-get-headers): Follow the change of page.

2002-05-20  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-nikkei.el (shimbun-nikkei-groups): Add `main'.

2002-05-20  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-palmwarefan-headers):
	Modify regexp to pick up price from BODY for working around.

2002-05-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mailman.el (shimbun-mailman-make-contents): New
	function separated from `shimbun-make-contents'.
	(shimbun-make-contents): Use it.
	(shimbun-mailman-headers): New function separated from
	`shimbun-headers'; rewrite it to search new articles in the
	reverse order.

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): Don't include
	year, month and day numbers in Message-ID.

2002-05-20  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-ruby.el (shimbun-get-headers): Do not use nreverse
	for HEADERS.

2002-05-19  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-group-path-alist): Add
	palmwarefan entry.
	(shimbun-palmfan-palmwarefan-date-regexp): New constant.
	(shimbun-reply-to): Change email address to brian@palmfan.com
	if GROUP is "palmwarefan".
	(shimbun-palmfan-palmwarefan-headers): New function.
	(shimbun-headers): Call `shimbun-palmfan-palmwarefan-headers' if
	GROUP is "palmwarefan".
	(shimbun-palmfan-news-headers): Do not use nreverse for HEADERS.

2002-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (tarball): Chmod 755 configure.

2002-05-16  Hidetaka Iwai <tyuyu@mb6.seikyou.ne.jp>

	* shimbun/sb-japantimes.el, shimbun/sb-texfaq.el: New files.

2002-05-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-auto-show): Check multiple command like a
	`previous|next-line' or `beginning|end-of-buffer' at the buffer's
	edge.
	(w3m-window-hscroll): New function to rescue for XEmacs with Mule.
	(w3m-current-column, w3m-set-window-hscroll): Chenge method of the
	calculation point.
	the difference points.
	(w3m-horizontal-scroll, w3m-horizontal-on-screen)
	(w3m-horizontal-recenter): Use `w3m-window-hscroll'.
	(w3m-redisplay-this-page): Don't handle store|restore position.
	(w3m-goto-url): If reload or redisplay, restore position of
	history.

2002-05-15  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-after-cursor-move-hook): Add `w3m-auto-show'.
	(w3m-auto-show, w3m-horizontal-scroll-division): New options.
	(w3m-next-anchor, w3m-previous-anchor, w3m-next-form)
	(w3m-previous-form, w3m-next-image, w3m-previous-image): Call
	`w3m-horizontal-on-screen'.
	(w3m-mode): Bind many variables for automatic scrolling when
	`w3m-auto-show' is non-nil.
	(w3m-scroll-left, w3m-scroll-right, w3m-shift-left)
	(w3m-shift-right): Call `w3m-horizontal-scroll'.
	(w3m-horizontal-scroll-done): New buffer local variable.
	(w3m-current-position): Modify initial value.
	(w3m-auto-show, w3m-horizontal-scroll, w3m-horizontal-on-screen):
	New functions.
	(w3m-horizontal-recenter, w3m-beginning-of-line)
	(w3m-end-of-line): Use `w3m-set-window-hscroll' and
	`w3m-current-column'.
	(w3m-store-current-position): Set markers of beginning of line and
	end of line.
	(w3m-check-current-position): Check car of `w3m-current-position'.
	(w3m-current-column, w3m-set-window-hscroll): New functions to
	rescue for XEmacs with Mule.

2002-05-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-form.el (w3m-form-replace): Don't pad the form slot with
	spaces if a string is longer than that width.

2002-05-14  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-vinelinux.el (shimbun-vinelinux-group-path-alist): Add
	entry for Vine Linux 2.5 errata.
	(shimbun-vinelinux-group-path-alist1): Remove.
	(shimbun-get-headers): Don't retrieve index twice.

2002-05-14  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-arrived-p): Move its definition in order to avoid
	byte-compile warning.

	* Makefile.in (default, what-where): Change order.

2002-05-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el: Modify the error message that XEmacs APEL package
	versions 1.23 and later can barely be used to run emacs-w3m.

2002-05-14  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-2ch-parse-page): Add `ID:' to the From
	field, as a comment.

2002-05-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-mode): Suppress compile warning under old Emacsen.

	* Makefile.in (what-where): New rule.

	* w3mhack.el (w3mhack-what-where): New function.
	(locate-library): Make the function silent for Mule first.

2002-05-13  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-horizontal-shift-columns): New user option.
	(w3m-shift-left, w3m-shift-right): New commands.
	(w3m-lynx-like-map, w3m-info-like-map): Add keybind
	`w3m-shift-left' and `w3m-shift-right'.
	(w3m-mode): Modify doc-string for new commands. Bind
	`auto-show-mode' to nil.

2002-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-nikkei.el (shimbun-nikkei-get-headers): New function;
	parse a date string though it is defective; change the id format.
	(shimbun-get-headers): Use it.

2002-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-hist.el (w3m-history-add-arrived-db): Force update the page.

	* shimbun/sb-nikkei.el (shimbun-nikkei-x-face-alist): New face.
	(shimbun-get-headers): Rewrite to adapt it for the new forms on
	the server.

2002-05-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-mailman.el: Require `cl' when compiling.
	(shimbun-headers): Use an empty string instead of `0' for a date
	header; reverse the order of the return value.

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Don't
	include useless infos; eval the value for each time to load it.
	(report-emacs-w3m-bug): Bind `print-length' and `print-level' with
	nil.

2002-05-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-menubar): Modify the label for report-emacs-w3m-bug.
	(w3m-lynx-like-map): Replace the key `C-c C-b' with `C-c C-v' for
	`w3m-history-restore-position'; replace the key `C-c b' with
	`C-c C-b' for `report-emacs-w3m-bug'.
	(w3m-info-like-map): Ditto.
	(w3m-mode): Add a document for `report-emacs-w3m-bug'.

	* w3mhack.el: Check for the validity on APEL also for XEmacs with
	MULE.

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Add
	(featurep 'mule) and (featurep 'file-coding).

2002-05-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-download): Modify string of the prompt.
	(w3m-prepare-content): Add 5th optional argument `retry'. If not
	determine content-type, ask its.

2002-05-07  Yoichi NAKAYAMA  <yoichi@FreeBSD.org>

	* shimbun/sb-savannah.el: New file.

2002-04-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el (report-emacs-w3m-bug): Bind `after-load-alist' to
	nil while loading the file itself; examine system info in the
	`w3m-mode' buffer.

2002-04-27  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bug.el (report-emacs-w3m-bug-system-informations): Add
	`mule-version' and `Meadow-version'.
	(report-emacs-w3m-bug): Fix when info is a function.

	* w3m.el (w3m-menubar): Add many functions.

2002-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bug.el: New file.

	* w3m.el: Autoload "w3m-bug" for `report-emacs-w3m-bug'.
	(w3m-lynx-like-map): Bind `report-emacs-w3m-bug' to C-cb.
	(w3m-info-like-map): Ditto.

	* w3m-om.el (compose-mail): New function.

	* w3mhack.el: Check for the validity on APEL.

2002-04-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-arrived-modify): New function.
	(w3m-local-attributes): If set Content-type in arrived DB, return
	it.
	(w3m-redisplay-this-page, w3m-redisplay-and-reset)
	(w3m-redisplay-with-content-type): New commands.
	(w3m-redisplay-with-charset): Use `w3m-arrived-modify'.
	(w3m-lynx-like-map): Bind all new commands and modify bind for
	`w3m-redisplay-with-charset'.
	(w3m-info-like-map): Ditto.
	(w3m-mode): Document them.
	(w3m-goto-url): If reload is 'redisplay, do redisplay only. Modify
	content-type decided method at local URL.
	(w3m-about-header): Display `Modifer Information'.
	(w3m-header-line-insert): Display modifers when type are setting.

2002-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-horizontal-recenter): New command.
	(w3m-beginning-of-line): New command.
	(w3m-end-of-line): New command.
	(w3m-lynx-like-map): Bind them.
	(w3m-info-like-map): Bind them.
	(w3m-mode): Document them.

2002-04-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-face-inherit): Default to t.

	* w3m-om.el (w3m-om-use-overstrike-to-make-face-bold): New var.
	(custom-declare-face): Advise it to use `set-face-bold-p' to make
	faces bold by overstriking.

	* w3m-util.el (w3m-default-face-colors): New constant.
	* w3m.el (w3m-bold-face, w3m-underline-face): Use it.

2002-04-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-insert): Don't put the
	transparent face except for Emacs 20.

	* w3m.el (w3m-key-binding): Don't manipulate key bindings if
	w3m.elc has not been loaded (it will fix the problem that the face
	colors might not be specified under Mule 2).

2002-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-transparent-face): Remove.
	(w3m-bitmap-image-insert): Use the list form instead of
	`w3m-bitmap-transparent-face' to make the overlay transparent.

2002-04-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bitmap.el (w3m-bitmap-convert-arguments)
	(w3m-bitmap-image-face-inherit): New customize values.
	(w3m-create-image): Append argument `w3m-bitmap-convert-arguments'
	when call `w3m-imagick-start-convert-buffer'.
	(w3m-insert-image): If `w3m-bitmap-image-face-inherit' is non-nil,
	inherit the face of bitmap image from the face of text at point.

2002-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (distclean): Remove autom4te*.cache rather than
	autom4te.cache.

	* w3m-bitmap.el (w3m-bitmap-transparent-face): New face.
	(w3m-bitmap-image-insert): Put `w3m-bitmap-transparent-face' to
	overlays; don't use overlays to highlight bitmap images.
	(w3m-insert-image): Add `w3m-bitmap-image-face' to a bitmap image
	as a text property.

2002-04-23  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-toggle-inline-images-internal): Call
	`w3m-insert-image' with the url of image.

	* w3m-xmas.el (w3m-insert-image): Add dummy argument.

	* w3m-e21.el (w3m-insert-image): Add dummy argument.

	* w3m-bitmap.el (w3m-bitmap-cache-image-hook): New hook.
	(w3m-create-image): Run `w3m-bitmap-cache-image-hook' with `url'
	when use the cached image.
	(w3m-insert-image): Add 4th argument `url'. Do nothing which have
	no 'w3m-image property or differ its url.

2002-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	Make emacs-w3m can be compiled by `make slow' with no warnings.
	* Makefile.in (slow): Don't echo the values for EMACS and FLAGS.
	* octet.el: Require `w3m-util' for `w3m-insert-string'.
	* w3m-bitmap.el: Autoload w3m-om for `move-to-column-force'.
	* w3m-hist.el: Load w3m-kwds.el for old Emacsen.
	* w3m-image.el: Require `pcustom' for old Emacsen; bind some
	external vars when compiling.
	* w3m.el: Enclose the definitions for `w3m-current-title' and
	`w3m-current-url' with `eval-and-compile', and move them forward.
	(w3m-url-at-point): Enclose with `eval-and-compile'.
	(w3m-add-local-hook): Ditto.
	(w3m-about-retrieve): Call `base64-decode-string' indirectly to
	avoid compile warn under old Emacsen.

	* w3m-util.el (w3m-insert-string): Fix doc-string.

2002-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-2ch.el (shimbun-article): Don't encode with base64;
	use `w3m-insert-string' to insert raw encoded article.

2002-04-22  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-news-headers): Build
	message-id without `http://'.

2002-04-22  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-region): Call `w3m-process-stop' first.

	* shimbun/mew-shimbun.el (mew-shimbun-scan-replace):
	`mew-pop-scan-header' require multi-byte buffer.

	* mew-w3m.el (mew-w3m-view-inline-image): Toggle
	`mew-w3m-auto-insert-image'.
	(mew-w3m-cid-retrieve-hook): New customize hook.
	(mew-w3m-cid-retrieve): Run `mew-w3m-cid-retrieve-hook'.

2002-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-insert-string): Prevent doubling expansion on
	the arg.

	* shimbun/sb-palmfan.el (shimbun-palmfan-news-headers): Bind
	unbound var `body'.

2002-04-20  Hiroya Murata  <lapis-lazuli@pop06.odn.ne.jp>

	* mime-w3m.el (mime-w3m-cid-retrieve): Use `w3m-insert-string'
	instead of `insert' to prevent multibyte/unibyte problems.
	* octet.el (mime-preview-octet, mime-view-octet): Ditto.
	* shimbun/sb-hns.el (shimbun-article): Ditto.

	* w3m-util.el (w3m-insert-string): Moved from shimbun/shimbun.el.

	* shimbun/shimbun.el (shimbun-make-mime-article): Keep the
	uniqueness on cid's.
	(shimbun-insert-string): Moved to w3m-util.el and renamed to
	`w3m-insert-string'.
	(shimbun-article): Replace `shimbun-insert-string' with
	`w3m-insert-string'.

2002-04-21  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-mailman.el: New file.
	* shimbun/sb-pilot-link.el: Ditto.

2002-04-20  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-attributes): Set type to downcase.

2002-04-20  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el (shimbun-palmfan-news-headers): Add
	SUBJECT to BODY if SUBJECT contains a link.

2002-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-about-header): Don't use `make-string' to make a
	separator text under Mule.

2002-04-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-cid-retrieve): Support w3m-bitmap.el when
	retrieve `cid image' (Mew cache has multibyte strings, but work
	buffer is unibyte).

2002-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3mhack.el (TopLevel): Not to get the byte-code for
	`current-column' inlined under old Emacsen.

	* w3m-bitmap.el (w3m-bitmap-emacs-broken-p): Use
	`ad-Orig-current-column' rather than `current-column' if it has
	already been defined.
	(TopLevel): Not to get the byte-code for `current-column' inlined
	under the broken Emacsen in case when compiling manually.

2002-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (TopLevel) Require `cl' and possibly load cl-macs.
	The following changes are for old Emacsen.
	(w3m-bitmap-emacs-broken-p): New constant.
	(TopLevel): Warn if Emacs has a bug on managing column numbers.
	(w3m-bitmap-move-to-column): Allow the 3rd arg `strictly'; don't
	modify the buffer contents unless the 3rd arg has been set.
	(w3m-bitmap-defadvice-if-broken): New macro; use it to advise the
	functions `current-column', `move-to-column',
	`move-to-column-force', `next-line' and `previous-line' to work
	under the broken Emacsen.
	(w3m-bitmap-byte-indexed-characters-p): Remove.
	(TopLevel): Don't alias `w3m-bitmap-current-column' to
	`current-column'; don't alias `w3m-bitmap-move-to-column-force' to
	`move-to-column-force'.
	(w3m-bitmap-substitute-key-definitions): Remove.
	(w3m-bitmap-image-insert): Replace `w3m-bitmap-current-column'
	with `current-column'; replace `w3m-bitmap-move-to-column-force'
	with `move-to-column-force'.
	(w3m-bitmap-image-delete-internal): Ditto.

	* w3m-om.el (move-to-column-force): New function using
	`move-to-column-strictly'.

	* shimbun/shimbun.el (shimbun-insert-string): Avoid compile warn.

2002-04-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-2ch-parse-page): Don't stop retrieving
	headers if the article number is `1'.

	* shimbun/shimbun.el (shimbun-make-mime-article): Removed garbage.
	(shimbun-insert-string): New macro.
	(shimbun-article): Use it.

2002-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-next-line): Handle
	`temporary-goal-column'.

2002-04-18  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-halfdump-command-arguments): Fix last change.

2002-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-byte-indexed-characters-p): New macro.
	The following changes are for old Emacsen.
	(w3m-bitmap-move-to-column): New function.
	(w3m-bitmap-move-to-column-force): Use it.
	(w3m-bitmap-next-line): New command.
	(w3m-bitmap-previous-line): New command.
	(w3m-bitmap-substitute-key-definitions): New function; add it to
	`w3m-mode-hook' as the one-shot function.

2002-04-17  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-halfdump-command-arguments): Add `-I e' option to
	w3m under Japanese environment.

2002-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mime-w3m.el (mime-w3m-cid-retrieve): Use `mime-decode-string',
	`mime-entity-body' and `mime-entity-encoding' instead of
	`mime-insert-entity-content' to make it work even if the entity
	buffer is multibyte.

2002-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-2ch.el (shimbun-2ch-request-article): Rename from
	`shimbun-request-article'.

2002-04-17  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-palmfan.el: New file.
	(shimbun-palmfan-news-headers): Bug fixed (catch stop tag).

2002-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-article): Encode body content with base64.

2002-04-16  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-article)
	(mew-shimbun-re-retrieve-article): Set unibyte at work buffer.

2002-04-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el (shimbun-2ch-parse-page): Fixed regexp.
	(shimbun-headers): Fixed error URL.

	* w3m.el (w3m-check-header-tags): Renamed from w3m-check-link-tags.
	(w3m-check-header-tags): Parse base tag too.
	(w3m-rendering-buffer-1): Use it.
	(w3m-prepare-text-content): Don't use w3m-base-url.

2002-04-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* shimbun/sb-2ch.el (shimbun-request-article): Remove unbound vars.
	(shimbun-headers): Bind `ita' and `sure'.

2002-04-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-2ch.el: New file.

	* shimbun/shimbun.el (shimbun-retrieve-url): Set no-decode argument
	of w3m-retrieve as nil.

2002-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-insert): Replace `insert' with
	`insert-before-markers'.
	(w3m-bitmap-image-delete-internal): Delete trailing newlines.
	(w3m-insert-image): Don't check for the existence of an image.

	* w3m.el (w3m-history-current-url-face): Provide `font' temporally
	to avoid loading it and `cl'.

2002-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-get-overlay): Don't clear the
	`evaorate' property here.
	(w3m-bitmap-image-insert-internal): Rename to
	`w3m-bitmap-image-insert'; change the meaning of the 2nd arg
	`image' (see docs); allow the optional arg `ovr'; don't scan for
	an overlay here; handle `w3m-bitmap-image-count'; use overlays
	to highlight bitmap images.
	(w3m-bitmap-image-insert): Remove old one.
	(w3m-bitmap-image-delete-internal): Allow the 2nd arg `ovr'; don't
	scan for an overlay here; clear the `evaorate' property here.
	(w3m-bitmap-image-delete): Allow the 2nd arg `ovr'; don't scan
	for an overlay here; don't delete an overlay.
	(w3m-bitmap-image-delete-string): Remove.
	(w3m-insert-image): Scan for an overlay here; don't use text props
	to highlight bitmap images.
	(w3m-remove-image): Scan for an overlay here.

2002-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-cleanup): Remove.
	(w3m-bitmap-image-get-overlay): Clear the `evaorate' property in
	an overlay temporally.
	(w3m-bitmap-image-insert-internal): Put the `evaorate' property in
	an overlay; return an overlay.
	(w3m-bitmap-image-insert): Use the return value of
	`w3m-bitmap-image-insert-internal' instead of to call
	`w3m-bitmap-image-get-overlay'.
	(w3m-bitmap-image-insert-string): Remove.
	(w3m-insert-image): Use `w3m-modify-plist' to cleanup plist; don't
	move the point.
	(w3m-remove-image): Replace `w3m-bitmap-image-insert-string' with
	`w3m-bitmap-image-insert-internal'.

	* w3m-util.el (w3m-modify-plist): New function.

2002-04-12  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-proc.el (w3m-process-kill-surely): New internal variable.
	(w3m-process-kill-process): When `w3m-process-kill-surely' is
	non-nil, wait for the completion to kill process surely.

2002-04-07  NOMIYA Masaru  <nomiya@ttmy.ne.jp>

	* shimbun/sb-asahi-html.el (shimbun-asahi-html-url): Changed
	default value.

	* shimbun/sb-asahi.el (shimbun-asahi-url): Ditto.

2002-04-12  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* shimbun/sb-xemacs.el (shimbun-xemacs-groups): Add xemacs-design.

2002-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-get-overlay): Speed up a bit.
	(w3m-bitmap-image-insert-internal): Replace `current-column' with
	`w3m-bitmap-current-column'; call `w3m-add-text-properties' only
	when props are specified; use `overlay-end' dynamically (fix a bug
	I've made); replace `move-to-column-force' with
	`w3m-bitmap-move-to-column-force'.
	(w3m-bitmap-image-delete-internal): Make the 2nd arg optional;
	replace `current-column' with `w3m-bitmap-current-column'; replace
	`move-to-column-force' with `w3m-bitmap-move-to-column-force';
	guess the end position of an overlay by itself when the 2nd arg is
	omitted.
	(w3m-bitmap-image-delete): Remove the 2nd arg.
	(w3m-bitmap-image-delete-string): Alias to
	`w3m-bitmap-image-delete-internal' instead of defining as a
	function.
	(w3m-insert-image): Don't use the length of a bitmap image.
	(w3m-remove-image): Ditto.

	* w3m-om.el (move-to-column-force): Remove.

2002-04-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-image.el (w3m-imagick-convert-async-exec): Change default
	value for Meadow.

2002-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-favicon-converted): New buffer-local variable.
	(w3m-setup-favicon): Set w3m-favicon-converted as nil.
	(w3m-buffer-favicon): If w3m-favicon-converted is non-nil, don't
	start conversion.
	Set w3m-favicon-converted as t before conversion.

2002-04-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-about-retrieve): Change behavior according to
	whether the return value of `base64-decode-string' is multibyte or
	not.

	* w3m-image.el (w3m-imagick-convert-async-exec): New user option.
	(w3m-imagick-start): Use `call-process' when
	`w3m-imagick-convert-async-exec' is nil.
	(w3m-imagick-convert-buffer): Don't use stdin because `convert'
	can not handle an animation GIF that it input from stdin.

2002-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-bitmap.el (w3m-create-image): Use w3m-process-do-with-temp-buffer
	instead of w3m-process-do.
	(w3m-create-image): Don't call `set-buffer-multibyte' if old mule.

	* w3m-image.el (w3m-imagick-start-convert-buffer): Removed needless
	`concat'.

	* w3m-bitmap.el (w3m-create-image):
	Call `w3m-imagick-start-convert-buffer' instead of
	`w3m-imagick-convert-data'.

2002-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-current-column): New function for old
	Emacsen; alias to `current-column' for the recent Emacsen.
	(w3m-bitmap-move-to-column-force): New function for old Emacsen;
	alias to `move-to-column-force' for the recent Emacsen.

2002-04-10  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-image.el (w3m-imagick-convert-data): Check buffer size.
	(w3m-imagick-start-convert-data): Ditto.
	(w3m-imagick-start-convert-buffer): Don't use output file
	(Because it sometimes causes multiple files).

2002-04-10  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3mhack.el (w3mhack-examine-modules): Reverse the turn of the
	load with `bitmap' and `un-define'.

2002-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-face): New face.
	(w3m-bitmap-image-insert-internal): Put text properties.
	(w3m-bitmap-image-insert): Pass text properties argument to
	`w3m-bitmap-image-insert-internal'.
	(w3m-bitmap-image-add-text-properties): Remove.
	(w3m-insert-image): Pass text properties to
	`w3m-bitmap-image-insert'.

2002-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-bitmap.el (w3m-bitmap-image-get-overlay): Use
	`line-beginning-position' and/or `line-end-position'.
	(w3m-bitmap-image-insert-internal): Ditto.
	(w3m-bitmap-image-delete-internal): Ditto.
	(w3m-bitmap-image-add-text-properties): Ditto.

	* w3m-om.el: Require `w3m-bitmap' if BITMAP-MULE is available.
	(move-to-column-force): Define it if void.

2002-04-09  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-bitmap.el: Convert CRLF to LF.
	(w3m-display-graphic-p): Ruturn nil if no window-system.
	(w3m-image-type-available-p): Ruturn nil if not found "convert".

	* w3mhack.el (w3mhack-examine-modules): Don't byte-compile
	w3m-bitmap.el under XEmacs or FSF Emacs-21.

	* w3m.el (w3m-fontify): When delete duplicated empty line, keep
	'w3m-name-anchor property surely.

	* w3m-e20.el (top): Require 'w3m-bitmap if have BITMAP.

2002-04-09  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3mhack.el (w3mhack-examine-modules): Don't byte-compile
	w3m-bitmap.el if bitmap.el is not installed.
	(w3mhack-examine-modules): Add condition to w3m-bitmap.el check.

	* w3m-bitmap.el: New file.

	* w3m-e20.el (w3m-create-image, w3m-insert-image,
	w3m-remove-image, w3m-image-type-available-p,
	w3m-display-graphic-p, w3m-display-inline-images-p): Alias to
	`ignore'. Bitmap image implementation is moved to w3m-bitmap.el.
	(w3m-bitmap-image-cache-alist, w3m-bitmap-image-use-cache,
	w3m-bitmap-image-cleanup, w3m-bitmap-image-buffer,
	w3m-bitmap-image-get-overlay, w3m-bitmap-image-insert-internal,
	w3m-bitmap-image-insert, w3m-bitmap-image-insert-string,
	w3m-bitmap-image-delete-internal, w3m-bitmap-image-delete,
	w3m-bitmap-image-delete-string,
	w3m-bitmap-image-add-text-properties): Move to w3m-bitmap.el.

2002-04-09  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m-e20.el (w3m-create-image): Return nil if
	w3m-imagick-convert-buffer is failed.
	(w3m-insert-image): Not insert image if image is nil.

2002-04-08  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-coding-system): Change default value to
	'iso-2022-7bit-ss2 when use w3mmee under mule environment.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-xmas.el (w3m-create-image): Resize gif images, too.

2002-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-make-glyph): Remove unused var.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-char-to-int): New alias.
	(w3m-form-mee-attr-unquote): Use it.
	(w3m-form-mee-new): Ditto.

	* w3m-xmas.el (toplevel): Require 'w3m-image.
	(w3m-make-glyph): New inline function.
	(w3m-create-image): Resize images when w3m-resize-images is non-nil.

	* w3m-form.el (w3m-string-to-char-list)[XEmacs]: Use string-to-list
	instead of string-to-char-list.
	(w3m-int-to-char): New alias.
	(w3m-form-mee-select-value): Use it.

2002-04-08  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m-e20.el (w3m-bitmap-image-insert-internal): Begin the overlay
	on `begion-of-line'.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el: Update URL for xlhtml.

2002-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el: Don't require `pcustom'.

2002-04-08  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-image.el: New file.

	* w3m.el (w3m-halfdump-command-arguments): Specify single-row-image
	dump option instead of image.
	(w3m-goto-mailto-url): Added optional post-data argument and use it.
	(w3m-goto-url): Set post-data of w3m-goto-mailto-url.

	* w3m-util.el (w3m-imagick-convert-program,
	w3m-imagick-convert-buffer, w3m-imagick-convert-data): Moved to
	w3m-image.el.

	* w3m-e21.el (toplevel): Require 'w3m-image.
	(w3m-resize-images, w3m-imagick-start-convert-data,
	w3m-imagick-start-convert-buffer, w3m-imagick-start,
	w3m-resize-image): Moved to w3m-image.el;
	(w3m-create-image): Follow the change in w3m-resize-image.
	(w3m-favicon-usable-p): Renamed from w3m-imagick-convert-usable-p.
	(w3m-use-favicon): Follow the change above.
	(w3m-favicon-cache-data): Fixed typo.
	(w3m-favicon-cache-retrieved): Ditto.
	(w3m-retrieve-favicon): Ditto.

	* w3m-e20.el (w3m-image): Require 'w3m-image.

2002-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (multibyte-string-p): Alias to `stringp' if MULE,
	otherwise `ignore'.

	* w3m-om.el (multibyte-string-p): Alias to `stringp'.

	* w3m-util.el: Require `pcustom' for old Emacsen.

2002-04-05  Takenobu Sugiyama  <sugiyama@ae.advantest.co.jp>

	* shimbun/sb-nikkansports.el: Follow the change of the Web site.

2002-04-05  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-retrieve): Revert previous change.
	(w3m-w3m-dump-head-source): Add argument orig-url;
	Cache header and body using orig-url.
	(w3m-w3m-retrieve): Don't cache header here;
	Return error response when follow redirection number exceeds
	w3m-follow-redirection;
	Pass orig-url to w3m-w3m-retrieve-1.
	(w3m-w3m-retrieve-1): Add argument orig-url;
	Call w3m-dump-head-source with orig-url argument.
	(w3m-redirect-with-get): Changed default value to t.

2002-04-05  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m-e20.el (w3m-bitmap-image-insert): Fix (point) -> pos.

2002-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-input-map): If menu string is empty,
	use href string instead.

	* w3m.el (w3m-w3m-dump-head-source): Fixed caching logic.
	(w3m-w3m-retrieve): Use cache if available after redirection.

2002-04-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-e20.el (top): Avoid byte-compile warnings when not found
	`bitmap'.
	(w3m-image-type-available-p): Return nil if not have `bitmap'.

2002-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-fontify-anchors): Set default icon type as ico.

	* w3m-e21.el (w3m-buffer-favicon): Asynchronous implementation.

2002-04-04  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3mhack.el (top): Avoid byte-compile error for `w3m-ucs.el' with
	Emacs20 when it has `un-define' and `bitmap'.
	(w3mhack-load-path): Add the path of `bitmap.el' on Emacs20.

2002-04-04  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-request-arguments): Use -header option if no cookie
	nor no body.
	(w3m-w3m-retrieve-1): Delete temp-file only when it exists.

	* w3m-e21.el (w3m-imagick-start-convert-data): Don't use
	string-as-unibyte (no use).

2002-04-04  Taiki SUGAWARA  <taiki.s@cityfujisawa.ne.jp>

	* w3m.el (w3m-toggle-inline-images-internal): Support
	w3m-bitmap-image.

	* w3m-e21.el (w3m-imagick-convert-program): Move to w3m-util.el.
	(w3m-imagick-convert-buffer): Ditto.
	(w3m-imagick-convert-data): Ditto.

	* w3m-util.el (w3m-imagick-convert-program): Move from w3m-e21.el.
	(w3m-imagick-convert-buffer): Ditto.
	(w3m-imagick-convert-data): Ditto.

	* w3m-e20.el (w3m-bitmap-image-cache-alist): New variable.
	(w3m-bitmap-image-use-cache): Ditto.
	(w3m-bitmap-image-cleanup): New function.
	(w3m-bitmap-image-buffer): Ditto.
	(w3m-bitmap-image-get-overlay): Ditto.
	(w3m-bitmap-image-insert-internal): Ditto.
	(w3m-bitmap-image-insert): Ditto.
	(w3m-bitmap-image-insert-string): Ditto.
	(w3m-bitmap-image-delete-internal): Ditto.
	(w3m-bitmap-image-delete): Ditto.
	(w3m-bitmap-image-delete-string): Ditto.
	(w3m-bitmap-image-add-text-properties): Ditto.
	(w3m-display-graphic-p): New implementation.
	(w3m-display-inline-images-p): Ditto.
	(w3m-image-type-available-p): Ditto.
	(w3m-create-image): New implementation. It use w3m-bitmap-image-*.
	(w3m-insert-image): Ditto.
	(w3m-remove-image): Ditto.

2002-04-03  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify): Put invisible and intangible properties at
	the duplicated empty lines instead of delete them.

2002-04-03  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-resize-image): Asynchronous implementation.
	(w3m-imagick-start-convert-data): New function.
	(w3m-imagick-start-convert-buffer): Ditto.
	(w3m-imagick-start): Ditto.
	(w3m-create-image): Rewrite to resize images asynchronously.
	(w3m-insert-image): Don't resize.

2002-04-03  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-check-link-tags): Relax the pattern to detect
	headers.

2002-04-02  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-submit): Confirm when posting from secure page
	to normal page.

	* w3m.el (w3m-redirect-with-get): New user option.
	(w3m-w3m-retrieve): If w3m-redirect-with-get is non-nil, use GET
	method after redirection; Ask user to use POST data after redirection.
	(w3m-w3m-attributes): Set w3m-current-redirect as a cons cell of
	(CODE . LOCATION).
	(w3m-w3m-dump-head-source): Don't cache content if the response code is
	one of 302, 303, 307.
	(w3m-w3m-retrieve): Change POST redirection behavior according to
	response code.
	(w3m-retrieve-and-render): Confirm leaving secure pages.

	* octet.el (mime-preview-octet): Change behavior according to
	whether the return value of mime-entity-content is multibyte or not.
	(mime-view-octet): Ditto.

	* w3m.el (w3m-w3m-retrieve): Don't call w3m-cache-request-header
	when type is nil.

2002-04-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-follow-redirection): New user option.
	(w3m-w3m-attributes): Set w3m-current-redirect as nil.
	(w3m-cookie-command-arguments): Abolish.
	(w3m-request-arguments): Use cookie only when w3m-use-cookies is
	non-nil.
	(w3m-header-arguments): New function.
	(w3m-w3m-retrieve): Treat redirection when w3m-follow-redirection
	is non-nil.
	(w3m-w3m-retrieve-1): Renamed from w3m-w3m-retrieve.
	(w3m-prepare-content): Don't care w3m-current-redirect.
	(w3m-goto-url): Ditto.

	* w3m-form.el (w3m-form-new): Added argumnet enctype.
	(w3m-form-enctype): New macro.
	(w3m-form-plist): Changed definition.
	(w3m-form-put-property): Ditto.
	(w3m-form-make-form-data): Removed optional argument urlencode;
	Encode form data acording to w3m-form-enctype.
	(w3m-form-mee-new): Set enctype field.
	(w3m-form-parse-and-fontify): Parse enctype.
	(w3m-form-submit): Don't pass enctype argumnet.

2002-04-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-fontify-anchors): Put a property of
	`w3m-name-anchor' as a list.
	(w3m-move-point-for-localcgi): Use `w3m-search-name-anchor'.
	(w3m-search-name-anchor): Use `member' when compare a name with
	`w3m-name-anchor'. Fix continuous name-anchor.

2002-03-30  NAKAJIMA Mikio  <minakaji@osaka.email.ne.jp>

	* shimbun/sb-m17n.el (shimbun-m17n-group-path-alist): Add
	an entry of mule@m17n.org.

2002-03-29  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-element-body)
	(mew-shimbun-get-id-msgs, mew-shimbun-unseen-check)
	(mew-shimbun-unseen-setup): Use `match-string' instead of
	`mew-match'.
	(top): Define `mew-local-folder-alist' to avoid byte-compile
	warings.
	(mew-shimbun-goto-folder, mew-shimbun-retrieve-article): Support
	Mew 3.0.55 or later.

	* mew-w3m.el (mew-mime-text/html-w3m): Use `match-string' instead
	of `mew-match'.

	* w3m.el (w3m-fontify-anchors): Modify the point for
	'w3m-name-anchor property when its has an empty body.

2002-03-28  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-dump-head-source-command-arguments)[w3mmee]: Don't
	add Accept-Language header option.
	(w3m-cookie-command-arguments)[w3mmee]: Don't add Cookie header option.
	(w3m-request-arguments): New function to generate -request option.
	(w3m-w3m-retrieve)[w3mmee]: Use w3m-request-arguments to make request
	header and body.

2002-03-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-url-at-point (ffap)): Strip text props under XEmacs.
	(ffap-url-regexp): Modify the value to make it match to https urls
	for Emacs 19, 20 and XEmacs.

2002-03-27  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-e21.el (w3m-tab-drag-mouse-function): Fix problem when dragged
	mouse position is outside of the original frame.

	* w3m.el (w3m-version): New variable.
	(toplevel): Detect w3m version.
	(w3m-user-agent): New user option.
	(w3m-add-user-agent): Ditto.
	(w3m-w3m-retrieve): Add User-Agent: field if w3m-add-user-agent is
	non-nil.

	* w3m-e21.el (w3m-tab-drag-mouse-function): New function.
	(w3m-tab-make-keymap): Add mouse-1, mouse-2, drag-mouse-1 and
	drag-mouse-2.

	* w3m-cookie.el (w3m-cookie-set): Fixed docstring.

2002-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-xmas.el (w3m-find-coding-system): Alias to ignore if the
	function `find-coding-system' is not available.
	(w3m-make-ccl-coding-system): Check whether the function
	`make-ccl-coding-system' is available instead of checking the
	feature `mule' to determine what function should be aliased to.
	(coding-system-list): Alias to ignore if it is not available.
	(define-ccl-program): Check whether it is available instead of
	checking the feature `mule' to determine if it is aliased to
	`ignore'.
	(w3m-detect-coding-with-priority): Quote
	`w3m-default-coding-system'.

2002-03-24  Nix  <nix@esperi.demon.co.uk>

	* w3m-xmas.el (w3m-detect-coding-with-priority): New macro, handle
	non-MULE XEmacsen.
	(w3m-detect-coding-region): Use it.

2002-03-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el (w3m-cookie-1-set): Fixed problem when no `Expires',
	ignore is ignored.

2002-03-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-cookie.el (w3m-cookie-url, w3m-cookie-domain,
	w3m-cookie-secure, w3m-cookie-name, w3m-cookie-value,
	w3m-cookie-path, w3m-cookie-version, w3m-cookie-expires,
	w3m-cookie-ignore): Define as macro.
	(w3m-cookie-set-url, w3m-cookie-set-domain, w3m-cookie-set-secure,
	w3m-cookie-set-name, w3m-cookie-set-value, w3m-cookie-set-path,
	w3m-cookie-set-version, w3m-cookie-set-expires,
	w3m-cookie-set-ignore): Removed.
	(w3m-cookie-create): New implementation.
	(w3m-about-cookie): Call `setf' instead of `w3m-cookie-set-ignore'.

2002-03-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-fontify-anchors): Changed anchor name property position.
	(w3m-lynx-like-map): Bind w3m-cookie as `M-k'.
	(w3m-info-like-map): Ditto.

2002-03-26  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-cookie.el (w3m-cookie-save): Use `w3m-time-newer-p' instead of
	`w3m-time-lapse-seconds'.

2002-03-26  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el (w3m-cookie): New command.
	(w3m-about-cookie): Do nothing if w3m-use-cookies is nil.

	* w3m.el (toplevel): Added autoload setting for w3m-about-cookie;
	Added autoload setting for w3m-cookie.

	* w3m-cookie.el (w3m-cookie-store): Don't replace if ignored cookie.
	(w3m-cookie-retrieve): Don't use cookie which is ignored.
	(w3m-about-cookie): New function.

	* w3m-e21.el (w3m-setup-favicon): Do nothing when w3m-current-url
	is nil.

	* w3m.el (w3m-goto-url): Force reload if w3m-current-redirect is set.
	(w3m): If w3m-current-url is nil, erase buffer.

	* w3m-util.el (w3m-time-less-p): Abolish.
	(w3m-assoc-ignore-case): Moved from w3m-cookie.el and rewrote not to
	use assoc* (because it's cl function).

	* w3m-cookie.el (w3m-cookie-retrieve): Use w3m-time-newer-p instead of
	w3m-time-less-p.
	(w3m-cookie-1-set): Ditto.
	(w3m-assoc-ignore-case): Moved to w3m-util.el.

2002-03-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el (w3m-cookie-1-set): Use w3m-time-less-p instead of
	w3m-time-lapse-seconds.
	(w3m-cookie-retrieve): Ditto.

	* w3m-util.el (w3m-time-less-p): New inline function.

	* w3m.el (w3m-current-redirect): New buffer local variable.
	(w3m-clear-local-variables): Add w3m-current-redirect.
	(w3m-copy-local-variables): Treat w3m-current-redirect.
	(w3m-w3m-attributes): Set w3m-current-redirect instead of
	w3m-current-refresh when 30x response.
	(w3m-prepare-content): Use w3m-current-redirect instead of
	w3m-current-refresh.
	(w3m-goto-url): Do nothing but w3m-goto-url after retrieval if
	w3m-current-redirect is set.

2002-03-25  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m-cookie.el (w3m-cookie-file): Changed default value.
	(w3m-cookie-save): Follow the above change.
	(w3m-cookie-load): Ditto.

2002-03-25  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-w3m-attributes): Don't call w3m-cookie-set.
	(w3m-w3m-dump-head-source): Call w3m-cookie-set.
	(w3m-cookie-command-arguments): Set `-no-cookie';
	Don't set cookie_accept_domains, cookie_reject_domains.

	* w3m-cookie.el (toplevel): Require 'w3m.
	(w3m-cookie-accept-domains): Moved from w3m.el.
	(w3m-cookie-reject-domains): Ditto.
	(w3m-cookie-accept-bad-cookies): New user option.
	(w3m-cookie-file): Ditto.
	(w3m-cookie-set-ignore): Fix.
	(w3m-cookie-retrieve): Remove expired cookies.
	(w3m-cookie-trusted-host-p): Fixed domain match.
	(w3m-cookie-1-set): Treat all cookies.
	Accept bad cookies according to w3m-cookie-accept-bad-cookies.
	(w3m-cookie-init): New variable.
	(w3m-cookie-clear): New function.
	(w3m-cookie-save): Ditto.
	(w3m-cookie-load): Ditto.
	(w3m-cookie-setup): Ditto.
	(w3m-cookie-shutdown): Rewrite.
	(w3m-cookie-set): Call w3m-cookie-setup; Changed API.
	(w3m-cookie-get): Call w3m-cookie-setup.

	* w3m.el (w3m-goto-url): Don't resume form from history when POST.

2002-03-24  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-cookie.el: New file.

	* w3m-form.el (w3m-form-resume): Use cdr of forms if car is t
	(Just in case).
	(w3m-form-parse-and-fontify)[w3m]: Search form structure according
	to fid.

	* w3m.el (toplevel): Added autoload setting for w3m-cookie.
	(w3m-use-cookies): New user option.
	(w3m-cookie-accept-domains): Ditto.
	(w3m-cookie-reject-domains): Ditto.
	(toplevel): Bind system-time-locale as "C" while calling
	format-time-string.
	(w3m-w3m-attributes): Call w3m-cookie-set;
	When 30x response is received, set w3m-current-refresh as
	(0 . Location).
	(w3m-cookie-command-arguments): New function.
	(w3m-w3m-retrieve): Use it.
	(w3m-retrieve-and-render): Mark w3m-current-forms as `not history'
	if retrieval failed.
	(w3m-prepare-content): If w3m-current-refresh rate is 0, do nothing.
	(w3m-quit): Call `w3m-cookie-shutdown'.

2002-03-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-decode-encoded-contents): Convert encoding to lower
	case before checking alist.

2002-03-24  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-yahoo.el (shimbun-get-headers): Changed date format.

2002-03-24  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* w3m.el (w3m-remove-redundant-spaces): New implementation.
	(w3m-about-retrieve): Call `insert-buffer-substring' instead of
	`insert-buffer'.
	(w3m-rendering-unibyte-buffer): Ditto.
	(w3m-rendering-multibyte-buffer): Ditto.
	(w3m-prepare-text-content): Ditto.

	* shimbun/shimbun.el (shimbun-retrieve-url-buffer): Removed.
	(shimbun-headers): Call `shimbun-retrieve-url' instead of
	`shimbun-retrieve-url-buffer'.

	* shimbun/sb-ding.el (shimbun-get-headers): New method.

	* shimbun/sb-glimpse.el (shimbun-get-headers): Retrieve a decoded
	content.

	* shimbun/sb-gnome.el (shimbun-ding-coding-system): Abolished.
	(shimbun-get-headers): Retrieve a decoded content.

	* shimbun/sb-hns.el (shimbun-hns-article): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-tcup.el (shimbun-headers): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-wired.el (shimbun-get-group-header-alist): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-yahoo.el (shimbun-get-headers): Call
	`shimbun-retrieve-url' instead of `shimbun-retrieve-url-buffer'.

	* shimbun/sb-zdnet.el (shimbun-make-contents): New method to
	remove all advertisements.

2002-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-w3m-attributes): Ignore trailing whitespaces in
	header lines.

2002-03-20  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-view-this-url): Eval action even when anchor is set.

	* w3m-form.el (w3m-form-parse-and-fontify): Clear mapval if it is set.

	* w3m.el (w3m-halfdump-command-arguments)[w3mmee]: Add `image'
	to the -dump argument only if `w3m-treat-image-size' is non-nil.

2002-03-20  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-form.el (w3m-form-parse-and-fontify): If not detect `usemap'
	attribute of `img_alt', use `value' attribute of `input_alt' for
	the select map name; W3M removes `usemap' attribute when
	"display_image=off".

2002-03-19  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-w3m-attributes): Ignore `w3m-document-charset' when
	w3m-m17n.

2002-03-19  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-fontify-images): Parse width and height attributes of
	img_alt.
	(w3m-toggle-inline-images-internal): Set `size' argument of
	w3m-create-image.
	(w3m-highlight-current-anchor): Fixed logic.

	* w3m-xmas.el (w3m-create-image): Added optional argument `size'
	(ignored currently).

	* w3m-e21.el (w3m-imagick-convert-program): Use w3m-which to set
	initial value.
	(w3m-resize-images): New user option.
	(w3m-resize-image): New function.
	(w3m-create-image): Added optional argument `size'; Changed return
	value.
	(w3m-insert-image): Call w3m-resize-image if size is specified.
	(w3m-imagick-convert-buffer): Accept nil for from-type and to-type.

2002-03-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-mee-select-value): Fix.
	(w3m-form-parse-and-fontify): If w3m-type is not w3mmee, use last
	form object as current form.

2002-03-18  KAMO Tomoyuki  <kamo@ITmanage.co.jp>

	* shimbun/sb-tcup.el (shimbun-tcup-get-group-key): Follow the
	structual change of the master site.
	(shimbun-tcup-make-id): Ditto.

2002-03-18  Masamichi Goudge M.D. <Matanuki@Goudge.org>

	* shimbun/sb-orca.el: New file.

2002-03-18  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (w3m-highlight-current-anchor): New implementation.
	(w3m-highlight-current-anchor-1): New function.

	* w3m-form.el (w3m-form-replace): Fixed problem when string is nil.

2002-03-16  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-string-to-char-list): Fixed.

2002-03-13  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-ruby.el (shimbun-get-headers): Make regexp
	more flexible.

2002-03-15  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m-form.el (w3m-form-mee-select-value): Use w3m-output-coding-system
	instead of w3m-current-coding-system.
	(w3m-form-parse-and-fontify)[w3mmee]: Ditto.
	(w3m-form-mee-select-value): Fixed select value.
	(w3m-form-resume): Fixed checkbox resuming.
	(w3m-form-parse-and-fontify): Use `form' instead of `(car forms)';
	Search the form which corresponds to input_alt by fid;
	Use `nconc' instead of `push'.

	* w3m-form.el (w3m-form-mee-select-value): New function.
	(w3m-form-parse-and-fontify)[w3mmee]: Set select value.

	* w3m.el (w3m-halfdump-command-arguments)[w3mmee]: Added image.

	* w3m-form.el (w3m-form-parse-and-fontify): Set the value of form
	only if the method is not internal;
	Add internal form to the w3m-current-forms;
	Treat input type `image' as same as `submit'.
	(w3m-form-mee-attr-unquote): New function.
	(w3m-string-to-char-list): New function/alias.
	(w3m-form-mee-new): New function.
	(w3m-form-parse-and-fontify): Parse w3mmee's form info.
	(w3m-form-input-textarea-keymap): Bind C-g.
	(w3m-form-input-select-keymap): Bind C-g, h,j,k,l.
	(w3m-form-input-map-keymap): Ditto.
	(w3m-form-parse-and-fontify): Set textarea value.

2002-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-form.el (w3m-form-resume): Typo.

2002-03-13  Yuuichi Teranishi  <teranisi@gohome.org>

	* w3m.el (toplevel): Removed autoload setting for
	`w3m-form-parse-buffer'.
	(w3m-clear-local-variables): Don't treat w3m-current-forms any more.
	(w3m-copy-local-variables): Ditto.
	(w3m-additional-command-arguments): Fixed problem when no-proxy host
	has port number other than 80.
	(w3m-rendering-buffer-1): Don't call w3m-form-parse-buffer.
	(w3m-goto-url): Setup w3m-current-forms from history structure.

	* w3m-form.el (w3m-form-parse-buffer): Abolish.
	(w3m-form-parse-forms): Ditto.
	(w3m-form-resume): Set value of `w3m-current-forms'.
	(w3m-fontify-forms): Call `w3m-form-parse-and-fontify' instead of
	`w3m-form-fontify'.
	(w3m-form-parse-and-fontify): New function.
	(w3m-form-input-select): Fix problem when candidate label is "".

2002-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>
	Suggested by HAYASHI Chifumi <chifumi@mscom.or.jp>.

	* w3m-form.el (w3m-form-new): Ignore the 2nd arg `action' if it is
	nil.
	(w3m-form-parse-forms): Don't parse the value of `w3m-current-url'
	if it is nil.

2002-03-13  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-mode-display): Remove
	no meaning `force-mode-line-update'.
	(mew-shimbun-scan): Change to inline function and an
	argument. Add to support Mew's new `mew-local-retrieve' function.
	(mew-shimbun-retrieve, mew-shimbun-retrieve-all)
	(mew-shimbun-re-retrieve, mew-shimbun-re-retrieve-all)
	(mew-shimbun-unseen-check): Call `mew-shimbun-scan' with folder
	name.

2002-03-12  SAITO Takuya <reed@lily.freemail.ne.jp>

	* shimbun/sb-ruby.el (shimbun-index-url): Search articles
	from `(point-max)' for checking all articles.

2002-03-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.6 from emacs-w3m-1_2 branch.

2002-03-11  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m-ucs.el (w3m-euc-japan-encoder): Treat japanese-jisx0208-1978
	as japanese-jisx0208.

	* shimbun/sb-digiko.el (shimbun-get-headers): Fixed regexp.
	* shimbun/sb-h14m.el (shimbun-get-headers): Ditto.
	* shimbun/sb-mew.el (shimbun-get-headers): Ditto.

2002-03-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-view-this-url, w3m-goto-url-new-session,
	w3m-select-buffer-copy-buffer): Remove unused non-global variables.

2002-03-11  Katsumi Yamaoka  <yamaoka@jpl.org>
	Suggested by Yuuichi Teranishi <teranisi@gohome.org> with mod.

	* w3m.el (w3m-no-proxy-domains): New user option renamed from
	`w3m-no-proxy-hosts' and changed the meaning.
	(w3m-additional-command-arguments): Refer to it.

2002-03-10  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (tarball): Fix permissions.

2002-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-command-arguments-alist): Change the meaning that
	the car of each element will be compared with a url instead of a
	hostname.
	(w3m-no-proxy-hosts): New user option.
	(w3m-additional-command-arguments): Look into it.

2002-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m.el (w3m-command-arguments-alist): New user option.
	(w3m-additional-command-arguments): New function.
	(w3m-w3m-retrieve): Use it.
	(w3m-history-current-url-face, w3m-copy-buffer, w3m-about-header):
	Remove unused non-global variables.

2002-03-08  ARISAWA Akihiro  <ari@mbf.sphere.ne.jp>

	* w3m.el (w3m-w3m-attributes) [w3mmee]: Fetch content-encoding from
	"x-w3m-content-encoding" filed.

	* shimbun/sb-impress.el (shimbun-impress-groups-alist): Follow
	the change of PC Watch page.

2002-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* mew-w3m.el (mew-w3m-cid-retrieve): Return lowercase string
	always because `w3m-image-type-alist' has lowercase keys.

2002-03-07  Yoichi NAKAYAMA  <yoichi@eken.phys.nagoya-u.ac.jp>

	* w3m.el (w3m-lynx-like-map): Switch J and K so as to behave like
	w3m.

2002-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* aclocal.m4 (AC_EXAMINE_PACKAGEDIR): Use `(eq 0 foo)' instead of
	`(zerop foo)' because foo might not be a number.
	(AC_PATH_ICONDIR): Ditto.

2002-03-07  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-decoder-alist): Change default commands to `gzip' and
	`bzip2' instead of `gunzip' and `bunzip2' because some broken OS
	and its environment does not work them.

2002-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (datadir): New variable.

2002-03-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m-proc.el (w3m-process-filter): Modify a regexp for "Password:".

2002-03-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install): Don't chdir to shimbun/ while installing
	shimbun modules.
	(install-icons): Don't chdir to icons/ while installing icons.

2002-03-06  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (top): Define `mew-folder-list' and
	`mew-local-folder-list' to avoid byte-compile warings.
	(mew-shimbun-goto-folder): Support Mew 3.0.54 or later.

2002-03-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install): Install all ChangeLog files.
	* w3mhack.el (w3mhack-make-package): List all ChangeLog files
	in the manifest.

2002-03-05  Hideyuki SHIRAI  <shirai@meadowy.org>

	* w3m.el (w3m-local-dirlist-cgi): Set `w3m-current-url' for avoid
	error in `w3m-process-start-process()'.
	(w3m-goto-url): When use w3m-dtree and the URL is local directory,
	change the URL to `about://dtree' securely.

2002-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* w3m-util.el (w3m-function-max-args): Alias to `function-max-args'
	under XEmacs, otherwise define it as a function.
	(symbol-for-testing-whether-colon-keyword-is-available-or-not):
	Use `dont-compile' instead of `eval'.

	* shimbun/mew-shimbun.el (mew-shimbun-goto-folder): Use
	`w3m-function-max-args' to examine how many arguments does
	`mew-summary-ls' take; use `dont-compile' to call `mew-summary-ls'
	with two arguments.

2002-03-02  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Release emacs-w3m-1.2.5 from emacs-w3m-1_2 branch.

2002-03-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-retrieve-article)
	(mew-shimbun-re-retrieve-article): Sort headers by the date.

	* shimbun/sb-slashdot-jp.el
	(shimbun-slashdot-jp-parse-date-string): `12PM' means noon.
	'12AM' means at night.

2002-03-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* shimbun/sb-lump.el (shimbun-lump): Add `check-interval'.
	(shimbun-lump-check-interval): New inline function.
	(shimbun-lump-check-p): Use it.

2002-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-story-count): New
	internal constant.
	(shimbun-slashdot-jp-make-headers): The action when range is not
	set is changed.  Search old stories.
	(shimbun-index-url): Removed.
	(shimbun-slashdot-jp-make-story-headers): Change argument spec.
	Refer the above constant to decide the URL of the index page.
	(shimbun-slashdot-jp-search-comment-head): Ignore a garbage line
	between author and date.

2002-03-01  Yuuichi Teranishi  <teranisi@gohome.org>

	* octet.el (octet-find-file): Decode even in the read-only buffer.

2002-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-lump.el (shimbun-get-group-header-alist): Add the 2nd
	optional argument.
	(shimbun-headers): Call the above function with the 2nd argument.

	* shimbun/sb-wired.el (shimbun-get-group-header-alist): Ignore the
	2nd optional argument.

	* shimbun/sb-slashdot-jp.el: Inherit sb-lump.el.
	(shimbun-headers): Abolished.
	(shimbun-get-group-header-alist): New method.
	(shimbun-slashdot-jp-make-headers): New function.

	* shimbun/sb-slashdot-jp.el (shimbun-make-contents): Bind
	`case-fold-search' to t locally.
	(shimbun-headers): Ditto.

2002-03-01  Hideyuki SHIRAI  <shirai@meadowy.org>

	* shimbun/mew-shimbun.el (mew-shimbun-goto-folder): Follow up
	changes of Mew 3.x.

2002-03-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-threshold):
	Change its customize spec.
	(shimbun-slashdot-jp-sid-url): Follow the above change.
	(shimbun-headers): Ditto.
	(shimbun-slashdot-jp-make-comment-headers): Reverse order.
	(shimbun-slashdot-jp-parse-date-string): Fix.

	* shimbun/sb-slashdot-jp.el (shimbun-make-contents): Follow the
	argument spec change of `shimbun-slashdot-jp-make-story-article'.
	(shimbun-slashdot-jp-make-story-article): Not accept the 2nd
	argument.  Use `shimbun-header-xref' instead of
	`shimbun-slashdot-jp-sid-url' when the URL of the article is
	calulated, in order to protect the change of
	`shimbun-slashdot-jp-threshold'.
	(shimbun-slashdot-jp-make-comment-article): Use
	`shimbun-header-xref' instead of `shimbun-slashdot-jp-sid-url' as
	stated above.
	(shimbun-slashdot-jp-search-comment-head): Only when the 4th
	argument is set, references are checked.

2002-02-28  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-slashdot-jp.el (shimbun-slashdot-jp-threshold): New
	variable.
	(shimbun-slashdot-jp-sid-url): Refer it.
	(shimbun-slashdot-jp-make-comment-headers): Check all articles.
	(shimbun-slashdot-jp-search-comment-head): The message ID of the
	parent article is also added to References:.

	* shimbun/sb-slashdot-jp.el: All stuffs are rewritten.

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Modified regexp.

2002-02-27  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* shimbun/sb-mhonarc.el (shimbun-make-contents): Protect against a
	date string which has both of numerical timezone and country.

2002-02-26  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* Makefile.in (DOCS): Add ChangeLog.1.


Local Variables:
coding: iso-2022-7bit
End:
