2009-06-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-dissect-buffer): Use message-fetch-field instead of
	mail-fetch-field to fetch Content-Description header in order to
	exclude newlines.

2009-06-18  Ulrich Mueller  <ulm@gentoo.org>

	* pgg-gpg.el (pgg-gpg-lookup-key-owner): Handle colon listings
	format used by GnuPG 2.0.11.

2009-06-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-delete-part): Specify gnus-decoded as charset
	to deleted part.

2009-05-30  David Engster  <dengste@eml.cc>

	* nnmairix.el: Remove old documentation in the commentary block.
	(nnmairix-request-group): Do not update active file for nnml back ends.
	(nnmairix-retrieve-headers): Set gnus-nov-is-evil to t for nnimap back
	end so that overview files are ignored.
	(nnmairix-update-groups): Make updating the groups more robust by using
	marks.
	(nnmairix-determine-original-group-from-path): Circumvent mairix bug
	with dollar characters in message-id.

2009-04-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el: Use dns-query instead of query-dns.  Was renamed on
	2008-12-25 in dns.el.

2009-04-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* rfc2047.el (rfc2047-decode-region): Don't skip past `start', which
	could happen if the text is only composed of spaces and/or tabs.

2009-03-03  Brian Sniffen  <bts@evenmere.org>  (tiny change)

	* gnus-draft.el (gnus-draft-send): Bind gnus-message-setup-hook to nil
	when sending a queued message to avoid extra mml tags.

2009-03-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-insert-mime): Don't break parts that mm-uu dissected.

2009-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind rmail-swap-buffers-maybe for Emacs 21~22;
	fbind rmail-msg-restore-non-pruned-header, rmail-swap-buffers-maybe and
	rmail-toggle-header for XEmacs;
	bind rmail-default-file and rmail-default-rmail-file for XEmacs.

2009-02-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-dired.el: Remove autoload for gnus-setup-message.
	(gnus-dired-attach): Fake this-command value to prevent Gnus from
	displaying Gnus logo; always use compose-mail.

2009-02-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-dired.el: Tell autoload that gnus-setup-message is a macro.

2009-02-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-nocem.el (gnus-nocem-groups): Remove invalid NoCeM groups.
	(gnus-nocem-issuers): List currently active issuers; fix custom type.
	(gnus-nocem-verifyer): Default to gnus-nocem-epg-verify if EasyPG is
	available.
	(gnus-nocem-epg-verify): New function.

2009-02-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist): Recognize Konqueror info links.

2009-02-15  Glenn Morris  <rgm@gnu.org>

	* gnus-util.el (rmail-insert-rmail-file-header)
	(rmail-count-new-messages, rmail-show-message): Remove unnecessary
	autoloads.
	(rmail-default-rmail-file): Remove unnecessary declaration.
	(gnus-output-to-rmail): Handle mbox Rmail as well as Babyl Rmail.

2009-02-14  Glenn Morris  <rgm@gnu.org>

	* gnus.el (rmail-default-rmail-file): Remove declaration of deleted
	variable (only used in gnus-util, which declares it anyway).
	(rmail-output-to-rmail-file): Remove autoload of deleted function,
	which was only needed by gnus-art (changed to not use it any more).
	(rmail-insert-rmail-file-header): Remove autoload of deleted function,
	only used in gnus-util, which autoloads it itself.
	(rmail-update-summary): Fix autoload.

	* gnus-art.el (gnus-summary-save-in-mail): Use gnus-output-to-rmail
	rather than rmail-output-to-rmail-file.

2009-02-07  Glenn Morris  <rgm@gnu.org>

	* message.el (rmail-msg-restore-non-pruned-header): Remove unneeded
	autoload of function that no longer exists.
	(rmail-toggle-header): Declare.
	(message-forward-rmail-make-body): Handle mbox Rmail.

2009-01-31  Glenn Morris  <rgm@gnu.org>

	* gnus-sum.el (gnus-summary-next-article): XEmacs-friendly version of
	2009-01-09 change.

2009-01-31  Dave Love  <fx@gnu.org>

	* imap.el (imap-fetch-safe): Bind debug-on-error.
	(imap-debug): Add imap-fetch-safe.

2009-01-26  Teodor Zlatanov  <tzlatanov@jumptrading.com>

	* auth-source.el (auth-source-forget-user-or-password): Clarify docs.
	(auth-source-forget-all-cached): New convenience function.
	(auth-source-user-or-password): Accept list of modes or a single mode.

	* mail-source.el (mail-source-bind, mail-source-set-1): Use list of
	auth-source modes.

	* netrc.el (netrc-machine-user-or-password): Use list of
	auth-source modes.

	* nnimap.el (nnimap-open-connection): Use list of
	auth-source modes.

	* nntp.el (nntp-send-authinfo): Use list of
	auth-source modes.

2009-01-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* auth-source.el: Update docs to reflect epa-file-enable is to be used
	now.

2009-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-pathname-coding-system): Default to the `file-name'
	coding system in XEmacs; add a workaround for XEmacs.

	* lpath.el: Fbind coding-system-aliasee.

2009-01-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-priorities): Protect against nil value
	of current-language-environment.

2009-01-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnfolder.el (nnfolder-read-folder): Check if most-positive-fixnum is
	available at runtime.

2009-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-date-ut): Fix end point of narrowing.

2009-01-11  Aidan Kehoe  <kehoea@parhasard.net>

	* nnfolder.el (nnfolder-read-folder): The (lsh -1 -1) trick to generate
	the greatest positive fixnum value doesn't work under an XEmacs with
	bignum support; use the most-positive-fixnum constant instead,
	available since Emacs 21.1 with cl and XEmacs 21.1.

2009-01-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-next-article): Revert last change by which
	XEmacs gets not to work.

2009-01-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-priorities): Allow the value like
	"Japanese (UTF-8)" of current-language-environment.

2009-01-09  Glenn Morris  <rgm@gnu.org>

	* gnus-sum.el (gnus-summary-next-article): Replace last-command-char
	with last-command-event.

2009-01-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* imap.el (imap-enable-exchange-bug-workaround): Explain auto-detection
	in the doc string.

	* message.el (message-fix-before-sending): Amend comment.

2009-01-08  Dave Love  <fx@gnu.org>

	* imap.el (imap-message-appenduid-1): Fix typo in imap-fetch-safe call.

2009-01-07  David Engster  <dengste@eml.cc>

	* gnus-msg.el (gnus-inews-do-gcc): Fix last patch to deal with
	simplified server definitions by converting it via
	gnus-server-to-method.

2009-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-set-local-parameters): Always evaluate
	parameter's operands.

2009-01-06  David Engster  <dengste@eml.cc>

	* gnus-msg.el (gnus-inews-do-gcc): Reduce to short group name when on
	primary select method (for gnus-group-mark-article-as-read).

2009-01-06  Tassilo Horn  <tassilo@member.fsf.org>

	* gnus-art.el (gnus-treat-display-face): Fix docstring link to point to
	`(gnus)Face', not `(gnus)X-Face'.

2009-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-ucs-to-char): New function.

	* mm-url.el (mm-url-decode-entities): Use it.

	* lpath.el: Fbind decode-char, int-to-char, ucs-to-char and
	unicode-to-char.

2009-01-05  Dave Love  <fx@gnu.org>

	* time-date.el: Require cl for `declare'.

2009-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* time-date.el (format-seconds): Explain `assoc-string'.  Suggested by
	Dave Love.

2009-01-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-fix-before-sending): Add `eight-bit' to
	illegible-text check.

2009-01-03  Michael Olson  <mwolson@gnu.org>

	* nnimap.el (nnimap-retrieve-headers-progress): Handle edge case where
	`headers' is nil.  This can occur if the IMAP server does not have
	permissions to read messages from a folder, but can write new messages
	to the folder.
	(nnimap-request-article-part): Do not insert `data' if it is nil.

	* imap.el (imap-parse-fetch): Courier can insert spurious blank
	characters which will confuse `read', so skip past them.

2009-01-01  Dave Love  <fx@gnu.org>

	* imap.el (imap-string-to-integer): Fix typo.
	(imap-fetch-safe): New function.
	(imap-message-copyuid-1, imap-message-appenduid-1): Use it.

	* nnimap.el (nnimap-find-minmax-uid): Use imap-fetch-safe.

	* imap.el (imap-process-connection-type, imap-debug, imap-open):
	(imap-parse-greeting): Fix doc strings.
	(imap-tls-open, imap-search, imap-message-appenduid-1): Add FIXMEs.
	(imap-parse-flag-list): Make messages unique.
	(imap-parse-body): Fix comments.  Add comment on Exchange 2007.

	* nnimap.el: Fix author email.
	(nnimap-split-rule): Add FIXME comment.
	(nnimap-debug): Fix doc string.

2008-12-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* dns.el (dns-set-servers): Check "Address".  Fix typo.

2008-12-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* dns.el (dns-set-servers): Renamed from dns-parse-resolv-conf.  Call
	nslookup if resolv.conf isn't available.
	(dns-query): Rename from query-dns.
	(dns-query-cached): Rename from query-dns-cached.

2008-12-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-set-article-display-arrow): Make
	overlay-arrow-position and overlay-arrow-string buffer-local; no need
	to check if those variables exist (first appeared in Emacs 18.50).

2008-12-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-line-number-at-pos): New function.

	* spam-report.el (spam-report-process-queue): Use it.

2008-12-24  David Engster  <dengste@eml.cc>

	* gnus-sum.el (gnus-summary-set-local-parameters): Don't bind
	parameters that haven't existed as variables as buffer-local variables.

2008-12-23  Dave Love  <fx@gnu.org>

	* legacy-gnus-agent.el (gnus-agent-unlist-expire-days): Don't use
	cadar.

	* sieve-manage.el (sieve-manage-starttls-p): Renamed from
	imap-starttls-p.
	(sieve-manage-starttls-open): Renamed from imap-starttls-open.

2008-12-22  Dave Love  <fx@gnu.org>

	* imap.el: Fix author email.  Doc fixes.
	(imap-parse-body): Work around assertion failure in bogus Exchange 2007
	reply.

2008-12-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane-max-requests): New constant.
	(spam-report-gmane-wait): New variable.
	(spam-report-gmane-ham, spam-report-gmane-spam)
	(spam-report-url-ping-plain, spam-report-process-queue): Wait only if
	spam-report-gmane-wait is non-nil should be sufficient to avoid DOS-ing
	the server.

	* nnheader.el (nnheader-read-timeout, nnheader-accept-process-output):
	Add explanations.

	* pop3.el (pop3-accept-process-output, pop3-read-timeout): Use
	nnheader-accept-process-output and nnheader-read-timeout if available.
	(pop3-movemail): Use it.

	* message.el (message-check-news-body-syntax): Fix signature check if
	there's an attachment.

2008-12-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el: Add comments to the mm- emulating functions.

2008-12-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-before-startup-hook): Fix doc string.  Reported
	by Stephen Berman <stephen.berman@gmx.net>.

2008-12-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-substring-no-properties): New function.
	(mm-read-charset, mm-subst-char-in-string, mm-replace-in-string)
	(mm-special-display-p): Enable those lambda forms to be byte compiled.
	(mm-string-to-multibyte): Doc fix.

	* mml.el (mml-attach-file): Use mm-substring-no-properties.

2008-12-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-attach-file): Strip text properties from file name.
	(Bug#1574)

2008-12-16  Glenn Morris  <rgm@gnu.org>

	* mm-util.el (mm-charset-override-alist): Declare for compiler.

2008-12-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-generate-mime-1): Prefer the MIME charset that Emacs
	knows since the charset specified might be a bogus alias that
	mm-charset-synonym-alist provides.

2008-12-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-synonym-alist): Add bogus names "UTF8" and
	"ISO_8859-1".

	* gnus-start.el (gnus-backup-startup-file): Improve doc string.

2008-12-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-charset-eval-alist):
	Define it before mm-charset-to-coding-system.
	(mm-charset-to-coding-system): Add optional argument `silent';
	define it before mm-charset-override-alist.
	(mm-charset-override-alist): Add `(gb2312 . gbk)' to the
	default value if it can be used in Emacs currently running;
	silence mm-charset-to-coding-system.

2008-12-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-charset-to-coding-system): Add new argument
	`allow-override' which says whether to use `mm-charset-override-alist'.
	(rfc2047-decode-encoded-words): Use it.

	* mm-util.el (mm-charset-override-alist): Fix custom type;
	add `(gb2312 . gbk)' to choices.

2008-12-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-text-html-render-with-w3m): Make it simple and
	fast.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Ditto.

	* lpath.el: Bind w3m-link-map for Emacs 21, 22, and XEmacs.

2008-12-04  Naohiro Aota  <nao.aota@gmail.com>

	* mm-view.el (mm-inline-text-html-render-with-w3m): Put special keymap
	on links.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Ditto.

2008-12-03  Lute Kamstra  <lute@gnu.org>

	* sha1.el: Remove leading * from docstrings of defcustoms,
	deffaces, defconsts and defuns.

2008-12-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-idna-to-ascii-rhs-1): Protect against local
	users' addresses that don't have domain parts.
	(message-idna-to-ascii-rhs): Use message-narrow-to-headers-or-head
	rather than message-narrow-to-head since there will be the message
	header separator.

2008-12-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nnimap.el (nnimap-retrieve-headers-progress): Don't use nnimap-demule
	since the result is inserted in a unibyte buffer anyway.
	(nnimap-demule-use-string-to-multibyte): Remove.
	(nnimap-demule): Alias it to mm-string-to-multibyte.

2008-11-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnimap.el (nnimap-demule-use-string-to-multibyte): New temporary
	variable for debugging bug#464 and bug#1174.
	(nnimap-demule): Use it.

2008-11-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-find-trace): Handle default score in total
	score calculation correctly.

2008-11-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-send-mail): Just set the buffer to unibyte
	rather than use mm-with-unibyte-current-buffer which does a lot more.
	(message-send-mail-partially): Don't bother with
	mm-with-unibyte-current-buffer since it's already been made unibyte by
	message-send-mail.

2008-11-11  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnrss.el (nnrss-make-hash-index): Debug message of full item.

2008-11-10  Teodor Zlatanov  <tzz@lifelogs.com>

	* netrc.el (netrc-parse): If a list is passed in as FILE, return it.

2008-11-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* starttls.el (starttls-any-program-available): Rewritten so it doesn't
	require itself and to remove `with-no-warnings'.

2008-11-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* starttls.el (starttls-any-program-available): Get the name of the
	available TLS layer program.
	(starttls-open-steam-gnutls, starttls-open-stream): Put port number as
	well as the host name in the "opening" message.

	* auth-source.el (auth-source-cache, auth-source-do-cache)
	(auth-source-user-or-password): Cache passwords and logins by default,
	allow override with `auth-source-do-cache'.
	(auth-source-forget-user-or-password): Allow users to remove cache
	entries if needed.

2008-11-01  Juanma Barranquero  <lekktu@gmail.com>

	* md4.el (md4-buffer): Fix typo in docstring.
	(md4, md4-64): Doc fixes.
	(md4-pack-int32): Reflow docstring.

2008-10-31  Teodor Zlatanov  <tzz@lifelogs.com>

	* ietf-drums.el (ietf-drums-remove-comments): Localize second
	condition-case to only the forward-sexp call.

2008-10-31  Teodor Zlatanov  <tzz@lifelogs.com>

	* ietf-drums.el (ietf-drums-remove-comments): Fix bug with single
	quotes contained.  Make it more robust regardless by an extra
	condition-case wrapper.

2008-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: No need to fbind codepage-setup for Emacs 23.

2008-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnml.el (nnml-request-expire-articles): Check if the function set to
	`nnmail-expiry-target' returns the symbol `delete'.

	* nnfolder.el (nnfolder-request-expire-articles): Ditto.

	* nnmail.el (nnmail-expiry-target): Fix custom type.

2008-10-02  Glenn Morris  <rgm@gnu.org>

	* mm-util.el (mm-codepage-setup): Tweak codepage error.
	Silence compiler warning.

2008-10-01  Magnus Henoch  <mange@freemail.hu>

	* tls.el (open-tls-stream): Show the actual command being
	executed, instead of the format string.

2008-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind codepage-setup for Emacs 23.

2008-09-30  Chong Yidong  <cyd@stupidchicken.com>

	* mml.el (mml-menu): Don't assume mml2015 is bound.

2008-09-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Check if summary window
	exists.

2008-09-27  Glenn Morris  <rgm@gnu.org>

	* gnus-util.el (mail-header-remove-comments): Autoload it.

2008-09-27  Andreas Schwab  <schwab@suse.de>

	* gnus-util.el (gnus-split-references): Strip comments.
	(gnus-parent-id): Likewise.

2008-09-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-confirm-send): Fix version.

2008-09-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-idna-to-ascii-rhs-1): Use
	mail-extract-address-components rather than mail-header-parse-addresses
	that is an alias by default to ietf-drums-parse-addresses that does not
	support non-ASCII names in headers' contents.

2008-09-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* message.el (message-confirm-send): Fixed variable documentation to
	avoid the "y/n" wording.

2008-09-25  Francis Litterio  <flitterio@gmail.com>  (tiny change)

	* message.el (message-set-auto-save-file-name): Save to a different
	filename so multiple messages (especially drafts) can be recovered.

2008-09-24  Teodor Zlatanov  <tzz@lifelogs.com>

	* message.el (message-confirm-send): Add appropriate version.

2008-09-22  Teodor Zlatanov  <tzz@lifelogs.com>

	* mm-view.el (mm-pkcs7-enveloped-magic): Fix extra parenthesis in
	defvar.

2008-09-22  Daiki Ueno  <ueno@unixuser.org>

	* mm-view.el (mm-pkcs7-signed-magic): Use literals.
	(mm-pkcs7-enveloped-magic): Ditto.

2008-09-17  Simon Josefsson  <simon@josefsson.org>

	* sieve-manage.el (sieve-manage-is-string): Accept literals too.
	Reported by Arnt Gulbrandsen <arnt@oryx.com>.

2008-09-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-use-long-group-names): Make t the
	default, it's better.

2008-09-11  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-insert-line): Trap errors on setting the
	summary line gnus-number property and ignore them (with a warning
	message).

2008-09-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-make-useful-group): Don't use the compiler
	macro caddr in the interactive form since it won't be expanded.

2008-09-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-set-charset-parameters): Add new argument
	`charset'; fix name of function called recursively.
	(gnus-mime-view-part-as-charset): Don't bind gnus-newsgroup-charset.

2008-09-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-strip-charset-parameters): Remove.
	(gnus-mime-set-charset-parameters): New function.
	(gnus-mime-view-part-as-charset): Use it to correctly display part
	specifying wrong charset.

2008-09-08  David Engster  <dengste@eml.cc>

	* nnmairix.el (nnmairix-create-server-and-default-group): Require match
	in completing-read for back end server.

2008-09-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* message.el (message-confirm-send): New variable to confirm sending a
	message.
	(message-send): Use it.

2008-08-30  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-spec.el (gnus-parse-simple-format): Revert last patch.

2008-08-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-spec.el (gnus-parse-simple-format): Remove trailing whitespace.

2008-08-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-max-track-groups): New variable to
	prevent tracking too many groups.
	(gnus-registry-split-fancy-with-parent, gnus-registry-fetch-groups):
	Use it.

2008-08-11  Ralf Angeli  <angeli@caeruleus.net>

	* gnus-art.el (gnus-article-next-page): Respect `scroll-margin' when
	moving point to the bottom of the window in order to avoid recentering.

2008-08-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Bind scroll-margin for XEmacs 21.4 and SXEmacs.

	* gnus-art.el (gnus-article-next-page, gnus-article-prev-page)
	(gnus-article-next-page-1): Use compiler directive (featurep 'xemacs).
	(gnus-article-beginning-of-window): Fix calculation.

2008-08-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-supersede-article)
	(gnus-summary-resend-message-edit): Bind mail-parse-charset to the
	value of gnus-newsgroup-charset to decode non-MIME encoded text in
	message header.

2008-08-02  Chong Yidong  <cyd@stupidchicken.com>

	* pgg-gpg.el (pgg-gpg-process-region): Accept any remaining
	pending output coming after the status change.

2008-07-31  Dan Nicolaescu  <dann@ics.uci.edu>

	* message.el:
	* gnus-start.el:
	* gnus-registry.el: Remove VMS support.

2008-07-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2104.el (rfc2104-string-make-unibyte): Define it as a compiler
	macro.
	(rfc2104-hash): Use it.

2008-07-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-sort-by-most-recent-number)
	(gnus-summary-sort-by-most-recent-date): New commands.
	(gnus-summary-mode-map, gnus-summary-make-menu-bar): Add key bindings
	and menu entries.

2008-07-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-summary-save-in-pipe): Generate work buffer always;
	don't redisplay article for raw contents; remove plural articles stuff.

	* gnus-sum.el (gnus-summary-pipe-output): Pipe raw articles by symbolic
	prefix `r'; use gnus-summary-save-in-pipe directly instead of relying
	on gnus-summary-save-article; display results properly.

2008-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: No need to fbind ns-focus-frame.

2008-07-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-summary-save-in-pipe): Add optional argument `raw'.

2008-07-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-summary-save-in-pipe): Consider
	gnus-save-all-headers.

2008-07-21  Dan Nicolaescu  <dann@ics.uci.edu>

	* gnus-util.el (ns-focus-frame): Remove declaration.
	(gnus-select-frame-set-input-focus): Undo previous change.  Treat ns
	like x.

2008-07-21  Thien-Thi Nguyen  <ttn@gnuvola.org>

	* rfc2104.el (rfc2104-zero): Delete defconst.
	(rfc2104-hex-alist): Likewise.
	(rfc2104-hex-to-int): Delete func.
	(rfc2104-hexstring-to-bitstring): Likewise.
	(rfc2104-nybbles): New defconst.
	(rfc2104-hash): Rewrite for speed.

2008-07-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* tls.el (open-tls-stream): Make it work with the 2nd argument
	BUFFER that is a string but does not exist as a buffer object, as
	mentioned in the doc-string.

2008-07-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind ns-focus-frame for Emacs 21, 22, XEmacs 21.4, and
	SXEmacs.

2008-07-16  Glenn Morris  <rgm@gnu.org>

	* gnus-util.el (ns-focus-frame): Declare for compiler.

2008-07-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-save): Ignore gnus-visible-headers that is
	set as a group parameter.
	(gnus-summary-save-in-pipe): Work when it is called independently.
	(gnus-summary-pipe-to-muttprint): Don't modify
	gnus-summary-pipe-output-default-command.

2008-07-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-send-mail-with-sendmail):
	Display the error message.

2008-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-default-article-saver):
	Add gnus-summary-save-in-pipe to choices.
	(gnus-summary-save-in-pipe): Add :decode and :headers properties; use
	gnus-summary-pipe-output-default-command as the default command.
	(gnus-summary-pipe-to-muttprint): Update gnus-summary-muttprint-program
	instead of gnus-last-shell-command.

	* gnus-sum.el (gnus-summary-pipe-output-default-command):
	New user option.
	(gnus-summary-muttprint-program): Mention the value will be changed.
	(gnus-summary-save-article): Force showing of all headers.
	(gnus-summary-pipe-output): Work with the 2nd argument HEADERS.

2008-07-01  Rupert Swarbrick  <rswarbrick@googlemail.com>  (tiny change)

	* gnus-score.el (gnus-score-find-trace): Add "Total score" line.

2008-07-02  Juanma Barranquero  <lekktu@gmail.com>

	* nnimap.el (nnimap-id):
	* sieve-manage.el (sieve-manage-open): Doc fixes.

2008-07-02  Francesc Rocher  <rocher@member.fsf.org>

	* gnus.el (gnus-group-startup-message): Prefer SVG or PNG image,
	if available.

2008-06-25  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-util.el (mm-with-multibyte, mm-with-unibyte): Remove.

	* nnkiboze.el (nnkiboze-generate-group):
	Use explicit mm-disable-multibyte rather than mm-with-unibyte.

	* nnmairix.el: Require CL.

2008-06-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload get-display-table and put-display-table for
	XEmacs 21.5.

	* lpath.el: Fbind get-display-table and put-display-table for XEmacs
	21.4 and SXEmacs.

2008-06-15  David Engster  <dengste@eml.cc>

	* nnimap.el (nnimap-request-delete-group): Unselect group if necessary.

2008-06-14  Aidan Kehoe  <kehoea@parhasard.net>

	* gnus-util.el (gnus-put-display-table, gnus-get-display-table):
	New macros that expand to an `aset'/`aref' call under Emacs, and to a
	runtime choice under XEmacs.

	* gnus-sum.el (gnus-summary-set-display-table):
	Use `gnus-put-display-table', `gnus-get-display-table',
	`gnus-set-display-table' for the display table, instead of `aset'.

	* gnus-xmas.el (gnus-xmas-summary-set-display-table):
	Use `gnus-put-display-table', `gnus-get-display-table',
	`gnus-set-display-table' for the display table.

2008-06-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmairix.el: Add autoloads.

2008-06-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmairix.el (nnmairix-delete-recreate-group)
	(nnmairix-update-and-clear-marks): Fix error messages.

2008-06-14  David Engster  <dengste@eml.cc>

	* nnmairix.el: Upgrade to version 0.6.
	(nnmairix-group-toggle-propmarks-this-group)
	(nnmairix-group-toggle-readmarks-this-group)
	(nnmairix-group-delete-recreate-this-group)
	(nnmairix-group-toggle-allowfast-this-group, nnmairix-propagate-marks)
	(nnmairix-remove-tick-mark-original-article): New commands.
	(nnmairix-mairix-search-options, nnmairix-propagate-marks-upon-close)
	(nnmairix-propagate-marks-to-nnmairix-groups)
	(nnmairix-only-use-registry, nnmairix-allowfast-default)
	(nnmairix-marks-cache, nnmairix-version-output): New variables.
	(nnmairix-request-set-mark, nnmairix-request-update-info): New back end
	functions needed for marks propagation and manipulation of read marks.
	(nnmairix-update-groups): New function.
	(nnmairix-get-groups-from-server, nnmairix-delete-recreate-group)
	(nnmairix-determine-original-group-from-registry)
	(nnmairix-determine-original-group-from-path)
	(nnmairix-get-group-from-file-path, nnmairix-map-range)
	(nnmairix-check-mairix-version, nnmairix-group-toggle-parameter):
	New helper functions.
	(nnmairix-group-mode-hook, nnmairix-summary-mode-hook): Insert new
	keystrokes for new commands.
	(nnmairix-delete-and-create-on-change): Doc string cleanup.
	(nnmairix-request-group): Check allow-fast group parameter.
	(nnmairix-request-create-group): Set allow-fast group parameter if
	nnmairix-allowfast-default is set.
	(nnmairix-close-group): Propagate marks upon closing if needed.
	(nnmairix-group-toggle-threads-this-group): Use new.
	nnmairix-group-toggle-parameter helper function.
	(nnmairix-search): Better check for empty search result.
	(nnmairix-goto-original-article): Use new helper functions for
	determining original article.
	(nnmairix-show-original-article): Make sure message-id is in brackets.
	(nnmairix-call-mairix-binary): Change variable name.
	(nnmairix-update-and-clear-marks): Use nnmairix-delete-recreate-group
	helper function.
	(nnmairix-widget-toggle-activate): Fix doc string.

2008-06-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnir.el: Require edmacro when compiling with XEmacs.
	(nnir-run-find-grep): Don't use 3rd arg of `split-string' which is not
	available in Emacs 21.

2008-06-11  Glenn Morris  <rgm@gnu.org>

	* gnus-util.el (x-focus-frame):
	* gnus.el (image-size):
	* mm-decode.el (image-size): Declare.

	* gnus-picon.el (declare-function): Add compat definition.
	(image-size): Declare.

	* gnus-group.el (tool-bar-map):
	* gnus-sum.el (tool-bar-map): Define for compiler.

	* gnus-ems.el (gnus-x-splash): Check tool-bar-mode is bound.

	* nnfolder.el (gnus-intersection): Remove unnecessary autoload.

	* gnus-agent.el, gnus-cache.el, gnus-ems.el, gnus-group.el:
	* gnus-logic.el, gnus-msg.el, gnus-util.el, gnus.el, mail-source.el:
	* message.el, mm-decode.el, mm-encode.el, mm-view.el, mml.el:
	* mml1991.el, mml2015.el, nnfolder.el, nnheader.el, nnimap.el:
	* nnmail.el, nnml.el, nnrss.el, nntp.el, nnvirtual.el:
	* sieve-manage.el, spam-report.el, spam.el:
	Remove unnecessary eval-and-compile of autoloads.

2008-06-08  Michael Albinus  <michael.albinus@gmx.de>

	* auth-source.el: Precise Tramp doc.

2008-06-07  Glenn Morris  <rgm@gnu.org>

	* nnmairix.el: Remove unnecessary eval-when-compile.

2008-06-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind propertize for XEmacs 21.4.

2008-06-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnir.el: Move here from ../contrib.

2008-06-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-util.el (gnus-read-shell-command): New function.
	* mm-decode.el (mm-pipe-part):
	* gnus-art.el (gnus-summary-save-in-pipe): Use it.

2008-06-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-disassociate-draft): Revert 2008-03-18 change.

2008-06-03  Glenn Morris  <rgm@gnu.org>

       * pop3.el (nnheader-accept-process-output): Autoload it.

2008-05-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-decode-encoded-string): Don't decode things that
	are not 2-digit hexadecimal characters that follow `%'s.

2008-05-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-bogus-recipient-p): Fix type in doc string.
	Reported by Stephen Eglen <S.J.Eglen@damtp.cam.ac.uk>.
	(message-bogus-addresses): Rename from message-bogus-address-regexp.
	Improve custom options.
	(message-bogus-recipient-p): Adjust accordingly.

2008-05-27  Chong Yidong  <cyd@stupidchicken.com>

	* parse-time.el (parse-time-months, parse-time-weekdays): Add
	long-form month and day names.

2008-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload debug, eudc-expand-inline and
	pgg-snarf-keys-region for XEmacs.

	* lpath.el: Fbind w3m-region, bind ps-print-color-p for XEmacs.

	* nnmairix.el: Require edmacro when compiling with XEmacs.

2008-05-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-initial-limit): Use unless instead of if.
	(gnus-fetch-old-headers): Warn about setting it to t for Gmane groups.

2008-05-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* auth-source.el: Add more docs.

	* netrc.el (netrc-machine): Always match if the port is not given.

2008-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnheader.el (nnheader-read-timeout): Change the default timeout from
	0.1 seconds to 0.01 seconds.  This will make nntp and pop3 article
	retrieval faster in some cases, but might make CPU usage larger.  If
	this has any bad side effects, we might revert this change.

	* pop3.el (pop3-movemail): Change the sit-for from 0.1 to 0.01, which
	seems to make mail retrieval much, much faster.
	(pop3-movemail): Use nnheader-accept-process-output instead of sleeping
	unconditionally.

	* gnus-draft.el (gnus-group-send-queue): Bind
	message-send-mail-partially-limit to nil to avoid being prompted.

2008-05-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-attach-buffer): Prompt for `disposition'.

	* message.el (message-bogus-address-regexp): Fix and improve custom
	type.
	(message-setup-hook): Add message-check-recipients as custom option.

2008-05-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-cite-function): Remove bogus autoload which crept
	in during merge from v5-10.

2008-05-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): Fix login/password bug.

	* nnrss.el (nnrss-normalize-date): Accept Unix-style epoch timestamps.

	* auth-source.el: Preliminary Tramp docs.
	(auth-sources): Change the default auth-sources to use
	EPA .gpg files.

2008-05-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* nntp.el: Autoload `auth-source-user-or-password'.
	(nntp-send-authinfo): Use it.

	* nnimap.el: Autoload `auth-source-user-or-password'.
	(nnimap-open-connection): Use it.

	* auth-source.el: Added docs on using with url-auth.  Import gnus-util
	for the gnus-message function.
	(auth-source-user-or-password): Use it.

2008-05-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* rfc2104.el (rfc2104-hexstring-to-bitstring): Rename it back from
	rfc2104-hexstring-to-byte-list.  Return a unibyte string.
	(rfc2104-hash): Use it.

2008-05-08  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-article-toggle-truncate-lines):
	Don't use `iff' in docstring.

2008-05-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el: Adjusted copyright dates and added a keyword.

	* gnus-util.el (gnus-extract-address-component-name)
	(gnus-extract-address-component-email): Convenience functions around
	`gnus-extract-address-components'.

	* gnus-registry.el (gnus-registry-split-fancy-with-parent):
	Use `gnus-extract-address-component-email' to fix bug of comparing full
	sender name to `user-mail-address'.

2008-05-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-grep-in-list): Fix logic, use
	catch/throw to optimize.
	(gnus-registry-find-keywords): Just use member to find a keyword.

2008-05-07  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-srvr.el (gnus-enter-server-buffer): Make sure the server-buffer
	is current before calling gnus-server-prepare.
	(gnus-server-setup-buffer, gnus-server-update-server)
	(gnus-server-read-server, gnus-browse-exit): Use with-current-buffer.

2008-05-04  Juri Linkov  <juri@jurta.org>

	* mailcap.el (mailcap-replace-in-string): New compatibility alias.
	(mailcap-file-default-commands): Use mailcap-replace-in-string
	instead of replace-regexp-in-string, and mailcap-delete-duplicates
	instead of delete-dups.  Use [ \t\n]* for whitespace in regexp.

2008-05-03  Reiner Steib  <reiner.steib@gmx.de>

	* gnus-sum.el (gnus-propagate-marks): Fix custom version.

2008-05-01  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: Bump version to 0.11

2008-05-01 Lars Magne Ingebrigtsen <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.10 is released.

2008-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-sum.el (gnus-summary-save-parts): Inhibit even more treatment
	hooks.
	(gnus-update-read-articles): Speed up non-marks-using users.
	(gnus-use-marks): Define gnus-use-marks.
	(gnus-propagate-marks): Rename variable to something more sensible.

2008-05-02  Juanma Barranquero  <lekktu@gmail.com>

	* gmm-utils.el (gmm, gmm-verbose, gmm-lazy, gmm-customize-mode)
	(gmm-image-load-path-for-library): Fix typos in docstrings.
	(gmm-message): Reflow docstring.

2008-04-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* mail-source.el (mail-source-set-1, mail-source-bind):
	Move auth-source code out of the macro to clean it up and fix bugs.

2008-04-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): Don't split
	by sender if it's equal to user-mail-address, it's likely to be
	useless.

	* mail-source.el (mail-source-bind): Don't use user or password if they
	are not bound.  Unintern them if they are nil.  Don't use server unless
	it's bound, and default it to empty string otherwise.

2008-04-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* mail-source.el: Load auth-source.el.
	(mail-source-bind): Add comments.  Call auth-source-user-or-password to
	get user name or password, if auth-sources is set up.

	* gnus-registry.el (gnus-registry-split-strategy): New variable for
	strategy of splitting with parent.
	(gnus-registry-split-fancy-with-parent)
	(gnus-registry-post-process-groups): Use it and fix prior
	bug (returning a list as the split result).

	* auth-source.el (auth-sources): Remove server parameter.
	(auth-source-pick, auth-source-user-or-password)
	(auth-source-user-or-password-imap)
	(auth-source-user-or-password-pop3, auth-source-user-or-password-ssh)
	(auth-source-user-or-password-sftp)
	(auth-source-user-or-password-smtp): Remove server parameter.

2008-04-25  Juanma Barranquero  <lekktu@gmail.com>

	* smime.el (smime-sign-region, smime-encrypt-region)
	(smime-decrypt-region):
	Remove redundant calls to `generate-new-buffer-name'.

2008-04-24  Luca Capello  <luca@pca.it>  (tiny change)

	* mm-encode.el (mm-safer-encoding): Add optional argument `type'.
	Don't use QP for message/rfc822.
	(mm-content-transfer-encoding): Pass `type' to mm-safer-encoding.

2008-04-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* sieve-manage.el (sieve-string-bytes): Remove.
	(sieve-manage-putscript): Use length instead: `string-bytes' gives the
	correct byte-length only if the process's coding-system is the same as
	the one used internally by Emacs to represent strings.

2008-04-22  Juri Linkov  <juri@jurta.org>

	* mailcap.el (mailcap-file-default-commands): New function.

2008-04-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-signature-separator, message-cite-function):
	Change custom version.

2008-04-13  Naohiro Aota  <nao.aota@gmail.com>  (tiny change)

	* tls.el (tls-program): Add -ign_eof argument to call the openssl
	commands.
	(tls-checktrust): Ditto.

2008-04-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-decode.el (mm-display-external): Make temp file read-only.

2008-04-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-diary.el (gnus-article-edit-mode-map, message-mode-map): Remove
	binding for `gnus-diary-version'.  Bind `gnus-diary-check-message' to
	`C-c C-f d'.

2008-04-12  Adrian Aichner  <adrian@xemacs.org>

	* gnus-sum.el (gnus-summary-goto-subject): Typo fix.

2008-04-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el: Bump version to 0.9.

2008-04-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el: No Gnus v0.8 is released.

2008-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mail-source.el (mail-source-value):
	Prefer fboundp to functionp so it works with macros as well.

2008-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-win.el (gnus-configure-frame, gnus-all-windows-visible-p):
	Fix last change in case the element is not even a symbol.

2008-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-win.el (gnus-configure-frame, gnus-all-windows-visible-p):
	Prefer fboundp to functionp so it works with macros as well.

2008-04-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* auth-source.el: Added docs.
	(auth-sources): Modify format to support server.
	(auth-source-pick, auth-source-user-or-password)
	(auth-source-user-or-password-imap)
	(auth-source-user-or-password-pop3, auth-source-user-or-password-ssh)
	(auth-source-user-or-password-sftp)
	(auth-source-user-or-password-smtp): Add server parameter.

2008-04-08  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el: Initialize the registry when gnus-registry-install
	is t.

2008-04-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el (uncompface): Make buffer unibyte.

2008-04-05  Glenn Morris  <rgm@gnu.org>

	* gnus-ems.el (mm-disable-multibyte): Autoload it.

2008-04-05  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-util.el (mm-with-unibyte-buffer, mm-with-multibyte-buffer): Prefer
	mm-(en|dis)able-multibyte to default-enable-multibyte-characters.

	* nnheader.el (nnheader-init-server-buffer): Change buffer's
	multibyteness after rather than before erasing it.

	* gnus-art.el (gnus-mime-replace-part): Remove unnecessary use of
	mm-with-multibyte.
	(gnus-request-article-this-buffer): Make sure the proper decoding is
	used if gnus-original-article-buffer happens to be unibyte.

	* gnus-ems.el (gnus-x-splash): Prefer mm-disable-multibyte to
	default-enable-multibyte-characters.

	* gnus-fun.el (gnus-display-x-face-in-from): Remove unnecessary use of
	default-enable-multibyte-characters.

	* mm-decode.el (mm-inline-media-tests): Add entry for x-diff.

	* nnweb.el (nnweb-init): Avoid nn-with-unibyte.

2008-04-02  Simon Josefsson  <simon@josefsson.org>

	* imap.el (imap-enable-exchange-bug-workaround): New variable.
	(imap-message-copyuid-1): Use it.
	(imap-message-appenduid-1): Likewise.  Based on patch by Nathan
	J. Williams in
	<http://permalink.gmane.org/gmane.emacs.gnus.general/65855>.

	* nnimap.el (nnimap-enable-minmax-bug-workaround): Remove, replaced by
	imap-enable-exchange-bug-workaround.
	(nnimap-find-minmax-uid): Use imap-enable-exchange-bug-workaround.

2008-04-01  Simon Josefsson  <simon@josefsson.org>

	* nnimap.el (nnimap-find-minmax-uid): Revert last fix, the "fix" turns
	a 100 byte status-checks into a 2-3MB transfer for each group.
	(nnimap-enable-minmax-bug-workaround): New variable to toggle whether
	to enable bug workaround or not.
	(nnimap-find-minmax-uid): Only enable workaround conditionally.

2008-03-31  Glenn Morris  <rgm@gnu.org>

	* message.el (mml2015-use): Declare for compiler.
	(message-info): Require mml2015 when appropriate.

2008-03-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (EMACS_COMP): Quote directory name that might contain
	whitespace.

2008-03-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nntp.el (nntp-netcat-command): Rename from nntp-via-netcat-command.
	(nntp-netcat-switches): Rename from nntp-via-netcat-switches.
	(nntp-open-telnet, nntp-open-rlogin): Use with-current-buffer.
	(nntp-service-to-port): New function.
	(nntp-open-via-rlogin-and-netcat, nntp-open-via-telnet-and-telnet)
	(nntp-open-telnet-stream, nntp-open-via-rlogin-and-telnet): Use it.
	(nntp-open-netcat-stream): New function.
	(nntp-open-via-rlogin-and-netcat): Don't use a pty.

2008-03-29  Sven Joachim  <svenjoac@gmx.de>

	* gnus-sum.el (gnus-summary-make-menu-bar): Add missing dots.

2008-03-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-make-in-reply-to): Use mm-with-multibyte-buffer.

2008-03-28  Magnus Henoch  <mange@freemail.hu>

	* dns.el (dns-write): Use set-buffer-multibyte.

2008-03-28  Michael Harnois  <mdharnois@gmail.com>  (tiny change)

	* nnimap.el (nnimap-find-minmax-uid): Fix Exchange 2007 IMAP problem.

2008-03-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-signature-separator): Change default.
	Improve custom type.
	(message-cite-function): Change default to
	message-cite-original-without-signature.

	* gnus-sum.el (gnus-summary-make-menu-bar): Add message-cite-function
	toggle.

	* message.el (message-check-news-body-syntax): Fix signature check.
	(message-setup-1): Mark buffer as unmodified _after_ running
	message-setup-hook and handling message-alternative-emails.
	(message-shorten-references): Be more strict when building list of
	valid references to comply with GNKSA.

        * gnus-group.el (gnus-read-ephemeral-bug-group)
        (gnus-read-ephemeral-debian-bug-group)
        (gnus-read-ephemeral-emacs-bug-group): Use the correct variable.

	* message.el (message-info): Don't use booleanp which isn't supported
	in Emacs 21 and XEmacs.

2008-03-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-gmane-group-download-format): Rename from
	gnus-group-gmane-group-download-format.
	(gnus-group-read-ephemeral-gmane-group): Rename from
	gnus-group-read-ephemeral-gmane-group.
	(gnus-read-ephemeral-gmane-group-url): Rename from
	gnus-group-read-ephemeral-gmane-group-url.
	(gnus-bug-group-download-format-alist): New variable.
	(gnus-read-ephemeral-bug-group, gnus-read-ephemeral-debian-bug-group)
	(gnus-read-ephemeral-emacs-bug-group): New commands.

2008-03-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-browse-html-article): Fix documentation.
	(gnus-visible-headers): Improve custom type.

2008-03-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-menu): Add workarounds for XEmacs.

	* gnus-art.el (gnus-article-browse-html-article): Inhibit display of
	X-Boundary header.

	* message.el (message-simplify-recipients): Fix previous commit.

2008-03-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-util.el (mm-set-buffer-multibyte): New function.
	* mm-decode.el (mm-copy-to-buffer): Use it.

2008-03-19  Glenn Morris  <rgm@gnu.org>

	* tls.el (open-tls-stream): Restore use of `tls-end-of-info'.
	Accidentally removed in the sync process with Emacs.

2008-03-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-alter-recipients-discard-bogus-full-name):
	New function.
	(message-alter-recipients-function): New variable.
	(message-get-reply-headers): Use it.
	(message-replace-header): New helper function.
	(message-recipients-without-full-name): New variable.
	(message-simplify-recipients): New command.

	* mml.el (mml-menu): Add toggle for gnus-gcc-externalize-attachments.

	* message.el (message-info): Handle EasyPG manual.

	* mml.el (mml-menu): Add entry for EasyPG.

2008-03-18  Nils Ackermann  <nils@ackermath.info>  (tiny change)

	* nnmh.el (nnmh-request-expire-articles): Prefer expiry-target group
	parameter.

	* message.el (message-disassociate-draft): Specify drafts group name
	fully.

2008-03-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): Eliminate
	unnecessary duplicates from the match list.

2008-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload Info-index and Info-index-next for XEmacs.

	* lpath.el: Fbind Info-index and Info-index-next for Emacs 21, 22.

	* gnus-art.el (gnus-button-handle-info-keystrokes): Don't use optional
	args of `how-many' of which the XEmacs version doesn't take; declare
	Info-index-next as function.

2008-03-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-headers): Fix handling of
	gnus-inhibit-slow-scoring.

	* gnus-art.el (gnus-article-browse-html-article): Fix type in doc
	string.
	(gnus-button-url-regexp): Improve handling of parenthesis.
	(gnus-button-alist): Extend gnus-button-handle-info-keystrokes entry.
	(gnus-button-handle-info-keystrokes): Handle index entries.

2008-03-15  Glenn Morris  <rgm@gnu.org>

	* parse-time.el (parse-time-string): Simplify.

2008-03-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mail-source.el (mail-source-delete-old-incoming) Fix regexp to find
	Incoming* files.

2008-03-13  Teodor Zlatanov  <tzz@lifelogs.com>

	* auth-source.el (auth-sources): Renamed from auth-source-choices.
	(auth-source-pick): Use it.

2008-03-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* binhex.el (binhex-decode-region-internal):
	* uudecode.el (uudecode-decode-region-internal):
	* dns.el (dns-read-string-name, dns-read, dns-read-type, query-dns):
	* sha1.el (sha1-string-external): Use set-buffer-multibyte rather than
	setting default-enable-multibyte-characters.

2008-03-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* auth-source.el (auth-source-protocols)
	(auth-source-protocols-customize, auth-source-choices): Added and
	modified variable customizations and defaults.
	(auth-source-pick, auth-source-user-or-password)
	(auth-source-protocol-defaults, auth-source-user-or-password-imap)
	(auth-source-user-or-password-pop3, auth-source-user-or-password-ssh)
	(auth-source-user-or-password-sftp)
	(auth-source-user-or-password-smtp): Use new variables and provide an
	interface to netrc.el.

2008-03-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-open-telnet-stream, nntp-open-via-rlogin-and-telnet)
	(nntp-open-via-rlogin-and-netcat, nntp-open-via-telnet-and-telnet):
	Make sure the nntp port to specify is a string.

2008-03-12  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nntp.el: Use with-current-buffer.
	(nntp-send-buffer): Just set the buffer to unibyte rather than use the
	dubious mm-with-unibyte-current-buffer.
	(nntp-with-open-group-function): New function extracted from
	nntp-with-open-group macro.
	(nntp-with-open-group): Use the function, so it's easier to debug.
	Add indentation and debugging info.
	(nntp-open-telnet-stream, nntp-open-via-rlogin-and-telnet): Recommend
	the use of the netcat alternatives.

	* rfc2047.el (rfc2047-decode-string): Don't use `m'.
	Avoid mm-string-as-multibyte as well.

	* nnweb.el (nnweb-insert-html):
	Remove use of nnheader-string-as-multibyte.

	* nnheader.el (nnheader-init-server-buffer): Use with-current-buffer.
	(nnheader-string-as-multibyte): Remove.

	* mm-view.el: Use inhibit-read-only.
	(mm-inline-text-html-render-with-w3, mm-inline-message): Use dolist.
	(mm-pkcs7-signed-magic, mm-pkcs7-enveloped-magic): Use just string
	or unibyte-string.

	* mm-uu.el (mm-uu-copy-to-buffer): Preserve (uni/multi)byteness.
	(mm-uu-yenc-extract): Use with-current-buffer.

	* gnus-soup.el (gnus-soup-send-packet): Don't use
	mm-with-unibyte-current-buffer since the buffer is unibyte anyway.

	* nnmh.el: Use with-current-buffer.
	(nnmh-request-list-1): Use mm-string-to-multibyte rather than
	mm-string-as-multibyte on the output of mm-encode-coding-string.

	* nnimap.el (nnimap-retrieve-headers-progress): Use a unibyte buffer.
	(nnimap-request-move-article): Use with-current-buffer.

	* mm-decode.el (mm-with-part): Set the buffer to unibyte before
	inserting the handle-buffer's text, so the implicit multibyte->unibyte
	conversion uses string-make-unibyte rather than string-as-unibyte.

	* gnus-msg.el: Use with-current-buffer.

	* message.el (message-ignored-resent-headers): Add "Delivered-To".

2008-03-10  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-passphrase-callback): Type cast KEY-ID to a
	string for caching if it is 'PIN.

2008-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Consider the case without Emacs/W3.

2008-03-08  Glenn Morris  <rgm@gnu.org>

	* time-date.el (date-to-time, time-subtract, time-add)
	(safe-date-to-time): Doc fixes.

2008-03-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-source-delete-old-incoming-confirm):
	Change default to nil.
	(mail-source-delete-old-incoming): Make confirmation prompt more clear.

2008-03-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Rearrange.

	* gnus-art.el (gnus-narrow-to-page): Position point properly.
	(gnus-article-goto-prev-page): Work for articles having ^L's.

	* gnus-sum.el (gnus-summary-end-of-article): Remove needless narrowing.

	* mm-view.el (mm-w3m-standalone-supports-m17n-p): Fix typo.

2008-03-07  Karl Fogel  <kfogel@red-bean.com>

	* gnus-bookmark.el: Adjust for renames in bookmark.el.
	(gnus-bookmark-make-record): Was `gnus-bookmark-make-cell'.
	(gnus-bookmark-jump): Adjust some variable names.

2008-03-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* auth-source.el: New package.
	(auth-source-choices): Add customization entry point variable.

	* gnus-registry.el (gnus-registry-user-format-function-M): Fix concat
	bug.

2008-03-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-install): Allow 'ask as an option.
	(gnus-registry-initialize, gnus-registry-install-p): Use it.
	(gnus-registry-install-shortcuts): Rename from
	gnus-registry-install-shortcuts-and-menus.  Installs the shortcuts in
	the `gnus-registry-mark-map' keymap dynamically from
	`gnus-registry-marks'.  The generated functions update the summary line
	when a registry mark is added or deleted, and will call
	`gnus-registry-install-p' (see the comments in the code).
	(gnus-registry-user-format-function-M): Use concat intelligently.

	* gnus-sum.el (gnus-summary-make-menu-bar): Add menu entries for all
	the registry mark functions.

2008-03-05  Glenn Morris  <rgm@gnu.org>

	* gnus-art.el (gnus-article-mode-line-format-alist): Move to gnus-sum.
	* gnus-sum.el (gnus-article-mode-line-format-alist): Move here from
	gnus-art.
	(top-level): No need to load own source when compiling.

2008-03-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-print-buffer): Honor ps-print-color-p.
	Suggested by <chris.anderton@zetnet.co.uk>.

2008-03-04  Glenn Morris  <rgm@gnu.org>

	* gnus-sum.el (top-level): No need to require gnus when compiling,
	since unconditionally required near start of file.
	(gnus-summary-display-while-building): Move definition before use.

2008-03-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-user-format-function-M): Add
	formatting function.

2008-03-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-marks): Changed format to be nicer
	with plists.
	(gnus-registry-do-marks, gnus-registry-install-shortcuts-and-menus):
	Use new format.

2008-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-describe-bindings): Work for the version of
	`where-is-internal' that returns a range of key sequences.

2008-03-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-bodies.el (mm-decode-content-transfer-encoding): Simplify.

	* gnus-sum.el: Use inhibit-read-only and with-current-buffer.
	(gnus-summary-jump-to-group): Consider windows on other displayed
	frames as well.  Similar changes might be needed elsewhere, but that's
	the one I've bumped into during my use.

	* nndoc.el (nndoc-oe-dbx-type-p):
	* gnus-msg.el (gnus-debug):
	* gnus-group.el (gnus-update-group-mark-positions):
	Use mm-string-to-multibyte.

2008-03-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml2015.el (mml2015-extract-cleartext-signature): Explain that it
	doesn't handle NotDashEscaped.

	* mml.el (mml-menu): Improve help entries.  Move Sign/Encrypt Part.
	(mml-dnd-attach-options): Fix typo in custom choice.

	* gnus-group.el (gnus-group-read-ephemeral-gmane-group): Change
	nndoc-article-type to mbox.
	(gnus-group-read-ephemeral-gmane-group-url): Support permalink.

	* mm-decode.el (mm-text-html-renderer): Prefer w3m over w3.  Fall back
	to nil, instead of html2text.

	* imap.el (imap-debug): Add `imap-ping-server'.

	* gnus-bookmark.el: Add FIXMEs.

	* message.el (message-form-letter-separator)
	(message-send-form-letter-delay): New variables.
	(message-send-form-letter): Use them.  New command to send form
	letters.  Requested by Uwe Siart.
	(message-send-mail-function): Doc fix.  Add "Other" custom option.

2008-03-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* Update copyright years.

2008-03-01  Reiner Steib  <Reiner.Steib@gmx.de>

	Sync from EMACS_22_BASE.

	* parse-time.el: Rename elt->parse-time-elt and val->parse-time-val.

2008-02-29  Andreas Seltenreich  <andreas@gate450.dyndns.org>

	* nnweb.el (nnweb-google-parse-1): Fix date parsing on articles with
	empty author.

2008-02-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-marks): Add variable for
	customization of marks and their appearance.
	(gnus-registry-read-mark): Use it.
	(gnus-registry-do-marks): Add utility function to loop through
	`gnus-registry-marks'.
	(gnus-registry-install-shortcuts-and-menus): Add function to install
	shortcuts and menus.
	(gnus-registry-initialize): Use it.
	(gnus-registry-default-mark): Clarify documentation.

2008-02-29  Glenn Morris  <rgm@gnu.org>

	* gnus-art.el, gnus-bookmark.el, gnus-dired.el, gnus-draft.el:
	* gnus-group.el, gnus-msg.el, gnus-score.el, gnus-sum.el, gnus-util.el:
	* gnus.el, mail-source.el, message.el, mm-decode.el, mm-uu.el, mml.el:
	* nnmail.el, pop3.el, smiley.el, smime.el, spam-report.el:
	Change defcustom :version from 23.0 to 23.1.

2008-02-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-follow-group-p)
	(gnus-registry-post-process-groups): Add functions to aid registry
	splitting and improve logging.  Clarify behavior in function
	documentation.
	(gnus-registry-split-fancy-with-parent): Use them.

2008-02-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el: Use with-current-buffer.

2008-02-27  David Engster  <dengste@eml.cc>

	* nnmairix.el (nnmairix-request-group-with-article-number-correction):
	Express real group name in the response.

2008-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmairix.el (nnmairix-group-regexp, nnmairix-valid-backends)
	(nnmairix-last-server, nnmairix-current-server): Defvar them.
	(nnmairix-goto-original-article): Defvar gnus-registry-install and
	autoload gnus-registry-fetch-group when compiling.
	(nnmairix-request-group-with-article-number-correction): Remove
	unreferenced argument passed to nnmairix-call-backend.

2008-02-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-type-alist): Fix message-marks non-hide arguments.
	(mm-uu-extract): Improve face for low color ttys.  Reported by Sascha
	Wilde.

2008-02-27  Glenn Morris  <rgm@gnu.org>

	* nnmairix.el: Change defcustom :version from 23.0 to 23.1.
	(nnmairix-group-regexp, nnmairix-valid-backends): Convert from free
	variables to defconsts.  Convert comments to doc-strings.
	(nnmairix-last-server, nnmairix-current-server): Convert from free
	variables to defvars.  Convert comments to doc-strings.
	(gnus-registry-fetch-group): Autoload.
	(nnmairix-replace-group-and-numbers): Use mapc rather than mapcar.
	(nnmairix-widget-get-values, nnmairix-widget-make-query-from-widgets)
	(nnmairix-widget-build-editable-fields): Use car cddr rather than
	caddr.
	(nnmairix-request-group): Bind nnmairix-fast and nnmairix-group around
	nnmairix-request-group-with-article-number-correction call.
	(nnmairix-fast, nnmairix-group): New, less general names, for free
	variables passed from nnmairix-request-group to
	nnmairix-request-group-with-article-number-correction.  Declare.
	(nnmairix-request-group-with-article-number-correction):
	Use nnmairix-fast, nnmairix-group rather than fast, group.

2008-02-26  David Engster  <dengste@eml.cc>

	* nnmairix.el: New file.  Mairix back end for Gnus.  Initial import of
	version 0.5.

2008-02-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-register-message-ids): Use `id'
	instead of making an extra function call.  Don't add the current group
	to articles only when they have the group.  Use
	`gnus-registry-fetch-groups' instead of `gnus-registry-fetch-group'.
	Reported by David <de_bb@arcor.de>.

2008-02-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind pgg-display-output-buffer for systems in which EasyPG
	has been installed; bind pgg-parse-crc24 for only non-Mule XEmacs.

2008-02-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-source-delete-incoming): Change default.
	Supplement doc string.

	* gnus-util.el (gnus-y-or-n-p, gnus-y-or-n-p): Update comments.

2008-02-14  Glenn Morris  <rgm@gnu.org>

	* time-date.el (format-seconds): New function.

2008-02-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmail.el (nnmail-message-id-cache-file): Derive from
	`gnus-home-directory'.

2008-02-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-topic.el (gnus-topic-select-group, gnus-topic-read-group):
	Document negative prefix.

	* gnus-group.el (gnus-group-read-group): Document negative prefix.

2008-02-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-unsent-separator): Add the Exim bounce
	separator.

2008-02-10  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-sign): Remove skipped signers from the signer
	list.
	(mml2015-epg-encrypt): Remove skipped recipients/signers from the
	recipient/signer list.

2008-02-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (datarootdir): Define.
	(EMACS_COMP, install-el, install-elc, install-el-elc): Quote directory
	name that might contain whitespace.

2008-02-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-codepage-setup): If cp-supported-codepages isn't
	fbound (Emacs 23 unicode), signal an error.

2008-02-08  Glenn Morris  <rgm@gnu.org>

	* gnus-art.el (pgg-display-output-buffer): Declare as function.

2008-02-07  Tassilo Horn  <tassilo@member.fsf.org>

	* nnimap.el (nnimap-open-connection): Add "143" and "993" as default
	ports to the calls to `netrc-machine-user-or-password' in addition to
	"imap" and "imaps".

2008-02-01  Zhang Wei  <id.brep@gmail.com>

	* rfc2047.el (rfc2047-charset-encoding-alist): Add gbk and GB18030.

	* mm-util.el (mm-mime-mule-charset-alist): Add gbk and GB18030.

2008-02-01  Kenichi Handa  <handa@m17n.org>

	* rfc2104.el (rfc2104-hexstring-to-byte-list): Rename from
	rfc2104-hexstring-to-bitstring and changed to return a byte list.
	(rfc2104-hash): Convert the result of concat to unibyte string.

2008-02-01  Dave Love  <fx@gnu.org>

	* gnus-start.el (gnus-read-newsrc-el-file): Don't bind
	coding-system-for-read.
	(gnus-gnus-to-quick-newsrc-format): Insert coding cookie.

2008-02-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-group-startup-message): Add `find-image' call before
	image-load-path is let-bound.  Reported by Harald Hanche-Olsen
	<hanche@math.ntnu.no>.

2008-02-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-describe-bindings): Work for draft group.

	* gnus-xmas.el (gnus-xmas-article-describe-bindings): Ditto.

2008-01-28  Dan Nicolaescu  <dann@ics.uci.edu>

	* sieve.el (sieve-make-overlay, sieve-overlay-put, sieve-overlays-at):
	* message.el (message-beginning-of-line): Use featurep instead of bound
	tests in order to resolve conditionals at compile time.

2008-01-24  Michael Sperber  <sperber@deinprogramm.de>

	* mail-source.el (mail-sources): Add `group' choice.

	* nnmail.el (nnmail-get-new-mail-1): Abstract this out to add another
	parameter `in-group' to control into which group the articles go.
	Add treatment of `group' mail-source.

2008-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-insert-mime-button): Don't decode description.

	* mm-decode.el (mm-dissect-buffer): Decode description.

	* mml.el (mml-to-mime): Encode message header first.

2008-01-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-describe-bindings): Make it possible to use
	xrefs, i.e. [back] and [forward] buttons, in *Help* buffer.

	* lpath.el: Fbind help-buffer for Emacs 21 and XEmacs; bind
	help-xref-stack-item for Emacs 21, Emacs 22.1, and XEmacs.

2008-01-18  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): Use append, not concat.

2008-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Work for some `A'
	prefix keys.
	(gnus-article-read-summary-send-keys): Use gnus-character-to-event.
	(gnus-article-describe-bindings): Simplify; move XEmacs stuff to
	gnus-xmas.el.

	* gnus-xmas.el: Bind gnus-agent-summary-mode when compiling.
	(gnus-xmas-article-describe-bindings): New function.
	(gnus-xmas-redefine): Make gnus-article-describe-bindings alias to
	gnus-xmas-article-describe-bindings.

	* lpath.el: Don't fbind character-to-event and map-keymap for Emacs 21.

2008-01-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-marks, gnus-registry-default-mark):
	Add new variables for article mark management.
	(gnus-registry-extra-entries-precious, gnus-registry-trim): Define a
	list of extra data entries which, when present, will indicate that the
	article ID should not be trimmed from the registry.
	(gnus-registry-mark-article, gnus-registry-article-marks): Remove these
	functions.
	(gnus-registry-read-mark): New function to read a mark name from the
	user.
	(gnus-registry-set-article-mark, gnus-registry-remove-article-mark)
	(gnus-registry-set-article-mark-internal): New functions to add and
	remove marks.
	(gnus-registry-get-article-marks): New function to show the marks for
	an article, or retrieve them for further use.

2008-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-describe-bindings): Show all `S' prefix
	keys when no argument is given.

2008-01-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* imap.el (imap-ping-server): New variable.
	(imap-opened): On add extra ping if imap-ping-server is non-nil.
	(imap-ping-server): Minor doc string fixes.

2008-01-14  Knut Anders Hatlen  <kahatlen@gmail.com>  (tiny change)

	* imap.el (imap-ping-server): New function.
	(imap-opened): Call imap-ping-server.

2008-01-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-article-sort-by-random)
	(gnus-thread-sort-by-random): Fix doc strings.  Reported by
	jidanni@jidanni.org.

2008-01-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-describe-bindings): New function.
	(gnus-article-read-summary-keys): Use it.
	(gnus-article-mode-map): Bind `C-h b' to it.

2008-01-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Work for `C-h' on
	XEmacs.
	(gnus-article-describe-key, gnus-article-describe-key-briefly): Protect
	against non-character events.

	* lpath.el: Fbind map-keymap for Emacs 21.

2008-01-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-read-ephemeral-gmane-group-url): New
	command.
	(gnus-group-read-ephemeral-gmane-group): Use optional argument RANGE
	instead of END.  Change name of the temp file.
	(gnus-group-gmane-group-download-format): Add doc string.  Make it
	customizable.

2008-01-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-send-map): New keymap for `S' prefix keys;
	bind `S W' to gnus-article-wide-reply-with-original; set default
	binding to gnus-article-read-summary-send-keys.
	(gnus-article-read-summary-keys): Fix the order of keys; display
	continuation keys correctly in the echo area; describe bindings
	correctly when keys end with `C-h'.
	(gnus-article-read-summary-send-keys): New function.
	(gnus-article-describe-key, gnus-article-describe-key-briefly): Work
	for gnus-article-read-summary-send-keys; display continuation keys
	correctly in the echo area.
	(gnus-article-reply-with-original): Ignore prefix argument.
	(gnus-article-wide-reply-with-original): New function.

	* lpath.el: Fbind character-to-event and set-keymap-default-binding for
	Emacs 21.

2008-01-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-bookmark.el (gnus-bookmark-mouse-available-p): Don't test for
	display-color-p.  Reported by Reiner Steib <Reiner.Steib@gmx.de>.

2008-01-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-gmane-group-download-format): New variable.
	(gnus-group-read-ephemeral-gmane-group): New command.

2008-01-06  Dan Nicolaescu  <dann@ics.uci.edu>

	* gnus.el (gnus-use-long-file-name): Remove reference to xenix.

2007-12-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-send-mail-function): Increase custom version.

	* mml-sec.el, sieve-manage.el, smime.el: Simplify loading of
	password-cache or password.  Suggested by Glenn Morris <rgm@gnu.org>.

2007-12-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* imap.el (imap-authenticate): Use current-buffer instead of buffer,
	for the cases where imap-authenticate is called with a nil buffer
	parameter.

2007-12-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-browse-html-parts): Work for two or more
	html parts correctly; support forwarded messages.
	(gnus-article-browse-html-article): Remove work buffers.

	* netrc.el: Bind encrypt-file-alist for Emacs 21 and XEmacs when
	compiling.
	(netrc-bound-and-true-p): New macro.
	(netrc-parse): Use it instead of bound-and-true-p that is not available
	in XEmacs 21.4.

2007-12-19  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-mark-article)
	(gnus-registry-article-marks): Add functionality to mark articles
	through the Gnus registry.

	* encrypt.el: Clarify documentation for the new pgg method.
	(encrypt-file-alist): Add PGG option.
	(encrypt-insert-file-contents, encrypt-write-file-contents): Use PGG
	functionality.  Abstract password key and messaging to external
	functions.
	(encrypt-password-key, encrypt-get-passphrase-if-needed)
	(encrypt-message-method-and-cipher): Add new convenience external
	functions.
	(encrypt-pgg-encode-buffer, encrypt-pgg-decode-buffer)
	(encrypt-pgg-process-buffer): Add PGG functionality glue.

	* netrc.el: Autoload encrypt when encrypt-file-alist is set.
	(netrc-parse): Use encrypt-file-alist to determine if
	encrypt-find-model or encrypt-insert-file-contents should be used.

	* encrypt.el: Clarify documentation.  Load password-cache or
	password, whichever one is found first, instead of autoloading.

2007-12-19  Glenn Morris  <rgm@gnu.org>

	* mml.el (message-options-set, message-narrow-to-head)
	(message-in-body-p, message-mail-p, message-encode-message-body):
	Autoload.
	(message-remove-header, message-narrow-to-headers-or-head)
	(message-subscribed-p, message-make-mail-followup-to)
	(message-position-on-field, message-news-p)
	(message-options-set-recipient, message-generate-headers)
	(message-sort-headers): Declare as functions.

2007-12-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-draft.el (gnus-draft-send-message): Mention process/prefix
	convention in doc string.

2007-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-browse-html-parts): Add message header and
	title to html parts.
	(gnus-article-browse-html-article): Pass message header to it.

	* mm-decode.el (mm-display-external): Use mm-add-meta-html-tag.

2007-12-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml-sec.el, sieve-manage.el, smime.el: Make loading of password-cache
	or password compatible with XEmacs.

2007-12-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (article-verify-x-pgp-sig): Add reference to X-PGP-Sig
	format document.
	(gnus-mime-delete-part): Don't write description line if empty.
	(gnus-article-encrypt-body): Add confirmation for gnus-novice-user.

2007-12-14  Johan Bockgård  <bojohan@gnu.org>

	* gnus-sum.el (gnus-summary-mark-unread-as-read)
	(gnus-summary-mark-read-and-unread-as-read)
	(gnus-summary-mark-current-read-and-unread-as-read)
	(gnus-summary-mark-unread-as-ticked): Doc fix.
	`gnus-mark-article-hook', not `gnus-summary-mark-article-hook'.

2007-12-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-prev-article): Fix doc string.  Reported by
	Christoph Conrad <christoph.conrad@gmx.de>.

2007-12-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-y-or-n-p, gnus-yes-or-no-p): Alias to y-or-n-p and
	yes-or-no-p.

2007-12-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-add-meta-html-tag): New function.
	(mm-save-part-to-file, mm-pipe-part): Use it.

	* gnus-art.el (gnus-article-browse-delete-temp-files): Use
	gnus-y-or-n-p instead of y-or-n-p.
	(gnus-article-browse-html-parts): Work with message/external-body; use
	mm-add-meta-html-tag.

2007-12-11  Glenn Morris  <rgm@gnu.org>

	* gnus-cache.el: Require gnus-sum not just when compiling.

	* gnus-fun.el (gnus-display-x-face-in-from): Require gnus-art.

	* gnus-int.el (gnus-server-opened, gnus-status-message): Move
	definitions before use.

	* mm-decode.el: Require gnus-util.
	(mm-remove-part): Only call delete-annotation on XEmacs.

	* mm-uu.el (gnus-original-article-buffer): Define for compiler.

	* nnmail.el: Require gnus-int.

	* spam.el: Move `require's before `eval-when-compile's.

	* gnus-ems.el (gnus-alive-p):
	* gnus-fun.el (message-goto-eoh):
	* gnus-util.el (gnus-group-name-decode):
	* mail-source.el (gnus-compress-sequence):
	* message.el (Info-goto-node, format-spec):
	* mm-bodies.el (message-options-get):
	* mm-decode.el (mm-view-pkcs7):
	* mm-util.el (gmm-write-region):
	* mml-smime.el (mml-compute-boundary)
	(gnus-completing-read-with-default):
	* mml.el (widget-button-press, gnus-make-hashtable):
	* mml1991.el (mm-decode-content-transfer-encoding)
	(mm-encode-content-transfer-encoding)
	(message-options-get, message-options-set):
	* mml2015.el (gnus-buffer-live-p, gnus-get-buffer-create):
	* nnfolder.el (gnus-request-group):
	* nnheader.el (ietf-drums-unfold-fws):
	* rfc1843.el (mail-header-parse-content-type, message-narrow-to-head):
	* smime.el (gnus-run-mode-hooks):
	* spam-stat.el (gnus-message): Autoload.

	* gnus-cache.el, gnus-fun.el, gnus-group.el, gnus.el, mail-source.el:
	* mm-bodies.el, mm-decode.el, mm-extern.el, mm-util.el:
	* mml-smime.el, mml.el, mml1991.el, mml2015.el, nndb.el, nnfolder.el:
	* nnmail.el, nnmaildir.el, nnrss.el, rfc1843.el, spam.el:
	Add declare-function compatibility definition.

	* gnus-cache.el (nnvirtual-find-group-art):
	* gnus-fun.el (article-narrow-to-head, gnus-article-goto-header)
	(gnus-add-image, gnus-add-wash-type):
	* gnus-group.el (nnkiboze-score-file):
	* gnus-sum.el (turn-on-gnus-mailing-list-mode)
	(gnus-cache-write-active, mm-uu-dissect, idna-to-unicode):
	* gnus-util.el (gnus-find-method-for-group, gnus-group-name-charset)
	(message-tokenize-header, gnus-get-buffer-create)
	(mm-enable-multibyte, gnus-put-text-property, gnus-overlay-put)
	(gnus-make-overlay, mm-disable-multibyte, gnus-add-text-properties):
	* gnus.el (gnus-group-decoded-name):
	* mail-source.el (imap-capability):
	* mm-bodies.el (message-options-set):
	* mm-decode.el (gnus-configure-windows):
	* mm-extern.el (message-goto-body):
	* mm-util.el (mm-delete-duplicates, mm-detect-coding-region):
	* mml-smime.el (epg-key-sub-key-list, epg-sub-key-capability)
	(epg-sub-key-validity, message-options-set):
	* mml.el (widget-event-point, gnus-configure-windows):
	* mml1991.el (mc-encrypt-generic, gpg-sign-encrypt, gpg-encrypt):
	* mml2015.el (epg-check-configuration, epg-configuration)
	(message-options-set):
	* nndb.el (nndb-request-article):
	* nnfolder.el (gnus-request-create-group):
	* nnmail.el (gnus-activate-group, gnus-group-mark-article-read):
	* nnmaildir.el (gnus-group-mark-article-read):
	* nnrss.el (w3-parse-buffer, gnus-group-make-rss-group):
	* rfc1843.el (message-fetch-field):
	* spam.el (gnus-extract-address-components):
	Declare as functions.

2007-12-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-browse-html-parts): Decode CTE.

	* pgg.el (pgg-run-at-time, pgg-cancel-timer): Use eval-and-compile.

	* lpath.el: Fbind run-mode-hooks for Emacs 21;
	bind show-trailing-whitespace for XEmacs.

2007-12-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* hashcash.el, imap.el, pgg.el, pgg-parse.el (declare-function): Add
	new no-op macro for backward compatibility.

	* imap.el (imap-string-to-integer): New function.

2007-12-09  Glenn Morris  <rgm@gnu.org>

	* gnus-uu.el (gnus-uu-yenc-article): Use insert-buffer-substring.

	* gnus-art.el, gnus-spec.el, gnus-sum.el, gnus-util.el:
	* message.el, mm-view.el, sieve-manage.el, smime.el:
	Add declare-function compatibility definition.

	* gnus-art.el (w3-region, w3m-region, Info-menu):
	* gnus-spec.el (gnus-summary-from-or-to-or-newsgroups):
	* gnus-sum.el (gnus-get-predicate):
	* gnus-util.el (mm-append-to-file, w32-focus-frame):
	* message.el (mail-abbrev-in-expansion-header-p):
	* mm-view.el (w3-do-setup, w3-region, w3-prepare-buffer)
	(w3m-detect-meta-charset, w3m-region):
	* sieve-manage.el (password-read, password-cache-add)
	(password-cache-remove):
	* smime.el (password-read-and-add): Declare as functions.

2007-12-08  David Kastrup  <dak@gnu.org>

	* gnus-sum.el (gnus-summary-simplify-subject-query):
	* ecomplete.el (ecomplete-display-matches): Fix buggy call to
	`message'.

2007-12-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el (dgnushack-emacs-compile-defcustom-p): New function; use
	it to bind idna-program, installation-directory, defined-colors, and
	face-attribute for XEmacs of the version that compiles defcustom forms.

2007-12-07  Glenn Morris  <rgm@gnu.org>

	* gnus-art.el (article-make-date-line): Revert previous change.

2007-12-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-load): Rename local variable to avoid confusion.

2007-12-06  Christian Plate  <cplate@web.de>  (tiny change)

	* nnmaildir.el (nnmaildir-request-update-info): Improved performance.
	Call gnus-add-to-range ranges only once with a prepared article-list.

2007-12-06  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-list, nnmaildir-retrieve-groups)
	(nnmaildir-request-group, nnmaildir-retrieve-headers): Escape spaces in
	group names with backslashes.  Reported by Tassilo Horn
	<tassilo@member.fsf.org>.

2007-12-06  Deepak Goel  <deego3@gmail.com>

	* gnus-art.el (article-make-date-line):
	* gnus-start.el (gnus-load):
	* pop3.el (pop3-read-response): Fix buggy call to `error'.

2007-12-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-use-idna)
	* gnus-start.el (gnus-site-init-file)
	* message.el (message-use-idna)
	* mm-uu.el (mm-uu-hide-markers)
	* smiley.el (smiley-style): Revert changes that suppress warnings.

2007-12-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-browse-html-parts): Add meta html tag to
	specify charset to html source.  Reported by Christoph Conrad
	<christoph.conrad@gmx.de>.

2007-12-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-use-idna): Don't directly refer to the value of
	idna-program in order to suppress byte compile warning issued by XEmacs
	that came to byte compile the default value section of defcustom forms
	recently.

	* gnus-start.el (gnus-site-init-file): Don't directly refer to the
	value of installation-directory.

	* message.el (message-use-idna): Don't directly refer to the value of
	idna-program.

	* mm-uu.el (mm-uu-hide-markers): Don't directly call defined-colors.

	* smiley.el (smiley-style): Don't directly call face-attribute.

2007-12-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-highlight-line): Add FIXME.

	* gnus-dired.el: Reduce Gnus dependencies.
	(gnus-ems, gnus-msg, gnus-util, message, mm-decode, mml): Don't
	require.  Use autoloads instead.
	(mml-attach-file, mm-default-file-encoding, mailcap-extension-to-mime)
	(mailcap-mime-info, mm-mailcap-command, ps-print-preprint)
	(message-buffers, gnus-setup-message, gnus-print-buffer): Autoload.
	(gnus-dired-mode): Adjust doc string.
	(gnus-dired-mail-mode): New variable.
	(gnus-dired-mode-map): Avoid using `gnus-define-keys'.
	(gnus-dired-mode): Avoid using `gnus-run-hooks'.
	(gnus-dired-mail-buffers): New function.  Return mail or message
	composition buffers.
	(gnus-dired-attach): Use it.
	(gnus-dired-find-file-mailcap): Call `mailcap-mime-info' with
	NO-DECODE.
	(gnus-dired-print): Use `gnus-print-buffer' depending on
	`gnus-dired-mail-mode'.

2007-12-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encoded-word-regexp)
	(rfc2047-encoded-word-regexp-loose): Move forward; add comments
	explaining what regexp patterns are for.

2007-12-04  Glenn Morris  <rgm@gnu.org>

	* password.el: Move to password-cache.el.

	* mml1991.el (password-read, password-cache-add, password-cache-remove):
	* mml2015.el (password-read, password-cache-add, password-cache-remove):
	* mml-smime.el (password-read, password-cache-add)
	(password-cache-remove):
	No need to autoload, since mml-sec requires password.

	* gnus.el (gnus-spam-resend-to, gnus-ham-resend-to):
	* message.el (gnus-extract-address-components):
	* mml-smime.el (gnus-extract-address-components): Define for compiler.

	* mml-sec.el, sieve-manage.el, smime.el: Require password-cache or
	password.

2007-12-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* mailcap.el: Reduce dependencies.
	(mail-header-parse-content-type): Autoload.
	(mailcap-delete-duplicates): New alias.
	(mailcap-mime-info): Add optional argument NO-DECODE.
	(mailcap-mime-types): Use mailcap-delete-duplicates.

	* message.el (message-ignored-supersedes-headers): Add "X-ID".

2007-12-03  Nathan J. Williams  <nathanw@MIT.EDU>  (tiny change)

	* imap.el (imap-mailbox-status-asynch): Upcase STATUS items.
	(imap-parse-status): Upcase status-att for servers that sends them
	lower-case (e.g., MS Exchange 2007).

2007-12-03  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-sum.el (gnus-uu-extract-map): Add a command for the yenc
	function.

	* gnus-uu.el (gnus-uu-decode-yenc): New command.
	(gnus-uu-yenc-article): New function.

	* yenc.el (yenc-first-part-p, yenc-last-part-p): New functions.

	* mm-uu.el (mm-uu-yenc-extract): Get the data from the original
	buffer.

2007-12-02  Glenn Morris  <rgm@gnu.org>

	* binhex.el (binhex): New custom group.
	(binhex-decoder-program, binhex-decoder-switches)
	(binhex-use-external): Move to the binhex custom group.

	* uudecode.el (uudecode): New custom group.
	(uudecode-decoder-program, uudecode-decoder-switches)
	(uudecode-use-external): Move to the uudecode custom group.

	* netrc.el (top-level): Don't load `encrypt' features.
	(netrc-parse): Don't use encrypt.
	(netrc-find-service-name, netrc-find-service-number): Don't use caddr.

	* encrypt.el: Remove file.

2007-12-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-cite-prefix-regexp): Remove `-' and `+' to avoid
	matches on patches.

	* gnus-art.el (gnus-article-browse-html-article): Mention
	`mm-text-html-renderer' in the doc string.

	* rfc2047.el (rfc2047-encode-max-chars): Refer to RFC 2047 in doc
	string.  Add comments.

	* message.el (message-idna-to-ascii-rhs-1): Don't call `idna-to-ascii'
	if rhs is ASCII.

2007-12-01  Glenn Morris  <rgm@gnu.org>

	* mail-source.el (top-level): Require format-spec before
	eval-when-compile.

2007-11-30  Glenn Morris  <rgm@gnu.org>

	* encrypt.el: Require password, rather than autoloading password-read.

2007-11-29  Glenn Morris  <rgm@gnu.org>

	* imap.el (sasl-find-mechanism, sasl-mechanism-name)
	(sasl-make-client, sasl-next-step, sasl-step-data)
	(sasl-step-set-data): Declare as functions.

2007-11-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* tls.el (tls-hostmismatch, open-tls-stream): Checkdoc cleanup.

2007-11-28  Elias Oltmanns  <eo@nebensachen.de>

	* tls.el (open-tls-stream): Actually consult tls-checktrust to see if
	certs should be verified and what is to be done in the event of a
	verification failure.

	* gnus.el (gnus-method-to-server): Add an optional parameter so the
	caller can indicate whether the cache should be disregarded for this
	call.  This way the result of the call is reproducible at all times and
	can be considered a canonical server name for the supplied method.
	(gnus-agent-method-p): Canonicalize server names by pushing their
	method through `gnus-method-to-server' using the no-cache argument.

	* gnus-srvr.el (gnus-server-insert-server-line): Call
	`gnus-method-to-server' with `no-cache' argument.

	* gnus-agent.el (gnus-agent-toggle-plugged): Don't call
	gnus-agent-possibly-synchronize-flags as this should be called when the
	server is actually being opened.
	(gnus-agent-possibly-synchronize-flags)
	(gnus-agent-possibly-synchronize-flags-server): Move check for the
	flags file of an agentized server to the latter function.

	* gnus-int.el (gnus-agent-possibly-synchronize-flags-server): Autoload.
	(gnus-open-server): Call gnus-agent-possibly-synchronize-flags-server
	after a connection has been established successfully.

2007-11-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Force to display face if called
	interactively; check if gnus-article-x-face-too-ugly matches author.
	(article-display-x-face): Display face even if From header is missing
	as article-display-face does.

2007-11-27  Dan Nicolaescu  <dann@ics.uci.edu>

	* hashcash.el (message-narrow-to-headers-or-head)
	(message-fetch-field, message-goto-eoh)
	(message-narrow-to-headers): Declare as functions.

2007-11-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-sources): Default to fetch from file for
	compatibility with default of nnmail-spool-file.

2007-11-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-allow-irregular-q-encoded-words): New variable.
	(rfc2047-encodable-p): Use rfc2047-encoded-word-regexp instead of "=?"
	to look for encoded word that should be encoded again.
	(rfc2047-encoded-word-regexp): Make B encoding pattern strict.
	(rfc2047-encoded-word-regexp-loose): New constant that has loose Q
	encoding pattern.
	(rfc2047-decode-region): Switch strict regexp and loose one according
	to rfc2047-allow-irregular-q-encoded-words.

2007-11-25  Romain Francoise  <romain@orebokech.com>

	* gnus-msg.el (gnus-summary-reply): Delete extra paren.

2007-11-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* tls.el (tls-program): Provide more custom choices from
	`tls-checktrust'.  Refer to `tls-checktrust' in doc string.
	(tls-process-connection-type, tls-success): Remove "*" in doc string.

2007-11-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmail.el (nnmail-spool-file): Remove obsolete variable.
	(nnmail-get-new-mail): Remove code using `nnmail-spool-file'.

	* gnus-start.el (defvar, gnus-get-unread-articles): Remove code using
	`nnmail-spool-file'.

	* nnkiboze.el (nnkiboze-generate-groups): Don't bind obsolete
	`nnmail-spool-file'.

	* gnus-move.el (gnus-change-server): Ditto.

	* gnus-kill.el (gnus-batch-score): Ditto.

	* gnus-cache.el (gnus-jog-cache): Ditto.

	* gnus-msg.el (gnus-summary-reply):
	Ignore gnus-confirm-mail-reply-to-news for wide and very wide replies.

2007-11-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* tls.el (tls-checktrust, tls-hostmismatch, tls-untrusted): Add custom
	version.  Minor improvement to doc strings.
	(tls-program): Add comment.

2007-11-24  Elias Oltmanns  <eo@nebensachen.de>

	* tls.el (tls-certtool-program, tls-hostmismatch): New variables.
	(tls-checktrust): New variable.  Check if GNU TLS complained about a
	mismatch between the hostname provided in the certificate and the name
	of the host connnecting to.
	(open-tls-stream): Use them.  Check certificates against trusted root
	certificates.

2007-11-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-cache.el (gnus-cache-generate-nov-databases):
	Use nnml-generate-nov-databases-directory instead of
	nnml-generate-nov-databases-1.

2007-11-24  Glenn Morris  <rgm@gnu.org>

	* message.el (message-tool-bar-retro): Update for rename
	mail_send.xpm->mail-send.xpm.

2007-11-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* smime.el (smime-cert-by-ldap-1): Use `ldap-search' instead of
	`smime-ldap-search' for Emacs 22 and up.

2007-11-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-article-truncate-lines): Use `truncate-lines'.

	* message.el (message-send-mail-function): Fix error convention.
	(message-mailer-swallows-blank-line, message-send-mail-with-sendmail)
	(message-widen-reply, message-send-mail, message-talkative-question)
	(message-with-reply-buffer, message-generate-new-buffer-clone-locals)
	(message-clone-locals, message-send-news): Use with-current-buffer.
	(message-insert-or-toggle-importance): Remove unused var `valid'.
	(message-make-references): Remove unused var `new-references'.
	(message-make-mail-followup-to): Remove unused var `subscribed-lists'.

2007-11-22  Juanma Barranquero  <lekktu@gmail.com>

	* spam.el (spam-find-spam, spam-enter-list): Doc fixes.
	(spam-split-symbolic-return-positive): Reflow docstring.
	(spam-backends, spam-summary-exit-behavior)
	(spam-mark-ham-unread-before-move-from-spam-group)
	(spam-summary-score-preferred-header, spam-sa-learn-spam-switch)
	(spam-sa-learn-ham-switch, spam-sa-learn-unregister-switch)
	(spam-clear-cache, spam-backend-check, spam-install-backend)
	(spam-install-statistical-backend, spam-list-of-processors)
	(spam-group-processor-p, spam-split, spam-bogofilter-score)
	(spam-bsfilter-score, spam-check-bsfilter, spam-crm114-score)
	(spam-check-crm114, spam-initialize, spam-unload-hook):
	Fix typos in docstrings.

2007-11-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Mark groups as having never
	been checked if they have never been read and those group levels are
	higher than the one that a user specified.

2007-11-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Don't prevent from checking
	foreign groups unless a group level is specified by a user.
	Reported by Dan Nicolaescu <dann@ics.uci.edu>.

2007-11-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-send-mail-function): Require sendmail.

2007-11-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-send-mail-function): Check for smtpmail too.

	* utf7.el (utf7-encode, utf7-decode): Use coding system
	`utf-7'/`utf-7-imap' from utf-7.el' if available.

	* message.el (message-send-mail-function): New function.
	(message-send-mail-function): Set default using
	message-send-mail-function.  Adjust doc string.
	(message-send-mail-with-mailclient): New function.

2007-11-16  Dan Nicolaescu  <dann@ics.uci.edu>

	* smime.el (from):
	* rfc2047.el (message-posting-charset):
	* qp.el (mm-use-ultra-safe-encoding):
	* pop3.el (parse-time-months):
	* nnrss.el (mm-text-html-renderer, mm-text-html-washer-alist):
	* nnml.el (files):
	* nnheader.el (gnus-newsgroup-name, nnheader-file-coding-system)
	(jka-compr-compression-info-list, ange-ftp-path-format)
	(efs-path-regexp):
	* nndiary.el (files):
	* mml2015.el (mc-default-scheme, mc-schemes, pgg-default-user-id)
	(pgg-errors-buffer, pgg-output-buffer, epg-user-id-alist)
	(epg-digest-algorithm-alist, inhibit-redisplay)
	(password-cache-expiry):
	* mml1991.el (pgg-default-user-id, pgg-errors-buffer)
	(pgg-output-buffer, password-cache-expiry):
	* mml.el (mml-dnd-protocol-alist, ange-ftp-name-format)
	(efs-path-regexp):
	* mml-smime.el (epg-user-id-alist, epg-digest-algorithm-alist)
	(inhibit-redisplay):
	* mm-uu.el (file-name, start-point, end-point, entry)
	(gnus-newsgroup-name, gnus-newsgroup-charset):
	* mm-util.el (mm-mime-mule-charset-alist, latin-unity-coding-systems)
	(latin-unity-ucs-list):
	* mm-bodies.el (mm-uu-yenc-decode-function, mm-uu-decode-function)
	(mm-uu-binhex-decode-function):
	* message.el (gnus-message-group-art, gnus-list-identifiers)
	(rmail-enable-mime-composing, gnus-local-organization)
	(gnus-post-method, gnus-select-method, gnus-active-hashtb)
	(gnus-read-active-file, facemenu-add-face-function)
	(facemenu-remove-face-function, gnus-article-decoded-p)
	(tool-bar-mode):
	* mail-source.el (display-time-mail-function):
	* gnus-util.el (nnmail-pathname-coding-system)
	(nnmail-active-file-coding-system, gnus-emphasize-whitespace-regexp)
	(gnus-original-article-buffer, gnus-user-agent)
	(rmail-default-rmail-file, mm-text-coding-system, tool-bar-mode)
	(xemacs-codename, sxemacs-codename, emacs-program-version):
	* gnus-sum.el (tool-bar-mode, gnus-tmp-header, number):
	* gnus-start.el (gnus-agent-covered-methods)
	(gnus-agent-file-loading-local, gnus-agent-file-loading-cache)
	(gnus-current-headers, gnus-thread-indent-array, gnus-newsgroup-name)
	(gnus-newsgroup-headers, gnus-group-list-mode)
	(gnus-group-mark-positions, gnus-newsgroup-data)
	(gnus-newsgroup-unreads, nnoo-state-alist)
	(gnus-current-select-method, mail-sources)
	(nnmail-scan-directory-mail-source-once, nnmail-split-history)
	(nnmail-spool-file, gnus-cache-active-hashtb):
	* gnus-mh.el (mh-lib-progs):
	* gnus-ems.el (gnus-tmp-unread, gnus-tmp-replied)
	(gnus-tmp-score-char, gnus-tmp-indentation, gnus-tmp-opening-bracket)
	(gnus-tmp-lines, gnus-tmp-name, gnus-tmp-closing-bracket)
	(gnus-tmp-subject-or-nil, gnus-check-before-posting, gnus-mouse-face)
	(gnus-group-buffer):
	* gnus-cite.el (font-lock-defaults-computed, font-lock-keywords)
	(font-lock-set-defaults):
	* gnus-art.el (tool-bar-map, w3m-minor-mode-map)
	(gnus-face-properties-alist, charset, gnus-summary-article-menu)
	(gnus-summary-post-menu, total-parts, type, condition, length):
	* gnus-agent.el (gnus-agent-read-agentview):
	* flow-fill.el (show-trailing-whitespace):
	* gnus-group.el (tool-bar-mode, nnrss-group-alist): Remove unnecessary
	eval-and-compile wrappers for byte compiler pacifiers.

	* mm-view.el (mm-inline-image-xemacs): Only do something for XEmacs.
	(mm-display-inline-fontify): Check for featurep 'xemacs not
	extent-list.

	* mm-decode.el (mm-display-external): Check for featurep 'xemacs not
	itimer-list.
	(mm-create-image-xemacs): Only do something for XEmacs.
	(mm-image-fit-p): Check for featurep 'xemacs not glyph-width.

	* mm-util.el (mm-find-buffer-file-coding-system): Add check for XEmacs.

	* gnus-registry.el (gnus-adaptive-word-syntax-table):
	* gnus-fun.el (gnus-face-properties-alist): Pacify byte compiler.

2007-11-15  Juanma Barranquero  <lekktu@gmail.com>

	* nnimap.el (nnimap-split-download-body):
	* gnus-demon.el (gnus-demon):
	* gnus-uu.el (gnus-uu-default-view-rules): Fix typos in docstrings.

2007-11-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-insert-buffer-substring, nntp-copy-to-buffer): New
	macros.
	(nntp-wait-for, nntp-retrieve-articles, nntp-async-trigger)
	(nntp-retrieve-headers-with-xover): Use nntp-insert-buffer-substring to
	copy data from unibyte buffer to multibyte current buffer.
	(nntp-retrieve-headers, nntp-retrieve-groups); Use nntp-copy-to-buffer
	to copy data from unibyte current buffer to multibyte buffer.
	(nntp-make-process-buffer): Make process buffer unibyte.

	* pop3.el (pop3-open-server): Fix typo in Lisp code.

2007-11-14  Denys Duchier  <denys.duchier@univ-orleans.fr>  (tiny change)

	* pop3.el (pop3-open-server): Accept and process data more robustly at
	connexion start to avoid spurious "POP SSL connexion failed" errors.

2007-11-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-active-to-gnus-format): Use unibyte buffer to
	read group names.

2007-11-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-confirm-mail-reply-to-news): Adjust :version.

2007-11-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-parse-active): Make group names unibyte.
	(nnmail-save-active): Use a unibyte buffer when saving active file,
	which may contain non-ASCII group names.

	* nnml.el (nnml-request-group): Decode group names in messages.

2007-11-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-citation-line-function)
	(message-insert-formatted-citation-line): Fix spelling of
	`message-insert-formated-citation-line'.

2007-11-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-highlight): Mark as risky local variable.

2007-11-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnml.el (nnml-request-rename-group): Bind file-name-coding-system to
	nnmail-pathname-coding-system.

	* gnus-group.el (gnus-group-rename-group): Encode non-ASCII group name
	that a user enters; decode group names in messages.

	* gnus-msg.el (gnus-inews-do-gcc): Encode non-ASCII group names.

2007-11-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-eval-alist): Mark as risky local variable.

	* gnus.el (gnus-group-charter-alist): Mark as risky local variable.

	* gnus-art.el (gnus-button-alist, gnus-header-button-alist): Mark as
	risky local variable.

	* gnus-group.el (gnus-group-icon-list): Mark as risky local variable.

2007-11-01  Teodor Zlatanov  <tzz@lifelogs.com>

	* encrypt.el: Improve documentation to fix function name typo.
	Reported by Daiki Ueno <ueno@unixuser.org>.

2007-11-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page): Honor gnus-article-over-scroll
	even if the point is not in the last page of an article.
	(gnus-article-prev-page): Honor gnus-article-over-scroll when moving
	back to the previous page.

2007-10-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* qp.el (quoted-printable-decode-string): Fix typo in doc string.

2007-10-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el (gnus-x-splash): Work even if there's no scroll bar.

2007-10-29  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-check-news-body-syntax): Avoid
	mm-string-as-multibyte.
	(message-hide-headers): Don't assume (point-min)==1.

2007-10-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-remove-blank-cited-lines): Fix if remove is
	given.
	(message-bogus-address-regexp): New variable.
	(message-bogus-recipient-p): New function.
	(message-check-recipients): New command.
	(message-syntax-checks): Add `bogus-recipient'.
	(message-fix-before-sending): Add `bogus-recipient'.

	* gnus-art.el (gnus-button-mid-or-mail-heuristic-alist): Add "alpine".
	(gnus-treat-body-boundary): Don't test window-system.

2007-10-28  Leo  <sdl.web@gmail.com>  (tiny change)

	* gnus-art.el (gnus-treat-emphasize): Don't test window-system.

2007-10-28  Miles Bader  <miles@gnu.org>

	* nnheader.el (nnheader-uniquify-message-id): Make sure this is defined
	at compile-time too.

2007-10-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-message-setup-hook): Add
	`message-remove-blank-cited-lines' to options.

2007-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-remove-blank-cited-lines): New function.
	Suggested by Karl Plästerer.

2007-10-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* hashcash.el (mail-add-payment): Replace mapcar called for effect with
	mapc.

	* imap.el (imap-open): Replace mapcar called for effect with mapc.
	(top-level): Use mapc to set functions to be traced for debugging.

	* legacy-gnus-agent.el (gnus-agent-convert-agentview): Replace mapcar
	called for effect with while loop.

	* message.el (message-talkative-question): Replace mapcar called for
	effect with mapc.

	* mm-util.el: Use mapc instead of mapcar to make compatible functions.
	(mm-find-mime-charset-region, mm-find-charset-region): Replace mapcar
	called for effect with dolist.

	* mml.el (mml-insert-mime): Replace mapcar called for effect with mapc.

	* nndiary.el: Use dolist instead of mapcar to add diary headers to
	gnus-extra-headers and nnmail-extra-headers.

	* nnimap.el (nnimap-request-update-info-internal): Replace mapcar
	called for effect with dolist.
	(top-level): Use mapc to set functions to be traced for debugging.

	* nnmail.el (nnmail-read-incoming-hook): Doc fix.
	(nnmail-split-fancy-with-parent): Replace mapcar called for effect with
	dolist.

	* nnmaildir.el (nnmaildir--delete-dir-files, nnmaildir-request-close):
	Replace mapcar called for effect with mapc.
	(nnmaildir--scan, nnmaildir-request-scan, nnmaildir-retrieve-groups)
	(nnmaildir-request-update-info, nnmaildir-request-delete-group)
	(nnmaildir-retrieve-headers, nnmaildir-request-set-mark)
	(nnmaildir-close-group): Replace mapcar called for effect with dolist.

	* nnrss.el (nnrss-make-hash-index): Use gnus-remove-if instead of
	remove-if that's a cl function.

	* webmail.el (webmail-debug): Replace mapcar called for effect with
	dolist.

	* gnus-xmas.el (gnus-group-add-icon): Replace mapcar called for effect
	with mapc.

2007-10-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-read-agentview, gnus-agent-save-alist)
	(gnus-agent-expire-unagentized-dirs): Replace mapcar called for effect
	with while loop.

	* gnus-art.el: Use mapc instead of mapcar to make gnus-article-*
	functions from article-* functions.
	(gnus-multi-decode-header): Replace mapcar called for effect with
	dolist.

	* gnus-bookmark.el (gnus-bookmark-bmenu-list)
	(gnus-bookmark-show-details): Replace mapcar called for effect with
	while loop.

	* gnus-diary.el (gnus-diary-update-group-parameters): Replace mapcar
	called for effect with while loop.

	* gnus-group.el (gnus-group-suspend): Replace mapcar called for effect
	with dolist.

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): Replace
	mapcar called for effect with dolist.

	* gnus-spec.el (gnus-correct-length): Make it simple and fast.

	* gnus-sum.el (gnus-multi-decode-encoded-word-string)
	(gnus-build-sparse-threads, gnus-summary-limit-include-expunged):
	Replace mapcar called for effect with dolist.
	(gnus-simplify-buffer-fuzzy): Replace mapcar called for effect with
	mapc.

	* gnus-topic.el (gnus-topic-find-groups, gnus-topic-move-group):
	Replace mapcar called for effect with dolist.
	(gnus-topic-list): Replace mapcar called for effect with mapc.

	* gnus.el: Use mapc instead of mapcar to add autoloads.

2007-10-23  Richard Stallman  <rms@gnu.org>

	* gnus-group.el (gnus-group-highlight): Mark as risky.

2007-10-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-server-to-method): Return method found first in
	gnus-newsrc-alist.

	* gnus-art.el (gnus-article-highlight-signature)
	(gnus-insert-prev-page-button, gnus-insert-next-page-button): Make a
	button overlay without the front stickiness.

2007-10-22  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-expire-group-1): The check for an unsorted
	overview buffer needed a catch to receive its throw.
	(gnus-agent-flush-cache): Declared as interactive to make this function
	easier to use.

2007-10-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* html2text.el (html2text-fix-paragraph): Use `forward-line' instead of
	`next-line'.

2007-10-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-fancy-expiry-target): Use rmail-dont-reply-to to
	exclude address matching message-dont-reply-to-names.

2007-10-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-string<): New function.

	* gnus-sum.el (gnus-article-sort-by-author)
	(gnus-article-sort-by-recipient, gnus-article-sort-by-subject): Use it.

2007-10-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-win.el (gnus-configure-windows): Focus on the frame for which
	the frame-focus tag is set in gnus-buffer-configuration.

2007-10-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-add-button): Make a button overlay without
	the front stickiness.

2007-10-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-button-alist): Exclude newline in RFC2396-compliant
	url pattern; remove duplicate one.
	(gnus-article-extend-url-button): New function.
	(gnus-article-add-buttons): Use it.
	(gnus-button-push): Use concatenated url that it makes.

2007-10-04  Juanma Barranquero  <lekktu@gmail.com>

	* sieve-manage.el (sieve-manage-interactive-login): Doc fix.

2007-10-02  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-uu.el (gnus-uu-reginize-string, gnus-uu-expand-numbers):
	Don't hardcode point-min==1.

2007-10-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-synonym-alist): Alias gbk to cp936.
	Fix comment about "iso8859-1".

2007-10-08  Daiki Ueno  <ueno@unixuser.org>

	* mm-decode.el (mm-possibly-verify-or-decrypt): Replace PARTS with the
	ones returned from the verify-function.

	* mm-uu.el (mm-uu-pgp-signed-extract-1): Call
	mml2015-extract-cleartext-signature if extraction failed.

2007-10-07  Daiki Ueno  <ueno@unixuser.org>

	* mm-uu.el (mm-uu-pgp-signed-extract-1): Delete the first line
	beginning with "-----BEGIN PGP SIGNED MESSAGE-----" if extraction
	failed.

2007-10-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* Relicense "GPLv2 or later" files to "GPLv3 or later".

2007-10-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* pgg.el, pgg-def.el, pgg-gpg.el: Revert to the version in v5-10.  The
	trunk version of PGG was unmaintained.  The author of PGG, Daiki Ueno,
	recommends to use EasyPG instead of PGG.

	* pgg.el: Revert to revision 6.23.2.16

	* pgg-def.el: Revert to revision 6.6.2.14.

	* pgg-gpg.el: Revert to revision 6.23.2.34.

2007-09-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-kill-thread): Allow universal prefix zero
	to mark a thread as expirable.  Add variable `hide' to handle hiding of
	thread for both the null and zero (kill/expire thread) universal prefix
	cases.
	(gnus-summary-expire-thread): Add new function to expire a thread,
	using gnus-summary-kill-thread.
	(gnus-summary-mode-map, gnus-summary-thread-map): Add 'M-C-e' and 'T e'
	shortcuts for gnus-summary-expire-thread.
	(gnus-summary-mode-map, gnus-summary-thread-map): Remove `M-C-e' and `T
	e' bindings for gnus-summary-expire-thread.  Add `T E' binding.

2007-09-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-store-extra-entry): Allow for nil
	extras value, so an extras entry can be deleted.
	(gnus-registry-delete-extra-entry): Use it.
	(gnus-registry-fetch-extra-flags, gnus-registry-has-extra-flag)
	(gnus-registry-store-extra-flags, gnus-registry-delete-extra-flags)
	(gnus-registry-delete-all-extra-flags): Allow for arbitrary flag symbol
	storage through the gnus-registry, and provide an appropriate API for
	it.

2007-09-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-newsgroup-maximum-articles): Move from gnus.el.
	Suggested by Leo <sdl.web@gmail.com>.

	* gnus.el: Do.

2007-09-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-newsgroup-maximum-articles): Rename from
	gnus-maximum-newsgroup.  Suggested by Leo <sdl.web@gmail.com>.

	* gnus-agent.el (gnus-agent-fetch-headers): Do.

	* gnus-sum.el (gnus-articles-to-read, gnus-list-of-unread-articles)
	(gnus-list-of-read-articles, gnus-sequence-of-unread-articles): Do.

2007-09-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmbox.el (nnmbox-request-article): Don't assume delim regexp matches
	newline.
	(nnmbox-request-accept-article): Don't change article in source buffer;
	narrow to header to use message-fetch-field rather than
	nnmail-fetch-field; use with-current-buffer instead of save-excursion.
	(nnmbox-request-replace-article): Quote lines that'll be misidentified
	as delimiters; make sure article ends with newline.
	(nnmbox-delete-mail): Correct last position of article to be deleted;
	ignore X-Gnus-Newsgroup header in article body.
	(nnmbox-save-mail): Quote lines looking like delimiters at the right
	positions; make sure article ends with newline.

	* message.el (message-display-abbrev): Don't infloop when a user
	inserts SPC in the beginning of header.

	* lpath.el: Don't bind define-ccl-program for non-Mule XEmacs; bind
	coding-system-for-read and coding-system-for-write for XEmacs having no
	file-coding feature.

	* dgnushack.el: Bind or autoload define-ccl-program for XEmacs.

2007-09-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-unfollowed-groups): Add INBOX to the
	list of groups not followed by default.  Fix type to be regexp.
	(gnus-registry-grep-in-list): Fix inverted parameters to string-match.

2007-09-06  Tassilo Horn  <tassilo@member.fsf.org>

	* hmac-def.el (define-hmac-function): Switch from old-style to
	new-style backquotes.

	* md4.el (md4-make-step): Likewise.

2007-09-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-gnus-to-newsrc-format): Use a unibyte buffer and
	raw-text coding system when saving .newsrc file, which may contain
	non-ASCII group names.

2007-09-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cus.el (gnus-score-extra): New widget.
	(gnus-score-extra-convert): New function.
	(gnus-score-customize): Use it for Extra.

2007-08-31  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-extract-cleartext-signature): New function.
	(mml2015-mailcrypt-clear-verify): Use it.
	(mml2015-gpg-clear-verify): Use it.
	(mml2015-pgg-clear-verify): Use it.
	(mml2015-epg-clear-verify): Replace the current part with the output
	from GnuPG; don't extract the plaintext by itself.

	* mm-uu.el (mm-uu-pgp-beginning-signature): Abolish.
	(mm-uu-pgp-signed-extract-1): Bind coding-system-for-read when calling
	mml2015-clear-verify-function; don't touch the armor headers or
	dash-escaped text here.

2007-08-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-part): Don't jump to nonexistent part.
	(gnus-mime-view-part-as-type-internal): Default to text/plain for text
	parts, or application/octet-stream as a last resort.
	(gnus-mime-view-part-as-type): Don't toggle display.
	(gnus-mime-view-part-as-charset): Don't turn off display before
	querying charset.

	* mm-view.el (mm-inline-text-html-render-with-w3): Don't add XEmacs
	stuff to undisplayer function in Emacs.
	(mm-inline-text-html-render-with-w3m): Remove Emacs/W3 stuff.

	* mml.el (mml-generate-mime-1): Prefer utf-8 when encoding
	text/calendar parts.

2007-08-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-display-single): Use utf-8 by default for
	decoding text/calendar parts.

	* message.el (message-forward-make-body-mime): Always mark body as
	having no illegible text; remove signed-or-encrypted argument.
	(message-forward-make-body): Don't pass signed-or-encrypted arg to it.

	* mml.el (mml-generate-mime): Make sure it uses multibyte temp buffer.
	(mml-generate-mime-1): Don't encode body if it is specified to be in
	raw form; don't make buffer be unibyte when inserting multibyte string.

2007-08-23  Stefan Monnier  <monnier@iro.umontreal.ca>

	* sha1.el: Fix up comment style.
	(sha1-F0, sha1-F1, sha1-F2, sha1-F3, sha1-S1, sha1-S5, sha1-S30)
	(sha1-OP, sha1-add-to-H): Use new-style backquotes.

	* hex-util.el: Fix up comment style.
	(hex-char-to-num, num-to-hex-char): Use new-style backquotes.

	* gnus-salt.el: Use with-current-buffer.
	(gnus-pick-setup-message): Fix long-standing typo.

2007-08-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* imap.el (imap-logout-timeout): New variable.
	(imap-logout, imap-logout-wait): New functions.
	(imap-kerberos4-open, imap-gssapi-open, imap-close): Use them.

	* nnimap.el (nnimap-logout-timeout): New server variable.
	(nnimap-open-server, nnimap-close-server): Bind imap-logout-timeout to
	nnimap-logout-timeout.

	* gnus-art.el (gnus-article-summary-command-nosave)
	(gnus-article-read-summary-keys): Don't use 3rd arg of pop-to-buffer.

2007-08-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-maximum-newsgroup): New variable.

	* gnus-agent.el (gnus-agent-fetch-headers): Limit the range of articles
	according to gnus-maximum-newsgroup.

	* gnus-sum.el (gnus-articles-to-read, gnus-list-of-unread-articles)
	(gnus-list-of-read-articles, gnus-sequence-of-unread-articles):
	Limit the range of articles according to gnus-maximum-newsgroup.

2007-08-14  Tassilo Horn  <tassilo@member.fsf.org>

	* gnus-art.el (gnus-sticky-article): Fixed problems described in
	<b4mps1qitio.fsf@jpl.org> on ding.  Thanks to Katsumi.
	Don't perform gnus-configure-windows here; reuse existing sticky
	article buffer.

	* gnus-sum.el (gnus-summary-display-article): Setup article buffer if
	it doesn't exist in gnus-article-mode.

2007-08-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-decoded-group-names): New variable.
	(gnus-agent-decoded-group-name): New function.
	(gnus-agent-group-path, gnus-agent-group-pathname): Use it.
	(gnus-agent-expire-group-1): Use it; decode group name in messages.

2007-08-12  Tassilo Horn  <tassilo@member.fsf.org>

	* gnus-sum.el (gnus-summary-article-map, gnus-summary-make-menu-bar):
	Add binding for gnus-sticky-article.
	(gnus-summary-exit): Don't kill sticky article buffers.

	* gnus-art.el (gnus-sticky-article-mode): New mode to generate a sticky
	article buffer.
	(gnus-sticky-article, gnus-kill-sticky-article-buffer)
	(gnus-kill-sticky-article-buffers): New commands.

2007-08-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-xref-number-is-evil): New server variable.
	(nntp-find-group-and-number): If it is non-nil, don't trust article
	numbers in the Xref header.

2007-08-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-read-group): New function.
	(gnus-agent-flush-group, gnus-agent-expire-group)
	(gnus-agent-regenerate-group): Use it.
	(gnus-agent-expire-unagentized-dirs): Bind file-name-coding-system to
	nnmail-pathname-coding-system.

2007-08-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el (gnus-x-splash): Bind inhibit-read-only to t.

	* gnus-sum.el (gnus-summary-insert-articles): Mark inserted articles
	that are unread as unread, and also as selected so that information of
	marks having been changed by a user may be updated when exiting group.

2007-08-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-display-single): Pass part number that is
	calculated ignoring signature parts to gnus-treat-article.

2007-08-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-security-verify-or-decrypt): Don't narrow to
	a point here in order to keep the window start.
	(gnus-insert-mime-security-button): Make a button overlay without the
	front stickiness.
	(gnus-mime-display-security): Goto the end of a button.

	* gnus-group.el (gnus-group-name-at-point): Fix regexps.

2007-08-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-name-at-point): Rewrite; rename from
	group-name-at-point.
	(gnus-group-completing-read): New function that offers decoded
	non-ASCII group names for completion.
	(gnus-fetch-group, gnus-group-read-ephemeral-group)
	(gnus-group-jump-to-group, gnus-group-make-group-simple)
	(gnus-group-unsubscribe-group, gnus-group-fetch-charter)
	(gnus-group-fetch-control): Use it.
	(gnus-fetch-group): Use group-name-at-point for the initial value
	rather than the default value; use gnus-alive-p.

	* gnus-msg.el (gnus-group-mail, gnus-group-news, gnus-group-post-news)
	(gnus-summary-mail-other-window, gnus-summary-news-other-window)
	(gnus-summary-post-news): Use gnus-group-completing-read.

	* gnus-sum.el (gnus-select-newsgroup): Decode group name in error msg.
	(gnus-read-move-group-name): Decode group name for completion.

2007-07-31  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-srvr.el (gnus-server-close-all-servers): Close servers not only
	in gnus-inserted-opened-servers but also in gnus-server-alist (Katsumi
	Yamaoka slightly modified the code).

2007-07-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-group-names-not-encoded-p): New variable.
	(nnmail-split-incoming): Bind it.

	* nnml.el (nnml-group-name-charset): New function.
	(nnml-decoded-group-name): Use it; don't decode group name if
	nnmail-group-names-not-encoded-p is non-nil.
	(nnml-encoded-group-name): New function.
	(nnml-group-pathname): Inline nnml-decoded-group-name.
	(nnml-request-expire-articles): Decode group name in message.
	(nnml-request-delete-group): Ditto; bind file-name-coding-system to
	nnmail-pathname-coding-system.
	(nnml-save-mail, nnml-active-number): Work with decoded group names and
	not decoded ones according to nnmail-group-names-not-encoded-p.
	(nnml-generate-active-info): Use nnml-encoded-group-name.

2007-08-08  Glenn Morris  <rgm@gnu.org>

	* gmm-utils.el, gnus-async.el, gnus-msg.el, gnus-score.el
	* gnus-util.el, imap.el, mailcap.el, nnimap.el: Replace `iff' in
	doc-strings and comments.

2007-07-25  Glenn Morris  <rgm@gnu.org>

	* Relicense all FSF files to GPLv3 or later.

2007-07-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-move-article): Make
	gnus-summary-respool-article work.

2007-07-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-type-alist): Refer to mm-uu-configure-list in doc
	string.

2007-07-20  Michaël Cadilhac  <michael@cadilhac.name>

	* nnrss.el (nnrss-ignore-article-fields): New variable.  List of fields
	that should be ignored when comparing distant RSS articles with local
	ones.
	(nnrss-make-hash-index): New function.  Create a hash index according
	to the ignored fields.
	(nnrss-check-group): Use it.

2007-07-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-group-pathname): Take notice of the method.

	* gnus-art.el (article-decode-group-name): Decode Xref header too.

	* gnus-group.el (gnus-group-make-group): Encode group name here unless
	the new optional argument ENCODED is non-nil.
	(gnus-group-make-doc-group): Use gnus-group-name-charset to determine
	coding system for encoding group name.
	(gnus-group-make-rss-group): Pass un-encoded group name to
	gnus-group-make-group.
	(gnus-group-set-info): Tell gnus-group-make-group that group name is
	encoded.

	* gnus-sum.el (gnus-summary-move-article, gnus-read-move-group-name):
	Encode group name to which articles are moved or copied.
	(gnus-summary-edit-article): Use gnus-group-name-charset to determine
	coding system for encoding Newsgroup, Followup-To and Xref headers.

	* nnagent.el (nnagent-request-set-mark): Use unibyte buffer to compose
	marks; use nnheader-file-coding-system to write a file.
	(nnagent-retrieve-headers): Bind file-name-coding-system to
	nnmail-pathname-coding-system.

	* nnmail.el (nnmail-insert-xref): Don't break non-ASCII group name.

	* nnml.el (nnml-decoded-group-name, nnml-group-pathname): New functions.
	(nnml-request-article, nnml-request-create-group)
	(nnml-request-rename-group, nnml-find-id)
	(nnml-possibly-change-directory, nnml-possibly-create-directory)
	(nnml-save-mail, nnml-active-number, nnml-marks-changed-p)
	(nnml-save-marks): Use nnml-group-pathname instead of
	nnmail-group-pathname.

	(nnml-request-create-group, nnml-request-expire-articles)
	(nnml-request-move-article, nnml-request-delete-group)
	(nnml-deletable-article-p, nnml-possibly-create-directory)
	(nnml-get-nov-buffer, nnml-generate-nov-databases-directory)
	(nnml-open-marks): Bind file-name-coding-system to
	nnmail-pathname-coding-system.

	(nnml-request-article): Pass server argument to nnml-find-group-number.
	(nnml-request-create-group, nnml-active-number, nnml-save-marks): Pass
	server argument to nnml-possibly-create-directory.
	(nnml-request-accept-article): Pass server argument to
	nnml-active-number and nnml-save-mail.
	(nnml-find-group-number): Pass server argument to nnml-find-id.
	(nnml-request-update-info): Pass server argument to
	nnml-marks-changed-p.

	(nnml-find-id, nnml-find-group-number, nnml-possibly-create-directory)
	(nnml-save-mail, nnml-active-number): Add server argument.

	(nnml-request-delete-group): Warn if group is missing.
	(nnml-get-nov-buffer): Decode group name.
	(nnml-generate-active-info): Encode group name.
	(nnml-open-marks): Decode group name in messages.

2007-07-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-part-wrapper): Work with the nearest part
	if it is not specified.
	(gnus-article-pipe-part, gnus-article-save-part)
	(gnus-article-interactively-view-part, gnus-article-copy-part)
	(gnus-article-view-part-as-charset, gnus-article-view-part-externally)
	(gnus-article-inline-part, gnus-article-save-part-and-strip)
	(gnus-article-replace-part, gnus-article-delete-part)
	(gnus-article-view-part-as-type): Pass raw prefix argument to
	gnus-article-part-wrapper.

2007-07-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-save-active): Bind
	nnheader-file-coding-system to gnus-agent-file-coding-system.

	* gnus-cache.el (gnus-cache-save-buffers)
	(gnus-cache-possibly-enter-article, gnus-cache-request-article)
	(gnus-cache-retrieve-headers, gnus-cache-change-buffer)
	(gnus-cache-possibly-remove-article, gnus-cache-articles-in-group)
	(gnus-cache-braid-nov, gnus-cache-braid-heads)
	(gnus-cache-generate-active, gnus-cache-rename-group)
	(gnus-cache-delete-group, gnus-cache-update-file-total-fetched-for)
	(gnus-cache-update-overview-total-fetched-for): Bind
	file-name-coding-system to nnmail-pathname-coding-system.
	(gnus-cache-decoded-group-names, gnus-cache-unified-group-names): New
	variables.
	(gnus-cache-decoded-group-name): New function.
	(gnus-cache-file-name): Use it.
	(gnus-cache-generate-active): Use non-decoded group name for active.

	* gnus-util.el (gnus-write-buffer): Bind file-name-coding-system at the
	right place.
	(gnus-write-active-file): Don't break non-ASCII group names.

	* nntp.el (nntp-marks-changed-p): Bind file-name-coding-system to
	nnmail-pathname-coding-system.

	* lpath.el: Bind default-file-name-coding-system,
	file-name-coding-system and language-info-alist for XEmacs.

	* gnus-uu.el (gnus-uu-decode-save): Typo.

2007-07-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-srvr.el (gnus-server-font-lock-keywords): Quote faces.

2007-07-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-rename-group, gnus-agent-delete-group)
	(gnus-agent-fetch-articles, gnus-agent-unfetch-articles)
	(gnus-agent-crosspost, gnus-agent-backup-overview-buffer)
	(gnus-agent-flush-group, gnus-agent-flush-cache)
	(gnus-agent-fetch-headers, gnus-agent-load-alist)
	(gnus-agent-read-agentview, gnus-agent-expire-group-1)
	(gnus-agent-retrieve-headers, gnus-agent-request-article)
	(gnus-agent-regenerate-group)
	(gnus-agent-update-files-total-fetched-for)
	(gnus-agent-update-view-total-fetched-for): Bind
	file-name-coding-system to nnmail-pathname-coding-system.
	(gnus-agent-group-pathname): Don't encode file names by
	nnmail-pathname-coding-system.
	(gnus-agent-save-local): Bind file-name-coding-system correctly; bind
	coding-system-for-write instead of buffer-file-coding-system to
	gnus-agent-file-coding-system.

	* gnus-msg.el (gnus-inews-make-draft, gnus-inews-insert-archive-gcc):
	Decode group name.

	* gnus-srvr.el (gnus-browse-foreign-server): Make group names unibyte.

	* gnus-start.el (gnus-update-active-hashtb-from-killed)
	(gnus-read-newsrc-el-file): Make group names unibyte.

	* nnmail.el (nnmail-group-pathname): Don't encode file names by
	nnmail-pathname-coding-system.

	* nnrss.el (nnrss-file-coding-system): Doc fix; make it begin with *.
	(nnrss-request-delete-group): Bind file-name-coding-system to
	nnmail-pathname-coding-system.
	(nnrss-read-server-data, nnrss-read-group-data): Bind
	file-name-coding-system correctly.
	(nnrss-check-group): Pass nnrss-file-coding-system to md5.

	* nntp.el: Require gnus-group for the function gnus-group-name-charset.
	(nntp-server-to-method-cache): New variable.
	(nntp-group-pathname): New function that decodes non-ASCII group names.
	(nntp-possibly-create-directory, nntp-marks-changed-p)
	(nntp-save-marks, nntp-open-marks): Use it.
	(nntp-possibly-create-directory, nntp-open-marks):
	Bind file-name-coding-system to nnmail-pathname-coding-system.
	(nntp-open-marks): Decode group names when bootstrapping marks.

	* rfc2047.el (rfc2047-encode-message-header): Make XEmacs decode
	Newsgroups and Folowup-To headers.

2007-07-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-srvr.el (gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face)
	(gnus-server-offline-face): Remove variable.
	(gnus-server-font-lock-keywords): Use faces that are not aliases.

	* gnus-util.el (gnus-message-with-timestamp-1): Use log-message instead
	of modifying message-stack directly for XEmacs.

	* mm-util.el (mm-decode-coding-string, mm-encode-coding-string)
	(mm-decode-coding-region, mm-encode-coding-region): Don't modify string
	if the coding-system argument is nil for XEmacs.

	* nnrss.el (nnrss-compatible-encoding-alist): Inherit the value of
	mm-charset-override-alist.

	* rfc2047.el: Don't require base64; require rfc2045 for the function
	rfc2045-encode-string.
	(rfc2047-encode-parameter): Use rfc2045-encode-string to quote or not
	to quote the parameter value.

2007-07-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-name-charset): Allow a method of the short
	form in gnus-group-name-charset-method-alist.

	* gnus-eform.el (gnus-edit-form): Add optional argument layout which
	overrides the default layout edit-form.

	* gnus-win.el (gnus-buffer-configuration): Add edit-server.

	* gnus-srvr.el (gnus-server-edit-server): Use edit-server layout.

2007-07-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-catchup): Don't recognize cached articles
	as unfetched articles.

2007-07-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-level-unsubscribed): Improve doc string.

2007-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnagent.el (nnagent-request-set-mark): Also set the marks for the
	original back end that keeps marks in the local system.

2007-06-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-summary-command-nosave): Don't set the 3rd
	arg of pop-to-buffer for XEmacs.
	(gnus-article-read-summary-keys): Ditto; don't restore window
	configuration if summary command ends up with neither article buffer
	nor summary buffer; describe bindings if summary keys end with C-h.

2007-06-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-fix-before-sending): Skip raw message part to be
	forwarded while checking illegible text.
	(message-forward-make-body-mime, message-forward-make-body): Mark
	signed or encrypted raw message as having no illegible text.

2007-06-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-add-timestamp-to-message): New user option.
	(gnus-message-with-timestamp-1): New macro.
	(gnus-message-with-timestamp): New function.
	(gnus-message): Use them.

	* nnheader.el (nnheader-message): Use them.

2007-06-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-gnus-to-quick-newsrc-format): Add newlines to
	.newsrc.eld file.

2007-06-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-fetch-headers)
	(gnus-agent-retrieve-headers): Bind
	gnus-decode-encoded-address-function to identity.

	* nntp.el (nntp-send-xover-command): Recognize an xover command is
	available also when the server returns simply a dot.

	* gnus-ems.el (gnus-x-splash): Redisplay window before measuring it.

2007-06-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el (gnus-x-splash): Fix calculation; error in tty.

2007-06-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el (gnus-x-splash): Make it work.

	* gnus-start.el (gnus-1): Relax restrictions that prevent gnus-x-splash
	from being used.

	* lpath.el: Bind line-spacing and tool-bar-mode for XEmacs.

2007-06-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-xmas-define): Make gnus-make-overlay ignore the
	4th and the 5th arguments.

	* gnus-art.el (gnus-insert-mime-button): Make a button overlay without
	the front stickiness.
	(gnus-article-summary-command-nosave): Correct the order of the
	arguments passed to pop-to-buffer.
	(gnus-article-read-summary-keys): Ditto; make it work properly when the
	summary command ends up with the article buffer.

	* mm-decode.el (mm-insert-part): Separate the extracted parts that have
	the same faces.

2007-06-07  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-split-methods): Fix typo in docstring.

2007-06-06  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-diary.el (gnus-diary-time-format, gnus-summary-sort-by-schedule):
	* gnus-sum.el (gnus-summary-highlight):
	* pgg.el (pgg-sign-region, pgg-sign):
	* mail-source.el (mail-source-delete-old-incoming-confirm):
	* nndiary.el (nndiary-reminders): Fix typos in docstrings.

2007-06-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-view-part-externally)
	(gnus-mime-view-part-internally): Fix predicate function passed to
	completing-read.

	* mm-decode.el (mm-image-fit-p): Return t if argument is not an image.

	* gnus.el (gnus-update-message-archive-method): Add :version.

2007-06-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-update-message-archive-method): New variable.

	* gnus-start.el (gnus-setup-news): Update saved "archive" method
	according to gnus-message-archive-method if
	gnus-update-message-archive-method is non-nil.

2007-05-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-limit-to-address): New function.  Suggested
	by Loic Dachary <loic@dachary.org>.
	(gnus-summary-limit-map, gnus-summary-make-menu-bar): Add it.

2007-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-pop-to-buffer): Add switch-function argument.
	(message-mail): Pass switch-function argument to it.

2007-05-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-decode.el (mm-file-name-rewrite-functions): Make it customizable.
	Improve doc string.

2007-05-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-header-from, gnus-header-subject, gnus-header-name)
	(gnus-header-content)
	* gnus-cite.el (gnus-cite-10)
	* gnus-srvr.el (gnus-server-closed)
	* gnus.el (gnus-group-mail-1, gnus-group-mail-1-empty)
	(gnus-group-mail-2, gnus-group-mail-2-empty, gnus-group-mail-3)
	(gnus-group-mail-3-empty, gnus-group-mail-low)
	(gnus-group-mail-low-empty, gnus-splash)
	* message.el (message-header-to, message-header-cc)
	(message-header-subject, message-header-other, message-header-name)
	(message-header-xheader, message-separator, message-cited-text)
	(message-mml): Lighten colors of faces used for dark background.

2007-05-24  Simon Josefsson  <simon@josefsson.org>

	* nnimap.el (nnimap-need-unselect-to-notice-new-mail): Change default
	to t as an experiment.  Suggested by Greg Troxel <gdt@work.lexort.com>.

2007-05-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-narrow-to-headers-or-head):
	Ignore mail-header-separator in the body.

2007-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-image-fit-p): Return t if image size is just the
	same as window size.

2007-05-22  Kevin Ryde  <user42@zip.com.au>

	* message.el (message-font-lock-keywords): Use message-header-xheader
	face for "X-Foo", its apparent intended purpose.  Move "X-" pattern
	ahead of the anything pattern, to get it recognised.

2007-05-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload ad-add-advice for XEmacs.  bbdb-com.el that
	spam.el loads uses it in the compiled defadvice form.

2007-05-12  Michaël Cadilhac  <michael@cadilhac.name>

	* gnus-sum.el (gnus-articles-to-read)
	(gnus-summary-insert-old-articles): Don't truncate group name for
	`read-string'.

	* gnus-util.el (gnus-limit-string): Delete this function.

	* gnus-sum.el (gnus-simplify-subject-fully): Use
	`truncate-string-to-width' instead.

2007-05-11  Michaël Cadilhac  <michael@cadilhac.name>

	* gnus-sum.el (gnus-summary-next-group-on-exit): New variable.  Tell
	if, on summary exit, the next group has to be selected.
	(gnus-summary-exit): Use it.

2007-05-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-mode): Fix comment about displaying
	non-break space.

2007-05-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnfolder.el (nnfolder-request-group, nnfolder-request-create-group):
	Check if group is not a directory.
	(nnfolder-request-expire-articles): Don't delete articles if the target
	group is not available.

	* nnml.el (nnml-request-create-group): Properly check if group is not a
	file.
	(nnml-request-expire-articles): Don't delete articles if the target
	group is not available.

	* rfc2047.el (rfc2047-quote-special-characters-in-quoted-strings):
	Don't quote characters that are within parentheses.

2007-05-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-auto-select-on-ephemeral-exit): New variable.
	(gnus-handle-ephemeral-exit): Select article according to it.

2007-05-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-insert-formated-citation-line): Remove newline.
	(message-citation-line-format): Add final \n here so that the user can
	avoid a blank line.

2007-05-03  Dan Christensen  <jdc@uwo.ca>

	* nndoc.el (nndoc-type-alist, nndoc-lanl-gov-announce-type-p)
	(nndoc-transform-lanl-gov-announce, nndoc-generate-lanl-gov-head):
	Update lanl/arXiv support.

2007-05-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el: Bump version number.

2007-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2007-05-01  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.6 is released.

2007-04-27  Didier Verna  <didier@xemacs.org>

	* gnus-util.el (gnus-orify-regexp): Moved and renamed to ...
	* gmm-utils.el (gmm-regexp-concat): here.
	* message.el: Don't require 'gnus-util.
	(message-dont-reply-to-names): Handle name change above.
	* gnus-sum.el (gnus-ignored-from-addresses): Ditto.

2007-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-charset-synonym-alist): Don't make it a user option
	since the initial value varies according to the system.

2007-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-charset-synonym-alist): Defcustom.

2007-04-25  NAKAJI Hiroyuki  <nakaji@jp.freebsd.org>  (tiny change)

	* mm-util.el (mm-charset-synonym-alist): Map iso8859-1 to iso-8859-1.

2007-04-24  Didier Verna  <didier@xemacs.org>

	Improve the type of gnus-ignored-from-addresses.
	* gnus-util.el (gnus-orify-regexp): New function.
	* message.el (gnus-util): Require it.
	* message.el (message-dont-reply-to-names): Use gnus-orify-regexp.
	* gnus-sum.el (gnus-ignored-from-addresses): New function.
	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Use it.

2007-04-24  Didier Verna  <didier@xemacs.org>

	* gnus-sum.el:
	* gnus-utils.el: Fix some trailing whitespaces.

2007-04-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-resend-message-edit): Add Gcc header.
	(gnus-summary-resend-bounced-mail): Ditto; search whole body for parent
	article's Message-ID; refer parent article in summary buffer.

	* message.el (message-bounce): Call mime-to-mml.

	* dgnushack.el (byte-optimize-form-code-walker): Fix the form which was
	not helpful to Emacs 21.1 and 21.2 for detecting a bug that does not
	optimize and/or forms properly.

2007-04-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* dgnushack.el (with-syntax-table): XEmacs bug has been fixed.  Add
	URL.

2007-04-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-supersede-article): Add Gcc header.

2007-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-strip-charset-parameters): New function.
	(gnus-mime-view-part-as-charset): Use it; redisplay subpart currently
	displayed of multipart/alternative part if it is invoked from summary
	buffer.

	* mm-view.el (mm-inline-text-html-render-with-w3m)
	(mm-inline-text-html-render-with-w3m-standalone)
	(mm-inline-render-with-function): Use mail-parse-charset by default.

2007-04-18  Levin Du  <zslevin@gmail.com>  (tiny change)

	* parse-time.el (parse-time-string-chars): Check if CHAR
	is less than the length of parse-time-syntax.

2007-04-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-digest-mail-forward): Pull articles processed
	from gnus-newsgroup-processable.

2007-04-16  Didier Verna  <didier@xemacs.org>

	* gnus-msg.el (gnus-configure-posting-styles): Handle
	message-signature-directory properly with :file syntax.  Reported by
	"Leo".

2007-04-11  Didier Verna  <didier@xemacs.org>

	New user option: message-signature-directory.
	* gnus-msg.el (gnus-configure-posting-styles): Support it.
	* message.el (message-insert-signature): Ditto.
	* message.el (message-signature-file): Doc update.
	* message.el (message-signature-directory): New.

2007-04-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-inews-yank-articles): Use
	message-exchange-point-and-mark instead of exchange-point-and-mark.

2007-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-yank-original): Make sure cited text ends with
	newline; don't exchange point and mark.

2007-04-07  Chong Yidong  <cyd@stupidchicken.com>

	* tls.el (open-tls-stream): Properly handle case where there
	is no associated buffer.

2007-04-03  Thien-Thi Nguyen  <ttn@gnu.org>

	* gnus-msg.el (gnus-inews-yank-articles): Fix bug: After
	message-yank-original, make sure (< mark TEXT point).

2007-03-31  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-fill-column): New variable.
	(message-mode): Use it.  Add comment on a possible new hook.

	* nnmail.el (nnmail-spool-file): Mark as obsolete.
	(nnmail-get-new-mail): Reformat.

	* gnus-registry.el (gnus-registry-cache-save): Add FIXME comment.

	* gmm-utils.el: Fix Commentary.
	(gmm-tool-bar-from-list): Fix typo in doc string.

2007-03-27  Thien-Thi Nguyen  <ttn@gnu.org>

	* message.el (message-yank-original): Don't switch point and mark
	unnecessarily to put point and mark as documented.

2007-03-27  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-put-addresses-in-ecomplete): Only fetch headers
	from the message heads.

2007-03-25  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-art.el (gnus-article-set-window-start): Do nothing when the
	article buffer does not have a window.  This may not be the best
	solution but is certainly better than setting the start of the null,
	that is the current, window.

2007-03-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-draft.el (gnus-draft-setup-hook): New hook.
	(gnus-draft-setup): Run it.

	* gnus-score.el (gnus-inhibit-slow-scoring): New variable, renamed from
	gnus-score-fast-scoring.  Allow regexp.
	(gnus-score-headers): Use it.

	* gnus-util.el (gnus-emacs-version): Include "no MULE" in no-MULE
	XEmacs.

	* gnus-art.el (gnus-article-browse-html-article): Fix typo in doc
	string.
	(gnus-button-alist): Also catch `<f1> k ...'.
	(gnus-treat-display-x-face): Fix doc string.

2007-03-25  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-msg.el (gnus-setup-message, gnus-inews-add-send-actions): Move
	evaluation of gnus-extended-version to ensure correct generation of the
	User-Agent header when message-generate-headers-first is used.

2007-03-24  Simon Josefsson  <simon@josefsson.org>

	* hashcash.el (hashcash-generate-payment-async): Don't crash if
	hashcash-path is nil.  Don't call callback with incorrect number of
	parameters if val is 0.

2007-03-20  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* message.el (message-required-news-headers):
	* gnus-util.el (gnus-intern-safe): Fix typo in docstring.

2007-03-18  Thien-Thi Nguyen  <ttn@gnu.org>

	* tls.el (open-tls-stream): In handshake-waiting loop,
	don't wait more if there is output available to process.

2007-03-17  Thien-Thi Nguyen  <ttn@gnu.org>

	* tls.el (tls-program): Doc fix.

2007-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-generate-new-buffers): Change the meaning of the
	nil value; add `standard' to the choices; treat t as `unique'; improve
	doc string.
	(gnus-select-frame-set-input-focus): Autoload.
	(message-buffer-name): Search for the existing message buffer if
	message-generate-new-buffers is nil or `standard'; treat the value t of
	message-generate-new-buffers as `unique'.
	(message-pop-to-buffer): Raise the frame already displaying the message
	buffer; clear the echo area after querying.
	(message-setup): Pass the `continue' argument to compose-mail.
	(message-mail): Prefer `switch-function' if it is given; search for the
	existing message buffer if the `continue' argument is non-nil; pass
	continue and switch-function arguments to compose-mail by way of
	message-setup.
	(message-mail-other-window): Adjust argument of message-setup.
	(message-mail-other-frame): Ditto.

2007-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (font-lock-set-defaults): Autoload it for Emacs.
	(gnus-message-citation-mode): Require font-lock for XEmacs; make sure
	to turn font-lock on when turning gnus-message-citation-mode on.

2007-03-06  Daiki Ueno  <ueno@unixuser.org>

	* mml-smime.el (mml-smime-use): New variable; default to use openssl.
	(mml-smime-function-alist): New variable; add epg as the backend.
	* mml-sec.el (mml-smime-sign): Don't require mml-smime, autoload
	mml-smime- functions instead.
	* mm-view.el: Require smime.

2007-03-05  Didier Verna  <didier@xemacs.org>

	* gnus-topic.el (gnus-topic-hierarchical-parameters): Perform merging
	instead of just inheritance for posting styles.
	* gnus.el (gnus-group-fast-parameter): Fix typo in comment.

2007-02-24  Chris Moore  <dooglus@gmail.com>

	* pgg-pgp5.el (pgg-pgp5-encrypt-region):
	* pgg-pgp.el (pgg-pgp-encrypt-region):
	* pgg-gpg.el (pgg-gpg-encrypt-region):
	Check pgg-encrypt-for-me if no other recipients.

2007-02-24  John Paul Wallington  <jpw@pobox.com>

	* tls.el (tls-certtool-program): Fix custom type.

2007-02-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-message-search-citation-line): Use point-at-bol
	and point-at-eol instead of line-(beginning|end)-position.

	* assistant.el (assistant-parse-buffer): Ditto.

	* netrc.el (netrc-parse-services): Ditto.

2007-02-28  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-find-usable-key): New function.
	(mml2015-epg-sign): Use it.
	(mml2015-epg-encrypt): Use it.

2007-02-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-make-in-reply-to): Quote name containing
	non-ASCII characters.  It will make the RFC2047 encoder cause an error
	if there are special characters.  Reported by NAKAJI Hiroyuki
	<nakaji@jp.freebsd.org>.

2007-02-27  Didier Verna  <didier@xemacs.org>

	Include the group parameters as well as the topic ones in the
	inheritance filter process.
	* gnus-topic.el (gnus-topic-hierarchical-parameters): New optional
	argument GROUP-PARAMS-LIST.
	* gnus-topic.el (gnus-group-topic-parameters): Use it.

2007-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-never-echoes-commands)
	(nntp-open-connection-functions-never-echo-commands): New variables.
	(nntp-send-command): Use them.

2007-02-20  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-verify): Simplified.

2007-02-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-content-disposition-alist): New user option.
	(mml-content-disposition): New function.
	(mml-insert-mime-headers, mml-minibuffer-read-disposition): Use it.
	(mml-attach-file, mml-dnd-attach-file): Pass file name to it.

2007-02-19  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-verify): Convert LF to CRLF before signature
	verification.

2007-02-15  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-parse-1): Fix date parsing to also match on
	articles posted in the last 24 hours.

2007-02-14  Chong Yidong  <cyd@stupidchicken.com>

	* smiley.el (smiley-regexp-alist): Add "dead" smiley.

2007-02-14  Michaël Cadilhac  <michael@cadilhac.name>

	* nntp.el (nntp-send-command): Don't wait for echoes when
	nntp-open-ssl-stream is used.

2007-02-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-test-font-lock-add-keywords)
	(gnus-message-add-citation-keywords)
	(gnus-message-remove-citation-keywords): Remove.
	(gnus-message-citation-mode): Instead of modifying font-lock-keywords
	directly, make the variables in font-lock-defaults buffer-local, add
	gnus-message-citation-keywords to them and then update the value of
	font-lock-keywords.

2007-02-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-cite-original-1): Don't call
	gnus-article-highlight-citation.

	* gnus-cite.el (gnus-cite-parse): Work with two or more MS-type
	citations; fix line count.

2007-02-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-test-font-lock-add-keywords): New function.
	(gnus-message-add-citation-keywords)
	(gnus-message-remove-citation-keywords): Use it; fix the emulating
	versions of font-lock-add-keywords and font-lock-remove-keywords to
	work with XEmacs correctly.

2007-02-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-face-list): Set the values of
	gnus-message-max-citation-depth and gnus-message-citation-keywords.
	(gnus-message-max-citation-depth): Use defvar rather than defconst.
	(gnus-message-cite-prefix-regexp): New variable.
	(gnus-message-search-citation-line): Use it; protect against long
	citation prefix; fill match data with nil rather than 0 for XEmacs; set
	the 0th match data for Emacs.
	(gnus-message-citation-keywords): Set LAXMATCH flag in every HIGHLIGHT.
	(gnus-message-add-citation-keywords): Append keywords rather than
	prepending; emulate font-lock-add-keywords if it is not available.
	(gnus-message-remove-citation-keywords): Emulate
	font-lock-remove-keywords if it is not available.

	* gnus-msg.el (gnus-message-highlight-citation): Default to t.

	* message.el (message-cite-prefix-regexp): Set the value of
	gnus-message-cite-prefix-regexp.

2007-02-01  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-parse-1): Update parser.

2007-01-29  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-button-prefer-mid-or-mail): Fix typo in docstring.

2007-01-28  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnslashdot.el (nnslashdot-request-article): Update end-of-article
	regexp.

2007-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* uudecode.el (uudecode-string-to-multibyte): New function emulating
	string-to-multibyte.
	(uudecode-decode-region-internal): Use it.

	* lpath.el: Fbind string-as-multibyte for XEmacs.

2007-01-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-home-score-file, gnus-home-adapt-file): Fix
	custom choice.

	* gnus-art.el (gnus-signature-limit): Fix custom choice.

2007-01-22  Daiki Ueno  <ueno@unixuser.org>

	* mm-util.el (mm-inhibit-file-name-handlers): Add epa-file-handler.

	* mm-decode.el (mm-save-part-to-file): Use `mm-write-region' instead of
	`write-region' to respect `mm-inhibit-file-name-handlers'.

2007-01-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnsoup.el (nnsoup-directory, nnsoup-packer, nnsoup-packet-directory):
	Use gnus-home-directory instead of "~/" or "$HOME".

2007-01-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* encrypt.el (encrypt-insert-file-contents): Add better prompt
	to mention filename.
	Add comments at beginning regarding usage.
	(encrypt-write-file-contents): Change interactive so a string is
	acceptable.  If the file has no associated model, show an error instead
	of a nonsense prompt.

2007-01-16  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-bsfilter-ham-switch): Fix typo.
	Thanks to Yoshihiko Yamada for kind notification of this typo.

2007-01-12  Kenichi Handa  <handa@m17n.org>

	* uudecode.el (uudecode-decode-region-internal): Make it work in a
	multibyte buffer.

2007-01-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-fast-scoring): New variable.
	(gnus-score-headers): Use it.

	* gnus-sum.el (gnus-auto-select-first): Improve doc string.

	* message.el (message-cite-original-1): Call
	gnus-article-highlight-citation if requested.
	(message-make-from): Allow name and address as optional arguments.

	* gnus-cite.el (gnus-article-highlight-citation): Add SAME-BUFFER arg.

	* gnus-art.el (gnus-article-browse-html-article): Add warning about web
	bugs to doc string.
	(gnus-button-alist): Add mid\\|message-id.
	(gnus-button-fetch-group): Extend for use in
	`browse-url-browser-function'.
	(gnus-button-url-regexp): Try to catch paired parentheses like in
	Wikipedia URLs.

	* gnus-sum.el (gnus-summary-reparent-children): Another doc string fix.
	Suggested by Simon Krahnke <overlord@gmx.li>.

2007-01-13  Romain Francoise  <romain@orebokech.com>

	* nnml.el (nnml-use-compressed-files): Fix typo in docstring.
	Update copyright.

2007-01-13  Patric Mueller  <bhaak@bigfoot.com>  (tiny change)

	* gnus-sum.el (gnus-summary-reparent-children): Fix typo in doc string.

2007-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-unfollowed-groups)
	(gnus-registry-split-fancy-with-parent): Fix documentation.

2007-01-08  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam-report.el (spam-report-gmane-internal): Speed up spam reporting
	from nnweb groups.

2006-12-31  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam-report.el (spam-report-gmane-internal): Add necessary "/" to
	Xref urls.  Erase buffer before requesting head.

2007-01-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-soup.el (gnus-soup): New custom group.  Make user variables
	customizable.

2007-01-05  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-sign): Ask user whether to skip or abort if
	no signing key is found.
	(mml2015-epg-encrypt): Ask user whether to skip or abort if
	no encrypting and/or signing key is found.

2007-01-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane-spam): Remove redundant message.

2007-01-01  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-gmane-create-mapping): Put back code to merge the
	headers read from disk with the ones newly found in the current search.
	This should no longer cause problems, because the article numbers in
	Gmane's `nov.php' output are ignored since the previous change.

2007-01-02  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gmm-utils.el (gmm-tool-bar-style): Fix custom type.

2007-01-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind clear-string and cp-supported-codepages; don't fbind
	replace-regexp-in-string; bind url-version; fbind display-images-p and
	timer-set-function for XEmacs; bind timer-list for XEmacs; fbind
	find-face and set-itimer-function for Emacs; bind itimer-list for
	Emacs.

	* mm-decode.el (mm-display-external): Use itimer function for XEmacs.

2007-01-01  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-make-menu-bar): Fix typo.

2006-12-31  Steve Youngs  <steve@sxemacs.org>

	* gnus-cite.el: Load easy-mmode at compile time for (S)XEmacs to get
	`define-minor-mode' macro definition expanded properly.
	(gnus-message-citation-mode): This is now OK for (S)XEmacs so don't
	exclude it there.

	* gnus-msg.el (gnus-message-highlight-citation): Revert Reiner's patch
	of 2006-12-30.  The default is nil on (S)XEmacs already because of the
	`fboundp' test.
	(gnus-message-citation-mode): Revert Reiner's patch of 2006-12-30.
	This is OK to autoload in (S)XEmacs now.

2006-12-30  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-sum.el (gnus-summary-limit-to-singletons): New command and
	keystroke.
	(gnus-summary-limit-to-singletons): Fix typo.

	* spam-report.el (spam-report-gmane-internal): Fall back on Xref if all
	else fails.

2006-12-30  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-cite.el (turn-off-gnus-message-citation-mode): Fix typo in
	docstring.

	* gnus-sum.el (gnus-summary-insert-ticked-articles): New command.
	(gnus-summary-make-menu-bar, gnus-summary-buffer-map): Bind it.
	(gnus-summary-insert-dormant-articles): Fix typo in message.

2006-12-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-message-highlight-citation): Ensure default to be
	nil for XEmacs.
	(gnus-message-citation-mode): Don't autoload in XEmacs.

	* gnus-cite.el (gnus-message-citation-mode): Don't define in XEmacs.

2006-12-29  Jouni K. Seppänen  <jks@iki.fi>

	* nnimap.el (nnimap-expunge-search-string): Mention
	nnimap-search-uids-not-since-is-evil in docstring.

2006-12-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el: Revert to make-obsolete-variable because
	define-obsolete-variable-alias is not supported in Emacs 21.

	* spam.el (spam-ifile-path, spam-ifile-database-path)
	(spam-bogofilter-path): Use define-obsolete-variable-alias instead of
	make-obsolete-variable.
	(spam-bsfilter-path, spam-bsfilter-program)
	(spam-spamassassin-path, spam-spamassassin-program)
	(spam-sa-learn-path, spam-sa-learn-program): Rename variables.  Don't
	use "path" inappropriately.
	(spam-check-spamassassin, spam-spamassassin-register-with-sa-learn)
	(spam-check-bsfilter, spam-bsfilter-register-with-bsfilter): Use new
	variable names.

2006-12-28  Daiki Ueno  <ueno@unixuser.org>

	* gnus-sum.el (gnus-summary-next-article): Make sure we are in the
	summary buffer.

	* password.el (password-cache-remove): Use clear-string to burn
	password, if available.

2006-12-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-message-citation-mode): Fix autoload.

	* gnus-cite.el (gnus-message-highlight-citation): Move to gnus-msg.el.

	* gnus-msg.el (gnus-setup-message): Add gnus-message-citation-mode.
	(gnus-message-highlight-citation): Move defcustom here from
	gnus-cite.el.
	(gnus-message-citation-mode): Autoload.

	* gnus-cite.el: Adjust Oliver's code to Gnus namespace.  Add some
	checks to make it compile with XEmacs.
	(gnus-message-citation-mode): New minor mode.
	(gnus-message-max-citation-depth, gnus-message-citation-keywords)
	(gnus-message-highlight-citation): New variables.
	(gnus-message-search-citation-line)
	(gnus-message-add-citation-keywords)
	(gnus-message-remove-citation-keywords)
	(turn-on-gnus-message-citation-mode)
	(turn-off-gnus-message-citation-mode): New functions.

2006-12-26  Oliver Scholz  <epameinondas@gmx.de>

	* gnus-cite.el: Enable highlighting of different citation levels in
	message-mode.

2006-12-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-make-fqdn): Fix comment.
	(message-bogus-system-names): Add ".local".

	* spam.el (spam-ifile-path, spam-ifile-program)
	(spam-ifile-database-path, spam-ifile-database)
	(spam-bogofilter-path, spam-bogofilter-program): Rename variables.
	Don't use "path" inappropriately.
	(spam-spamoracle-database, spam-get-ifile-database-parameter): Fix doc
	strings.
	(spam-check-ifile, spam-ifile-register-with-ifile)
	(spam-check-bogofilter, spam-bogofilter-register-with-bogofilter): Use
	new variable names.

	* gnus-art.el (gnus-treat-display-x-face, gnus-treat-display-face)
	(gnus-treat-display-smileys): Simplify using
	gnus-image-type-available-p.

	* gnus-ems.el (gnus-image-type-available-p): Use display-images-p if
	available.

	* gnus-xmas.el (gnus-xmas-image-type-available-p): Use
	`display-images-p' if available.

2006-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-fetch): Replace buffer's contents with the decoded
	one after turning on the buffer's multibyteness instead of decoding
	them directly in the unibyte buffer that causes unexpected conversion
	in Emacs 23 (unicode).

2006-12-21  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* message.el (message-generate-hashcash): Fix custom type.

2006-12-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-recenter): Remove debug messages.

2006-12-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-tool-bar-gnome): Exchange connect and
	disconnect icons.  Add help text.

2006-12-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-extra-header-to-number): CRM114 spam score is
	negated to be consistent with the others we handle.

2006-12-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-article-setup-buffer): Actually set the local
	version of gnus-summary-buffer to something, so that we can use two
	article buffers at the same time.

2006-12-18  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-necessary-extra-headers): Make spam-use-regex-headers
	trigger all the extra headers.
	(spam-extra-header-to-number): Don't require spam-use-crm114 for header
	sorting.

2006-12-14  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-gmane-create-mapping): Keep the mapping stable for
	solid groups.

2006-12-17  Chong Yidong  <cyd@stupidchicken.com>

	* pgg-gpg.el (pgg-gpg-use-agent): Default to t.

2006-12-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* legacy-gnus-agent.el: Add Copyright notice.

2006-12-12  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-sum.el (gnus-make-thread-indent-array): Fix last change.

2006-12-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnweb.el (nnweb-gmane-search): Placeholder TOPDOC setting.

	* gnus-sum.el (gnus-summary-recenter): Force setting the window start
	to make it work reliably in CVS Emacs.
	(gnus-summary-limit-strange-charsets-predicate)
	(gnus-summary-limit-to-predicate): New functions.

2006-12-08  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-sum.el (gnus-make-thread-indent-array): New optional arg
	specifying array size.
	(gnus-summary-insert-line, gnus-summary-prepare-threads): Regrow indent
	array if it is too small.
	(gnus-sort-threads-recursive): Renamed from gnus-sort-thread-1.
	(gnus-sort-threads-loop): New function.

2006-12-06  Chris Moore  <dooglus@gmail.com>

	* gnus-sum.el (gnus-sort-threads, gnus-summary-limit-children):
	Use `max' to avoid the value of `max-lisp-eval-depth' decreasing.

2006-12-04  Jouni K. Seppänen  <jks@iki.fi>

	* mm-url.el (mm-url-predefined-programs): Call curl with correct
	options.

2006-12-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam-report.el (spam-report-url-ping-plain): Wait for output to avoid
	DOS-ing the recipient.

	* nnweb.el (nnweb-gmane-create-mapping): Use the article number from
	the headers when creating the mapping to avoid mismappings.
	(nnweb-gmane-create-mapping): Always nix out old mapping.

2006-11-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-signed-or-encrypted-p): Bind mm-decrypt-option
	and mm-verify-option to never.

2006-11-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-signed-or-encrypted-p): New function.
	(message-forward-make-body): Use it.

	* mml2015.el (mml2015-pgg-clear-verify, mml2015-epg-clear-verify):
	Replace encode-coding-string with mm-encode-coding-string.

2006-11-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nneething.el (nneething-decode-file-name): Replace
	decode-coding-string with mm-decode-coding-string.

	* gnus-int.el (gnus-open-server): Say failed server's name.

2006-11-24  Stefan Monnier  <monnier@iro.umontreal.ca>

	* pgg-pgp.el (pgg-pgp-process-region): Change `args' from a list of
	strings to a single string.  Quote `errors-file-name'.
	(pgg-pgp-encrypt-region, pgg-pgp-decrypt-region, pgg-pgp-sign-region)
	(pgg-pgp-verify-region, pgg-pgp-insert-key, pgg-pgp-snarf-keys-region):
	Adjust calls.  Use `shell-quote-argument'.

2006-11-24  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-agent.el (gnus-agent-expire-unagentized-dirs)
	(gnus-agent-regenerate-group): Fix space/tab mixup in messages.

	* gnus-art.el (gnus-article-x-face-command, gnus-numeric-save-name):
	* gnus-group.el (gnus-group-sort-function, gnus-group-line-format)
	(gnus-group-mode, gnus-group-read-group, gnus-group-delete-group)
	(gnus-group-make-directory-group, gnus-group-transpose-groups):
	* gnus-start.el (gnus-options-subscribe, gnus-options-not-subscribe)
	(gnus-subscribe-newsgroup, gnus-1):
	* gnus-sum.el (gnus-summary-make-false-root, gnus-make-threads):
	* gnus.el (gnus-nntp-server, gnus-use-cross-reference)
	(gnus-valid-select-methods, total-expire, gnus-summary-line-format)
	(gnus-group-read-only-p): Fix space/tab mixup in docstrings.

2006-11-24  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-sum.el (gnus-summary-limit-to-headers): New command and
	keystroke.
	(gnus-summary-limit-to-bodies): Implement headersp.

2006-11-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Protect against "Process dns deleted" strings.

2006-11-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-string-to-multibyte): Alias to identity in XEmacs.

2006-11-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-generate-hashcash): Expand range of values to
	include `opportunistic'.
	(message-send-mail): Use it.

2006-11-18  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* mm-uu.el (mm-uu-pgp-signed-extract-1): Make last fix more thorough
	and comment it.

	* nnslashdot.el (nnslashdot-retrieve-headers-1): Update regexp.

2006-11-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-extract-address-components): Improve comment.

2006-11-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-extract-address-components): Work with address in
	which the name portion contains @.

	* lpath.el: Fbind custom-autoload.

2006-11-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-start): Move custom group up.
	(gnus-select-method): Don't autoload, but make it available for
	`customize-variable'.
	(gnus-getenv-nntpserver): Don't autoload.

2006-11-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el: Revert to 7.82 (removed changes since 2006-10-16).

2006-11-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-sendmail-extra-arguments): New variable.
	(message-send-mail-with-sendmail): Use it.

2006-11-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-generate-mime-1): Use mm-string-as-unibyte instead of
	mm-with-unibyte-current-buffer to make string unibyte.

	* mm-decode.el (mm-insert-part): Use mm-string-to-multibyte instead of
	mm-string-as-multibyte.

2006-11-14  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-sign): Prefix "pgp-" to a micalg value.
	Reported by Werner Koch <wk@gnupg.org>.

2006-11-14  Daiki Ueno  <ueno@p360>

	* mml2015.el: Autoload epa-select-keys when compiling.

2006-11-13  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-sign): Save the signing keys in
	message-options.
	(mml2015-epg-encrypt): Save the recipient keys in message-options.

2006-11-13  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-encrypt): Removed backward compatibility for
	EasyPG (< 0.0.6).
	(mml2015-always-trust): New user option.
	(mml2015-epg-passphrase-callback): Display key ID on the passphrase
	prompt.

2006-11-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-authinfo-force): New variable.
	(nntp-send-authinfo): Use it.

2006-11-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-strip-subject-encoded-words): Allow _not_ to
	decode encoded words.  Improve prompt.  Add comment about forwarding.
	(message-replacement-char): Move up.

2006-11-08  Wolfgang Jenkner  <wjenkner@inode.at>  (tiny change)

	* gnus-sum.el (gnus-summary-catchup): Use gnus-sorted-intersection
	instead of gnus-intersection because arguments of gnus-sorted-nunion
	must be sorted.  This avoids corruption of gnus-newsgroup-unreads.

2006-11-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-strip-subject-encoded-words): Reformat prompt.
	(message-simplify-subject-functions): Enable
	message-strip-subject-encoded-words by default.

2006-11-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-strip-subject-encoded-words): New function
	(message-simplify-subject-functions): New variable.
	(message-simplify-subject): Use it.  Fix typo in doc string.
	Support message-strip-subject-encoded-words.

2006-11-03  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-diary.el (gnus-diary-delay-format-function):
	* nndiary.el (nndiary-reminders):
	* nnsoup.el (nnsoup-always-save): Use "non-nil" in docstrings.

2006-11-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (article-hide-boring-headers): Fetch date from
	gnus-original-article-buffer to avoid problems with localized date
	strings.

2006-10-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* html2text.el (html2text-format-tags): Avoid infloop on open tags.

2006-10-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-codepage-iso-8859-list, mm-codepage-ibm-list):
	New variables.
	(mm-setup-codepage-iso-8859, mm-setup-codepage-ibm): New functions.
	(mm-charset-synonym-alist): Move some entries to
	mm-codepage-iso-8859-list.
	(mm-charset-synonym-alist, mm-charset-override-alist): Add
	iso-8859-8/windows-1255 and iso-8859-9/windows-1254.

2006-10-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-set-mode-line): Quote % in group name.

2006-10-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-agent.el (gnus-agent-make-mode-line-string): Make it compatible
	with Emacs 21 and XEmacs.

2006-10-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-parse-address): New function for better parsing,
	catching errors, etc.
	(spam-check-BBDB, spam-enter-ham-BBDB, spam-parse-list): Use it.

2006-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-view.el: Add interactive arg to html2text autoload.

2006-10-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-move-article): Use no-encode for `B B'.

2006-10-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-codepage-iso-8859-list, mm-codepage-ibm-list): New
	variables.
	(mm-setup-codepage-iso-8859, mm-setup-codepage-ibm): New functions.
	(mm-charset-synonym-alist): Move some entries to
	mm-codepage-iso-8859-list.

	* gnus.el (gnus-getenv-nntpserver, gnus-select-method): Autoload.

2006-10-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-citation-line-format)
	(message-insert-formated-citation-line): Fix implementation of %E, %N
	and %n according to the doc string.

2006-10-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-check-BBDB, spam-enter-ham-BBDB, spam-parse-list): Use
	car-safe to avoid bad parses.

2006-10-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-make-doc-group): Work for non-ASCII group
	names.

	* gnus-sum.el (gnus-select-newsgroup): Decode group name.

2006-10-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-draft.el (gnus-draft-edit-message): Make sure to remove Date
	header.

	* message.el (message-draft-headers): Add Date.
	(message-headers-to-generate): Fix typo in docstring.

	* nndraft.el (nndraft-required-headers): New variable.
	(nndraft-generate-headers): Use it.

	* gnus-registry.el (gnus-registry-wash-for-keywords): Bind `word'.

2006-10-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-wash-for-keywords)
	(gnus-registry-find-keywords): New functions to allow easy searching of
	articles that are in the registry.

2006-10-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-check-BBDB, spam-enter-ham-BBDB, spam-parse-list): Use
	ietf-drums-parse-address instead of gnus-extract-address-components.
	Reported by Damien Elmes <damien@repose.cx>.

2006-10-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-mime): Remove unused custom group.

2006-10-13  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* mm-uu.el (mm-uu-pgp-signed-extract-1): Use RFC 2440 definition of
	"blank line" when searching for end of armor headers.

2006-10-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-write-region): Fix variable name.

2006-10-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-write-region): New function based on compatibility
	code from `mm-make-temp-file'.

	* mm-util.el (mm-make-temp-file): Use `gmm-write-region'.

	* nnmaildir.el (nnmaildir--update-nov)
	(nnmaildir-request-replace-article, nnmaildir-request-accept-article):
	Use `gmm-write-region'.

2006-10-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-synonym-alist, mm-charset-override-alist): Add
	iso-8859-8/windows-1255 and iso-8859-9/windows-1254.

	* nnheader.el (nnheader-find-file-noselect): Inhibit version-control.

	* message.el (message-replacement-char): New variable.
	(message-fix-before-sending): Use it.
	(message-simplify-subject): New function to remove duplicate code.
	(message-reply, message-followup): Use it.

	* gnus-sum.el (gnus-summary-make-menu-bar): Clarify
	gnus-summary-limit-to-articles.

2006-10-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-with-local-quit): New macro.

	* gnus-demon.el (gnus-demon): Replace with-local-quit with it.

2006-10-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-util.el (gnus-string-remove-all-properties): Another fix to
	ignore non-string data.

2006-09-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-util.el (gnus-string-remove-all-properties): Fix to ignore
	non-string data (needs to be done in the registry too).

2006-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-save, gnus-registry-cache-save)
	(gnus-registry-remove-alist-text-properties, gnus-registry-action)
	(gnus-registry-split-fancy-with-parent)
	(gnus-registry-fetch-simplified-message-subject-fast)
	(gnus-registry-fetch-sender-fast, gnus-registry-store-extra-entry):
	Remove text properties on ingress into the registry and when it's saved.
	(gnus-registry-clean-empty-function): Fix bug with cleaning the
	registry from entries with no groups.

2006-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-util.el (gnus-string-remove-all-properties): Add utility
	function to remove string properties.

2006-09-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm): Adjust custom version.

	* mm-util.el (mm-charset-override-alist, mm-charset-eval-alist): Adjust
	custom version.

	* gnus-draft.el (gnus-draft-mode): Don't call `mml-mode'.

2006-09-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-insert-prev-page-button)
	(gnus-insert-next-page-button): Simplify.  Reformat.

2006-09-27  Maxime Edouard Robert Froumentin  <max@lapin-bleu.net>

	* gnus-art.el (gnus-insert-prev-page-button)
	(gnus-insert-next-page-button): Apply gnus-article-button-face.

2006-09-25  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-demon.el (gnus-demon): Use with-local-quit to avoid hangs.

2006-09-20  Maxime Edouard Robert Froumentin  <max@lapin-bleu.net>

	(gnus-insert-mime-button, gnus-insert-mime-security-button): Apply
	gnus-article-button-face to MIME and security buttons.

2006-09-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-url-regexp): Try to make the value more
	readable.

2006-09-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload browse-url-of-file for XEmacs.

2006-09-20  Steve Youngs  <steve@sxemacs.org>

	* gnus-art.el (gnus-article-browse-html-parts): They're files, so use
	`browse-url-of-file' instead of `browse-url'.

2006-09-19  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnslashdot.el (nnslashdot-request-article): Update end-of-article
	regexp.  Articles containing quotation were cut prematurely.

2006-09-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-cite-original-1): Use nobody by default for the
	value of From header.
	(message-reply): Ditto.

2006-09-11  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-clear-decrypt): Don't append verify results
	to the gnus-info.  This fixes a bug of inline-PGP message verification.
	Reported by Michael Piotrowski <mxp@dynalabs.de>.

2006-09-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* pop3.el (pop3-leave-mail-on-server): Mention problem of duplicate
	mails in the doc string.  Add some URLs in comment.
	(pop3-movemail): Warn about pop3-leave-mail-on-server.

2006-09-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-quote-special-characters-in-quoted-strings): Fix
	backslashes handling and the way to find boundaries of quoted strings.

2006-09-07  Daiki Ueno  <ueno@unixuser.org>

	* mml1991.el (mml1991-epg-encrypt): Simply throw an error if
	mml1991-encrypt-to-self is set and mml1991-signers is not set.
	* mml2015.el (mml2015-epg-encrypt): Simply throw an error if
	mml2015-encrypt-to-self is set and mml2015-signers is not set.

2006-09-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-marker-list): Move up.  Convert comment into
	doc string.
	(gnus-button-regexp, gnus-button-last): Remove unused variables.

2006-09-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind epg-check-configuration.

2006-09-06  Simon Josefsson  <jas@extundo.com>

	* mml2015.el (mml2015-use): Doc fix, mention epg.

2006-09-06  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-use): Default to epg, if available.

2006-09-06  Daiki Ueno  <ueno@unixuser.org>

	* mml1991.el (mml1991-epg-sign): Don't lookup a private key by
	message-sender.
	(mml1991-epg-encrypt): Ditto.
	* mml2015.el (mml2015-epg-sign): Don't lookup a private key by
	message-sender.
	(mml2015-epg-encrypt): Ditto.

2006-09-04  Chong Yidong  <cyd@stupidchicken.com>

	* message.el (message-send-mail-with-sendmail): Look for sendmail in
	several common directories.

2006-09-05  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-encrypt): Expand group configuration.
	* mml1991.el (mml1991-epg-encrypt): Expand group configuration.

2006-09-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-decode-encoded-words): Make it fast.

2006-09-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-decode-encoded-words): Don't infloop in XEmacs.

	* rfc2047.el (rfc2047-strip-backslashes-in-quoted-strings): Decode `\\'
	in quoted string into `\'.

2006-09-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-quote-special-characters-in-quoted-strings):
	Use standard-syntax-table.

2006-09-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-decode-address-function): New variable.
	(article-decode-encoded-words): Use it to decode headers which are
	assumed to contain addresses.
	(gnus-mime-delete-part): Remove useless `or'.

	* gnus-sum.el (gnus-decode-encoded-address-function): New variable.
	(gnus-summary-from-or-to-or-newsgroups): Use it to decode To header.
	(gnus-nov-parse-line): Use it to decode From header.
	(gnus-get-newsgroup-headers): Ditto.
	(gnus-summary-enter-digest-group): Use it to decode `to-address'.

	* mail-parse.el (mail-decode-encoded-address-region): New alias.
	(mail-decode-encoded-address-string): New alias.

	* rfc2047.el (rfc2047-quote-special-characters-in-quoted-strings):
	New function.
	(rfc2047-encode-message-header, rfc2047-encode-region): Use it.
	(rfc2047-strip-backslashes-in-quoted-strings): New fnction.
	(rfc2047-decode-region): Use it; add optional argument `address-mime'.
	(rfc2047-decode-string): Ditto.
	(rfc2047-decode-address-region): New function.
	(rfc2047-decode-address-string): New function.

2006-08-31  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-caesar-buffer-body): Allow rotating headers.

	* gnus-sum.el (gnus-summary-caesar-message): Allow rotating headers.

	* message.el (message-insert-formated-citation-line): Fix %f.
	Reported by Torsten Bronger <bronger@physik.rwth-aachen.de> .

2006-08-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-bookmark.el (gnus-bookmark-file-coding-system): New variable.
	(gnus-bookmark-mouse-available-p): New macro.
	(gnus-bookmark-bmenu-list): Use it; use gnus-mouse-2.
	(gnus-bookmark-bmenu-show-infos): Use it.
	(gnus-bookmark-insert-details): Use it; use gnus-mouse-2.
	(gnus-bookmark-bmenu-hide-infos): Ditto.
	(gnus-bookmark-remove-properties): New function.
	(gnus-bookmark-set, gnus-bookmark-make-cell): Use it.
	(gnus-bookmark-set-bookmark-name): Don't use 2nd arg of split-string.
	(gnus-bookmark-write-file): Bind coding-system-for-write.
	(gnus-bookmark-insert-file-format-version-stamp): Add coding cookie.
	(gnus-bookmark-jump): Make completing-read work with XEmacs; activate
	group before selecting it.
	(gnus-bookmark-get-bookmark): Use assoc instead of assoc-string.
	(gnus-bookmark-bmenu-mode-map): Bind `q' to bury-buffer instead of
	quit-window if it is not available; use gnus-mouse-2 and bind it to
	gnus-bookmark-bmenu-select-by-mouse.
	(gnus-bookmark-show-details): Remove unused variable `details-list'.
	(gnus-bookmark-bmenu-select-by-mouse): New function.

2006-08-13  Romain Francoise  <romain@orebokech.com>

	* mm-extern.el (mm-extern-mail-server): End `y-or-n-p' prompt with a
	space.

2006-08-10  Romain Francoise  <romain@orebokech.com>

	* dns-mode.el: Alias `zone-mode' to `dns-mode'.
	(dns-mode-soa-auto-increment-serial): New user option.
	(dns-mode-soa-maybe-increment-serial): New function.
	(dns-mode): Add the latter to `write-contents-functions'.

2006-08-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el (uncompface): Use binary rather than raw-text-unix.

2006-08-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el (uncompface): Make sure the eol conversion doesn't take
	place when communicating with the external programs.  Reported by
	ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.

2006-07-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnheader.el (nnheader-insert-head): Fix typo in comment.

2006-07-31  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-parse-1): Update regexp for author and date.
	Make it more robust by parsing author and date independently.

2006-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnheader.el (nnheader-insert-head): Make it work with Mac as well.

2006-07-28  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-epg-sign): If mml2015-signers is not set, use the
	first matching secret key.
	(mml2015-epg-encrypt): Ditto.

	* mml1991.el (mml1991-epg-sign): If mml1991-signers is not set, use the
	first matching secret key.
	(mml1991-epg-encrypt): Ditto.

	* mml2015.el (mml2015-encrypt-to-self): New user option.
	(mml2015-epg-encrypt): Append mml2015-signers to recipients list if
	mml2015-epg-encrypt-to-self is set.

	* mml1991.el (mml1991-encrypt-to-self): New variable.
	(mml1991-epg-encrypt): Append mml1991-signers to recipients list if
	mml1991-epg-encrypt-to-self is set.

	* mml2015.el (mml2015-signers): New user option.
	(mml2015-epg-sign): Reflect the value of mml2015-signers.
	(mml2015-epg-encrypt): Allow to select signing keys.

	* mml1991.el (mml1991-signers): New variable.
	(mml1991-epg-sign): Reflect the value of mml1991-signers.
	(mml1991-epg-encrypt): Allow to select signing keys.

2006-07-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnheader.el (nnheader-insert-head): Make it work even if the file
	uses CRLF for the line-break code.

2006-07-25  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el: Require mml-sec instead of password.
	(mml2015-verbose): Inherit the default value from mml-secure-verbose.
	(mml2015-cache-passphrase): Inherit the default value from
	mml-secure-cache-passphrase.
	(mml2015-passphrase-cache-expiry): Inherit the default value from
	mml-secure-passphrase-cache-expiry.

	* mml1991.el: Require mml-sec instead of password.
	(mml1991-verbose): Inherit the default value from mml-secure-verbose.
	(mml1991-cache-passphrase): Inherit the default value from
	mml-secure-cache-passphrase.
	(mml1991-passphrase-cache-expiry): Inherit the default value from
	mml-secure-passphrase-cache-expiry.

	* mml-sec.el: Require password.
	(mml-secure-verbose): New user option.
	(mml-secure-cache-passphrase): New user option.
	(mml-secure-passphrase-cache-expiry): New user option.

2006-07-24  Daiki Ueno  <ueno@unixuser.org>

	* pgg-def.el (pgg-truncate-key-identifier): Truncate the key ID to 8
	letters from the end.  Thanks to "David Smith" <davidsmith@acm.org> and
	andreas@altroot.de (Andreas Vögele).

	FIXME: Use `tiny change'?

2006-07-19  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* mm-url.el (mm-url-insert-file-contents): Inhibit Connection: close
	workaround for the url package included with Emacs.

	* nnweb.el (nnweb-google-create-mapping): Update regexp.

2006-07-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-select-newsgroup): Setup the article buffer
	correctly.  This fixes a bug caused by the 2006-05-12 change.

2006-07-18  Karl Fogel  <kfogel@red-bean.com>

	* nnmail.el (nnmail-article-group): If splitting raises an error, give
	some information about the error when saying that the `bogus' mail
	group will be used.

2006-07-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-delete-article): Don't use TAB in doc
	string.

2006-07-16  NAKAJI Hiroyuki  <nakaji@heimat.jp>  (tiny change)

	* mm-util.el (mm-charset-synonym-alist): Map windows-31j to cp932.

2006-07-14  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-start.el (gnus-subscribe-options-newsgroup-method): Doc fix.

2006-07-10  Daiki Ueno  <ueno@unixuser.org>

	* mml1991.el (mml1991-function-alist): Add epg.
	(mml1991-epg-passphrase-callback, mml1991-epg-sign)
	(mml1991-epg-encrypt): New functions.

2006-07-10  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-verbose): New variable.
	(mml2015-cache-passphrase): Ditto.
	(mml2015-passphrase-cache-expiry): Ditto.
	(mml2015-function-alist): Add epg.
	(mml2015-epg-passphrase-callback, mml2015-epg-decrypt)
	(mml2015-epg-clear-decrypt, mml2015-epg-verify)
	(mml2015-epg-clear-verify, mml2015-epg-sign, mml2015-epg-encrypt): New
	functions.

2006-07-08  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* message.el (message-cite-original-1): Preserve region when removing
	quoted text due to X-No-Archive in order to avoid bogus attribution
	when citing multiple messages.

2006-06-27  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-group.el (gnus-group-sort-by-unread): Fix typo.  Reported by
	Kenneth Jacker <khj@be.cs.appstate.edu>.

2006-06-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-diary.el (gnus-user-format-function-d)
	(gnus-user-format-function-D): Autoload.

	* imap.el (Commentary): Fix typo.

	* gnus-util.el (kill-empty-logs, gnus-byte-compile): Remove anonymous
	2006-04-22 contribution.

2006-06-26  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus.el (gnus-valid-select-methods): Revert last change for nnweb.
	It didn't really fix the bogosity I'm seeing with solid web groups.

2006-06-26  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus.el (gnus-valid-select-methods): Declare nnweb with 'address.
	Since revision 6.95 (2003-01-05) of gnus-group.el, solid web groups are
	created using server names.  If we use the feature without declaring
	it, Gnus does not properly manage server and group state.

	* nnweb.el (nnweb-google-search): Respect nnweb-max-hits as upper
	bound.

2006-06-25  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus.el (gnus-find-method-for-group): On killed/unknown groups, try
	looking up the method using GROUP's prefix before inventing a new one.
	It is used on killed/unknown groups in various places where returning
	an all-new method isn't expected by the caller.

	* gnus-util.el (gnus-group-server): Fix for empty virtual server names
	and match semantics of gnus-group-real-prefix.

2006-06-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmail.el (nnmail-broken-references-mailers): New variable.
	(nnmail-ignore-broken-references): New function generalizing
	nnmail-fix-eudora-headers.
	(nnmail-fix-eudora-headers): Now obsolete.

	* gnus-art.el (gnus-button-handle-custom): Support
	`customize-apropos*'.

2006-06-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (article-hide-headers): Inhibit read-only stuff.

	* gnus-group.el (gnus-fetch-group): Document ARTICLES and select those
	articles.

2006-06-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-cite-reply-above): New variable.
	(message-yank-original): Use it.

2006-06-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Allow `*'s in parameter values.

2006-06-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-bookmark.el (gnus-bookmark-jump): Don't mark unrelated articles
	as read.

	* gnus-group.el (gnus-group-quick-select-group): Add GROUP argument.

2006-06-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-bookmark.el: Fix Copyright, keywords, whitespace, etc.
	(gnus-bookmark-default-file): Use gnus-directory.
	(gnus-bookmark-bmenu-file-column, gnus-bookmark-use-annotations):
	Remove "*" in doc string.
	(gnus-bookmark-write-file): Simplify.
	(gnus-bookmark-maybe-sort-alist): Use `when'.
	(gnus-bookmark-get-bookmark): Fix typo in doc string.
	(gnus-bookmark-set-bookmark-name, gnus-bookmark-get-bookmark): Add
	FIXME about Emacs 21 and XEmacs compatibility.
	(gnus-bookmark-set-bookmark-name): Use `gnus-replace-in-string' for
	compatibility.
	(gnus-bookmark-bmenu-mode): Use `gnus-run-mode-hooks' for
	compatibility.
	(gnus-bookmark-menu-heading): Fix version.

2006-06-19  Bastien Guerry  <bzg@altern.org>

	* gnus-bookmark.el: New file.

2006-06-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-syntax-checks): Doc fix.

2006-06-17  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-srvr.el (gnus-browse-unsubscribe-group): Don't subscribe
	unsubscribed groups as if they were killed ones.  It causes duplicate
	entries in gnus-newsrc-alist.

2006-06-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-syntax-checks): Doc fix.
	(message-send-mail): Add check for continuation headers.
	(message-check-news-header-syntax): Fix regexp used to check for
	continuation headers.

2006-06-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-display-mime): Make sure body ends with newline.

2006-06-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-toggle-truncate-lines): Fix code.

2006-06-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-truncate-lines): Default to the value of
	default-truncate-lines.

2006-06-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-mime-mule-charset-alist): Use unicode-precedence-list
	to fill the utf-8 entry.

	* lpath.el: Fbind unicode-precedence-list.

2006-06-01  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-parse-1): Update regexp for author and date.

2006-05-30  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (directory-files-and-attributes): Move all the way
	forward (the third and final move).
	(gnus-agent-read-agentview): Trap reconstruction errors due to
	nonexistant directory.  Handle by returning nil.

2006-05-30  Didier Verna  <didier@xemacs.org>

	* message.el (message-dont-reply-to-names): Update the custom type.
	* message.el (message-dont-reply-to-names): New defsubst: potentially
	convert a list of regexps into a single one.
	* message.el (message-get-reply-headers): Use it.
	* nnmail.el (nnmail-fancy-expiry-target): Ditto.

2006-05-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (directory-files-and-attributes): Move forward.

2006-05-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-ml.el (gnus-mailing-list-subscribe)
	(gnus-mailing-list-unsubscribe, gnus-mailing-list-owner)
	(gnus-mailing-list-message): Fix doc strings.

2006-05-29  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-ml.el (gnus-mailing-list-message): Use gnus-url-mailto instead
	of doing it manually.

2006-05-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-toggle-truncate-lines): Fix typo in
	comment.

2006-05-29  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el: Added gnus-agent-flush* to purge agent info.
	(gnus-agent-read-agentview): Fixed handling of end-of-file error.
	(gnus-agent-read-local): All symbols allocated in my-obarray
	(gnus-agent-set-local): Skip invalid entries (min and/or max is nil).
	(gnus-agent-regenerate-group): Check numeric names to see if they are
	messages or groups.
	(gnus-agent-total-fetched-for): Ignore 'dummy.group' (there should be a
	better way of do this...)

	* gnus-cache.el (gnus-agent-total-fetched-for): Ignore
	'dummy.group' (there should be a better way of do this...)

2006-05-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-save-all-headers): Mention it might be overridden.
	(gnus-saved-headers): Ditto.
	(gnus-default-article-saver): Mention functions may have properties.
	(gnus-article-save): Override gnus-save-all-headers and
	gnus-saved-headers by :headers property which saver function may have.
	(gnus-summary-save-in-file): Add :headers property.
	(gnus-summary-write-to-file): Ditto.

	* gnus-sum.el (gnus-summary-save-article): Bind
	gnus-prompt-before-saving to t when saving many articles in a file;
	always show all headers.

	* dgnushack.el: Autoload toggle-truncate-lines for XEmacs.

2006-05-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* deuglify.el (gnus-outlook-rearrange-article): Add missing citation
	marks.

	* message.el (message-indent-citation): Add optional arguments to allow
	using it outside of message buffers.

	* gnus-art.el (gnus-article-unfold-long-headers): New variable.
	(gnus-article-treat-unfold-headers): Use it.
	(gnus-article-truncate-lines): New variable.
	(gnus-article-mode): Use it.
	(gnus-article-toggle-truncate-lines): New function.

	* gnus-sum.el (gnus-summary-wash-map, gnus-summary-make-menu-bar): Add
	gnus-article-toggle-truncate-lines.

	* uudecode.el (uudecode-decode-region-external): nil isn't a valid
	coding system in XEmacs, use binary.

2006-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-enrich-utf-8-by-mule-ucs): Don't edit
	after-load-alist.

	* gnus-art.el (gnus-summary-save-in-file): Use property to specify
	this function should save decoded articles.
	(gnus-summary-write-to-file): Use property to specify this function
	should save decoded articles and specify gnus-summary-save-in-file
	should be used to save articles other than the first one when saving
	many articles.
	(gnus-summary-save-body-in-file): Use property to specify this
	function should save decoded articles.
	(gnus-summary-write-body-to-file): Use property to specify this
	function should save decoded articles and specify
	gnus-summary-save-body-in-file should be used to save articles other
	than the first one when saving many articles.

	* gnus-sum.el (gnus-summary-save-article): Simplify.

2006-05-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-default-article-saver): Add
	gnus-summary-write-body-to-file.
	(gnus-article-save-coding-system): Don't use coding system object
	in XEmacs.
	(gnus-read-save-file-name): Add optional `dir-var' argument which
	specifies directory in which files are saved; work even if optional
	`variable' argument is not specified.
	(gnus-summary-write-to-file): Read file name.
	(gnus-summary-save-body-in-file): Add optional `overwrite' argument.
	(gnus-summary-write-body-to-file): New function.

	* gnus-sum.el (gnus-newsgroup-last-directory): New variable.
	(gnus-summary-local-variables): Add it.
	(gnus-summary-save-map): Add gnus-summary-write-article-body-file.
	(gnus-summary-save-article): Remove optional `decode' argument;
	determine whether to decode articles by the value of
	gnus-default-article-saver; when saving many files using
	gnus-summary-write-to-file or gnus-summary-write-body-to-file, use
	it first and use gnus-summary-save-in-file or
	gnus-summary-save-body-in-file thereafter unless
	gnus-prompt-before-saving is always; move point to article which
	will be saved.
	(gnus-summary-save-article-file): Revert.
	(gnus-summary-write-article-file): Revert.
	(gnus-summary-save-article-body-file): Revert.
	(gnus-summary-write-article-body-file): New function.

2006-05-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-default-article-saver): Doc fix.
	(gnus-article-save-coding-system): Move from gnus-sum.el, rename
	from gnus-summary-save-article-coding-system, and default to a
	certain coding system.
	(gnus-output-to-file): Add coding cookie and encode text according
	to gnus-article-save-coding-system; don't use mm-append-to-file.

	* gnus-sum.el (gnus-summary-save-article-coding-system): Move to
	gnus-art.el and rename to gnus-article-save-coding-system.
	(gnus-summary-save-article): Require gnus-art; don't show all
	headers if it decodes articles; don't add coding cookie here;
	don't bind mm-text-coding-system-for-write.
	(gnus-summary-save-article-file): Save decoded articles.
	(gnus-summary-write-article-file): When saving many files, use
	gnus-summary-write-to-file first and gnus-summary-save-in-file
	thereafter unless gnus-prompt-before-saving is always.
	(gnus-summary-save-article-body-file): Save decoded articles.

	* lpath.el: Fbind select-safe-coding-system for XEmacs.

2006-05-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnrss.el (nnrss-check-group): Bind hash-index.

2006-05-23  Michaël Cadilhac  <michael.cadilhac@lrde.org>

	* nnrss.el (nnrss-check-group): Use the md5sum of the whole RSS item as
	its hash index.  Store this hash in `nnrss-group-data'.
	(nnrss-read-group-data): Update accordingly.

2006-05-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist): Improve gnus-button-handle-symbol
	entry.

	* gnus-sum.el (gnus-summary-make-menu-bar): Add
	gnus-article-browse-html-article.

2006-05-23  Hynek Schlawack  <hynek@ularx.de>

	* gnus-sum.el (gnus-summary-mime-map): Add
	gnus-article-browse-html-article.

	* gnus-art.el (gnus-article-browse-html-article): Remove comment.

2006-05-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-save-article-coding-system): Offer some
	suitable coding systems in customize.

2006-05-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-sources): Fix custom type.

2006-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-save-article-mail): Clarify doc string.
	(gnus-summary-expire-articles-now): Shorten prompt.

	* gmm-utils.el (wid-edit): Require.
	(defun-gmm): Renamed from `gmm-defun-compat'.
	(gmm-image-search-load-path): Use it.
	(gmm-image-load-path-for-library): Use it.  Sync with `mh-compat.el'.

2006-05-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-save-article-coding-system): New
	variable.
	(gnus-summary-save-article): Add optional `decode' argument.  If
	it is set and gnus-summary-save-article-coding-system is non-nil,
	save decoded article.
	(gnus-summary-write-article-file): Save decoded article if
	gnus-summary-save-article-coding-system is non-nil.

	* ecomplete.el (ecomplete-database-file-coding-system): Fix custom
	type.

2006-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (easy-menu-define): Use :active instead of :enable.

2006-05-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-setup-buffer): Go to summary buffer
	first to test gnus-single-article-buffer which may be buffer-local.

	* gnus-sum.el (gnus-summary-setup-buffer): Make
	gnus-single-article-buffer buffer-local and nil in ephemeral
	group; make gnus-article-buffer, gnus-article-current, and
	gnus-original-article-buffer always buffer-local.
	(gnus-summary-exit): Kill article buffer belonging to ephemeral
	group.
	(gnus-handle-ephemeral-exit): Don't move to next summary line.

2006-05-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnml.el (nnml-request-compact-group): Compressed files might not
	have .gz extension.

2006-05-04  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-decode.el (mm-dissect-buffer): Remove spurious double assignment.
	(mm-copy-to-buffer): Use with-current-buffer.
	(mm-display-part): Simplify.
	(mm-inlinable-p): Add optional arg `type'.

2006-05-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-mime-view-part-as-type): Add optional PRED arg.
	(gnus-mime-view-part-externally, gnus-mime-view-part-internally):
	Try harder to show the attachment internally or externally using
	gnus-mime-view-part-as-type.

2006-05-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-from-style, message-signature-separator)
	(message-user-organization-file, message-send-mail-function)
	(message-citation-line-function, message-yank-prefix)
	(message-indent-citation-function, message-signature)
	(message-signature-file, message-signature-insert-empty-line):
	Remove autoloads.

	* gnus-art.el (gnus-buttonized-mime-types): Remove
	"multipart/signed".  Revert 2006-04-26 change.

2006-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2006-05-01  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.5 is released.

2006-04-30  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-request-article): Do proper xwfu encoding when
	fetching articles by message-id.

2006-04-30  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (hashcash): Require hashcash as normal.

	* ecomplete.el (ecomplete-highlight-match-line): Use
	point-at-eol.
	(ecomplete-highlight-match-line): Use `highlight', because that
	face exists in both Emacs and XEmacs.

	* message.el (message-display-abbrev): Use point-at-bol.

	* mail-source.el: Don't require timer/timer-funcs.

	* gnus-async.el: Ditto.

	* password.el: Ditto.

	* nnheaderxm.el (nnheader-cancel-timer): Ditto.

	* mm-url.el: Ditto.

	* gnus-xmas.el: Don't require timer-funcs.

	* mm-util.el: Require timer/timer-funcs.

2006-04-23  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* mm-url.el (mm-url-insert-file-contents): Don't set Connection:
	Close.

2006-04-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-pgp-encrypted-extract-1): Assume buffer is made
	unibyte after clear-decrypt function runs.

	* mml2015.el (mml2015-pgg-clear-decrypt): Treat data which pgg
	returns as a unibyte string.

2006-04-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Revert.

	* pgg-gpg.el (pgg-string-to-multibyte): Remove.
	(pgg-gpg-process-sentinel): Revert.

	* pgg-pgp.el (pgg-pgp-process-region): Revert.
	(pgg-pgp-lookup-key): Revert.

	* pgg-pgp5.el (pgg-pgp5-process-region): Revert.
	(pgg-pgp5-lookup-key): Revert.

	* pgg.el (pgg-fetch-key): Revert.

2006-04-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind string-as-multibyte for XEmacs.

	* mml1991.el (mml1991-pgg-sign): No need to load pgg.el, which is
	always loaded by way of gnus-art.el -> mm-uu.el -> mml2015.el.
	(mml1991-pgg-encrypt): Ditto.

	* pgg-gpg.el (pgg-string-to-multibyte): New function.
	(pgg-gpg-process-sentinel): Make sure pgg-output-buffer is always
	a multibyte buffer.

	* pgg-pgp.el (pgg-pgp-process-region): Ditto.
	(pgg-pgp-lookup-key): Ditto.

	* pgg-pgp5.el (pgg-pgp5-process-region): Ditto.
	(pgg-pgp5-lookup-key): Ditto.

	* pgg.el (pgg-fetch-key): Ditto.

2006-04-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-user-organization-file): Check several
	locations of the organization file.

	* gnus-sum.el (gnus-summary-mime-map, gnus-summary-make-menu-bar):
	Add gnus-article-view-part-as-type.

	* gnus-art.el (gnus-article-view-part-as-type): New function.

	* message.el (message-valid-fqdn-regexp): Add TLDs .cat, jobs,
	.mobi and .travel.  Remove .nato, .bitnet and .uucp.

	* mml.el: Simplify autoload.
	(mml-mode): defvar dnd-protocol-alist instead of using
	symbol-value.
	(mml-default-directory): New variable.
	(mml-minibuffer-read-file): Use it.
	(mml-dnd-protocol-alist, mml-dnd-attach-options): Adjust :version.

	* message.el (message-citation-line-format): New variable.
	(message-insert-formated-citation-line): New function.
	(message-citation-line-function): Add
	`message-insert-formated-citation-line' to custom type.

	* mm-decode.el (mm-verify-option): Add gnus-buttonized-mime-types
	to doc string.

	* gnus-art.el (gnus-buttonized-mime-types): Add "multipart/signed"
	depending on mm-verify-option.

2006-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml1991.el (mml1991-pgg-sign): Make sure to load pgg.el before
	binding pgg-* variables; reimplement the section which prevents
	MIME header from being signed.
	(mml1991-pgg-encrypt): Make sure to load pgg.el before binding
	pgg-text-mode; remove a blank line at the top of body.

	* mm-uu.el (mm-uu-pgp-encrypted-extract-1): Don't remove blank
	lines at the top of body; use gnus-newsgroup-charset if there's no
	Charset header.

2006-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-self-insert-commands): Doc fix.

	* mm-uu.el (mm-uu-pgp-signed-test): Erase prompt.
	(mm-uu-pgp-encrypted-test): Ditto.
	(mm-uu-pgp-encrypted-extract-1): Make sure there's a blank line
	between header and body; return application/pgp-encrypted handle
	if decryption failed; decode decrypted body by charset.

	* mm-decode.el (mm-automatic-display): Don't make application/pgp
	element match to application/pgp-*.

2006-04-23  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-wash-article): Sync up to new Google
	HTML.

2006-04-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mail-source.el (mail-source-call-script): Message the error
	string.

2006-04-22  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-util.el (gnus-byte-compile): Use it.

2006-04-22  xyblor  <fake@invalid.email>  (tiny change)

	* gnus-util.el (kill-empty-logs): New function.

2006-04-22  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-mail-alias-type): Doc fix.
	(message-mail-alias-type-p): New function.
	(message-send): Use it.
	(message-mode): Ditto.
	(message-strip-forbidden-properties): Ditto.

	* ecomplete.el (ecomplete-database-file-coding-system): New
	variable.
	(ecomplete-save): Use it.
	(ecomplete-setup): Use it.

2006-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-self-insert-commands): New variable.
	(message-strip-forbidden-properties): Use it.

2006-04-22  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-put-addresses-in-ecomplete): Use a regexp
	that doesn't make XEmacs choke.

2006-04-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-replace-in-string):
	Prefer replace-regexp-in-string over of replace-in-string.

2006-04-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-select-frame-set-input-focus):
	Use select-frame-set-input-focus if it is available in XEmacs; use
	definition defined in Emacs 22 for old Emacsen.

	* dgnushack.el: Autoload unmorse-region for XEmacs.

	* lpath.el: Bind cursor-in-non-selected-windows and
	select-frame-set-input-focus for XEmacs.

2006-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-text): Use equal instead of equalp.

2006-04-18  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-save): Remove text
	properties when saving via the temp buffer.

2006-04-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-generate-hashcash): Honor custom type.

2006-04-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-generate-hashcash): Default to non-nil when
	hashcash is found.

	* gnus-sum.el (gnus-summary-expire-articles-now): Clarify prompt.
	(gnus-refer-thread-limit): Increase default to 500.

	* mm-view.el (mm-inline-text): Supply delsp to flow-fill.

	* flow-fill.el (fill-flowed): Allow delete-space.

2006-04-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* deuglify.el (gnus-outlook-deuglify-unwrap-min)
	(gnus-outlook-deuglify-unwrap-max, gnus-outlook-display-hook):
	Remove autoloads.

2006-04-18  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Default to.

2006-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Decode encoded value after
	concatenating segments rather than before concatenating them.

2006-04-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el: Move comment to gnus-group-update-tool-bar.

2006-04-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* rfc2231.el (rfc2231-parse-string): Sort the parameters first.

	* message.el (message-forward-make-body-plain): Allow
	message-forward-ignored-headers to be a list.
	(message-remove-ignored-headers): Factor out into function.
	(message-forward-make-body-mml): Use it.

	* imap.el (imap-quote-specials): New function.
	(imap-login-auth): Quote specials.

	* rfc2231.el (rfc2231-parse-string): Remove dead code.
	(rfc2231-parse-string): Allow concatanation of parameters that
	aren't contiguous.  The test case is
	  (mail-header-parse-content-type "message/external-body;
	    name*0*=us-ascii''~%2ffoo%2fbar%2fbaz%2fxyzzy%2f;
	    access-type=LOCAL-FILE;
	    name*1*=plugh%2fhello-sailor%2fbing.pdf")

2006-04-17  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nntp.el (nntp-accept-process-output): Return the value of
	`nnheader-accept-process-output'.

2006-04-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-article-treat-types): Add text/x-patch.
	(gnus-button-alist): Recognize more diff formats.
	(gnus-button-patch): Strip directory.

2006-04-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-select-frame-set-input-focus): Check for
	Emacs 22 when setting focus.

2006-04-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-article-treat-types): Do treatment of
	text/x-verbatim parts.
	(gnus-button-patch): New command.

	* ietf-drums.el (ietf-drums-parse-address): Attempt parsing
	addresses that contain invalid characters.

2006-04-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-put-addresses-in-ecomplete): Use
	gnus-replace-in-string.
	(message-is-yours-p): Use the more correct
	mail-header-parse-address instead of
	mail-extract-address-components.
	(message-put-addresses-in-ecomplete): Fix typo.

	* gnus-sum.el (gnus-summary-limit-to-bodies): New command and
	keystroke.

	* gnus-art.el (gnus-treatment-function-alist): Change order of
	newsgroups/generic header folding to avoid double-folding.

	* message.el (message-hidden-headers): Add X-Draft-From.

	* gnus-sum.el (gnus-summary-repeat-search-article-forward): New
	command.
	(gnus-summary-repeat-search-article-backward): New command.

	* gnus-topic.el (gnus-topic-display-missing-topic): Skip past
	groups in the parent topic.

2006-04-16  João Cachopo  <joao.cachopo@inesc-id.pt>  (tiny change)

	* spam.el (spam-necessary-extra-headers): Add X-CRM114-Status.
	(spam-extra-header-to-number): Return the CRM114 number as a
	number instead of a string.

2006-04-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-face-properties-alist): Moved here from
	gnus-fun.

	* gnus-fun.el (gnus-face-properties-alist): Move to gnus-art.

2006-04-15  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-strip-forbidden-properties): Only display on
	self-insert-command.

	* hashcash.el (hashcash-insert-payment-async): Remove dead code;
	reindent.
	(hashcash-insert-payment-async-2): Make sure the buffer is alive.

2006-04-15  NAKAJI Hiroyuki  <nakaji@takamatsu-nct.ac.jp>  (tiny change)

	* smiley.el (smiley-style): Fix typo.

2006-04-15  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* hashcash.el (hashcash-insert-payment-async-2): Use
	message-goto-eoh instead of doing it manually.
	(mail-add-payment): Use message-narrow-to-header instead of trying
	to do the same itself.

	* message.el (message-hidden-headers): Add Face.

	* gnus-sum.el (gnus-summary-reparent-thread): Factor out
	reparenting code.
	(gnus-summary-reparent-children): Refactored out code.
	(gnus-summary-thread-map): New keystroke.
	(gnus-summary-reparent-children): Make into command.

	* smiley.el (smiley-style): Default to `medium' if using a large
	font.

	* gnus-sum.el (unmorse-region): Remove autoload, because morse.el
	does it itself.

	* message.el (message-point-in-header-p): Simplify definition.

2006-04-14  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnagent.el (nnagent-request-set-mark): Silence log file
	writing.
	(nnagent-request-set-mark): Use write-region instead of
	append-to-file.

	* gnus-sum.el (gnus-read-header): Fudge article number if using a
	strange select method.

	* ecomplete.el (ecomplete-display-matches): Get highlightling
	right.
	(ecomplete-display-matches): Use literals.
	(ecomplete-display-matches): Disable message logging.

	* message.el (message-display-abbrev): Small optimization.

	* ecomplete.el (ecomplete-display-matches): Allow automatic
	display.

	* message.el (message-strip-forbidden-properties): Display
	abbrevs.
	(message-display-abbrev): Get automatic display right.

	* ecomplete.el (ecomplete-display-matches): Use M-n/M-p
	keystrokes.

2006-04-13  Romain Francoise  <romain@orebokech.com>

	TODO: Backport to v5-10!

	* gnus-util.el (gnus-alist-to-hashtable, gnus-hashtable-to-alist):
	Moved here (and renamed) from gnus-registry.el.

	* gnus-registry.el: Require gnus-util.
	Use `gnus-alist-to-hashtable' and `gnus-hashtable-to-alist'.

2006-04-13  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-catchup-current): Change
	if-then-else-if-then-else into cond.
	(gnus-group-catchup): Indent.
	(group-name-at-point): New function.
	(gnus-fetch-group): Provide default from thing at point.

2006-04-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-display-abbrev): Fix regexp.

	* ecomplete.el (ecomplete-highlight-match-line): Reimplement
	choosing.
	(ecomplete-highlight-match-line): Fix up code rewrite, remove
	dead variables.

	* message.el (message-newline-and-indent): Remove debugging.
	(message-display-abbrev): Use new implementation.

2006-04-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-mode): Set
	cursor-in-non-selected-windows to nil.

	* smiley.el: Revert previous change.
	(smiley-data-directory): defvar it before using it in the
	defcustom of `smiley-style'.

2006-04-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-newline-and-indent): New function.

	* ecomplete.el: Implement more bits.

	* message.el (message-put-addresses-in-ecomplete): Clean up the
	string.

	* ecomplete.el (ecomplete-add-item): Chop off decimals.

	* gnus-sum.el (gnus-summary-save-parts): Bind
	gnus-summary-save-parts-counter and use it to make unique file
	names.

	* gnus-art.el (gnus-ignored-headers): Add some more headers.

	* ietf-drums.el (ietf-drums-parse-addresses): Take a RAWP
	parameter to say whether to actually parse the individual
	addresses.

	* message.el (message-put-addresses-in-ecomplete): New function.
	(ecomplete): Require.
	(message-mail-alias-type): Add ecomplete as an option.

2006-04-12  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* flow-fill.el (fill-flowed): Remove trailing space from blank
	quoted lines.

2006-04-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* smiley.el (smiley-style): Move definition later to avoid a
	compilation warning.

2006-04-12  Kenichi Handa  <handa@m17n.org>

	* rfc2231.el (rfc2231-decode-encoded-string): Work on unibyte
	buffer and then decode the buffer text if necessary.
	(rfc2231-encode-string): Be sure to work on multibyte buffer at
	first, and after mm-encode-body, change the buffer to unibyte.
	Use mm-disable-multibyte instead of set-buffer-multibyte.

2006-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-copy-part): Find name parameter in
	Content-Type header instead of Content-Disposition header.
	(gnus-mime-inline-part): Ditto.
	(gnus-mime-view-part-as-charset): Ignore charset that the part
	specifies.

	* mm-decode.el (mm-display-part): Work with external parts and
	usual parts similarly.

	* mm-extern.el (mm-inline-external-body): Use mm-display-part
	instead of gnus-display-mime.

	* mm-util.el (mm-decompress-buffer): Use mm-with-unibyte-buffer
	instead of with-temp-buffer.

	* gnus-uu.el (gnus-uu-save-article): Put mml tags instead of part
	tag to summarized topics part in order to encode non-ASCII text.

2006-04-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* smiley.el (smiley-style): New variable.
	(smiley-directory): New function.
	(smiley-data-directory): Derive from `smiley-style' using
	`smiley-directory'.
	(smiley-regexp-alist): Add new entries.

	* gnus-art.el (gnus-button-valid-localpart-regexp): Exclude `@'.
	(gnus-article-browse-delete-temp): Add :version.

2006-04-11  Arne Jørgensen  <arne@arnested.dk>

	* gnus-sieve.el (gnus-sieve-generate): Delete from the start of
	the sieve region.

2006-04-11  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2006-04-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el: No Gnus v0.4 is released.

2006-04-11  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnslashdot.el (nnslashdot-retrieve-headers-1): Fix up to new
	layout.

	* rfc2047.el (rfc2047-decode-encoded-words): Don't message about
	unknown charset.

	* message.el (message-header-synonyms): Add Original-To to the
	default.

	* gnus-sum.el (gnus-get-newsgroup-headers-xover): group is an
	optional parameter.

2006-04-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-fun.el (gnus): Require it for gnus-directory.

2006-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-fun.el (gnus-face-properties-alist): Add :version.

2006-04-05  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-filter): Fix.

2006-04-05  Simon Josefsson  <jas@extundo.com>

	* password.el (password-reset): New function.

2006-04-05  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region, pgg-gpg-sign-region): Wait
	for BEGIN_SIGNING too, new in GnuPG 1.4.3.

2006-04-04  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-create-mapping): Update regexp.
	Some whitespace was matched into the url, which broke browsing hits
	> 100 when mm-url-use-external was nil.

2006-04-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Check
	gnus-extra-headers for 'Newsgroups.

	* message.el (message-tool-bar-gnome): Check if `flyspell-mode' is
	bound.

2006-04-04  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el: Clean up process buffers every time gpg processes
	complete.

2006-04-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-fun.el (gnus-convert-image-to-face-command): Fix typo in
	doc string.

2006-04-03  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-process-filter)
	(pgg-gpg-wait-for-completion): Check if buffer is alive.

	* pgg-gpg.el (pgg-gpg-process-sentinel): Don't remove GNUPG:
	lines, temporary fix.

2006-03-31  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-update-tool-bar): Add :initialize and :set.

2006-03-29  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-start-process): Don't bind
	default-enable-multibyte-characters.  This reverts the change from
	revision 6.17 which is no longer necessary because the passphrase
	is sent separately now.  GnuPG messages are unreadable under
	multibyte locales with default-enable-multibyte-characters set to
	nil.

2006-03-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tool-bar-gnome): Move "spell".

2006-03-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Don't use
	XEmacs-only `replace-in-string'.  Use `gnus-group-real-name'
	instead.

2006-03-27  Karl Kleinpaste  <karl@charcoal.com>

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Improve
	newsgroups handling for NNTP overviews which don't include
	Newsgroups.

2006-03-26  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* message.el (message-resend): Bind message-generate-hashcash to nil.

2006-03-26  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* hashcash.el (hashcash-already-paid-p): Bind case-fold-search
	when searching for already-paid recipients.

2006-03-27  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el: Invoke gpg asynchronous, to avoid querying for
	passphrases when it is not needed.
	(pgg-gpg-use-agent): Add, to hard code that pgg shouldn't wait for
	passphrase stuff from gpg, should only be necessary when you use
	gpg with a smartcard.

2006-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-insert-mime): Ignore cached contents of
	message/external-body part.

	* mm-decode.el (mm-get-part): Add optional 'no-cache' argument.
	(mm-insert-part): Ditto.

2006-03-23  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-update-agent): Add again, with fixes from
	Reiner.
	(pgg-gpg-use-agent-p): Use it again.

2006-03-23  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-update-agent): Remove, doesn't work with
	older emacsen.
	(pgg-gpg-use-agent-p): Don't use it.

2006-03-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* pgg-gpg.el (pgg-gpg-update-agent): Only use make-network-process
	if we can.

2006-03-22  Sascha Wilde  <wilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-use-agent): Disable by default.
	(pgg-gpg-update-agent): New function.
	(pgg-gpg-use-agent-p): New function.
	(pgg-gpg-process-region, pgg-gpg-encrypt-region)
	(pgg-gpg-encrypt-symmetric-region, pgg-gpg-decrypt-region)
	(pgg-gpg-sign-region): Use it.

2006-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-map-articles): Don't funcall symbol macro.
	Reported by Ralf Wachinger <rwachinger@gmx.de>.

2006-03-21  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el: Ideas below based on patch from Sascha Wilde
	<wilde@sha-bang.de>.
	(pgg-gpg-use-agent): New variable.
	(pgg-gpg-process-region): Use it.
	(pgg-gpg-encrypt-region): Likewise.
	(pgg-gpg-encrypt-symmetric-region): Likewise.
	(pgg-gpg-decrypt-region): Likewise.
	(pgg-gpg-sign-region): Likewise.
	(pgg-gpg-possibly-cache-passphrase): Don't cache a nil password.

2006-03-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-agent.el (gnus-agent-queue-mail): Fix custom tag for `t'.

	* spam.el (spam-mark-new-messages-in-spam-group-as-spam):
	Add comment on version.

2006-03-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* smiley.el: Add missing test smiley.

2006-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-with-part): New macro.
	(mm-get-part): Use it; work with message/external-body as well.
	(mm-save-part): Treat name and filename equally.

	* mm-extern.el (mm-extern-cache-contents): New function.
	(mm-inline-external-body): Use it; force the part to be displayed;
	move undisplayer added to the cached handle to the parent.

	* gnus-art.el (gnus-mime-save-part-and-strip): Add name parameter.
	(gnus-mime-view-part-as-type): Work with message/external-body.

	* gnus-util.el (gnus-tool-bar-update): Bind tool-bar-mode.

2006-03-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path-for-library): Prefer user's
	images in image-load-path.  [Sync with image.el, revision 1.60, in
	Emacs.]

2006-03-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path-for-library): Pass value of
	path rather than symbol.  Always return list of directories.
	Guarantee that image directory comes first.  [Sync with image.el,
	revision 1.59, in Emacs.]

	* message.el (message-make-tool-bar): Adjust to new API of
	`gmm-image-load-path-for-library'.

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* gnus-group.el (gnus-group-make-tool-bar): Ditto.

2006-03-15  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* gnus-art.el (gnus-article-only-boring-p):
	Bind inhibit-point-motion-hooks to avoid infinite loop when entering
	intangible text.
	Reported by Ralf Wachinger <rwnewsmampfer@geekmail.de>.

2006-03-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path-for-library): Fix typo.  Use
	`defun' instead of `gmm-defun-compat'.

2006-03-14  Simon Josefsson  <jas@extundo.com>

	* message.el (message-unique-id): Don't use message-number-base36
	if (user-uid) is a float.
	Reported by Bjorn Solberg <bjorn_ding1@hekneby.org>.

2006-03-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect): Dissect all parts correctly.

	* gnus-art.el (gnus-mime-display-single): Make sure there is an
	empty line between a part and a message part.

2006-03-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* smiley.el: Add more test smileys.
	(smiley-data-directory, smiley-regexp-alist)
	(gnus-smiley-file-types): Fix doc strings.
	(smiley-update-cache): Clear smiley-cached-regexp-alist before
	adding new elements.
	(smiley-mouse-map): Unused code.  Make it a comment.

2006-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-nocem.el (gnus-nocem-scan-groups): Add autoload cookie;
	scan latest NoCeM messages instead of old ones.
	(gnus-nocem-check-article): Fix regexps so as to match to PGP
	delimiters that are recently used.
	(gnus-nocem-load-cache): Add autoload cookie.

	* gnus.el (gnus-use-nocem): Enable it to be set to also a number.

	* gnus-start.el (gnus-setup-news): Scan NoCeM messages if a group
	level which is larger than gnus-use-nocem is specified.

	* gnus-group.el (gnus-group-get-new-news): Ditto.

2006-03-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-tool-bar-update): New function.

	* gnus-group.el (gnus-group-update-tool-bar): New variable.
	(gnus-group-insert-group-line): Add gnus-tool-bar-update.

	* gnus-topic.el (gnus-topic-prepare-topic): Add gnus-tool-bar-update.

	* gnus-group.el (gnus-group-redraw-when-idle)
	(gnus-group-redraw-check): Remove.
	(gnus-group-make-tool-bar): Remove gnus-group-redraw-check.

2006-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-split-it): Invert match-partial-words behavior
	if optional last element is specified in splits (FIELD VALUE...).

2006-03-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-make-tool-bar): Rename gmm-image-load-path
	to gmm-image-load-path-for-library.  Call with no-error argument.
	(message-tool-bar-gnome): Rename "mail/attach" to "attach".

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* gnus-group.el (gnus-group-make-tool-bar): Ditto.

	* gmm-utils.el (gmm-image-load-path): Remove alias.

2006-03-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-image-load-path): Add alias.

	* nnml.el (nnml-generate-nov-databases-directory): Rename from
	nnml-generate-nov-databases-1.
	(nnml-generate-nov-databases): Use it.
	(nnml-generate-nov-databases-directory): Document no-active
	argument.

	* gmm-utils.el (gmm-image-load-path-for-library): Return single
	directory if path is t.  Add no-error.

	* gnus-group.el (gnus-group-make-tool-bar): Use add-hook.
	Suggested by Stefan Monnier <monnier@iro.umontreal.ca>.

	* gnus-art.el (gnus-article-browse-delete-temp-files): Simplify
	resetting gnus-article-browse-html-temp-list.

	* gmm-utils.el (gmm-image-load-path-for-library): Sync with
	mh-compat.el revision 1.9 in Emacs.  Rename `gmm-image-load-path'.
	Add example to docstring.  Rename local variables.  Move error
	checks to default case in cond and simplify.

2006-03-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-w3m-cid-retrieve-1): Check carefully whether
	handle is multipart when calling it recursively.
	(mm-w3m-cid-retrieve): Display warning if retrieving fails.

2006-03-03  Daniel Pittman  <daniel@rimspace.net>

	* nnimap.el (nnimap-request-update-info-internal): Optimize.
	Don't `gnus-uncompress-range' to avoid excessive memory usage.

2006-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-tool-bar-gnome): Check if gnus-topic.el
	is loaded.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Check if spam.el is
	loaded.

2006-03-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-with-unibyte-current-buffer): Change "Emacs 23"
	to "Emacs 23 (unicode)" in doc string.

	* gnus-sum.el (gnus-summary-set-display-table): Change "Emacs 23" to
	"Emacs 23 (unicode)" in comment.

2006-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-get-part): Don't use mm-with-unibyte-current-buffer.

	* gnus-sum.el (gnus-summary-set-display-table): Don't nix out
	characters 160 through 255 in Emacs 23.

2006-03-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-browse-html-temp-list): Rename from
	gnus-article-browse-html-temp.
	(gnus-article-browse-delete-temp): Make it customizable.  Add
	`file'.  Adjust doc string.
	(gnus-article-browse-delete-temp-files): Add argument.  Allow
	query for each file.  Adjust doc string.
	(gnus-article-browse-html-parts): Add
	`gnus-article-browse-delete-temp-files' to
	`gnus-summary-prepare-exit-hook' and `gnus-exit-gnus-hook'.

2006-03-02  Hynek Schlawack  <hynek@ularx.de>

	* gnus-art.el (gnus-article-browse-html-temp)
	(gnus-article-browse-delete-temp): New variables.
	(gnus-article-browse-delete-temp-files): New function.
	(gnus-article-browse-html-parts): Use it.

2006-03-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-redraw-check): Remove redundant tests.

	* gmm-utils.el (gmm-image-load-path): Mention ../etc search in doc
	string.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Don't use
	gnus-summary-insert-new-articles when unplugged.  Remove
	gnus-summary-search-article-forward.

	* gmm-utils.el (gmm-tool-bar-style): Test tool-bar-mode and
	display-visual-class instead of display-color-cells.

2006-03-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload customize-group for XEmacs.

	* mml.el (mml-generate-mime-1): Encode parts other than text/* or
	message/* containing non-ASCII text properly.

2006-03-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Require gmm-utils, remove autoloads.
	(message-tool-bar): Set default based on
	gmm-tool-bar-style.
	(message-tool-bar-gnome): Add gmm-customize-mode.

	* gnus-sum.el (gnus-summary-tool-bar): Set default based on
	gmm-tool-bar-style.
	(gnus-summary-tool-bar-gnome): Add gmm-customize-mode.

	* gnus-group.el (gnus-group-tool-bar): Set default based on
	gmm-tool-bar-style.
	(gnus-group-tool-bar-gnome): Add gmm-customize-mode.

	* gmm-utils.el (gmm-image-directory): Rename variable from
	gmm-image-load-path.
	(gmm-image-load-path): Use gmm-image-directory.
	(gmm-customize-mode): New function.
	(gmm-tool-bar-style): New variable.

	* gnus-group.el (gnus-group-redraw-when-idle): Rename from
	gnus-group-redraw-line-number.
	(gnus-group-redraw-check): Simplify.
	(gnus-group-tool-bar-update): Remove redraw check.
	(gnus-group-make-tool-bar): Add redraw check.

2006-03-01  Michael Piotrowski  <mxp@dynalabs.de>  (tiny change)

	* gnus-art.el (gnus-button): Add missing parentheses.

2006-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind line-number-at-pos.

2006-02-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-with-unibyte-current-buffer): Add note.

2006-02-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button): New face.
	(gnus-article-button-face): Use it.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Add
	gnus-summary-next-page.  Re-order.

	* gnus-group.el (gnus-group-tool-bar-gnome): prev-node and
	next-node are now included.
	(gnus-group-redraw-line-number): New internal variable.
	(gnus-group-redraw-check): Helper function for updating the tool
	bar.
	(gnus-group-tool-bar-update): Add gnus-group-redraw-check.

	* gmm-utils.el (gmm-tool-bar-item): Add TODO about modifiers.

	* spam.el (spam-spamassassin-score-regexp): New internal variable.
	(spam-extra-header-to-number, spam-check-spamassassin-headers):
	Use it to match format of Spamassassin 3.0 and later.  Reported by
	IRIE Tetsuya <irie@t.email.ne.jp>.
	(spam-check-bogofilter)
	(spam-bogofilter-register-with-bogofilter): Fix args of
	`gnus-error' calls.

2006-02-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-draft.el (gnus-draft-send): Bind message-signature to avoid
	unnecessary interaction when sending queued mails.  Reported by
	TAKAHASHI Yoshio <tkh@jp.fujitsu.com>.

2006-02-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-sequence-of-unread-articles): Return nil if
	first or last are nil.

2006-02-24  Andreas Seltenreich  <uwi7@rz.uni-karlsruhe.de>

	* nnweb.el (nnweb-gmane-create-mapping): Don't choke on ^M.

2006-02-24  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-int.el (gnus-open-server): Respect gnus-batch-mode.

2006-02-24  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Protect more against buggy tcp output.

2006-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnweb.el (nnweb-type-definition, nnweb-gmane-search): Use new
	nov.php.

2006-02-24  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-type-definition, nnweb-gmane-create-mapping)
	(nnweb-gmane-wash-article, nnweb-gmane-search): Fix Gmane web
	groups.  Kudos to Olly Betts <olly@survex.com> for providing NOV
	output on the server side.
	(nnweb-google-create-mapping): Update regexps and add some
	progress indication.

2006-02-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-tool-bar-gnome): Fix
	gnus-agent-toggle-plugged.  Re-order icons.
	(gnus-group-tool-bar-gnome): Add
	gnus-group-{prev,next}-unread-group.
	(gnus-group-tool-bar-gnome): Re-order icons.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Move
	gnus-summary-insert-new-articles.

	* message.el (message-tool-bar-gnome, message-tool-bar-retro): Fix
	comments.

	* utf7.el (utf7-utf-16-coding-system): Fix comment.  utf-16-be is
	also available in Emacs 21.3.

	* message.el (message-fix-before-sending): Change "Emacs 22" to
	"Emacs 23 (unicode)" in comment.

	* qp.el (quoted-printable-encode-region): Change "Emacs 22" to
	"Emacs 23 (unicode)" in comment.

	* mm-util.el: Change "Emacs 22" to "Emacs 23 (unicode)" in
	comment.
	(mm-coding-system-p): Add comment about no-MULE XEmacs.

	* mm-view.el (mm-fill-flowed): Add :version.

2006-02-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-image-load-path): Don't modify image-load-path
	and load-path.

2006-02-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Autoload gmm-image-load-path.
	(message-tool-bar-retro): Prepend "gnus/" subdirectory to some
	icon file names.  Use old Emacs 21 "mail_send.xpm" icon for
	consitency.

	* gmm-utils.el (gmm-image-load-path): Also search in
	"../etc/images".  Don't set gmm-image-load-path if we don't find
	the image.

2006-02-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-image-load-path): Don't make
	`gmm-image-load-path' include subdirectories which the second arg
	`image' might specify.

	* gnus-group.el (gnus-group-tool-bar-retro): Prepend the "gnus/"
	subdirectory to icon file names.

	* gnus-sum.el (gnus-summary-tool-bar-retro): Ditto.

2006-02-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-make-tool-bar): Add IMAGE argument to
	gmm-image-load-path calls.

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* message.el (message-make-tool-bar): Ditto.

	* mml.el (mml-preview): Added comment concerning tool bar icons.

	* gnus-group.el (gnus-group-tool-bar-gnome): Use new icon names.
	(gnus-group-make-tool-bar): Use `gmm-image-load-path'.

	* gnus-sum.el (gnus-summary-tool-bar-gnome): Use new icon names.
	(gnus-summary-make-tool-bar): Use `gmm-image-load-path'.

	* message.el (message-tool-bar-gnome): Use new icon names.
	(message-make-tool-bar): Use `gmm-image-load-path'.

	* gmm-utils.el (gmm-defun-compat, gmm-image-search-load-path): New
	functions from MH-E.
	(gmm-image-load-path): New variable from MH-E.
	(gmm-image-load-path): New function from MH-E.  Added arguments
	LIBRARY, IMAGE and PATH.  Don't modify paths.  Don't use
	*-image-load-path-called-flag.

2006-02-21  Milan Zamazal  <pdm@brailcom.org>

	* mm-view.el (mm-view-pkcs7-verify): Implement using smime.el.

2006-02-21  Wolfram Fenske  <wolfram.fenske@student.uni-magdeburg.de>  (tiny change)

	* nnimap.el (nnimap-request-move-article): Change folder back to
	source group before deleting.

2006-02-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-override-alist): Fix type in doc string.

	* gnus-art.el (mm-url-insert-file-contents-external): Autoload
	mm-url.

	* mm-uu.el (mm-uu-type-alist): Improve `LaTeX'.

2006-02-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-charset-to-coding-system): Don't check the
	coding system which mm-charset-to-coding-system returns for a
	given charset is valid.

2006-02-16  Juanma Barranquero  <lekktu@gmail.com>

	* html2text.el (html2text-remove-tag-list):
	* spam-stat.el (spam-stat-buffer-words): Fix typo in docstring.

2006-02-14  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-cus.el: Revert 2005-10-17 change.

2006-02-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-strip-banner): Call
	article-really-strip-banner only when the regexp match is made.

2006-02-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-strip-banner): Use
	gnus-extract-address-components instead of
	mail-header-parse-addresses to make it work with non-ASCII text;
	remove mail-encode-encoded-word-string.

	* rfc2231.el (rfc2231-parse-string): Attempt to parse parameter
	values which are surrounded with \"...\"; make it never cause a
	Lisp error; give up parsing of parameters if it failed in
	extracting type.

2006-02-14  Arne Jørgensen  <arne@arnested.dk>

	* smime.el (smime-cert-by-ldap-1): Fix bug where
	`smime-ldap-search' returns results without userCertificates.

2006-02-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-make-temp-file): Don't catch file-error in Emacs.

2006-02-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-check-spamassassin-headers): Adapt format for
	Spamassassin 3.0 or later.  Reported by ARISAWA Akihiro
	<ari@mbf.ocn.ne.jp>.
	(spam-list-of-processors): Add spam-use-gmane.

2006-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-make-temp-file): Import the Emacs 22 version of
	make-temp-file; make it work with XEmacs as well.

	* gnus-art.el (gnus-article-browse-html-parts): Use the 3rd arg of
	mm-make-temp-file.

	* mm-decode.el (mm-display-external): Use the 3rd arg of
	mm-make-temp-file.
	(mm-create-image-xemacs): Ditto.

2006-02-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-draft.el (gnus-draft-send): Replace message-narrow-to-head
	with message-narrow-to-headers.
	(gnus-draft-setup): Narrow to header to run message-fetch-field.
	(gnus-draft-check-draft-articles): New function.
	(gnus-draft-edit-message, gnus-draft-send-message): Use it.

2006-02-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-browse-html-parts):
	`hs-show-html-list' should read `gnus-article-browse-html-parts'.
	Don't use suffix argument for mm-make-temp-file for Emacs 21
	compatibility.  Remove useless `format'.

2006-02-13  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-google-wash-article): Update regexps.
	(nnweb-group-alist): Use defvoo instead of defvar.

2006-02-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnoo.el (nnoo-declare): Don't generate duplicate entries when
	re-loading nn* modules.

2006-02-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-make-tool-bar): Remove duplicate check
	for `tool-bar-mode' and don't check it's default-value.

	* gnus-sum.el (gnus-summary-make-tool-bar): Ditto.

	* message.el (message-make-tool-bar): Ditto.

	* gnus-art.el (gnus-article-browse-html-parts): Remove useless
	`substring'.  Shorten tmp-file name.

	* gnus.el: Remove bogus comment.

2006-02-10  Hynek Schlawack  <hynek@ularx.de>

	* gnus-art.el (gnus-article-browse-html-parts): New function.
	(gnus-article-browse-html-article): New function for viewing html
	articles with a browser.

2006-02-09  Daiki Ueno  <ueno@unixuser.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region): Don't convert line-endings
	in elisp.
	(pgg-gpg-encrypt-symmetric-region): Ditto.
	(pgg-gpg-sign-region): Ditto.

	* pgg-def.el (pgg-text-mode): New variable.

	* mml2015.el (mml2015-pgg-sign): Enable pgg-text-mode.
	(mml2015-pgg-encrypt): Ditto.

	* mml1991.el (mml1991-pgg-sign): Enable pgg-text-mode.
	(mml1991-pgg-encrypt): Ditto.

2006-02-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnfolder.el (nnfolder-insert-newsgroup-line): Use
	message-make-date instead of current-time-string.

	* mm-view.el (mm-inline-message): Don't set gnus-newsgroup-charset
	to gnus-decoded which mm-uu might set.

2006-02-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Sort segmented parameters;
	don't decode quoted parameters; remove misimported Emacs code.
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-decode-encoded-string): Don't use split-string which
	behaves differently according to Emacs version; use
	mm-decode-coding-region to convert charset to coding-system.
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-encode-string): Remove misimported Emacs code.

2006-02-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-decode-charset): Don't use ignore-errors
	when calling mail-header-parse-content-type.
	(article-de-quoted-unreadable): Ditto.
	(article-de-base64-unreadable): Ditto.
	(article-wash-html): Ditto.

	* mm-decode.el (mm-dissect-buffer): Don't use ignore-errors when
	calling mail-header-parse-content-type and
	mail-header-parse-content-disposition.
	(mm-find-raw-part-by-type): Don't use ignore-errors when calling
	mail-header-parse-content-type.

	* mml.el (mml-insert-mime-headers): Use mml-insert-parameter to
	insert charset and format parameters; encode description after
	inserting it to buffer.
	(mml-insert-parameter): Fold lines properly even if a parameter is
	segmented into two or more lines; change the max column to 76.

	* rfc1843.el (rfc1843-decode-article-body): Don't use
	ignore-errors when calling mail-header-parse-content-type.

	* rfc2231.el (rfc2231-parse-string): Return at least type if
	possible; don't cause an error even if it fails in parsing of
	parameters.  Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-encode-string): Don't break lines at the beginning, leave
	it to mml-insert-parameter.

	* webmail.el (webmail-yahoo-article): Don't use ignore-errors when
	calling mail-header-parse-content-type.

2006-02-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane-use-article-number):
	Improve doc string.
	(spam-report-gmane-internal): Check if a suitable header was found
	in the article.

2006-02-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Revert 2006-02-03 change.
	(rfc2231-encode-string): Make param*=value always begin with LWSP.

2006-02-05  Romain Francoise  <romain@orebokech.com>

	Update copyright notices of all files in the gnus directory.

2006-02-03  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-request-group): Avoid growing overview files.

2006-02-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Add missing semicolons to
	segmented lines of parameter value to cope with Thunderbird 1.5
	bug (cf. https://bugzilla.mozilla.org/show_bug.cgi?id=323318).
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.
	(rfc2231-encode-string): Don't make lines exceeding 76 column.

2006-02-01  Max Froumentin  <max@lapin-bleu.net>  (tiny change)

	* mml.el (mml-generate-mime-1): Correct the order of inline signed
	parts.

2006-01-31  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-group-alist): Use defvar instead of defvoo,
	there's only one active file for all servers.
	(nnweb-request-scan): Make sure nnweb-articles is initialized on
	solid groups.  Gnus might have used a FAST request to select the group.
	(nnweb-request-group, nnweb-google-parse-1): Don't keep nnweb-type
	and nnweb-search redundantly in the active file.
	(nnweb-request-list): Don't list bogus groups.  There can only be one.
	(nnweb-request-create-group): Don't use ARGS.
	(nnweb-possibly-change-server, nnweb-request-group): Remove some
	initialisations.  Let nnoo do the work.

2006-01-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-emacs-sources-extract, mm-uu-diff-extract):
	Say the part has been decoded.

	* mm-view.el (mm-display-inline-fontify): Get decoded part rightly.

2006-01-31  Kevin Ryde  <user42@zip.com.au>

	* mailcap.el (mailcap-viewer-passes-test): Don't put "(nil t)" into
	mailcap-viewer-test-cache when there's no 'test clause, since that
	will invert the meaning of a "nil" test previously determined by
	mailcap-mailcap-entry-passes-test.

2006-01-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el: Bind tool-bar-mode instead of tool-bar-map when
	compiling.

	* gnus-sum.el: Ditto.

	* message.el: Don't bind tool-bar-map when compiling.

2006-01-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnweb.el (nnweb-google-parse-1): Clarify some comments.

2006-01-30  Andreas Seltenreich  <uwi7@stud.uni-karlsruhe.de>

	* nnweb.el (nnweb-type-definition, nnweb-google-parse-1)
	(nnweb-google-create-mapping, nnweb-google-search): Adapt to
	current Google Groups.

2006-01-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-make-tool-bar): Add checks for XEmacs
	and tool-bar-mode.

	* gnus-group.el (gnus-group-make-tool-bar): Add checks for XEmacs
	and tool-bar-mode.

	* message.el (message-tool-bar-update): Simplify.
	(message-make-tool-bar): Add checks for XEmacs and tool-bar-mode.

	* gnus-sum.el (gnus-summary-tool-bar-update): Check for
	gnus-summary-buffer.
	(gnus-summary-tool-bar-gnome): Use "reply-author" icon for
	gnus-summary-reply.

	* gmm-utils.el (gmm): Add :version.

2006-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (clean): New rule.
	(distclean): Use it.

2006-01-26  Steve Youngs  <steve@sxemacs.org>

	* gmm-utils.el (gmm-tool-bar-item, gmm-tool-bar-zap-list): Don't
	autoload.

2006-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gmm-utils.el (gmm-verbose): Add :group.

2006-01-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Change some comments WRT tool-bars.

	* gnus-sum.el (gnus-summary-tool-bar)
	(gnus-summary-tool-bar-gnome, gnus-summary-tool-bar-retro)
	(gnus-summary-tool-bar-zap-list): New variables.
	(gnus-summary-make-tool-bar): Complete rewrite using
	`gmm-tool-bar-from-list'.

	* gnus-group.el (gnus-group-tool-bar, gnus-group-tool-bar-gnome)
	(gnus-group-tool-bar-retro, gnus-group-tool-bar-zap-list): New
	variables.
	(gnus-group-make-tool-bar): Complete rewrite using
	`gmm-tool-bar-from-list'.
	(gnus-group-tool-bar-update): New function.

	* message.el (message-mode-field-menu): Add "Show hidden Headers".

2006-01-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Ignore it if a given part
	is dissected into a single part of which the type is the same as
	the given one; decode charset.

2006-01-21  Kevin Ryde  <user42@zip.com.au>

	* mailcap.el (mailcap-parse-mailcap-extras): "test" key must go
	into alists as symbol not string, since that's what
	mailcap-viewer-passes-test and mailcap-mailcap-entry-passes-test
	look for.

2006-01-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* gmm-utils.el (gmm-tool-bar-item): Add "Separator".
	(gmm-tool-bar-from-list): Suppress tooltip for `gmm-ignore'.

	* message.el (message-tool-bar-gnome): Use gmm-ignore.

2006-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-mime-security-button-menu): New alias.
	(gnus-xmas-mime-security-button-menu): New function.

	* gnus-art.el (gnus-mime-security-button-commands): New variable.
	(gnus-mime-security-button-menu): New definition.
	(gnus-mime-security-button-map): Use them.
	(gnus-mime-security-button-menu): New function.
	(gnus-insert-mime-security-button): Addition to help echo.
	(gnus-mime-security-run-function, gnus-mime-security-save-part)
	(gnus-mime-security-pipe-part): New functions.

	* mm-uu.el (mm-uu-buttonize-original-text-parts): Remove.
	(mm-uu-dissect-text-parts): Revert a part of 2006-01-23 change.

	* mm-decode.el (mm-handle-set-disposition): Remove.
	(mm-handle-set-description): Remove.

2006-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-w3m-standalone-supports-m17n-p): New variable.
	(mm-w3m-standalone-supports-m17n-p): New function.
	(mm-inline-text-html-render-with-w3m-standalone): Use it to alter
	w3m usage.

	* gnus-art.el (gnus-article-wash-html-with-w3m-standalone): Use
	mm-w3m-standalone-supports-m17n-p to alter w3m usage.

2006-01-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tool-bar-zap-list): Use
	gmm-tool-bar-zap-list as custom type.
	(message-tool-bar-update): New function.
	(message-tool-bar, message-tool-bar-gnome)
	(message-tool-bar-retro): Add message-tool-bar-update.
	(message-tool-bar-gnome): Add flyspell-buffer.

	* gnus-util.el (gnus-error): Describe `args'.

	* gmm-utils.el (gmm-error): Describe `args'.
	(gmm-tool-bar-zap-list): New widget.
	(gmm-tool-bar-from-list): Improve description of `zap-list'.

2006-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-buttonize-original-text-parts): New variable.
	(mm-uu-dissect-text-parts): Buttonize original text parts; reduce
	the number of recursive calls.

	* mm-decode.el (mm-handle-set-disposition): New macro.
	(mm-handle-set-description): New macro.

2006-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Decode content transfer
	encoding.

2006-01-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tool-bar-zap-list, message-tool-bar)
	(message-tool-bar-gnome, message-tool-bar-retro): New variables.
	(message-tool-bar-local-item-from-menu): Remove.
	(message-tool-bar-map): Replace by `message-make-tool-bar'.
	(message-make-tool-bar): New function.
	(message-mode): Use `message-make-tool-bar'.

	* gmm-utils.el: New file.
	(gmm-verbose, gmm-message, gmm-error): From gnus-utils.el.
	(gmm-lazy): New widget copied from `nnmail.el'.
	(gmm-tool-bar-from-list): New function for creating customizable
	tool bars.
	(gmm-tool-bar-from-list): Fix typos in doc string.  Remove debug
	output.
	(gmm): Add :prefix to defgroup.

2006-01-20  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gmm-utils.el (gmm-widget-p): New function.

2006-01-20  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-attach-file): Describe `description' in doc string.
	(mml-menu): Add Emacs MIME manual and PGG manual.

2006-01-20  Richard M. Stallman  <rms@gnu.org>

	* mm-url.el (mm-url-load-url): Require url-parse and url-vars.

2006-01-20  Kevin Greiner  <kevin.greiner@compsol.cc>

	* nntp.el (nntp-end-of-line): Doc fix.

2006-01-20  Chong Yidong  <cyd@stupidchicken.com>

	* imap.el (imap-open): Handle case where buffer is a buffer
	object.

2005-01-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-delay.el (gnus-delay): Don't autoload.
	It's useless and could trigger a bug in cus-dep.el causing ldefs-boot
	to be re-loaded when customizing the `gnus-delay' group.

2005-01-20  Chong Yidong  <cyd@stupidchicken.com>

	* message.el (message-insert-citation-line): Use newlines.

2006-01-19  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-pgp.el (pgg-pgp-encrypt-region, pgg-pgp-decrypt-region)
	(pgg-pgp-sign-region): Add optional 'passphrase' argument to all
	these routines, so the passphrase can be managed externally and
	passed in to the system.
	(pgg-pgp-decrypt-region, pgg-pgp-sign-region): Use new name for
	pgg-add-passphrase-to-cache function.

	* pgg-pgp5.el (pgg-pgp5-encrypt-region, pgg-pgp5-decrypt-region)
	(pgg-pgp5-sign-region): Add optional 'passphrase' argument to all
	these routines, so the passphrase can be managed externally and
	passed in to the system.
	(pgg-pgp5-sign-region): Use new name of
	pgg-add-passphrase-to-cache function.

2006-01-19  Ken Manheimer  <ken.manheimer@gmail.com>

	* pgg-gpg.el (pgg-gpg-select-matching-key): Fix: look at the right
	part of the decoded armor to find the key-identifier.
	(pgg-gpg-lookup-key-owner): New function to return the
	human-readable identifier of a key owner.
	(pgg-gpg-key-id-from-key-owner): Make it easy to identify the key
	itself.
	(pgg-gpg-decrypt-region): Prompt with the key owner (rather than
	the key value) if we have a key and can match it against a secret
	key.  Also, added a note pointing out fact that the prompt only
	indicates the first matching key.

	* pgg.el (pgg-decrypt): Passing along 'passphrase' in call to
	pgg-decrypt-region.
	(pgg-add-passphrase-to-cache): Rename from
	`pgg-add-passphrase-cache' to reduce confusion (all callers
	changed).
	(pgg-remove-passphrase-from-cache): Rename from
	`pgg-remove-passphrase-cache' to reduce confusion (all callers
	changed).
	(pgg-read-passphrase, pgg-add-passphrase-cache)
	(pgg-remove-passphrase-cache): Add informative docstrings.
	(pgg-decrypt): Convey provided passphrase in subordinate call to
	pgg-decrypt-region.

2006-01-19  Ken Manheimer  <ken.manheimer+emacs@gmail.com>

	* pgg.el (pgg-encrypt-region, pgg-encrypt-symmetric-region)
	(pgg-encrypt-symmetric, pgg-encrypt, pgg-decrypt-region)
	(pgg-decrypt, pgg-sign-region, pgg-sign): Add optional
	'passphrase' argument, so the passphrase can be managed externally
	and then passed in to the system.

	* pgg.el (pgg-read-passphrase, pgg-add-passphrase-cache)
	(pgg-remove-passphrase-cache): Add optional 'notruncate' argument,
	so the passphrase cache can be used reliably with identifiers
	besides a pgp packet's key id.

	* pgg-gpg.el (pgg-gpg-encrypt-region)
	(pgg-gpg-encrypt-symmetric-region, pgg-gpg-decrypt-region)
	(pgg-gpg-sign-region): Add optional 'passphrase' argument to all
	these routines, so the passphrase can be managed externally and
	passed in to the system.

	* pgg-gpg.el (pgg-gpg-possibly-cache-passphrase): Add optional
	'notruncate' argument, so the passphrase cache can be used
	reliably with identifiers besides a pgp packet's key id.

2006-01-19  Sascha Wilde  <swilde@sha-bang.de>

	* pgg-gpg.el (pgg-gpg-encrypt-symmetric-region): New function for
	symmetric encryption.
	(pgg-gpg-symmetric-key-p): New function to check for an symmetric
	encrypted session key.
	(pgg-gpg-decrypt-region): When decrypting a symmetric encrypted
	message ask for the passphrase in a proper way.

	* pgg.el (pgg-encrypt-symmetric, pgg-encrypt-symmetric-region):
	New user commands for symmetric encryption.

2006-01-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-bodies.el (mm-decode-body): Don't decode decoded body.

	* mm-uu.el (mm-uu-dissect-text-parts): Dissect dissected parts.

2006-01-19  Mark D. Baushke  <mdb@gnu.org>

	* pgg-gpg.el (pgg-gpg-encrypt-region): Add --textmode to gpg args.

2006-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-inlined-types): Add application/pgp.
	(mm-automatic-display): Ditto.

	* mm-uu.el (mm-uu-dissect-text-parts): Recognize application/pgp
	part as text.

2006-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el: Update copyright.
	(nnrss-opml-import): Query whether to subscribe to each entry.

	* gnus-art.el:
	* gnus-sum.el:
	* gnus-xmas.el:
	* messagexmas.el:
	* mm-uu.el:
	* mm-view.el: Update copyright.

2006-01-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-info): New function.
	(message-mode-menu): Add it.
	Update copyright.

	* ChangeLog: Fix and update copyright.

2006-01-13  Romain Francoise  <romain@orebokech.com>

	* message.el (message-forward-subject-name-subject): Prefer the
	address to 'nowhere' if the sender has no name.
	Fix typo.  Update copyright year.

2006-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-wash-html): Use
	gnus-summary-show-article-charset-alist if a numeric arg is given.
	(gnus-article-wash-html-with-w3m-standalone): New function.

	* mm-view.el (mm-text-html-renderer-alist): Map w3m-standalone to
	mm-inline-text-html-render-with-w3m-standalone.
	(mm-text-html-washer-alist): Map w3m-standalone to
	gnus-article-wash-html-with-w3m-standalone.
	(mm-inline-text-html-render-with-w3m-standalone): New function.

2006-01-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-type-alist): Fix previous message-marks commit.
	Improve LaTeX.

2006-01-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-wash-html-in-text-plain-parts): New variable.
	(nnrss-request-article): Render text/plain parts as HTML.

	* gnus-art.el (gnus-article-wash-html-with-w3m): No need to narrow
	the buffer.

2006-01-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-cus.el (gnus-group-parameters): Sync posting-style with
	custom definition of `gnus-posting-styles'.

	* gnus-start.el (gnus-gnus-to-quick-newsrc-format): Bind
	print-circle.  Suggested by Kalle Olavi Niemitalo <kon@iki.fi>.

2006-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-useful-groups): Use Gmane for ding.
	Use nntp for bug archive.

2006-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-article): Fix the way to fill text/plain
	parts.
	(nnrss-normalize-date): New function converts ISO 8601 date into
	RFC822 style.  Suggested by Mark Plaksin <happy@mcplaksin.org>.
	(nnrss-check-group): Use it.

2006-01-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-work-articles): Remove useless `min'.

	* nnrss.el (nnrss-fetch): Make it fail gracefully when it can't
	fetch a feed.  Suggested by Mark Plaksin <happy@mcplaksin.org>.
	(nnrss-insert-w3): Ditto.

2005-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-digest-mail-forward): Reverse the order of
	the articles to be forwarded including the case where neither a
	number of articles nor a region is specified.

2005-12-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-article): Fix last change; fill
	text/plain parts.

2005-12-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-article): Replace <br />s with newlines
	in text/plain part.
	(nnrss-check-group): Don't add excessive newline to dc:subject.

2005-12-19  Mark Plaksin  <happy@mcplaksin.org>  (tiny change)

	* nnrss.el (nnrss-check-group): Put the RSS dc:subject in the
	article.

2005-12-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnml.el: Don't require gnus-bcklg.  Autoload it.
	(nnml-use-compressed-files, nnml-save-mail): Support other
	comression programs such as bzip2.

2005-12-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Make sure we check the buffer size before
	removing tcp headers.

2005-12-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-delete-text-of-type): Enable it to
	remove MIME buttons associated with multipart/alternative parts.
	(gnus-mime-display-alternative): Tag buttons using `article-type'
	text property.

	* gnus-msg.el (gnus-copy-article-buffer): Remove MIME buttons
	associated with multipart/alternative parts.

	* gnus-art.el (gnus-signature-separator): Fix custom type.

	* mm-decode.el (mm-inlined-types): Fix custom type.
	(mm-keep-viewer-alive-types): Ditto.
	(mm-automatic-display): Ditto.
	(mm-attachment-override-types): Ditto.
	(mm-inline-override-types): Ditto.
	(mm-automatic-external-display): Ditto.

2005-12-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-user-mail-address)
	(spam-report-user-agent): New variables.
	(spam-report-url-ping-plain): Use spam-report-user-agent.

2005-12-14  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* gnus-art.el (gnus-button-handle-custom): Do not just use
	`customize-apropos' for any "M-x customize-*" button but the
	function called for.  Accept both the function name and its
	argument in order to achieve this.
	(gnus-button-alist): Remove support for "custom:" URL's.  Pass
	function name to `gnus-button-handle-custom' in case of "M-x
	customize-*" buttons.

2005-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-buttonized-mime-types): Mention addition of
	multipart/alternative and add xref to mm-discouraged-alternatives
	in doc string.

	* mm-decode.el (mm-discouraged-alternatives): Add xref to
	gnus-buttonized-mime-types in doc string.

2005-12-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-decode.el (mm-discouraged-alternatives): Fix custom type.
	Suggest image/.* in the doc string.

2005-12-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-type-alist): Don't depend on message.el for
	message-marks (Debian bug #342521).

2005-12-12  Simon Josefsson  <jas@extundo.com>

	* password.el (password-read-from-cache): Add.
	(password-read): Use it.

2005-12-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-charset-to-coding-system): Recognize
	us-ascii as a MIME charset.

	* mm-bodies.el (mm-decode-content-transfer-encoding): Protect
	against the case where the 2nd arg TYPE is nil.

2005-12-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* pop3.el (pop3-stream-type): Fix custom version.

	* mm-uu.el (mm-uu-type-alist): Simplify uu regexp.

2005-12-09  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>  (tiny change)

	* mm-decode.el (mm-display-external): Add missing cdr.

2005-12-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-display-external): Use nametemplate (defined in
	RFC1524) if it is in mailcap or add a suffix according to
	mailcap-mime-extensions when generating a temp filename; postpone
	deleting a temp file for 2 seconds for some wrappers, shell
	scripts, and so on, which might exit right after having started a
	viewer command as a background job.

2005-12-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp-marks-directory): Fix custom group.

	* gnus-fun.el (gnus-face-from-file): Decrease quant in smaller
	steps when < 10.

	* gnus-start.el (gnus-no-server-1): Mention
	`gnus-level-default-subscribed' in doc string.

2005-12-02  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>  (tiny change)

	* mm-view.el (mm-inline-text-html-render-with-w3m): Fix misplaced
	parens.

2005-12-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-use-toolbar): Revert.
	(gnus-xmas-setup-toolbar): Use global default-toolbar if
	gnus-use-toolbar is default.

	* messagexmas.el (message-use-toolbar): Revert.
	(message-setup-toolbar): Use global default-toolbar if
	message-use-toolbar is default.

2005-11-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-use-toolbar): Determine the default value
	according to default-toolbar-visible-p.

	* messagexmas.el (message-use-toolbar): Ditto.

2005-11-26  Dave Love  <fx@gnu.org>

	* tls.el (open-tls-stream): Rename arg SERVICE to PORT.
	(tls-program, tls-success): Provide openssl alternative.

	* starttls.el: Doc fixes.
	(starttls-open-stream-gnutls, starttls-open-stream): Rename arg
	SERVICE to PORT.

	* pop3.el (pop3-open-server) <ssl>: Clarify a loop.  Deal with
	port null or service name.
	(starttls-negotiate): Autoload.

2005-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-kill-to-signature): Fix interactive spec.

2005-11-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* pop3.el (pop3-open-server): Recognize a string as a service name.

2005-11-24  Pascal Rigaux  <pixel@mandriva.com>  (tiny change)

	* rfc2231.el (rfc2231-parse-string): Support non-ascii chars.

2005-11-23  Dave Love  <fx@gnu.org>

	Add pop3s, pop3/starttls.

	* pop3.el (pop3-authentication-scheme): Clarify doc.
	(open-tls-stream, starttls-open-stream): Autoload.
	(pop3-stream-type): New.
	(pop3-open-server): Use it.

	* mail-source.el (mail-sources): Fix some :types.  Add stream type
	for POP.
	(mail-source-keyword-map): Add :stream for POP.
	(mail-source-fetch-pop): Use pop3-stream-type.

2005-11-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-fancy-expiry-target): Use current-time instead
	of current-time-string.

2005-11-20  Stefan Schimanski  <schimmi@debian.org>  (tiny change)

	* nnmail.el (nnmail-fancy-expiry-target): Protect against invalid
	date header.

2005-11-19  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-sum.el (gnus-fetch-old-headers): Updated docs to warn that
	it can seriously impact performance as it bypasses the agent's
	local caches.

2005-11-19  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-possibly-synchronize-flags): A server
	must be explicitly online rather than "not explicitly offline" for
	its flags to be synchronized.

	* gnus-sum.el (gnus-summary-remove-process-mark): Always return t so
	that gnus-uu-unmark-thread will function correctly.

	* gnus-group.el (gnus-total-fetched-for): Reduced cutoff so that
	1024K is instead displayed as 1M.

2005-11-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* flow-fill.el (fill-flowed): Bind adaptive-fill-mode to nil.

2005-11-16  Boris Samorodov  <bsam@ipt.ru>  (tiny change)

	* imap.el (imap-kerberos4-open): Ignore SSL stuff.

2005-11-13  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-read-local): Trivial fix to format of
	error message to display actual error condition.
	(gnus-agent-save-local): Avoid saving symbols that are bound to
	nil as they simply result in a warning message in
	gnus-agent-read-local.

2005-11-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-dribble-read-file): Use make-local-variable
	rather than make-variable-buffer-local for file-precious-flag.

2005-11-12  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-braid-nov): Now tests new nov entries
	for duplicates which are removed.  The invalid sort check then
	triggers a rescan after the sort as sorting may have moved
	duplicate entries such that they can be cheaply detected.

2005-11-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-dribble-read-file): Quote file-precious-flag.

2005-11-12  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-agent.el (gnus-agent-article-alist-save-format): Changed
	internal variable to a custom variable.  Changed default value
	from compressed(2) to uncompressed(1).
	(gnus-agent-read-agentview): Reversed revision 7.8 to restore
	support for uncompressed agentview files.  Taken together, reading
	the agentview file should now be 6-7 times faster.

2005-11-11  Jan Nieuwenhuizen  <janneke@gnu.org>

	* gnus-start.el (gnus-dribble-read-file): Set file-precious-flag,
	as a buffer-local variable.  This avoids creating truncated
	dribble files as a result of a hang up, eg.

2006-01-03  Rodrigo Ventura  <yoda@isr.ist.utl.pt>  (tiny change)

	* gnus-xmas.el (gnus-xmas-group-startup-message): Typo
	gnus-splash-face -> gnus-splash.  Fixes starting from a TTY in
	XEmacs.

2005-12-09  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-start-draft-setup): Enforce
	`gnus-draft-mode' for nndraft:drafts at startup.

	* gnus.el (gnus-splash): Change custom group.
	(gnus-group-get-parameter, gnus-group-parameter-value): Describe
	allow-list argument.

	* gnus-agent.el (gnus-agent-article-alist-save-format): Format doc
	string.

2005-12-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-default-article-saver): Add user-defined
	`function' to custom type.

2005-10-30  Chong Yidong  <cyd@stupidchicken.com>

	* imap.el (imap-open): Handle case where buffer is a buffer
	object.

2005-11-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-cache.el (gnus-cache-rename-group): Wrap doc strings and
	long lines.
	(gnus-cache-delete-group): Wrap doc strings.

	* gnus-agent.el (gnus-agent-rename-group)
	(gnus-agent-delete-group): Wrap doc strings.

2005-11-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* messagexmas.el (message-use-toolbar): Change the valid values
	into default, top, bottom, left, and right.
	(message-toolbar-thickness): New variable.
	(message-xmas-setup-toolbar): Locate gnus-xmas-glyph-directory as
	well.
	(message-setup-toolbar): Make it work.

	* gnus-xmas.el (gnus-xmas-update-toolbars): New function.
	(gnus-use-toolbar): Change the valid values into default, top,
	bottom, left, and right.
	(gnus-toolbar-thickness): New variable.
	(gnus-xmas-setup-toolbar): New function.
	(gnus-xmas-setup-group-toolbar): Use it.
	(gnus-xmas-setup-summary-toolbar): Use it.

2005-11-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-start.el (gnus-1): Add "native" to
	gnus-predefined-server-alist.

	* gnus.el (gnus-method-to-server): Don't add "native" to the
	lists here, because that leads to problems when
	gnus-select-method is bound.

2005-11-09  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-article-sort-by-date-reverse): Remove,
	use (not sort-by-date) instead.

2005-11-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-delay.el (gnus-delay-group): Don't autoload.
	It's useless and could trigger a bug in cus-dep.el causing ldefs-boot
	to be re-loaded when customizing the `gnus-delay' group.

2005-11-19  Chong Yidong  <cyd@stupidchicken.com>

	* message.el: Revert last changes.
	(message-insert-citation-line): Use newlines.

2005-11-17  Chong Yidong  <cyd@stupidchicken.com>

	* message.el (message-courtesy-message)
	(message-mark-insert-begin, message-mark-insert-end)
	(message-elide-ellipsis, message-cancel-message)
	(message-add-header, message-change-subject)
	(message-cross-post-followup-to-header)
	(message-cross-post-insert-note, message-reduce-to-to-cc)
	(message-widen-reply, message-delete-not-region)
	(message-kill-to-signature, message-insert-signature)
	(message-insert-importance-high, message-insert-importance-low)
	(message-insert-or-toggle-importance)
	(message-insert-disposition-notification-to)
	(message-indent-citation, message-yank-original)
	(message-cite-original-without-signature, message-cite-original)
	(message-insert-citation-line, message-position-on-field)
	(message-fix-before-sending, message-send-mail-partially)
	(message-send-mail, message-send-mail-with-sendmail)
	(message-send-mail-with-qmail, message-send-news)
	(message-check-news-header-syntax, message-generate-headers)
	(message-insert-courtesy-copy, message-fill-address)
	(message-fill-header, message-shorten-references)
	(message-setup-1, message-cancel-news)
	(message-forward-make-body-plain, message-forward-make-body-mime)
	(message-forward-make-body-mml, message-encode-message-body)
	(message-forward-make-body-digest-plain)
	(message-forward-make-body-digest-mime)
	(message-use-alternative-email-as-from): Insert `hard-newline'
	instead of ordinary newlines.

2005-11-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-generate-headers): Downcase the argument
	given to message-check-element.

2005-11-08  Kevin Greiner  <kevin.greiner@compsol.cc>

	* nntp.el (nntp-authinfo-rejected): New error condition.
	(nntp-wait-for): Use new error condition to signal authentication
	error.
	(nntp-retrieve-data): Rethrow new error condition to break out of
	recursive call to nntp-send-authinfo.

2005-11-08  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-catchup-and-goto-prev-group): New function.
	(gnus-summary-exit-map): Bind to `Z p'.
	(gnus-summary-make-menu-bar): Add menu item.

2005-11-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-treat-custom): Add `first'.
	(gnus-treat-*): Add `first' in all doc strings.

	* gnus-group.el (gnus-group-compact-group): Fix typo.

2005-11-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-parameters-case-fold-search): New variable.
	(gnus-parameters-get-parameter): Use it.

	* gnus-score.el (gnus-home-score-file): Doc fix.

2005-11-01  Xavier Maillard  <zedek@gnu-rox.org>  (tiny change)

	* gnus-score.el (gnus-update-score-entry-dates): Doc fix.

2005-10-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-special-display-p): New function.

	* mml.el (mml-preview): Use it; doc fix.

2005-10-30  Chong Yidong  <cyd@stupidchicken.com>

	* imap.el (imap-open): Handle case where buffer is a buffer object.

2005-10-29  Romain Francoise  <romain@orebokech.com>

	* message.el (message-fix-before-sending): Fix comment.

2005-10-29  Jari Aalto  <jari.aalto@cante.net>

	* gnus-sum.el (gnus-article-sort-by-date-reverse): New function.

2005-10-29  Jari Aalto  <jari.aalto@cante.net>

	* score-mode.el (gnus-score-edit-done-hook): Introduce variable.
	Used in gnus-score.el.

2005-10-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-codepage-setup): Remove bogus alias test.

2005-10-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* flow-fill.el (fill-flowed-encode-tests): Restore trailing
	whitespace removed in revision 7.8.  Use concatenated string to
	protect trailing whitespace.

2005-10-27  Jouni K. Seppänen  <jks@iki.fi>

	* nnimap.el (nnimap-search-uids-not-since-is-evil): Add variable.
	(nnimap-request-expire-articles): Use it to avoid sending 'UID
	SEARCH UID ... NOT SINCE' queries, for inefficient servers like
	Courier IMAP ("some version from 2004").  Mostly based on similar
	code in the same function.

2005-10-26  Didier Verna  <didier@xemacs.org>

	* gnus-group.el (gnus-group-compact-group): Invalidate original
	article buffer.
	* gnus-srvr.el (gnus-server-compact-server): Ditto.
	* nnml.el (nnml-request-compact-group): Handle self Xref: field in
	NOV database and in article itself.
	Invalidate article backlog.

2005-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-hide-markers): Fix XEmacs case.

2005-10-26  Simon Josefsson  <jas@extundo.com>

	* flow-fill.el (fill-flowed): Flow-fill unquoted lines too, revert
	part of 2004-07-25 change.

2005-10-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-display-completion-list): New function.
	(message-expand-group): Use it; make sure the Completions buffer
	is modifiable.
2005-10-23  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-sum.el (gnus-ignored-from-addresses): Handle case where
	user-mail-name is an empty string.

2005-10-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-default-adaptive-score-alist): Set defaults
	depending on gnus-score-decay-constant.

	* encrypt.el (encrypt-insert-file-contents)
	(encrypt-write-file-contents): Don't use `gnus-message'.

	* mm-uu.el (mm-uu-verbatim-marks-extract): Add four start and end
	arguments.
	(mm-uu-type-alist): Add message-marks and insert-marks.  Pass
	arguments to mm-uu-verbatim-marks-extract.
	(mm-uu-hide-markers): New variable.
	(mm-uu-extract): Use face similar to `gnus-cite-3'.

	* gnus-fun.el (gnus-convert-image-to-x-face-command)
	(gnus-convert-image-to-face-command): Use "convert" by default to
	allow other input image formats.
	(gnus-x-face-from-file, gnus-face-from-file): Adjust doc strings
	accordingly.

2005-10-23  Simon Josefsson  <jas@extundo.com>

	* imap.el (imap-gssapi-program): Align command line parameters
	with latest GNU SASL.
	(imap-gssapi-open): Ignore 'Trying ...' messages from GNU SASL.

2005-10-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnslashdot.el (nnslashdot-retrieve-headers-1): Update to new
	HTML.
	(nnslashdot-request-article): Ditto.

	* lpath.el (featurep): Add nobreak-char-display.

2005-10-20  Hiroshi Fujishima  <hiroshi.fujishima@gmail.com>  (tiny change)

	* mail-source.el (mail-source-fetch-pop): Require pop3.
	(mail-source-check-pop): Ditto.

2005-10-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-decode-encoded-words): Fix the handling of
	errors.

2005-10-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-strip-trailing-blank-lines)
	(gnus-treat-strip-leading-blank-lines): Improve doc string.

	* message.el (message-tool-bar-local-item-from-menu): Fix comment.

	* mm-bodies.el (mm-decode-string): Call
	`mm-charset-to-coding-system' with allow-override argument.

2005-10-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-allow-incomplete-encoded-text): New variable.
	(rfc2047-charset-to-coding-system): New function.
	(rfc2047-decode-encoded-words): New function.
	(rfc2047-decode-region): Use them.
	(rfc2047-decode-cte): Remove.
	(rfc2047-parse-and-decode): Remove.
	(rfc2047-decode): Remove.

2005-10-15  Kenichi Handa  <handa@m17n.org>

	* rfc2047.el (rfc2047-decode-cte): New function.
	(rfc2047-decode-region): Change the way to decode successive
	encoded-words: decode B- or Q-encoding in each encoded-word,
	concatenate them, and decode it as charset.

2005-10-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind codepage-setup for XEmacs.

2005-10-17  Chong Yidong  <cyd@stupidchicken.com>

	* gnus-cus.el (gnus-custom-map): New variable.  Bind mouse-1 to
	widget-move-and-invoke.
	(gnus-custom-mode): Use gnus-custom-map.

2005-10-15  Bill Wohler  <wohler@newt.com>

	* message.el (message-tool-bar-map): Renamed image file from
	mail_send to mail/send.

2005-10-16  Masatake YAMATO  <jet@gyve.org>

	* message.el (message-expand-group): Pass the common
	prefix substring of completion to `display-completion-list'.

2005-10-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml-sec.el (mml-secure-method): New internal variable.
	(mml-secure-sign, mml-secure-encrypt, mml-secure-message-sign)
	(mml-secure-message-sign-encrypt, mml-secure-message-encrypt): New
	functions using mml-secure-method.

	* mml.el (mml-mode-map): Add key bindings for those functions.
	(mml-menu): Simplify security menu entries.  Suggested by Jesper
	Harder <harder@myrealbox.com>.
	(mml-attach-file, mml-attach-buffer, mml-attach-external): Goto
	end of message if point is the headers of the message.

	* message.el (message-in-body-p): New function.

	* assistant.el: Autoload gnus-util and netrc.

	* mm-util.el (mm-charset-to-coding-system): Add allow-override.
	Use `mm-charset-override-alist' only when decoding.

	* mm-bodies.el (mm-decode-body): Call
	`mm-charset-to-coding-system' with allow-override argument.

	* gnus-art.el (gnus-mime-view-part-as-type-internal): Try to fetch
	`filename' from Content-Disposition if Content-Type doesn't
	provide `name'.
	(gnus-mime-view-part-as-type): Set default instead of
	initial-input.

2005-10-09  Daniel Brockman  <daniel@brockman.se>

	* format-spec.el (format-spec): Propagate text properties of % spec.

2005-10-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-predicate): Add `first'.

2005-10-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-util.el (mm-charset-synonym-alist): Improve doc string.
	(mm-charset-override-alist): New variable.
	(mm-charset-to-coding-system): Use it.
	(mm-codepage-setup): New helper function.
	(mm-charset-eval-alist): New variable.
	(mm-charset-to-coding-system): Use mm-charset-eval-alist.  Warn
	about unknown charsets.

	* dgnushack.el (with-syntax-table): Add some URLs WRT the XEmacs bug.

2005-10-04  David Hansen  <david.hansen@gmx.net>

	* nnrss.el (nnrss-request-article): Add support for the comments tag.
	(nnrss-check-group): Ditto.

2005-10-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-verbatim-marks-extract, mm-uu-latex-extract):
	Rename x-gnus-verbatim to x-verbatim.
	(mm-uu-type-alist): Fix regexp for verbatim-marks.

	* mm-decode.el (mm-automatic-display): Rename x-gnus-verbatim to
	x-verbatim.

	* mm-url.el (mm-url-predefined-programs): Add switches for curl.

	* gnus-util.el (gnus-remove-duplicates): Remove.

	* nnmail.el (nnmail-article-group): Use mm-delete-duplicates
	instead of gnus-remove-duplicates.

	* message.el (message-remove-duplicates): Remove.
	(message-idna-to-ascii-rhs-1): Use mm-delete-duplicates instead of
	message-remove-duplicates.

	* mm-util.el (mm-delete-duplicates): Use `delete-dups' if
	available, else use implementation from `delete-dups'.

	* message.el (message-insert-expires): New function.
	(message-mode-map): Add key binding.
	(message-mode-field-menu): Add menu entry.
	(message-mode): Document it.
	(message-make-expires-date): Use `message-make-date'.

2005-10-04  Josh Huber  <huber@alum.wpi.edu>

	* message.el (message-make-expires-date): New function.

2005-10-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (list-installed-shadows): New entry.
	(install): Use it.
	(remove-installed-shadows): New entry.

	* dgnushack.el (dgnushack-default-load-path): New variable.
	(dgnushack-find-lisp-shadows): New function.
	(dgnushack-remove-lisp-shadows): New function.

2005-10-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* Makefile.in (install-el-elc): New entry.
	(install): Use it so that .el files are necessarily installed.

2005-09-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* time-date.el: Autoload parse-time-string, XEmacs needs it.

2005-09-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-decode.el (mm-inline-media-tests): Check presence of the diff-mode
	function rather than the diff-mode.el package.
	(mm-display-external): Use with-current-buffer.
	(mm-viewer-completion-map, mm-viewer-completion-map):
	Move initialization inside declaration.

2005-09-29  Simon Josefsson  <jas@extundo.com>

	* spam.el: Load hashcash when compiling, to avoid warnings.  Don't
	autoload mail-check-payment.
	(spam-check-hashcash): Define unconditionally, since hashcash.el
	is part of Gnus now.  Ignore errors from payment checking.

2005-09-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-bold-region, message-unbold-region): Rename
	from `bold-region' and `unbold-region'.

	* message.el: Remove useless autoloads.

2005-09-28  Simon Josefsson  <jas@extundo.com>

	* message.el (message-use-idna): Default to t.
	(message-use-idna): Test whether encoding works too.  Doc fix.

2005-09-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-warn-about-losing-connection): Remove.

2005-09-27  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-uu.el (mm-uu-emacs-sources-regexp): Make variable
	customizable.  Change default value.
	(mm-uu-diff-groups-regexp): Change default value.
	(mm-uu-type-alist): Add doc string.
	(mm-uu-configure): Add doc string.  Make it interactive.
	(mm-uu-tex-groups-regexp): New variable.
	(mm-uu-latex-extract, mm-uu-latex-test): New functions.
	(mm-uu-type-alist): Add LaTeX documents.
	(mm-uu-verbatim-marks-extract): Use "text/x-gnus-verbatim" instead
	of "text/verbatim".
	(mm-uu-diff-groups-regexp): Fix missing quotes from previous commit.

	* mm-decode.el (mm-automatic-display): Use "text/x-gnus-verbatim"
	instead of "text/verbatim".

	* message.el (message-mark-inserted-region)
	(message-mark-insert-file): Use slrn style marks when called with
	prefix argument.

2005-09-27  Simon Josefsson  <jas@extundo.com>

	* message.el (message-idna-to-ascii-rhs-1): Reformat.

2005-09-27  Arne Jørgensen  <arne@arnested.dk>

	* message.el (message-remove-duplicates): New function.
	Implementation borrowed from `gnus-remove-duplicates'.
	(message-idna-to-ascii-rhs): Also encode idna addresses in
	Reply-To:, Mail-Reply-To: and Mail-Followup-To:.
	(message-idna-to-ascii-rhs-1): When `message-use-idna' is 'ask
	only ask about the same idna domain once per header and also tell
	in what header to replace the idna domain.

	* gnus-art.el (article-decode-idna-rhs): Also decode idna
	addresses in Reply-To:, Mail-Reply-To: and Mail-Followup-To:.
	(article-decode-idna-rhs): Fix regexp so that all idna-address in
	a header is decoded and not just the last one.

2005-09-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-display-single): Don't modify text if it
	has been decoded.

	* mm-decode.el (mm-automatic-display): Add text/verbatim.
	(mm-insert-part): Don't modify text if it has been decoded.

	* mm-uu.el (mm-uu-verbatim-marks-extract): Say text has been
	decoded.

	* mm-view.el (mm-inline-text): Don't strip text props unless
	decoding enriched or richtext parts.

2005-09-25  Romain Francoise  <romain@orebokech.com>

	* gnus-agent.el (gnus-agent-expire-group, gnus-agent-expire):
	* gnus-start.el (gnus-subscribe-interactively):
	* gnus-uu.el (gnus-uu-grab-articles):
	End `yes-or-no-p' and `y-or-n-p' prompts with question mark and
	space.

2005-09-24  Emilio C. Lopes  <eclig@gmx.net>

	* smime.el (smime-sign-buffer, smime-decrypt-buffer):
	* mm-view.el (mm-view-pkcs7-decrypt):
	* gnus-sum.el (gnus-summary-limit-to-extra)
	(gnus-summary-respool-article, gnus-read-move-group-name):
	* gnus-score.el (gnus-summary-increase-score):
	* gnus-util.el (gnus-completing-read-with-default):
	* gnus-art.el (gnus-read-save-file-name)
	(gnus-summary-save-in-rmail, gnus-summary-save-in-mail)
	(gnus-summary-save-in-file, gnus-summary-save-body-in-file):
	* message.el (message-check-news-header-syntax):
	Follow convention for reading with the minibuffer.

2005-09-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-url-ping-plain):
	Use gnus-extended-version as User-Agent.

	* gnus-agent.el (gnus-agent-synchronize-flags): Explain why the
	default value is nil.

	* mm-uu.el (mm-uu-type-alist): Added slrn style verbatim-marks.
	(mm-uu-verbatim-marks-extract): New function.
	(mm-uu-extract): New face.
	(mm-uu-copy-to-buffer): Use it.

	* spam-report.el (spam-report-gmane-ham): Renamed from
	`spam-report-gmane-unspam'.
	(spam-report-gmane-internal): Renamed from `spam-report-gmane'.
	Simplify use of UNSPAM argument.  Fetch "X-Report-Unspam" header.

	* spam.el (spam-report-gmane-spam, spam-report-gmane-ham):
	Autoload.
	(spam-report-gmane-unregister-routine): Renamed
	`spam-report-gmane-unspam' to `spam-report-gmane-ham'.

2005-09-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-gmane, spam-report-gmane-register-routine)
	(spam-report-gmane-unregister-routine): Add support for gmane
	unregistration.

	* spam-report.el (spam-report-gmane-unspam)
	(spam-report-gmane-spam): Add new wrappers around spam-report-gmane.
	(spam-report-gmane): Change to take a single article and do unspam
	registration.

2005-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* mm-url.el (mm-url-decode-entities): Fix regexp.

2005-09-20  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-agent.el (gnus-agent-synchronize-flags): Switch the
	default to nil, to be able to use Gnus at all.  If the default
	switches to something else, then the function should be fixed not
	be exceedingly slow.

2005-09-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-start.el (gnus-activate-group): If the server is nil, don't
	fail hard.

	* spam-report.el: Add better Keywords line.

	* spam.el: Add Maintainer and better Keywords line.

2005-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-article-replace-part)
	(gnus-mime-replace-part): New functions.
	(gnus-mime-action-alist, gnus-mime-button-commands)
	(gnus-mime-save-part-and-strip): Added file argument.
	(gnus-article-part-wrapper): Added interactive argument.

	* gnus-sum.el (gnus-summary-mime-map): Add
	`gnus-article-replace-part'.

2005-09-19  Didier Verna  <didier@xemacs.org>

	The nnml compaction feature:
	* nnml.el (nnml-request-compact-group): New function.
	* nnml.el (nnml-request-compact): New function.
	* gnus-int.el (gnus-request-compact-group): New function.
	* gnus-int.el (gnus-request-compact): New function.
	* gnus-group.el (gnus-group-compact-group): New function.
	* gnus-group.el (gnus-group-group-map): Bind it to 'G z'.
	* gnus-group.el (gnus-group-make-menu-bar): Add an entry for it.
	* gnus-srvr.el (gnus-server-compact-server): New function.
	* gnus-srvr.el (gnus-server-mode-map): Bind it to 'z'.
	* gnus-srvr.el (gnus-server-make-menu-bar): Add an entry for it.

2005-09-18  Deepak Goel  <deego@gnufans.org>

	* sieve.el (sieve-help): Fix `message' call: first arg should be a
	format spec.

2005-09-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-group-startup-message): Bind image-load-path.

2005-09-15  Romain Francoise  <romain@orebokech.com>

	* message.el (message-fill-paragraph): Clarify docstring.

2005-09-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-display-part): Protect against broken
	MIME messages.

2005-09-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-edit-article-done): Remove text props
	before parsing header.

2005-09-11  Jari Aalto  <jari.aalto@cante.net>

	* html2text.el (html2text-replace-list): Add new entities.

2005-09-11  Romain Francoise  <romain@orebokech.com>

	* message.el (message-alternative-emails): Improve docstring.
	(message-setup-1): Call `message-use-alternative-email-as-from'
	after `message-setup-hook' to give it precedence over posting
	styles, etc.
	(message-use-alternative-email-as-from): Add docstring.  Remove
	the original From header if present.

	* nnml.el (nnml-compressed-files-size-threshold): New variable.
	(nnml-save-mail): Use it.

	* gnus-uu.el (gnus-uu-mark-series): Return number of marked
	articles.  Add new argument `silent'.
	(gnus-uu-mark-all): Report the total number of marked articles.

2005-09-10  Romain Francoise  <romain@orebokech.com>

	* gnus-uu.el (gnus-message-process-mark): Use gnus-message.
	(gnus-uu-mark-series): Likewise.

2005-09-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane): Fix generation of spam
	report URL.

2005-09-10  Simon Josefsson  <jas@extundo.com>

	* gnus-agent.el (gnus-agent-synchronize-flags): Make the default
	t, based on discussion on the ding list with Robert Epprecht
	<epprecht@solnet.ch>.

2005-09-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-gmane): Make it work without
	X-Report-Spam header.  Gmane now only provides Archived-At.
	This is only used if `spam-report-gmane-use-article-number' is nil.
	(spam-report-gmane-spam-header): Remove.  Not used anymore.

	* gnus-sum.el (gnus-thread-sort-by-recipient): New function to
	make `gnus-summary-sort-by-recipient' work with threading.

	* nnweb.el (nnweb-google-wash-article): Print a message if article
	is not available.

2005-09-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (gnus-mime-display-single): Revert 2004-10-07
	change.  Decode text/* parts content before displaying.

2005-09-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml-smime.el: Remove defvar of gnus-extract-address-components.

2005-09-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-display-inline-fontify): Disable support modes.

	* lpath.el: Don't bind mc-pgp-always-sign, url-current-object,
	url-package-name, url-package-version,
	w3m-cid-retrieve-function-alist, w3m-current-buffer,
	w3m-display-inline-images, and w3m-minor-mode-map.

2005-09-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-tab-body-function): Fix mismatched custom type.

	* gnus.el (gnus-group-change-level-function): Ditto.

	* gnus-msg.el (gnus-outgoing-message-group): Ditto.

	* gnus-art.el (gnus-signature-limit)
	(gnus-article-mime-part-function): Ditto.

2005-09-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-mode): Silence the byte compiler.

	* gnus-art.el (gnus-article-jump-to-part): Redisplay the article
	using `(sit-for 0)' before moving the point to the specified part;
	skip unbuttonized parts.
	(gnus-article-part-wrapper): Don't use save-window-excursion; don't
	return to the summary window if gnus-auto-select-part is non-nil.

2005-09-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-dnd-protocol-alist, mml-dnd-attach-options): New
	variables.
	(mml-dnd-attach-file, mml-mode): Use them.

	* nnweb.el (nnweb-type-definition, nnweb-google-wash-article):
	Make fetching article by MID work again for Google Groups.  Added
	FIXME concerning gnus-group-make-web-group.

	* mml-smime.el (mml-smime-sign-query, mml-smime-get-dns-cert):
	Don't depend on Gnus by using mail-extract-address-components if
	gnus-extract-address-components is not bound.

2005-09-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-mime-display-security): Don't display the
	signature, but only the signed part.

2005-09-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-thread-hide-subtree): Doc fix.

	* gnus-msg.el (gnus-inews-insert-gcc): Fix the mistake of using
	list, not listp.

2005-09-02  Hrvoje Niksic  <hniksic@xemacs.org>

	* mm-encode.el (mm-encode-content-transfer-encoding): Likewise
	when encoding.

	* mm-bodies.el (mm-decode-content-transfer-encoding):
	De-canonicalize CRLF for all text content types, not just
	text/plain.

2005-09-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-part-wrapper): Error if there's no
	valid article; point arrow and cursor at the MIME button.

2005-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-save-part-and-strip): Clarify prompt.
	Suggested by Dan Christensen <jdc@uwo.ca>.

	* mm-decode.el (mm-save-part): Enable change of prompt.

2005-08-29  Jari Aalto  <jari.aalto@cante.net>

	* gnus-msg.el (gnus-inews-add-send-actions): Made
	`message-post-method' lambda parameter ARG `&optional'.

2005-08-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-mime-map): Added
	gnus-article-save-part-and-strip, gnus-article-delete-part and
	gnus-article-jump-to-part.

	* gnus-art.el (gnus-article-edit-article): Added quiet argument.
	(gnus-article-edit-part): Use it.
	(gnus-article-part-wrapper): Added no-handle argument.
	(gnus-article-save-part-and-strip, gnus-article-delete-part): New
	functions.

2005-08-29  Romain Francoise  <romain@orebokech.com>

	* gnus-fun.el (gnus-convert-image-to-face-command): Fix typo in
	docstring.
	(gnus-face-from-file): Likewise.

2005-08-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-mime-save-part-and-strip): Don't prompt.
	(gnus-mime-delete-part): Don't prompt if `gnus-expert-user' is
	non-nil.
	(gnus-auto-select-part): New variable.
	(gnus-article-jump-to-part): New function.
	(gnus-article-edit-part, gnus-mime-save-part-and-strip)
	(gnus-mime-delete-part): Allow selecting specified part after
	deleting or stripping parts.
	(gnus-article-jump-to-part): Don't use `read-number'.  Use last
	part if argument is bogus.

2005-08-31  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (w3m-minor-mode-map):
	* gnus-spec.el (gnus-newsrc-file-version):
	* gnus-util.el (nnmail-active-file-coding-system)
	(gnus-original-article-buffer, gnus-user-agent):
	* gnus.el (gnus-ham-process-destinations)
	(gnus-parameter-ham-marks-alist)
	(gnus-parameter-spam-marks-alist, gnus-spam-autodetect)
	(gnus-spam-autodetect-methods, gnus-spam-newsgroup-contents)
	(gnus-spam-process-destinations, gnus-spam-process-newsgroups):
	* mm-decode.el (gnus-current-window-configuration):
	* mm-extern.el (gnus-article-mime-handles):
	* mm-url.el (url-current-object, url-package-name)
	(url-package-version):
	* mm-view.el (gnus-article-mime-handles, gnus-newsgroup-charset)
	(smime-keys, w3m-cid-retrieve-function-alist)
	(w3m-current-buffer, w3m-display-inline-images)
	(w3m-minor-mode-map):
	* mml-smime.el (gnus-extract-address-components):
	* mml.el (gnus-article-mime-handles, gnus-mouse-2)
	(gnus-newsrc-hashtb, message-default-charset)
	(message-deletable-headers, message-options)
	(message-posting-charset, message-required-mail-headers)
	(message-required-news-headers):
	* mml1991.el (mc-pgp-always-sign):
	* mml2015.el (mc-pgp-always-sign):
	* nnheader.el (nnmail-extra-headers):
	* rfc1843.el (gnus-decode-encoded-word-function)
	(gnus-decode-header-function, gnus-newsgroup-name):
	* spam-stat.el (gnus-original-article-buffer): Add defvars.

2005-08-22  Karl Chen  <quarl@cs.berkeley.edu>

	* gnus-art.el (gnus-treatment-function-alist): Move date-lapsed to
	the end of the date treatments.

2005-08-15  Simon Josefsson  <jas@extundo.com>

	* pgg.el (url-insert-file-contents): Don't autoload it, Emacs has
	it in url-handlers.el and XEmacs in url.el.  Reported by Luca
	Capello and Romain Francoise.
	(pgg-fetch-key-function): Removed, not used?
	(pgg-insert-url-with-w3): Require url, to get
	url-insert-file-contents regardless of where it is defined.

2005-08-13  Romain Francoise  <romain@orebokech.com>

	* message.el (message-cite-original-1): New function.
	(message-cite-original): Use it.
	(message-cite-original-without-signature): Ditto.

2005-08-08  Romain Francoise  <romain@orebokech.com>

	* message.el (message-yank-empty-prefix): New variable.
	(message-indent-citation): Use it.
	(message-cite-original-without-signature): Respect X-No-Archive.

2005-08-08  Simon Josefsson  <jas@extundo.com>

	* pgg.el: Autoload url-insert-file-contents instead of loading
	w3/url.
	(pgg-insert-url-with-w3): Don't load url here.

2005-08-07  Jesper Harder  <harder@phys.au.dk>

	* message.el (message-kill-to-signature): Don't insert newline at
	bol.
	(message-newline-and-reformat): Bind fill-paragraph-function to nil.

2005-08-06  Romain Francoise  <romain@orebokech.com>

	* message.el (message-user-fqdn): Fix typo in docstring.

2005-08-05  Daiki Ueno  <ueno@unixuser.org>

	* mml2015.el (mml2015-pgg-sign): Make sure micalg is correct.

	* pgg-parse.el (pgg-parse-hash-algorithm-alist): Add SHA-2.

2005-08-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-bodies.el (mm-encode-body): Use coding system rather than
	charset to encode text.

	* mm-util.el (mm-find-mime-charset-region): Attempt to reduce the
	number of charsets if utf-8 is available (XEmacs).

2005-08-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-valid-localpart-regexp): New variable
	taken from `gnus-button-mid-or-mail-regexp'.
	(gnus-button-mid-or-mail-regexp, gnus-button-alist): Use it.
	(gnus-button-alist): Improve regexp for domain part of the MIDs
	for news:localpart@domain buttons.
	(gnus-button-ctan-directory-regexp): Update.

2005-08-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* sieve-manage.el (sieve-manage-interactive-login): Use
	make-local-variable rather than make-variable-buffer-local.
	(sieve-manage-open): Ditto.
	(sieve-manage-authenticate): Ditto.

	* mml.el (mml-generate-mime-1): Make the content type default to
	text/plain if the filename is not specified.

2005-08-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-save-article): Use insert-buffer-substring
	instead of insert-buffer.

	* message.el (message-yank-original): Ditto; set the mark at the
	end of the yanked message.

2005-07-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page-1): Reduce the number of
	lines to scroll rather than to stop it.

	* mml.el (mml-generate-default-type): Add doc string.
	(mml-generate-mime-1): Use mm-default-file-encoding or make it
	default to application/octet-stream when determining the content
	type if it is not specified for the part or the mml contents; add
	a comment about mml-generate-default-type.

2005-07-29  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-generate-mime-1): Use mm-default-file-encoding or
	make it default to application/octet-stream when determining the
	content type if it is not specified for the external contents.

2005-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Take care that not only a
	segmented parameter but also other parameters might be there.

2005-07-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-display-external): Delete temp file, directory
	and buffer immediately if the external process is exited.

2005-07-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page-1): Don't scroll if there're
	fewer lines than that of scroll-margin.
	(gnus-article-prev-page): Narrow the range to bind scroll-in-place.

2005-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page): Revert.
	(gnus-article-beginning-of-window): New macro.
	(gnus-article-next-page-1): Use it.
	(gnus-article-prev-page): Ditto.
	(gnus-article-edit-part): Use insert-buffer-substring instead of
	insert-buffer.
	(gnus-article-edit-exit): Ditto.

	* gnus-util.el (gnus-beginning-of-window): Remove.
	(gnus-end-of-window): Remove.

	* lpath.el: Don't bind header-line-format and scroll-margin.

2005-07-25  Simon Josefsson  <jas@extundo.com>

	* pgg.el (pgg-insert-url-with-w3): Don't load w3, it is possible
	to have the url package without w3.  Reported by Daiki Ueno
	<ueno@unixuser.org> and Luigi Panzeri <matley@muppetslab.org>.

2005-07-20  Didier Verna  <didier@xemacs.org>

	* gnus-diary.el: Remove the description comment (nndiary is now
	properly documented in the Gnus manual).
	Fix the spelling of "Back End".
	* nndiary.el: Ditto.
	Fix the copyright notice.

2005-07-18  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-to-prefix)
	(gnus-summary-newsgroup-prefix): New variables.
	(gnus-summary-from-or-to-or-newsgroups): Use them.

2005-07-17  Romain Francoise  <romain@orebokech.com>

	* mml2015.el (mml2015-clean-buffer): Prefix buffer name with a
	space as it's generally not especially interesting to the user.

2005-07-16  Romain Francoise  <romain@orebokech.com>

	* nnfolder.el (nnfolder-save-buffer): Bind `copyright-update' to
	nil to avoid prompting and file modification if one of the
	messages at the top of the nnfolder file contains a copyright
	notice.
	Update copyright notice.

	* gnus-uu.el (gnus-uu-save-article): Use `message-make-date'
	instead of `current-time-string' as the latter creates a time
	string that is not RFC 2822 compliant (it lacks the zone).
	Update copyright notice.

2005-07-21  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mml.el (mml-minibuffer-read-disposition): Don't use inline by default
	for text/rtf.  Display default in prompt.  Pass default for M-n.

	* mm-uu.el (mm-uu-copy-to-buffer): Use with-current-buffer.

2005-07-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-button-mailto): Remove
	save-selected-window-window hackery because it relies on
	save-selected-window internals.

2005-07-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-next-page): Use gnus-end-of-window.
	(gnus-article-next-page-1): Use gnus-beginning-of-window.
	(gnus-article-prev-page): Ditto.

	* gnus-util.el (gnus-beginning-of-window): New function.
	(gnus-end-of-window): New function.

	* lpath.el: Bind header-line-format and scroll-margin for XEmacs.

2005-07-14  Hiroshi Fujishima  <hiroshi.fujishima@gmail.com>  (tiny change)

	* gnus-score.el (gnus-score-edit-all-score): Set
	gnus-score-edit-exit-function to gnus-score-edit-done and call
	gnus-message.

2005-07-14  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-button-mailto): Remove
	save-selected-window-window hackery because it relies on
	save-selected-window internals.

2005-07-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-salt.el (gnus-pick-mode): Remove the 5th arg of
	add-minor-mode.
	(gnus-binary-mode): Ditto.

	* gnus-topic.el (gnus-topic-mode): Ditto.

2005-07-08  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* gnus-art.el (gnus-article-next-page, gnus-article-next-page-1)
	(gnus-article-prev-page): Take scroll-margin into consideration.

2005-07-04  Lute Kamstra  <lute@gnu.org>

	Update FSF's address in GPL notices.

2005-07-04  Juanma Barranquero  <lekktu@gmail.com>

	* gnus.el (gnus-exit):
	* gnus-group.el (gnus-group-icons):
	* nnmail.el (nnmail-prepare): Fix typos in docstrings.

	* gnus-nocem.el (gnus-nocem):
	* message.el (message-various, message-buffers, message-sending)
	(message-interface, message-forwarding, message-insertion)
	(message-headers, message-news, message-mail):
	* pgg-gpg.el (pgg-gpg):
	* pgg-parse.el (pgg-parse):
	* pgg-pgp.el (pgg-pgp):
	* pgg-pgp5.el (pgg-pgp5):
	* pop3.el (pop3): Finish `defgroup' description with period.

2005-07-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Improve the efficiency.
	(article-display-x-face): Ditto; remove grey x-face stuff.

2005-06-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Correct the position in
	which Faces are inserted.

2005-06-29  Didier Verna  <didier@xemacs.org>

	* gnus-art.el (article-display-face): Display faces in correct
	order.

2005-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-nocem.el (gnus-nocem-verifyer): Default to pgg-verify.
	(gnus-fill-real-hashtb): Use hash table instead of obarray.
	(gnus-nocem-check-article): Fetch the Type header.
	(gnus-nocem-message-wanted-p): Fix the way to examine types.
	(gnus-nocem-verify-issuer): Use functionp instead of fboundp.
	(gnus-nocem-enter-article): Use hash tables rather than obarrays;
	make sure gnus-nocem-hashtb is initialized.
	(gnus-nocem-alist-to-hashtb): Use hash table instead of obarray.
	(gnus-nocem-unwanted-article-p): Ditto.

	* pgg.el (pgg-verify): Return the verification result.

2005-06-27  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-mime-copy-part): Check whether coding-system
	is ascii.

2005-06-24  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-article-mode): Set `nobreak-char-display', not
	`show-nonbreak-escape'.

2005-06-23  Lute Kamstra  <lute@gnu.org>

	* gnus-art.el (gnus-article-mode): Use kill-all-local-variables.

	* dig.el (dig-mode):
	* smime.el (smime-mode): Use gnus-run-mode-hooks.

2005-06-21  Juanma Barranquero  <lekktu@gmail.com>

	* nnimap.el (nnimap-split-download-body): Fix spellings.

2005-06-16  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-art.el (gnus-article-encrypt-body):
	* gnus-cus.el (gnus-score-customize):
	* mm-extern.el (mm-extern-local-file, mm-inline-external-body):
	* pop3.el (pop3-user): Don't use `format' on `error' arguments.

2005-06-16  Arne Jørgensen  <arne@arnested.dk>

	* smime.el (smime-cert-by-ldap-1): Detect PEM format without
	header by looking for magic "MII" at the beginnig.

2005-06-16  Miles Bader  <miles@gnu.org>

	* gnus-xmas.el (gnus-xmas-group-startup-message):
	Use renamed gnus-splash face.

	* assistant.el (assistant-field): Remove "-face" suffix from face name.
	(assistant-field-face): New backward-compatibility alias for renamed
	face.
	(assistant-render-text): Use renamed assistant-field face.

	* spam.el (spam): Remove "-face" suffix from face name.
	(spam-face): New backward-compatibility alias for renamed face.
	(spam-face, spam-initialize): Use renamed spam face.

	* message.el (message-header-to, message-header-cc)
	(message-header-subject, message-header-newsgroups)
	(message-header-other, message-header-name)
	(message-header-xheader, message-separator, message-cited-text)
	(message-mml): Remove "-face" suffix from face names.
	(message-header-to-face, message-header-cc-face)
	(message-header-subject-face, message-header-newsgroups-face)
	(message-header-other-face, message-header-name-face)
	(message-header-xheader-face, message-separator-face)
	(message-cited-text-face, message-mml-face):
	New backward-compatibility aliases for renamed faces.
	(message-font-lock-keywords): Use renamed message faces.

	* sieve-mode.el (sieve-control-commands, sieve-action-commands)
	(sieve-test-commands, sieve-tagged-arguments):
	Remove "-face" suffix from face names.
	(sieve-control-commands-face, sieve-action-commands-face)
	(sieve-test-commands-face, sieve-tagged-arguments-face):
	New backward-compatibility aliases for renamed faces.
	(sieve-control-commands-face, sieve-action-commands-face)
	(sieve-test-commands-face, sieve-tagged-arguments-face):
	Use renamed sieve faces.

	* gnus.el (gnus-group-news-1, gnus-group-news-1-empty)
	(gnus-group-news-2, gnus-group-news-2-empty, gnus-group-news-3)
	(gnus-group-news-3-empty, gnus-group-news-4)
	(gnus-group-news-4-empty, gnus-group-news-5)
	(gnus-group-news-5-empty, gnus-group-news-6)
	(gnus-group-news-6-empty, gnus-group-news-low)
	(gnus-group-news-low-empty, gnus-group-mail-1)
	(gnus-group-mail-1-empty, gnus-group-mail-2)
	(gnus-group-mail-2-empty, gnus-group-mail-3)
	(gnus-group-mail-3-empty, gnus-group-mail-low)
	(gnus-group-mail-low-empty, gnus-summary-selected)
	(gnus-summary-cancelled, gnus-summary-high-ticked)
	(gnus-summary-low-ticked, gnus-summary-normal-ticked)
	(gnus-summary-high-ancient, gnus-summary-low-ancient)
	(gnus-summary-normal-ancient, gnus-summary-high-undownloaded)
	(gnus-summary-low-undownloaded)
	(gnus-summary-normal-undownloaded, gnus-summary-high-unread)
	(gnus-summary-low-unread, gnus-summary-normal-unread)
	(gnus-summary-high-read, gnus-summary-low-read)
	(gnus-summary-normal-read, gnus-splash):
	Remove "-face" suffix from face names.
	(gnus-group-news-1-face, gnus-group-news-1-empty-face)
	(gnus-group-news-2-face, gnus-group-news-2-empty-face)
	(gnus-group-news-3-face, gnus-group-news-3-empty-face)
	(gnus-group-news-4-face, gnus-group-news-4-empty-face)
	(gnus-group-news-5-face, gnus-group-news-5-empty-face)
	(gnus-group-news-6-face, gnus-group-news-6-empty-face)
	(gnus-group-news-low-face, gnus-group-news-low-empty-face)
	(gnus-group-mail-1-face, gnus-group-mail-1-empty-face)
	(gnus-group-mail-2-face, gnus-group-mail-2-empty-face)
	(gnus-group-mail-3-face, gnus-group-mail-3-empty-face)
	(gnus-group-mail-low-face, gnus-group-mail-low-empty-face)
	(gnus-summary-selected-face, gnus-summary-cancelled-face)
	(gnus-summary-high-ticked-face, gnus-summary-low-ticked-face)
	(gnus-summary-normal-ticked-face)
	(gnus-summary-high-ancient-face, gnus-summary-low-ancient-face)
	(gnus-summary-normal-ancient-face)
	(gnus-summary-high-undownloaded-face)
	(gnus-summary-low-undownloaded-face)
	(gnus-summary-normal-undownloaded-face)
	(gnus-summary-high-unread-face, gnus-summary-low-unread-face)
	(gnus-summary-normal-unread-face, gnus-summary-high-read-face)
	(gnus-summary-low-read-face, gnus-summary-normal-read-face)
	(gnus-splash-face):
	New backward-compatibility aliases for renamed faces.
	(gnus-group-startup-message): Use renamed gnus faces.

	* gnus-srvr.el (gnus-server-agent, gnus-server-opened)
	(gnus-server-closed, gnus-server-denied, gnus-server-offline)
	(gnus-server-agent): Remove "-face" suffix from face names.
	(gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face)
	(gnus-server-offline-face):
	New backward-compatibility aliases for renamed faces.
	(gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face)
	(gnus-server-offline-face): Use renamed gnus faces.

	* gnus-picon.el (gnus-picon-xbm, gnus-picon):
	Remove "-face" suffix from face names.
	(gnus-picon-xbm-face, gnus-picon-face):
	New backward-compatibility aliases for renamed faces.

	* gnus-cite.el (gnus-cite-attribution, gnus-cite-1, gnus-cite-2)
	(gnus-cite-3, gnus-cite-4, gnus-cite-5, gnus-cite-6)
	(gnus-cite-7, gnus-cite-8, gnus-cite-9, gnus-cite-10)
	(gnus-cite-11): Remove "-face" suffix from face names.
	(gnus-cite-attribution-face, gnus-cite-face-1, gnus-cite-face-2)
	(gnus-cite-face-3, gnus-cite-face-4, gnus-cite-face-5)
	(gnus-cite-face-6, gnus-cite-face-7, gnus-cite-face-8)
	(gnus-cite-face-9, gnus-cite-face-10, gnus-cite-face-11):
	New backward-compatibility aliases for renamed faces.
	(gnus-cite-attribution-face, gnus-cite-face-list)
	(gnus-article-boring-faces): Use renamed gnus faces.

	* gnus-art.el (gnus-signature, gnus-header-from)
	(gnus-header-subject, gnus-header-newsgroups, gnus-header-name)
	(gnus-header-content): Remove "-face" suffix from face names.
	(gnus-signature-face, gnus-header-from-face)
	(gnus-header-subject-face, gnus-header-newsgroups-face)
	(gnus-header-name-face, gnus-header-content-face):
	New backward-compatibility aliases for renamed faces.
	(gnus-signature-face, gnus-header-face-alist): Use renamed gnus faces.

	* gnus-sum.el (gnus-summary-selected-face)
	(gnus-summary-highlight): Use renamed gnus faces.
	* gnus-group.el (gnus-group-highlight): Likewise.

2005-06-14  Juanma Barranquero  <lekktu@gmail.com>

	* gnus-sieve.el (gnus-sieve-article-add-rule):
	* legacy-gnus-agent.el (gnus-agent-unlist-expire-days):
	* spam-stat.el (spam-stat-buffer-change-to-spam)
	(spam-stat-buffer-change-to-non-spam): Follow error conventions.

	* message.el (message-is-yours-p):
	* gnus-sum.el (gnus-auto-select-subject): Fix quoting in docstring.

2005-06-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-text): Withdraw the last change.

2005-06-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-text): Turn off adaptive-fill-mode while
	executing enriched-decode.

2005-06-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-find-buffer-file-coding-system): Don't examine
	charset of tar files.

2005-06-04  Luc Teirlinck  <teirllm@auburn.edu>

	* gnus-art.el (article-update-date-lapsed): Use `save-match-data'.

2005-06-04  Lute Kamstra  <lute@gnu.org>

	* nnfolder.el (nnfolder-read-folder): Make sure that undo
	information is never recorded.

2005-06-03  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-emphasis-alist): Disable the strikethru thingy.

2005-06-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* pop3.el (pop3-apop): Run md5 in the binary mode.

	* starttls.el (starttls-set-process-query-on-exit-flag):
	Use eval-and-compile.

2005-05-31  Simon Josefsson  <jas@extundo.com>

	* smime.el (smime-replace-in-string): Define.
	(smime-cert-by-ldap-1): Use it.

2005-05-31  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-x-face): Replace
	process-kill-without-query by gnus-set-process-query-on-exit-flag.

	* gnus-util.el (gnus-set-process-query-on-exit-flag): Alias to
	set-process-query-on-exit-flag or process-kill-without-query.

	* html2text.el (html2text-fix-paragraphs): Use `while - re-search'
	loop instead of replace-regexp.

	* imap.el (imap-ssl-open): Use set-process-query-on-exit-flag
	instead of process-kill-without-query if it is available.

	* lpath.el: Fbind ldap-search-entries.

	* mm-util.el (mm-insert-file-contents): Bind find-file-hook
	instead of find-file-hooks if it is available.

	* mml1991.el: Bind pgg-default-user-id when compiling.

	* mml2015.el: Bind pgg-default-user-id when compiling.

	* nndraft.el (nndraft-request-associate-buffer):
	Use write-contents-functions instead of write-contents-hooks if it is
	available.

	* nnheader.el (nnheader-find-file-noselect): Bind find-file-hook
	instead of find-file-hooks if it is available.

	* nntp.el (nntp-open-connection): Replace
	process-kill-without-query by gnus-set-process-query-on-exit-flag.
	(nntp-open-ssl-stream): Ditto.
	(nntp-open-tls-stream): Ditto.

	* starttls.el (starttls-set-process-query-on-exit-flag): Alias to
	set-process-query-on-exit-flag or process-kill-without-query.
	(starttls-open-stream-gnutls): Use it instead of
	process-kill-without-query.
	(starttls-open-stream): Ditto.

2005-05-31  Ulf Stegemann  <ulf@zeitform.de>  (tiny change)

	* smime.el (smime-cert-by-ldap-1): Don't use
	replace-regexp-in-string.

2005-05-31  Arne Jørgensen  <arne@arnested.dk>

	* smime-ldap.el (smime-ldap-search): Add compatibility for XEmacs.

	* smime.el (smime-cert-by-ldap-1): Handle certificates distributed
	in PEM format.  Adjust to the XEmacs compability.

2005-05-30  Reiner Steib  <Reiner.Steib@gmx.de>

	* encrypt.el (encrypt-xor-process-buffer): Replace `string-to-int'
	by `string-to-number'.
	* gnus-agent.el (gnus-agent-regenerate-group)
	(gnus-agent-fetch-articles): Ditto.
	* gnus-art.el (gnus-button-fetch-group): Ditto.
	* gnus-cache.el (gnus-cache-generate-active)
	(gnus-cache-articles-in-group): Ditto.
	* gnus-group.el (gnus-group-set-current-level)
	(gnus-group-insert-group-line): Ditto.
	* gnus-score.el (gnus-score-set-expunge-below)
	(gnus-score-set-mark-below, gnus-summary-score-effect)
	(gnus-summary-score-entry): Ditto.
	* gnus-soup.el (gnus-soup-send-packet, gnus-soup-parse-areas)
	(gnus-soup-pack): Ditto.
	* gnus-spec.el (gnus-xmas-format): Ditto.
	* gnus-start.el (gnus-newsrc-to-gnus-format): Ditto.
	* gnus-sum.el (gnus-create-xref-hashtb): Ditto.
	* gnus-uu.el (gnus-uu-expand-numbers): Ditto.
	* nnbabyl.el (nnbabyl-article-group-number): Ditto.
	* nndb.el (nndb-get-remote-expire-response): Ditto.
	* nndiary.el (nndiary-parse-schedule-value)
	(nndiary-string-to-number, nndiary-request-replace-article)
	(nndiary-request-article): Ditto.
	* nndoc.el (nndoc-rnews-body-end, nndoc-mbox-body-end): Ditto.
	* nndraft.el (nndraft-articles, nndraft-request-group): Ditto.
	* nneething.el (nneething-make-head): Ditto.
	* nnfolder.el (nnfolder-request-article)
	(nnfolder-retrieve-headers): Ditto.
	* nnheader.el (nnheader-file-to-number): Ditto.
	* nnkiboze.el (nnkiboze-request-article): Ditto.
	* nnmail.el (nnmail-process-unix-mail-format)
	(nnmail-process-babyl-mail-format): Ditto.
	* nnmbox.el (nnmbox-read-mbox, nnmbox-article-group-number): Ditto.
	* nnmh.el (nnmh-update-gnus-unreads, nnmh-active-number)
	(nnmh-request-create-group, nnmh-request-list-1)
	(nnmh-request-group, nnmh-request-article): Ditto.
	* nnml.el (nnml-request-replace-article, nnml-request-article): Ditto.
	* nnrss.el (nnrss-find-rss-via-syndic8): Ditto.
	* nnsoup.el (nnsoup-make-active): Ditto.
	* nnspool.el (nnspool-find-id, nnspool-request-group): Ditto.
	* nntp.el (nntp-find-group-and-number)
	(nntp-retrieve-headers-with-xover): Ditto.
	* pgg-gpg.el (pgg-gpg-snarf-keys-region): Ditto.
	* pgg-parse.el (pgg-read-body, pgg-read-bytes)
	(pgg-format-key-identifier): Ditto.
	* pop3.el (pop3-last, pop3-stat): Ditto.
	* qp.el (quoted-printable-decode-region): Ditto.

	* spam-report.el (spam-report-url-ping-mm-url): Use format instead
	of concat.

2005-05-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-category-mode): Use gnus-run-mode-hooks.

	* gnus-art.el (gnus-article-mode): Use gnus-run-mode-hooks.

	* gnus-cus.el (gnus-custom-mode): Use gnus-run-mode-hooks.

	* gnus-eform.el (gnus-edit-form-mode): Use gnus-run-mode-hooks.

	* gnus-group.el (gnus-group-mode): Use gnus-run-mode-hooks.

	* gnus-kill.el (gnus-kill-file-mode): Use gnus-run-mode-hooks.

	* gnus-salt.el (gnus-tree-mode): Use gnus-run-mode-hooks.
	(gnus-carpal-mode): Ditto.

	* gnus-srvr.el (gnus-server-mode): Use gnus-run-mode-hooks.
	(gnus-browse-mode): Ditto.

	* gnus-sum.el (gnus-summary-mode): Use gnus-run-mode-hooks.

	* gnus-util.el (gnus-run-mode-hooks): Save current buffer.

2005-05-29  Richard M. Stallman  <rms@gnu.org>

	* gnus-cite.el (gnus-cite-add-face): Set overlay's evaporate property.

2005-05-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-run-mode-hooks): New function.

	* score-mode.el (gnus-score-mode): Use gnus-run-mode-hooks.

	* dgnushack.el: Advise byte-optimize-form-code-walker to avoid the
	``...called for effect'' warnings for Emacs 21.4 as well as 21.3.

2005-05-27  Lute Kamstra  <lute@gnu.org>

	* dns-mode.el (dns-mode): Specify customization group.

2005-05-26  Luc Teirlinck  <teirllm@auburn.edu>

	* gnus-agent.el (gnus-agent-make-mode-line-string):
	Use mode-line-highlight as mouse-face.

2005-05-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock): Change the parent group to news.

	* deuglify.el (gnus-outlook-deuglify): Add :group.

	* dig.el (dig): Add :group.

	* dns-mode.el (dns-mode): Add :group.

	* encrypt.el (encrypt): Add :group.

	* gnus-cite.el (gnus-cite-attribution-face): Add :group.
	(gnus-cite-face-1, gnus-cite-face-2, gnus-cite-face-3): Ditto.
	(gnus-cite-face-4, gnus-cite-face-5, gnus-cite-face-6): Ditto.
	(gnus-cite-face-7, gnus-cite-face-8, gnus-cite-face-9): Ditto.
	(gnus-cite-face-10, gnus-cite-face-11): Ditto.

	* gnus-diary.el (gnus-diary): Add :group.

	* gnus.el (gnus-group-news-1-face): Add :group.
	(gnus-group-news-1-empty-face): Ditto.
	(gnus-group-news-2-face, gnus-group-news-2-empty-face): Ditto.
	(gnus-group-news-3-face, gnus-group-news-3-empty-face): Ditto.
	(gnus-group-news-4-face, gnus-group-news-4-empty-face): Ditto.
	(gnus-group-news-5-face, gnus-group-news-5-empty-face): Ditto.
	(gnus-group-news-6-face, gnus-group-news-6-empty-face): Ditto.
	(gnus-group-news-low-face, gnus-group-news-low-empty-face): Ditto.
	(gnus-group-mail-1-face, gnus-group-mail-1-empty-face): Ditto.
	(gnus-group-mail-2-face, gnus-group-mail-2-empty-face): Ditto.
	(gnus-group-mail-3-face, gnus-group-mail-3-empty-face): Ditto.
	(gnus-group-mail-low-face, gnus-group-mail-low-empty-face): Ditto.
	(gnus-summary-selected-face, gnus-summary-cancelled-face): Ditto.
	(gnus-summary-high-ticked-face): Ditto.
	(gnus-summary-low-ticked-face): Ditto.
	(gnus-summary-normal-ticked-face): Ditto.
	(gnus-summary-high-ancient-face): Ditto.
	(gnus-summary-low-ancient-face): Ditto.
	(gnus-summary-normal-ancient-face): Ditto.
	(gnus-summary-high-undownloaded-face): Ditto.
	(gnus-summary-low-undownloaded-face): Ditto.
	(gnus-summary-normal-undownloaded-face): Ditto.
	(gnus-summary-high-unread-face): Ditto.
	(gnus-summary-low-unread-face): Ditto.
	(gnus-summary-normal-unread-face): Ditto.
	(gnus-summary-high-read-face, gnus-summary-low-read-face): Ditto.
	(gnus-summary-normal-read-face, gnus-splash-face): Ditto.

	* hashcash.el (hashcash): New custom group.
	(hashcash-default-payment): Add :group.
	(hashcash-payment-alist): Ditto.
	(hashcash-default-accept-payment): Ditto.
	(hashcash-accept-resources): Ditto.
	(hashcash-path): Ditto.
	(hashcash-extra-generate-parameters): Ditto.
	(hashcash-double-spend-database): Ditto.
	(hashcash-in-news): Ditto.

	* message.el (message-minibuffer-local-map): Add :group.

	* netrc.el (netrc): Add :group.

	* sieve-manage.el (sieve-manage-log): Add :group.
	(sieve-manage-default-user): Diito.
	(sieve-manage-server-eol, sieve-manage-client-eol): Ditto.
	(sieve-manage-streams, sieve-manage-stream-alist): Ditto.
	(sieve-manage-authenticators): Ditto.
	(sieve-manage-authenticator-alist): Ditto.
	(sieve-manage-default-port): Ditto.

	* sieve-mode.el (sieve-control-commands-face): Add :group.
	(sieve-action-commands-face): Ditto.
	(sieve-test-commands-face): Ditto.
	(sieve-tagged-arguments-face): Ditto.

	* smime.el (smime): Add :group.

	* spam-report.el (spam-report): Add :group.

	* spam.el (spam, spam-face): Add :group.

2005-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nntp.el (nntp-next-result-arrived-p): Some news servers may
	return \n.\n.\n at the end of articles.  Protect against that.
	(nntp-with-open-group): Allow debugging.

	* nnheader.el (mail-header-set-extra): Make into a function
	because I just could't understand how to quote the list properly.

	* dns.el (query-dns-cached): New function.

2005-05-26  Lute Kamstra  <lute@gnu.org>

	* score-mode.el (gnus-score-mode): Use run-mode-hooks.

2005-05-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload mail-extract-address-components for XEmacs.

	* gnus-art.el: Don't autoload mail-extract-address-components.

	* gnus.el: Remove duplicated autoload for message-y-or-n-p; use
	eval-and-compile to evaluate it.

	* hashcash.el: Don't autoload executable-find.

	* nndb.el: Don't declare the nndb back end two or more times; don't
	autoload news-reply-mode, news-setup, cancel-timer and telnet.

	* nntp.el: Autoload format-spec instead of format; use
	eval-and-compile to evaluate autoload forms.

2005-05-09  Georg C. F. Greve  <greve@gnu.org>  (tiny change)

	* pgg-gpg.el (pgg-gpg-possibly-cache-passphrase): Fix PIN caching.

2005-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2005-05-01  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.3 is released.

2005-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* lpath.el (featurep): Bind show-nonbreak-escape.

2005-04-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-part): Disable undo.

2005-04-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-date-ut): Don't delete X-Sent header when
	gnus-article-date-lapsed-new-header is t if date timer is active;
	skip headers in which the original date value is empty.
	(gnus-article-save-original-date): Redefine it as a macro.
	(gnus-display-mime): Use it.

2005-04-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-date-ut): Support converting date in
	forwarded parts as well.
	(gnus-article-save-original-date): New function.
	(gnus-display-mime): Use it.

2005-04-22  David Hansen  <david.hansen@physik.fu-berlin.de>

	* nnrss.el (nnrss-check-group, nnrss-request-article): Support the
	enclosure element of <item>.

2005-04-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-kill-buffer-query): Renamed from
	`message-kill-buffer-query-if-modified'.  Added :version.

2005-04-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-preview): Bind gnus-message-buffer while setting the
	window layout.

2005-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el: Autoload dnd when compiling.

2005-04-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* mml.el (mml-mode, mml-dnd-attach-file): Use dnd-* instead of
	x-dnd-*.

2005-04-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* qp.el (quoted-printable-encode-region): Save excursion.

2005-04-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* message.el (message-kill-buffer-query-if-modified): Add new variable
	so the user can kill a modified message buffer quickly.
	(message-kill-buffer): Use it.

2005-04-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Fbind display-time-event-handler; don't fbind
	string-to-multibyte.

	* qp.el (quoted-printable-encode-region): Use mm-string-to-multibyte.

2005-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-node-text): Replace CRLFs (which might be
	contained in text because xml.el decodes entities) with LFs.

2005-04-11  Lute Kamstra  <lute@gnu.org>

	* nnimap.el (nnimap-date-days-ago): Handle byte-compiler warnings
	differently.

2005-04-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-util.el (mm-detect-coding-region): Typo.

2005-04-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Fix misplaced parens.

2005-04-06  Deepak Goel  <deego@gnufans.org>

	* spam-stat.el (spam-stat-score-buffer): Add a call to a
	user-function allow user modifications of the scores.
	(spam-stat-score-buffer-user): New function, to allow
	user-computed modifications to the score.
	(spam-stat-score-buffer-user-functions): List of additional
	scoring functions.
	(spam-stat-error-holder): Global temporary error holder.
	(spam-stat-split-fancy): Use the new `spam-stat-error-holder'
	variable.

2005-04-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-clean-empty-function)
	(gnus-registry-trim, gnus-registry-fetch-groups)
	(gnus-registry-delete-group): Groups that match
	`gnus-registry-ignored-groups' are removed from the registry
	entries, not just ignored for splitting.  This helps clean up the
	registry.  Also, `gnus-registry-fetch-groups' is a convenient way
	to get all the groups a message ID is in.

	* spam-stat.el (spam-stat-split-fancy-spam-threshold)
	(spam-stat-split-fancy): Change "threshhold" to "threshold"
	(spam-stat-score-buffer-user-functions): Add :number custom type.

2005-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-p): Don't return binary for the nil
	argument in XEmacs.

	* nnrss.el (nnrss-compatible-encoding-alist): New variable.
	(nnrss-request-group): Decode group name first.
	(nnrss-request-article): Make a text/plain article if mml-to-mime
	failed.
	(nnrss-get-encoding): Return a compatible encoding according to
	nnrss-compatible-encoding-alist.
	(nnrss-find-el): Use consp instead of listp.
	(nnrss-opml-export, nnrss-order-hrefs, nnrss-find-el): Use dolist.

2005-04-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* time-date.el (time-to-seconds): Don't use the #xhhhh syntax
	which Emacs 20 doesn't support.
	(seconds-to-time, days-to-time, time-subtract, time-add): Ditto.

2005-04-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnimap.el (nnimap-date-days-ago): Add defvars in order to
	silence the byte compiler inside the defun.

	* gnus-demon.el (parse-time-string): Add autoload.

	* gnus-delay.el (parse-time-string): Add autoload.

	* gnus-art.el (parse-time-string): Add autoload.

	* nnultimate.el (parse-time): Require for `parse-time-string'.

2005-03-31  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): Update :version.

	* gnus-score.el (gnus-adaptive-pretty-print): Ditto.

	* smime.el (smime-ldap-host-list): Add :version.

2005-03-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-srvr.el (gnus-browse-select-group): Add NUMBER argument and
	pass it to `gnus-browse-read-group'.
	(gnus-browse-read-group): Add NUMBER argument and pass it to
	`gnus-group-read-ephemeral-group'.

	* gnus-group.el (gnus-group-read-ephemeral-group): Add NUMBER
	argument and pass it to `gnus-group-read-group'.

2005-03-19  Aidan Kehoe  <kehoea@parhasard.net>

	* mm-util.el (mm-xemacs-find-mime-charset): Only call
	mm-xemacs-find-mime-charset-1 if we have the mule feature
	available at runtime.

2005-03-25  Werner Lemberg  <wl@gnu.org>

	* nnmaildir.el: Replace `illegal' with `invalid'.

2005-03-23  Lute Kamstra  <lute@gnu.org>

	* time-date.el: Add comment on time value formats.
	Don't require parse-time.
	(with-decoded-time-value): New macro.
	(encode-time-value): New function.
	(time-to-seconds, time-less-p, time-subtract, time-add): Use them.
	(days-to-time): Return a valid time value when arg is huge.
	(time-since): Use time-subtract.
	(time-to-number-of-days): Use time-to-seconds.

2005-03-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-start.el (gnus-display-time-event-handler):
	Check display-time-timer at runtime rather than only at load time
	in case display-time-mode is turned off in the mean time.

2005-03-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnimap.el (nnimap-open-connection): Print which authinfo file is
	used.

	* nneething.el (nneething-map-file-directory): Derive from
	`gnus-directory'.

	* gnus-art.el (gnus-header-button-alist): Use `gnus-msg-mail' for
	the To/Cc button.

2005-03-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnmaildir.el (nnmaildir-request-accept-article):
	Use `nnheader-cancel-timer' for compatibility with current XEmacs.

2005-03-13  Andrey Slusar  <anrays@gmail.com>  (tiny change)

	* gnus-async.el: Require timer-funcs at compile time when in
	XEmacs for `run-with-idle-timer'.

2005-03-13  Andrey Slusar  <anrays@gmail.com>  (tiny change)

	* gnus.el: Don't try and mark `gnus-agent-save-groups' as an
	autoloaded function.

2005-03-10  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nnimap.el (nnimap-retrieve-headers-from-server): Fix last change.

2005-03-10  Arne Jørgensen  <arne@arnested.dk>  (tiny change)

	* nnimap.el (nnimap-retrieve-headers-from-server): Fix off-by-one flaw.

2005-03-09  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-confirm-mail-reply-to-news): Add
	gnus-expert-user to default.

2005-03-08  Juergen Kreileder  <jk@blackdown.de>  (tiny change)

	* nnimap.el (nnimap-open-server): Ditto.

	* imap.el (imap-authenticate): Fix typo.

2005-03-08  Bjorn Solberg  <bjorn_ding@hekneby.org>  (tiny change)

	* nnimap.el (nnimap-retrieve-headers-from-server): Sort NOV
	buffer (since IMAP server might return FETCH response out of
	order, and the nntp buffer must be sorted).

2005-03-06  Kevin Greiner  <kevin.greiner@compsol.cc>

	* gnus-start.el (gnus-convert-old-newsrc): Fixed numeric
	comparison on string.

	* gnus-agent.el (gnus-agent-long-article, gnus-agent-short-article)
	(gnus-agent-score): Renamed category keywords to match gnus-cus.
	(gnus-agent-summary-fetch-series): Modified to protect against
	gnus-agent-summary-fetch-group clearing processable flags.
	(gnus-agent-synchronize-group-flags): Update live group buffer as
	synchronization may occur due to the user toggle the plugged
	status.
	(gnus-agent-fetch-group-1): Clear downloadable flag when article
	successfully downloaded.
	(gnus-agent-expire-group-1): Avoid using markers when the overview
	is in ascending order; greatly improves performance.
	(gnus-agent-regenerate-group): Use
	gnus-agent-synchronize-group-flags to reset read status in both
	gnus and server.
	(gnus-agent-update-files-total-fetched-for): Fixed initial size.

2005-03-04  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el: Don't autoload former message-utils variables.
	(message-strip-subject-trailing-was): Change doc string.

	* nnweb.el: Fixes for `gnus-group-make-web-group'.
	(nnweb-type-definition): Don't add "hl=en" in `address'.  Add `base'.
	(nnweb-google-search): Add "hl=en" here.
	(nnweb-google-parse-1, nnweb-google-create-mapping):
	Don't hardcode URL.

2005-03-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-get-reply-headers, message-followup):
	Mention related variables `message-use-followup-to' and
	`message-use-mail-followup-to', in the information buffer.

	* nnweb.el (nnweb-type-definition): Use groups.google.de instead
	of broken groups(-beta).google.com.

2005-03-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-move-article): Pass move-is-internal
	parameter to invoked gnus-request-move-article; remove the
	redundant gnus-sum-hint-move-is-internal variable; apply the marks
	all at once instead of once per article.
	(gnus-summary-remove-process-mark): Accept a list of articles as
	well as a single article for processing.

	* gnus-int.el (gnus-request-move-article): Add move-is-internal
	parameter.

	* nnml.el (nnml-request-move-article): Add move-is-internal parameter.

	* nnmh.el (nnmh-request-move-article): Add move-is-internal parameter.

	* nnmbox.el (nnmbox-request-move-article): Add move-is-internal
	parameter.

	* nnmaildir.el (nnmaildir-request-move-article): Add move-is-internal
	parameter.

	* nnimap.el (nnimap-request-move-article): Add move-is-internal
	parameter and remove the gnus-sum-hint-move-is-internal variable.

	* nnfolder.el (nnfolder-request-move-article): Add move-is-internal
	parameter.

	* nndraft.el (nndraft-request-move-article): Add move-is-internal
	parameter.

	* nndiary.el (nndiary-request-move-article): Add move-is-internal
	parameter.

	* nndb.el (nndb-request-move-article): Add move-is-internal parameter.

	* nnbabyl.el (nnbabyl-request-move-article): Add move-is-internal
	parameter.

	* nnagent.el (nnagent-request-move-article): Add move-is-internal
	parameter.

2005-03-01  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-sum.el (gnus-summary-exit): Undo last change and fix it in
	a more conservative way.

2005-02-26  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-sum.el (gnus-summary-exit): Move point after displaying the
	buffer, so it moves the window's cursor.

2005-02-26  Arne Jørgensen  <arne@arnested.dk>

	* mm-decode.el (mm-dissect-buffer): Pass the from field on to
	`mm-dissect-multipart' and receive the from field as an (optional)
	argument from `mm-dissect-multipart'.
	(mm-dissect-multipart): Receive the from field as an argument and
	pass it on when we call `mm-dissect-buffer' on MIME parts.
	Fixes verification/decryption of signed/encrypted MIME parts.

2005-02-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-sum.el (gnus-summary-move-article): Set
	gnus-sum-hint-move-is-internal for gnus-request-move-article and
	whatever it calls (right now, only nnimap-request-move article
	respects it).

	* nnimap.el (nnimap-request-move-article): When
	gnus-sum-hint-move-is-internal is set, don't do the extra
	nnimap-request-article.

2005-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* nnheader.el (nnheader-find-file-noselect): Add doc string.

	* nnfolder.el (nnfolder-read-folder): Use RAWFILE for
	`nnheader-find-file-noselect' to avoid `large-file-warning-threshold'.

	* gnus-sum.el (gnus-summary-caesar-message):
	Apply `gnus-treat-article' after rotation.

	* gnus-group.el (gnus-group-clear-data): Mention process/prefix in
	doc string.

2005-02-22  Simon Josefsson  <jas@extundo.com>

	* encrypt.el (encrypt-password-cache-expiry): Remove (use
	`password-cache-expiry' instead).  Reported by Arne Jørgensen
	<arne@arnested.dk>.
	(encrypt): Add password-cache and password-cache-expiry as group
	members.

2005-02-22  Arne Jørgensen  <arne@arnested.dk>

	* smime.el (smime-ldap-host-list): Doc fix.
	(smime-ask-passphrase): Use `password-read-and-add' to read (and
	cache) password.
	(smime-sign-region): Use it.
	(smime-decrypt-region): Use it.
	(smime-sign-buffer): Signal an error if `smime-sign-region' fails.
	(smime-encrypt-buffer): Signal an error if `smime-encrypt-region'
	fails.
	(smime-cert-by-ldap-1): Use `base64-encode-string' to convert
	certificate from DER to PEM format rather than calling openssl.

	* mml-smime.el (mml-smime-encrypt-query): Remove obsolete comment.

	* mml-sec.el (mml-secure-message): Insert keyfile/certfile tags
	for signing/encryption.

	* mml.el (mml-parse-1): Use them.

2005-02-21  Arne Jørgensen  <arne@arnested.dk>

	* nnrss.el (nnrss-verbose): Removed.
	(nnrss-request-group): Use `nnheader-message' instead.

2005-02-19  Mark Plaksin  <happy@usg.edu>  (tiny change)

	* nnrss.el (nnrss-verbose): New variable.
	(nnrss-request-group): Make it say nnrss is requesting a group.

2005-02-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-parse-news-url, gnus-button-handle-news):
	Handle news URL with given port correctly.

2005-02-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-copy-article-buffer): Quote decoded words
	containing special characters.

	* gnus-sum.el (gnus-summary-edit-article): Ditto.

	* mml.el (mime-to-mml): Ditto.

	* rfc2047.el (rfc2047-encode-parameter): Use ietf-drums-tspecials.
	(rfc2047-quote-decoded-words-containing-tspecials): New variable.
	(rfc2047-decode-region): Quote decoded words containing special
	characters when rfc2047-quote-decoded-words-containing-tspecials
	is non-nil.

2005-02-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-delete-group): Add minor bug fix.

	* gnus.el (gnus-install-group-spam-parameters): Add minor doc fix.

2005-02-15  Simon Josefsson  <jas@extundo.com>

	* nnimap.el (nnimap-debug): Doc fix.

	* imap.el (imap-debug): Doc fix.

2005-02-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el: Avoid "Recursive load suspected" error in Emacs 21.1.

2005-02-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus.el (spam-contents): Improve docs for spam-contents
	parameter in its variable incarnation.

2005-02-14  Simon Josefsson  <jas@extundo.com>

	* smime-ldap.el: Use require instead of load-library for ldap.
	(smime-ldap-search): Indent.
	(smime-ldap-search-internal): Shorten line.

	* smime.el (smime-cert-by-dns): Add doc-string.
	(smime-cert-by-ldap-1): Indent.

	* mml-smime.el (mml-smime-get-ldap-cert): Renamed from
	mml-smime-get-dns-ldap.
	(mml-smime-encrypt-query): Use new function.  Default to ldap.

2005-02-14  Arne Jørgensen  <arne@arnested.dk>

	* smime.el: Require smime-ldap.
	(smime-ldap-host-list): New variable.
	(smime-cert-by-ldap, smime-cert-by-ldap-1): New functions.

	* mml-smime.el (mml-smime-encrypt-query): New function.
	(mml-smime-encrypt-query): Use it.

	* smime-ldap.el: New file.

2005-02-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el: Remove garbage made while merging the Emacs trunk.

2005-02-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-make-doc-group): Mention prefix
	argument in doc string.  Make query for type more clear.

2005-02-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-group-startup-message): Search for gnus images in
	etc/images/gnus.
	* mm-util.el (mm-image-load-path): Likewise.
	* smiley.el (smiley-data-directory): Search for smilies in
	etc/images/smilies.

2005-02-09  Kim F. Storm  <storm@cua.dk>

	Change Emacs release version from 21.4 to 22.1 throughout.
	Change Emacs development version from 21.3.50 to 22.0.50.

2005-02-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-copy-part): Don't decode compressed parts.

	* mm-util.el (mm-coding-system-to-mime-charset): Make it work with
	non-Mule XEmacs as well.
	(mm-decompress-buffer): Signal an error intentionally if it does
	not decompress compressed data because auto-compression-mode is
	disabled.

2005-02-11  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-delete-group): Fix bug: leaves
	an ID in the registry even if it has no groups.

2005-02-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-jka-compr-maybe-uncompress): Remove;
	merge it into mm-decompress-buffer.
	(gnus-mime-copy-part): Use the MIME part charset, the value which
	a user specified or gnus-newsgroup-charset for decoding, like
	gnus-mime-inline-part does; set buffer-file-coding-system to tell
	save-buffer what was used.  Suggested by Kevin Ryde
	<user42@zip.com.au>.
	(gnus-mime-inline-part): Allow the name parameter as well as the
	filename parameter; force decompressing of compressed data; always
	display contents being not decoded as unibyte.

	* mm-view.el (mm-display-inline-fontify): Allow the name parameter
	as well as the filename parameter.

	* mm-util.el (mm-decompress-buffer): Merge
	gnus-mime-jka-compr-maybe-uncompress.
	(mm-find-buffer-file-coding-system): Doc fix; force decompressing
	of compressed data.

2005-02-08  Simon Josefsson  <jas@extundo.com>

	* imap.el (imap-log): Doc fix.

2005-02-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-inline-part): Decode parts according to
	the coding cookies; decompress compressed parts.

	* mml.el (mml-generate-mime-1): Add the charset parameter according
	to the value which a user specified manually or the coding cookie.

	* mm-util.el (mm-string-to-multibyte): New function.
	(mm-detect-mime-charset-region): Work with Emacs 22 as well.
	(mm-coding-system-to-mime-charset): New function.
	(mm-decompress-buffer): New function.
	(mm-find-buffer-file-coding-system): New function.

	* mm-view.el (mm-insert-inline): Make sure a part ends with a newline.
	(mm-display-inline-fontify): Rewrite for decoding and decompressing
	parts.

2005-02-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mm-view.el (mm-display-inline-fontify): Decode a part according
	to the charset parameter.

2005-02-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-inline-part): Show the raw contents if a
	prefix arg is neither nil nor a number, as info specifies.

2005-02-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-marks-changed-p): Use time-less-p to compare the
	timestamps.

2005-02-02  Jari Aalto  <jari.aalto@cante.net>

	* gnus-sum.el (gnus-list-of-unread-articles): Improve active
	groups error checking and notify user.

2005-02-02  Jari Aalto  <jari.aalto@poboxes.com>

	* message.el (message-send-mail-function): Check existence of
	sendmail-program first before using default value
	`message-send-mail-with-sendmail'.  Otherwise use more generic
	`smtpmail-send-it'.

2005-02-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-request-update-info): Always return nil.

2005-01-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-article-mode): Turn off the "\ " non-break space.

2005-01-28  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-beginning-of-line): Change the behavior when
	invoked between BOL and : so that it first moves backward.

2005-01-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-setup-buffer): Kill and re-create the
	article buffer when editing of the article is discarded.
	(gnus-article-prepare): Revert.

2005-01-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-prepare):
	Remove message-strip-forbidden-properties from the local hook.

2005-01-27  Simon Josefsson  <jas@extundo.com>

	* password.el (password-cache-add): Only start one timer per key.
	Reported by Derek Atkins <warlord@MIT.EDU>.

2005-01-26  Steve Youngs  <steve@sxemacs.org>

	* run-at-time.el: Removed.  It is no longer needed as
	timer-funcs.el in the xemacs-base package has a working version of
	`run-at-time'.

	* gnus-xmas.el: Require timer-funcs instead of run-at-time.

	* password.el: Require timer-funcs instead of run-at-time in
	XEmacs.
	Remove `password-run-at-time' macro.
	(password-cache-add): Use `run-at-time' instead of
	`password-run-at-time'.

	* nnheaderxm.el: Require timer-funcs instead of run-at-time.
	Remove `nnheader-cancel-function-timers' alias,
	`cancel-function-timers' exists in XEmacs in timer-funcs.

	* mail-source.el: Require timer-funcs instead of itimer in XEmacs
	for `run-with-idle-timer'.

	* gnus-demon.el: Require timer-funcs instead of itimer in XEmacs
	for `run-at-time'.

	* mm-url.el: Require timer-funcs at compile time when in XEmacs
	for `with-timeout'.

	* dgnushack.el: Autoload the correct `setenv' for SXEmacs which is
	the same as for XEmacs 21.4.
	No need to ignore `run-with-idle-timer', this function exists in
	XEmacs now in timer-funcs.el in the xemacs-base package.
	(dgnushack-compile): No need to delete
	run-at-time.el from the list of files to compile because it
	doesn't exist anymore.

2005-01-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-generate-mime-1): Convert string into unibyte when
	inserting " *mml*" buffer's contents into a unibyte temp buffer.

2005-01-24  Harald Meland  <harald.meland@usit.uio.no>  (tiny change)

	* mail-source.el (mail-source-fetch-imap): Search for ^From case
	sensitively.

2005-01-21  Derek Atkins  <warlord@MIT.EDU>  (tiny change)

	* pgg-pgp.el (pgg-pgp-decrypt-region): Use passphrase cache.

2005-01-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-insert-part): Switch the multibyteness of data
	which will be inserted according to the multibyteness of a buffer
	rather than the type of contents.  Suggested by ARISAWA Akihiro
	<ari@mbf.ocn.ne.jp>.

	* nnrss.el (nnrss-find-el): Check carefully whether there's a list
	of string which old xml.el may return rather than a string.

2005-01-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-idna-message): Silence byte compiler.

2005-01-16  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-summary-idna-message): Fail gracefully if
	idn/idna.el isn't available.
	(gnus-summary-idna-message): Doc fix.  Suggested by Michael Cook
	<michael@waxrat.com>.

	* hashcash.el: Remove non-FSF copyright header.

	* hashcash.el (hashcash-extra-generate-parameters): New variable.
	(hashcash-generate-payment): Use it.
	(hashcash-generate-payment-async): Use it.

2005-01-15  Simon Josefsson  <jas@extundo.com>

	* message.el (message-idna-to-ascii-rhs): Decode Reply-To too.
	Suggested by Raymond Scholz <ray-2005@zonix.de>.

	* gnus-sum.el (gnus-summary-wash-map): Bind "W i" to
	gnus-summary-idna-message.
	(gnus-summary-make-menu-bar): Add De-IDNA menu entry.
	(gnus-summary-idna-message): New function.

2005-01-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-confirm-mail-reply-to-news): Change default to
	gnus-novice-user.

2005-01-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-request-delete-group): Delete entries in
	nnrss-group-alist as well.
	(nnrss-save-server-data): Insert newline.

2005-01-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus.el (gnus-user-agent): Use list of symbols instead of
	symbols.  Display full version number for (S)XEmacs.  Optionally
	display (S)XEmacs codename.

	* gnus-util.el (gnus-emacs-version): Update for new
	`gnus-user-agent'.

	* gnus-msg.el (gnus-extended-version): Make it possible to omit
	Gnus version.

2005-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-face): New face.  Don't use `gnus-splash-face'
	which is unreadable in some setups.

2005-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-spec.el (gnus-update-format-specifications): Flush the
	group format spec cache if it doesn't support decoded group names.

2005-01-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-decay-scores, gnus-score-load-file):
	Allow to apply decay on score files matching a regexp.

2004-12-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-line-format-alist): Keep the forward
	compatibility in %g and %c.

2004-12-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-line-format-alist): Use decoded group
	name for only %g and %c.
	(gnus-group-insert-group-line): Bind gnus-tmp-decoded-group instead
	of gnus-tmp-group to decoded group name.
	(gnus-group-make-rss-group): Exclude `/'s from group names.

2004-12-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el (nnrss-get-encoding): Fix regexp.

2004-12-27  Simon Josefsson  <jas@extundo.com>

	* mm-bodies.el (mm-body-encoding): Don't permit 7-bit to be used when
	mm-use-ultra-safe-encoding is enabled (e.g., for PGP/MIME) and we have
	trailing white space.  Reported by Werner Koch <wk@gnupg.org>.

2004-12-17  Kim F. Storm  <storm@cua.dk>

	* gnus-group.el (gnus-group-mode-map): Map follow-link to mouse-face.

	* gnus-sum.el (gnus-summary-mode-map): Likewise.

2004-12-26  Tsuyoshi AKIHO  <akiho@kawachi.zaq.ne.jp>

	* gnus-sum.el (gnus-summary-walk-group-buffer): Decode group name.

2004-12-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnrss.el: Require rfc2047 and mml.
	(nnrss-file-coding-system): New variable.
	(nnrss-format-string): Redefine it as an inline function.
	(nnrss-decode-group-name): New function.
	(nnrss-string-as-multibyte): Remove.
	(nnrss-retrieve-headers): Decode group name; don't use
	nnrss-format-string.
	(nnrss-request-group): Decode group name.
	(nnrss-request-article): Decode group name; allow a Message-ID as
	well as an article number; don't use nnrss-format-string; encode a
	Message-ID string which may contain non-ASCII characters; use
	mml-to-mime to compose a MIME article.
	(nnrss-request-expire-articles): Decode group name.
	(nnrss-request-delete-group): Decode group name.
	(nnrss-fetch): Clarify error message.
	(nnrss-read-server-data): Use insert-file-contents instead of load;
	bind file-name-coding-system; use multibyte buffer.
	(nnrss-save-server-data): Bind coding-system-for-write to the
	value of nnrss-file-coding-system; bind file-name-coding-system;
	add coding cookie.
	(nnrss-read-group-data): Use insert-file-contents instead of load;
	bind file-name-coding-system; use multibyte buffer.
	(nnrss-save-group-data): Bind coding-system-for-write to the
	value of nnrss-file-coding-system; bind file-name-coding-system.
	(nnrss-decode-entities-string): Rename from n-d-e-unibyte-string;
	make it work with non-ASCII text.
	(nnrss-find-el): Make it work with old xml.el as well.

2004-12-26  Tsuyoshi AKIHO  <akiho@kawachi.zaq.ne.jp>

	* nnrss.el (nnrss-get-encoding): New function.
	(nnrss-fetch): Use unibyte buffer initially; bind
	coding-system-for-read while performing mm-url-insert; remove ^Ms;
	decode contents according to the encoding attribute.
	(nnrss-save-group-data): Add coding cookie.
	(nnrss-mime-encode-string): New function.
	(nnrss-check-group): Use it to encode subject and author.

2004-12-23  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-check-BBDB): Don't get the symbol-value of an
	imaginary variable.

2004-12-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-spec.el (gnus-spec-tab): Make a Lisp form which works
	correctly even if there are wide characters.

2004-12-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-check-BBDB): Fix the BBDB caching code to use
	downcased symbol names; make a new cache instead of reusing
	bbdb-hashtable.

2004-12-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2231.el (rfc2231-parse-string): Decode encoded value after
	concatenating segments rather than before concatenating them.
	Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.

	* message.el (message-get-reply-headers): Bind `extra'.

2004-12-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-extra-wide-headers): New variable.
	(message-get-reply-headers): Use it.

2004-12-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-group-path): Decode group name.
	(gnus-agent-group-pathname): Ditto.

	* gnus-cache.el (gnus-cache-file-name): Decode group name.

	* gnus-group.el (gnus-group-make-group): Decode group name.
	(gnus-group-make-rss-group): Register the group data after opening
	the nnrss group.

2004-12-17  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-expire-articles): Articles moved
	by expiry now get marked as read.

2004-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-xemacs-find-mime-charset): New macro.

2004-12-17  Aidan Kehoe  <kehoea@parhasard.net>

	* mm-util.el (mm-xemacs-find-mime-charset-1): New function used to
	unify Latin characters in XEmacs.
	(mm-find-mime-charset-region): Use it.

2004-12-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-delete-directory): New function.

	* gnus-agent.el (gnus-agent-delete-group): Use it.

	* gnus-cache.el (gnus-cache-delete-group): Use it.

2004-12-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-make-rss-group): Unify non-ASCII group
	names.

2004-12-16  Simon Josefsson  <jas@extundo.com>

	* hashcash.el (hashcash-payment-alist): Fix custom :type.

2004-12-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-url.el (mm-url-predefined-programs): Add --silent arg to curl.

	* gnus-group.el (gnus-group-expire-articles-1): Decode group name.
	(gnus-group-set-current-level): Decode group name.

2004-12-15  Maciek Pasternacki  <maciekp@japhy.fnord.org>  (tiny change)

	* nnrss.el (nnrss-fetch): Signal an error if w3-parse-buffer also
	failed.

2004-12-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-delete-group): Decode group name.
	(gnus-group-make-rss-group): Encode group name.
	(gnus-group-catchup-current): Decode group name.
	(gnus-group-kill-group): Decode group name.

2004-12-08  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el (gnus-narrow-to-page): Don't hardcode point-min.

2004-12-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-make-rss-group):
	Use gnus-group-make-group instead of gnus-group-unsubscribe-group.

	* gnus-start.el (gnus-setup-news): Honor user's setting to
	gnus-message-archive-method.  Suggested by Lute Kamstra
	<lute@gnu.org>.

2004-12-10  Arnaud Giersch  <arnaud.giersch@free.fr>  (tiny change)

	* gnus-sum.el (gnus-summary-exit-no-update): Don't clear the
	global counterparts of the buffer-local variables.

2004-11-16  Romain Francoise  <romain@orebokech.com>

	* gnus-sum.el (gnus-summary-exit): Don't clear the global
	counterparts of the buffer-local variables.

2004-11-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-forbidden-properties): Fixed typo in doc
	string.

2004-11-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-util.el (gnus-replace-in-string): Added doc string.

	* nnmail.el (nnmail-split-header-length-limit): Increase to 2048
	to avoid problems when splitting mails with many recipients.

2004-11-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-sum.el (gnus-summary-exit): Remove redundant and harmful
	pop-to-buffer, covered by the subsequent gnus-configure-windows.

2004-12-05  Nelson Ferreira  <nelson.ferreira@ieee.org>

	* spam-stat.el (spam-stat-save): Load the hashtable from disk only
	if there is no hashtable in memory or file modification time is
	newer than cached timestamp.

2004-12-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-limit-to-recipient): Implement
	not-matching option.

2004-12-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-limit-to-recipient): New function.
	Suggested David Mazieres in analogy to rmail-summary-by-recipients.
	(gnus-summary-limit-map, gnus-summary-make-menu-bar): Add it.
	(gnus-article-sort-by-recipient, gnus-summary-sort-by-recipient):
	New functions.  Suggested by Uwe Brauer <oub@mat.ucm.es>.
	(gnus-summary-mode-map, gnus-summary-make-menu-bar): Add it.

2004-12-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-forward-make-body-mml): Remove headers
	according to message-forward-ignored-headers if a message is decoded.

2004-12-02  Romain Francoise  <romain@orebokech.com>

	* message.el (message-forward-make-body-plain): Always remove
	headers according to message-forward-ignored-headers.

2004-12-01  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Remove the
	gnus-summary-limit pop for now, it has problems with ham marks for
	me.

2004-11-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Use gnus-summary-limit
	correctly.

2004-11-28  Carl Henrik Lunde  <chlunde+bugs+@ping.uio.no>  (tiny change)

	* format-spec.el (format-spec): Message the char.

2004-11-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-art.el (gnus-split-methods): Reformat comments.

	* spam.el (spam-summary-prepare-exit): Remove article limits
	before exiting the summary buffer.

2004-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Remove bbdb-create-internal, bbdb-records,
	spam-BBDB-register-routine and spam-enter-ham-BBDB.

	* nnrss.el (nnrss-string-as-multibyte): Redefine it as a macro in
	order to silence the byte compiler.

	* spam.el: Fix the way to silence the byte compiler, which
	complained about bbdb-buffer, bbdb-create-internal, bbdb-records,
	bbdb-search-simple, spam-BBDB-register-routine,
	spam-enter-ham-BBDB, spam-stat-buffer-change-to-non-spam,
	spam-stat-buffer-change-to-spam, spam-stat-buffer-is-non-spam,
	spam-stat-buffer-is-spam, spam-stat-load,
	spam-stat-register-ham-routine, spam-stat-register-spam-routine,
	spam-stat-save and spam-stat-split-fancy.

2004-11-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-password): Remove `:size 0' or `:size 1'
	which may confuse users.
	(canlock-password-for-verify): Ditto.

	* deuglify.el (gnus-outlook-deuglify-unwrap-stop-chars): Ditto.

	* gnus-art.el (gnus-emphasis-alist): Ditto.

	* gnus-registry.el (gnus-registry-max-entries): Ditto.

	* gnus-score.el (gnus-adaptive-word-length-limit): Ditto.

	* gnus-start.el (gnus-save-killed-list): Ditto.

	* gnus-sum.el (gnus-thread-hide-subtree): Ditto.
	(gnus-sum-thread-tree-root): Ditto.
	(gnus-sum-thread-tree-false-root): Ditto.
	(gnus-sum-thread-tree-single-indent): Ditto.

	* message.el (message-courtesy-message): Ditto.
	(message-archive-note): Ditto.
	(message-subscribed-address-file): Ditto.
	(message-user-fqdn): Ditto.

	* spam-report.el (spam-report-gmane-regex): Ditto.

	* spam.el (spam-blackhole-good-server-regex): Ditto.

2004-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml.el (mml-preview): Widen the message buffer before copying
	the contents to the preview buffer; sort headers before previewing.

	* message.el (message-hidden-headers): Fix the way to avoid a bug
	in the `repeat' widget in Emacs 21.3 or earlier.

2004-11-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-hidden-headers): Default to "^References:".
	Improve customization type.  Suggested by Reiner Steib
	<Reiner.Steib@gmx.de>.

2004-11-25  Romain Francoise  <romain@orebokech.com>

	* message.el (message-strip-forbidden-properties): Remove check for
	obsolete `message-hidden' text property, hidden headers are not
	accessible in the buffer anymore.

2004-11-22  Romain Francoise  <romain@orebokech.com>

	* message.el (message-header-format-alist): Add `From' in list
	so that it can be sorted.
	(message-fix-before-sending): Widen and sort headers before
	sending.
	(message-hide-headers): Use narrowing to hide headers by moving
	them to the top of the buffer and narrowing to the region
	underneath.

2004-11-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-strip-forbidden-properties): Bind
	buffer-read-only (etc) to nil.

2004-11-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-header-encoding-alist): Add In-Reply-To to
	address-mime.  Suggested by ARISAWA Akihiro <ari@mbf.ocn.ne.jp>.

2004-11-22  Marek Martin  <marek.martin@mum.pri.ee>  (tiny change)

	* nnfolder.el (nnfolder-request-create-group): Save current buffer.

2004-11-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Use sit-for to time instead of
	accept-process-output, since that doesn't seem to work on udp
	sockets.

2004-11-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Encode bogus delimiters.

2004-11-15  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el (pop3-leave-mail-on-server): Don't quote nil in
	doc string.  Improve doc string.

2004-11-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-request-update-info): Return nil if
	nntp-marks-is-evil is true so that gnus-get-unread-articles-in-group
	may not call gnus-activate-group which uselessly issues the GROUP
	commands for all nntp groups and wastes time.  Reported by Romain
	Francoise <romain@orebokech.com>.

	* gnus-start.el (gnus-get-unread-articles): Remove redundant test.

2004-11-15  Simon Josefsson  <jas@extundo.com>

	* gnus-art.el (gnus-header-button-alist): Handle URLs in OpenPGP:
	headers separately.
	(gnus-button-openpgp): New function, inspired by Jochen Küpper
	<jochen-+It19tn3Rl9sbm7dSapR3bNAH6kLmebB@public.gmane.org>.

2004-11-14  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-convert-old-newsrc):
	Assign legacy-gnus-agent to 5.10.7.

2004-11-14  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (article-unsplit-urls): Don't anchor urls to the
	start of the lines.

2004-11-14  Magnus Henoch  <mange@freemail.hu>

	* hashcash.el (hashcash-default-payment): Change default to 20
	(hashcash-default-accept-payment): Change default to 20
	(hashcash-process-alist): New variable
	(hashcash-generate-payment-async): Add
	(hashcash-already-paid-p): Add
	(hashcash-insert-payment): Don't generate payments twice
	(hashcash-insert-payment-async): Add
	(hashcash-insert-payment-async-2): Add
	(hashcash-cancel-async): Add
	(hashcash-wait-async): Add
	(hashcash-processes-running-p): Add
	(hashcash-wait-or-cancel): Add
	(mail-add-payment): New optional argument.  Conditionally start
	asynchronous calculation.
	(mail-add-payment-async): Add

	* message.el (message-send-mail): Wait for asynchronous hashcash
	results.  Don't clobber existing X-Hashcash headers.
	(message-setup-1): Call mail-add-payment-async when
	message-generate-hashcash is non-nil.

2004-11-11  ARISAWA Akihiro  <ari@mbf.ocn.ne.jp>  (tiny change)

	* message.el (message-use-alternative-email-as-from): Examine the
	From header as well; use message-make-from in order to include a
	user's full name.

2004-11-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-emphasis-alist): Don't hide asterisks by
	default; improve customization type.
	(gnus-emphasis-custom-with-format): New macro.
	(gnus-emphasis-custom-value-to-external): New function.
	(gnus-emphasis-custom-value-to-internal): New function.

2004-11-09  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (query-dns): Resolve reverse addresses.

2004-10-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-get-new-news): Use it.

	* gnus-start.el (gnus-check-reasonable-setup): New function.

2004-11-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-configure-posting-styles): Don't cause the
	"Args out of range" error.  Reported by Arnaud Giersch
	<arnaud.giersch@free.fr>.

2004-11-07  Stefan Wiens  <s.wi@gmx.net>  (tiny change)

	* gnus-sum.el (gnus-summary-clear-local-variables): Use symbolp.

2004-11-04  Richard M. Stallman  <rms@gnu.org>

	* spam.el (spam group): Add :version.

	* pgg-def.el (pgg group): Add :version.

2004-11-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-article): Don't associate the
	article buffer with a draft file.  This is a temporary measure
	against the 2004-08-22 change to gnus-article-edit-mode.

2004-11-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* html2text.el (html2text-get-attr): Remove unused argument `tag'.
	(html2text-format-tags): Remove unused variable `attr'.

2004-11-01  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-summary-resend-default-address): Add :version.

	* tls.el (tls-process-connection-type, tls-success)
	(tls-certtool-program): Add :version.

	* starttls.el (starttls-gnutls-program, starttls-use-gnutls)
	(starttls-extra-arguments, starttls-process-connection-type)
	(starttls-connect, starttls-failure, starttls-success): Add :version.

	* spam-stat.el (spam-stat): Add :version.

	* sieve.el (sieve): Add :version.

	* sha1.el (sha1): Add :version.
	(sha1-use-external): Remove redundant version.

	* nnmail.el (nnmail-split-fancy-with-parent-ignore-groups)
	(nnmail-cache-ignore-groups, nnmail-spool-hook)
	(nnmail-split-fancy-match-partial-words)
	(nnmail-split-lowercase-expanded): Add :version.

	* nndiary.el (nndiary): Add :version.

	* mml2015.el (mml2015-unabbrev-trust-alist): Add :version.

	* mml-sec.el (mml-default-sign-method)
	(mml-default-encrypt-method, mml-signencrypt-style-alist):
	Add :version.

	* mm-uu.el (mm-uu-diff-groups-regexp): Add :version.

	* mm-url.el (mm-url-use-external, mm-url-program)
	(mm-url-arguments): Add :version.

	* mm-decode.el (mm-inline-text-html-with-w3m-keymap)
	(mm-attachment-file-modes, mm-decrypt-option)
	(mm-w3m-safe-url-regexp): Add :version.

	* message.el (message-cite-prefix-regexp)
	(message-sendmail-envelope-from, message-minibuffer-local-map)
	(message-user-fqdn, message-completion-alist): Add :version.

	* gnus-win.el (gnus-configure-windows-hook)
	(gnus-use-frames-on-any-display): Add :version.

	* gnus-art.el (gnus-article-address-banner-alist)
	(gnus-treat-unsplit-urls, gnus-treat-unfold-headers)
	(gnus-treat-from-picon, gnus-treat-mail-picon)
	(gnus-treat-x-pgp-sig): Add :version.

	* gnus-sum.el (gnus-spam-mark, gnus-recent-mark)
	(gnus-undownloaded-mark, gnus-summary-article-move-hook)
	(gnus-summary-article-delete-hook)
	(gnus-summary-display-while-building): Add :version.

	* gnus-start.el (gnus-subscribe-newsgroup-hooks)
	(gnus-get-top-new-news-hook): Add :version.

	* gnus-srvr.el (gnus-server-agent-face, gnus-server-opened-face)
	(gnus-server-closed-face, gnus-server-denied-face): Add :version.

	* gnus-registry.el (gnus-registry): Add :version.

	* gnus-spec.el (gnus-use-correct-string-widths)
	(gnus-make-format-preserve-properties): Add :version.

	* gnus.el (gnus-group-charter-alist)
	(gnus-group-fetch-control-use-browse-url)
	(gnus-install-group-spam-parameters): Add :version.

	* gnus-diary.el (gnus-diary): Add :version.

	* gnus-delay.el (gnus-delay): Add :version.

	* gnus-cite.el (gnus-cite-unsightly-citation-regexp)
	(gnus-cite-ignore-quoted-from, gnus-cite-attribution-face)
	(gnus-cite-blank-line-after-header, gnus-article-boring-faces):
	Add :version.

	* gnus-agent.el (gnus-agent-max-fetch-size)
	(gnus-agent-enable-expiration, gnus-agent-queue-mail)
	(gnus-agent-prompt-send-queue): Add :version.

	* deuglify.el (gnus-outlook-deuglify): Add :version.

	* html2text.el: Beautify code.  Improve doc strings.  Some
	checkdoc cleanup.
	(html2text-get-attr, html2text-fix-paragraph): Simplify code.

2004-11-01  Alfred M. Szmidt  <ams@kemisten.nu>  (tiny change)

	* html2text.el (html2text-format-tag-list): Add "strong" and "em".

2004-10-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-hashtb): Create the registry
	when package is loaded.

	* spam.el (spam-summary-score-preferred-header): Add global preference
	for people who want to override the default SpamAssassin over
	Bogofilter preference (when both are set).
	(spam-necessary-extra-headers): Add spam-use-bogofilter as an option.
	(spam-user-format-function-S): Check
	spam-summary-score-preferred-header.
	(spam-extra-header-to-number): Add X-Bogosity header parsing.
	(spam-user-format-function-S): Format the score correctly.

2004-10-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-configure-posting-styles): Work with empty
	signature file.  Suggested by Manoj Srivastava
	<srivasta@golden-gryphon.com>.

	* mm-util.el (mm-coding-system-priorities): Prefer iso-8859-1 than
	iso-2022-jp even in the Japanese language environment.
	Suggested by Jason Rumney <jasonr@gnu.org>.

2004-10-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-update-summary-mark-positions): Allow users to
	use the same characters as the dummy marks; make it free from
	getting affected by the language environment.
	(gnus-summary-read-group-1): Update mark positions only when the
	format spec is updated.

	* gnus-spec.el (gnus-update-format-specifications): Return a list
	of updated types.

2004-10-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-check-reasonable-setup): Use fboundp instead
	of boundp to check if display-warning is available.

2004-10-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): Fix prog1/prog2 bug.

2004-10-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnspool.el (nnspool-spool-directory): Use news-path if the
	news-directory variable is not bound.

	* gnus-start.el (gnus-check-reasonable-setup): Use an alternative
	function instead of display-warning if it is not available.

2004-10-26  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-agent.el (gnus-agent-expire-group-1): Fix last merge from
	v5-10: Use `point-at-bol'.

2004-10-26  Simon Josefsson  <jas@extundo.com>

	* hashcash.el: Fix URL in comment, reported by Cheng Gao
	<chenggao@gmail.com>.

2004-10-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* html2text.el (html2text-buffer-head): Remove.  Use `goto-char'
	instead.

2004-10-25  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-remove-server-from-buffer-alist): Add function
	to remove a server from the nnimap-server-buffer-alist.
	(nnimap-open-connection, nnimap-close-server): Use it.

	* gnus-encrypt.el: Remove file in favor of encrypt.el.

2004-10-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-display-inline-fontify): Inhibit font-lock when
	running the major-mode function.

2004-10-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-update-summary-mark-positions): Search for
	dummy marks in the right way.

2004-10-18  David Edmondson  <dme@dme.org>

	* mm-view.el (mm-w3m-cid-retrieve-1): Don't use recursive call
	excessively.

2004-10-18  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-util.el (gnus-split-references): Accept a nil references
	string and go on blissfully.

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): Catch
	cases where the references string is non-nil but has no references.

	* encrypt.el: Add autoload tags.

	* spam.el (spam-resolve-registrations-routine): Remove article
	from unregistration list too.  Reported by David Hanak
	<dhanak@isis.vanderbilt.edu>

2004-10-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): Default to
	nil.  Changed custom type.

2004-10-17  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-copy-article-ignored-headers): New variable.

	* gnus-sum.el (gnus-summary-move-article): Use it.

2004-10-15  Teodor Zlatanov  <tzz@lifelogs.com>

	* encrypt.el: Add autoload cookies.

	* spam.el (spam-backend-article-list-property)
	(spam-backend-get-article-todo-list)
	(spam-backend-put-article-todo-list)
	(spam-summary-prepare-exit, spam-resolve-registrations-routine):
	Resolve registrations separately.
	(spam-register-routine): Format comments.
	(spam-unregister-routine, spam-register-routine): Always call with
	specific-articles, no default list.
	(spam-summary-prepare-exit): Use the spam-classifications function.

	* netrc.el (autoload, netrc-parse): Use encrypt.el instead of
	gnus-encrypt.el.

	* encrypt.el: Copied from gnus-encrypt.el.

	* gnus-encrypt.el: Commented that it's obsolete.

2004-10-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-adaptive-pretty-print): New variable.
	(gnus-score-save): Use it.

	* message.el (message-bury): Use `window-dedicated-p'.

2004-10-15  Simon Josefsson  <jas@extundo.com>

	* pop3.el (top-level): Don't require nnheader.
	(pop3-read-timeout): Add.
	(pop3-accept-process-output): Add.
	(pop3-read-response, pop3-retr): Use it.

2004-10-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-register-routine): Move comment.
	(spam-verify-bogofilter): Use 'unknown for the initial
	spam-bogofilter-valid state, not 'never.

	* netrc.el (netrc-machine-user-or-password): Add convenience wrapper
	for netrc-machine.

	* nnimap.el (nnimap-open-connection): Use
	netrc-machine-user-or-password.

2004-10-17  Richard M. Stallman  <rms@gnu.org>

	* gnus-registry.el (gnus-registry-unload-hook):
	Set as a variable with add-hook.

	* nnspool.el (nnspool-spool-directory): Use news-directory instead
	of news-path.

	* spam-stat.el (spam-stat-unload-hook): Set as a variable w/ add-hook.

	* spam.el: Delete duplicate `provide'.
	(spam-unload-hook): Set as a variable with add-hook.

2004-10-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* pop3.el (pop3-leave-mail-on-server): Describe possible problems
	in the doc string.

	* message.el (message-ignored-news-headers)
	(message-ignored-supersedes-headers)
	(message-ignored-resent-headers)
	(message-forward-ignored-headers): Improve custom type.

2004-10-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-tokenize-header): Fix 2004-09-06 change
	which used point-min in the wrong place.

2004-10-12  Simon Josefsson  <jas@extundo.com>

	* tls.el (tls-certtool-program): New variable.
	(tls-certificate-information): New function, based on
	ssl-certificate-information.

2004-10-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el: Move the version of ELisp-based uncompface program
	to the contrib directory because of the copyright problem.

2004-10-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-kill-buffer): Raise the current frame.

2004-10-10  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el: Mention that multibyte characters don't work as marks.

	* gnus.el (message-y-or-n-p): Autoload.

	* pop3.el (pop3-maildrop, pop3-mailhost, pop3-port)
	(pop3-password-required, pop3-authentication-scheme)
	(pop3-leave-mail-on-server): Made customizable.
	(pop3): New custom group.
	(pop3-retr): Remove `sleep-for' statements.
	Suggested by Dave Love <fx@gnu.org>.

	* nnheader.el (nnheader-read-timeout): Explain 1.0 timeout for
	Windows/DOS.

	* imap.el (imap-parse-flag-list, imap-parse-body-extension)
	(imap-parse-body): Fix incorrect use of `assert'.  Suggested by
	Dave Love <fx@gnu.org>.

	* mml.el (mml-minibuffer-read-disposition): Require match.
	Suggested by Dave Love <fx@gnu.org>.

2004-10-11  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-delete-group): Change "\t." to "  " in
	doc string.

2004-10-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect-text-parts): Support all text/* types.

2004-10-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (gnus-mime-display-single): Call `mm-display-inline'
	instead of calling `mm-insert-inline', to decode text/* parts
	before displaying them.

2004-10-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-text-plain-type): New variable.
	(mm-uu-pgp-signed-extract-1): Use it.
	(mm-uu-pgp-encrypted-extract-1): Use it.
	(mm-uu-dissect): Allow MIME type and parameters as an optional arg;
	bind mm-uu-text-plain-type with that value.
	(mm-uu-dissect-text-parts): Pass MIME type and parameters to
	mm-uu-dissect.

2004-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-update-group-mark-positions):
	* gnus-sum.el (gnus-update-summary-mark-positions):
	* message.el (message-check-news-body-syntax):
	* gnus-msg.el (gnus-debug): Use mm-string-as-multibyte instead
	of string-as-multibyte.

2004-10-05  Juri Linkov  <juri@jurta.org>

	* gnus-group.el (gnus-update-group-mark-positions):
	* gnus-sum.el (gnus-update-summary-mark-positions):
	* message.el (message-check-news-body-syntax):
	* gnus-msg.el (gnus-debug): Use `string-as-multibyte' to convert
	8-bit unibyte values to a multibyte string for search functions.

2004-10-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-uu.el (mm-uu-dissect): Allow optional arg.
	(mm-uu-dissect-text-parts): New function.

	* gnus-art.el (gnus-display-mime): Use mm-uu-dissect-text-parts to
	dissect text parts.

	* gnus-sum.el (gnus-summary-insert-subject): Remove redundant setq.
	(gnus-summary-force-verify-and-decrypt): Revert 2004-08-18 change.

	* mm-decode.el (mm-dissect-singlepart): Revert 2004-08-18 change.

	* gnus-topic.el (gnus-topic-hierarchical-parameters): Use
	gnus-current-topics instead of gnus-current-topic.

2004-10-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-show-article): Use with-current-buffer.

2004-10-05  Jesper Harder  <harder@ifa.au.dk>

	* nnsoup.el (nnsoup-read-active-file): Use dolist, mapc or last
	where approriate.

	* nnml.el (nnml-generate-active-info): do.

	* nndiary.el (nndiary-generate-active-info): do.

	* gnus-topic.el (gnus-topic-hierarchical-parameters): do.
	(gnus-topic-move): do.

	* gnus-sum.el (gnus-data-enter-list, gnus-summary-process-mark-set)
	(gnus-summary-set-local-parameters, gnus-summary-read-document): do.

	* gnus-srvr.el (gnus-server-prepare)
	(gnus-server-open-all-servers): do.

	* gnus-msg.el (gnus-summary-cancel-article)
	(gnus-summary-resend-message)
	(gnus-summary-mail-crosspost-complaint): do.

	* gnus-move.el (gnus-change-server): do.

	* gnus-group.el (gnus-group-unmark-all-groups)
	(gnus-group-set-current-level): do.

2004-10-04  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Doc fix.

2004-10-02  Kevin Greiner  <kgreiner@compsol.cc>

	* nnagent.el (nnagent-request-type): Bind gnus-agent to nil to
	avoid infinite recursion via gnus-get-function.

2004-10-02  Jesper Harder  <harder@ifa.au.dk>

	* mm-partial.el (mm-partial-find-parts): Use with-current-buffer.

	* nnfolder.el (nnfolder-generate-active-file): Use dolist.

	* nnmail.el (nnmail-split-history): do.

	* nnml.el (nnml-generate-nov-databases-1, nnml-request-rename-group)
	(nnml-request-delete-group): do.

	* nnslashdot.el (nnslashdot-read-groups): do.

	* nnsoup.el (nnsoup-delete-unreferenced-message-files): do.
	(nnsoup-unpack-packets, nnsoup-make-active): Simplify.

	* nnspool.el (nnspool-find-id): Use with-temp-buffer.
	(nnspool-sift-nov-with-sed): Use last
	(nnspool-retrieve-headers-with-nov): Use mapc.
	(nnspool-request-newgroups): Use dolist.
	(nnspool-request-group): Use last.

	* nntp.el (nntp-read-server-type): Use dolist.

	* nnvirtual.el (nnvirtual-create-mapping)
	(nnvirtual-update-read-and-marked): Use dolist.
	(nnvirtual-convert-headers): Simplify.

2004-10-01  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): Added
	support for sync'ing tick marks.

2004-10-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-toggle-header): Make it work even if
	there's no visible header.

2004-10-01  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): When
	necessary, pass full group name to gnus-request-set-marks.

2004-10-01  Simon Josefsson  <jas@extundo.com>

	* mailcap.el (mailcap-mime-data): Add pdf.  Remove non-free
	acroread.

2004-10-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam-report.el (spam-report-gmane): Fix interactive.

	* gnus-art.el (gnus-treat-body-boundary): Only do stuff under X.

	* gnus-agent.el (gnus-agent-synchronize-flags-server): Be silent
	when writing file.
	(gnus-agent-synchronize-flags): Don't default to being
	interactive.

2004-09-30  Simon Josefsson  <jas@extundo.com>

	* message.el (message-generate-hashcash): Add.
	(message-send-mail): Use it, call mail-add-payment.

2004-09-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-verify-bogofilter): Use -V, not -sV option.

2004-09-28  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-group-flags): Replaced
	gnus-requst-update-info with explicit code to sync the in-memory
	info read flags with the marks being sync'd to the backend.

	*gnus-util.el (gnus-pp): Added optional stream to match pp API.

2004-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-verify-bogofilter): Add new function.
	(spam-check-bogofilter)
	(spam-bogofilter-register-with-bogofilter): Use it.
	(spam-verify-bogofilter): Add small fixes.

2004-09-28  Simon Josefsson  <jas@extundo.com>

	* hashcash.el (hashcash-generate-payment): Revert.

2004-09-28  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): Use
	gnus-extract-references instead of gnus-split-references.

	* gnus-util.el (gnus-extract-references): Add new function, analogous
	to gnus-split-references but extracts only the message-ID without
	anything extra.

	* hashcash.el (hashcash-generate-payment)
	(hashcash-check-payment): Do the right thing if hashcash-path is
	nil (because the hashcash program could not be found).

	* spam.el (spam-use-hashcash): Remove comment.

2004-09-27  Jesper Harder  <harder@ifa.au.dk>

	* gnus-cache.el (gnus-cache-possibly-remove-articles-1)
	(gnus-cache-enter-article, gnus-cache-remove-article)
	(gnus-cache-braid-heads, gnus-cache-generate-active): Use dolist.

	* gnus-async.el (gnus-async-prefetch-remove-group): do.

	* gnus-art.el (article-hide-boring-headers)
	(article-translate-strings, article-display-face)
	(gnus-article-mime-match-handle-first)
	(gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): do.

2004-09-27  Simon Josefsson  <jas@extundo.com>

	* hashcash.el: New version, from
	http://users.actrix.co.nz/mycroft/hashcash.el.  Previously in
	../contrib/.

2004-09-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-copy-to-buffer): Don't use set-buffer-multibyte.

2004-09-26  Jesper Harder  <harder@ifa.au.dk>

	* gnus-dup.el (gnus-dup-open): Use mapc.
	(gnus-dup-enter-articles, gnus-dup-suppress-articles): Use dolist.

	(gnus-dup-enter-articles): Remove excess ID's from gnus-dup-hashtb.
	Reported by Stefan Wiens <s.wi@gmx.net>.

	* gnus.el (gnus-shutdown): Use dolist.

	* gnus-undo.el (gnus-undo): Use mapc.

	* nnrss.el (nnrss-generate-active): do.

	* message.el (message-cite-original-without-signature)
	(message-cite-original): Use mapc.
	(message-do-actions, message-make-forward-subject): Use dolist.

2004-09-25  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-check-overview-buffer): Fixed range of
	deletion to remove entire duplicate line.  Fixes merged article
	number bug.

2004-09-25  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-possibly-synchronize-flags): Ignore
	servers that are offline.  Avoids having gnus-agent-toggle-plugged
	first ask if you want to open a server and then, even when you
	responded with no, asking if you want to synchronize the server's
	flags.
	(gnus-agent-synchronize-flags-server): Rewrote read loop to handle
	multi-line expressions.
	(gnus-agent-synchronize-group-flags): New internal function.
	Updates marks in memory (in the info structure) AND in the
	backend.

	* gnus-util.el (gnus-remassoc): Fixed typo in documentation.

	* nnagent.el (nnagent-request-set-mark): Use
	gnus-agent-synchronize-group-flags, not backend's request-set-mark
	method, to ensure that synchronization updates marks in the
	backend and in the info (in memory) structure.

2004-09-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-uu.el (gnus-uu-digest-mail-forward): Obey the process/prefix
	convention fully; don't miss the root article of a thread; make
	the X-Draft-From header with correct article numbers.

2004-09-23  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-synchronize-flags-server): Do nothing
	unless plugged.  Disable the agent so that an open failure causes
	an error.

	* gnus-int.el (gnus-request-set-mark, gnus-request-update-mark):
	Reverted 2004-09-21 change.  The backend must be opened while
	synchronizing flags even when the backend stores the flags
	locally.

2004-09-23  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-configure-posting-styles): Narrow to headers
	in `header' match.  Reported by Svend Tollak Munkejord.

	* message.el (message-cite-original): Fix use of
	`message-cite-articles-with-x-no-archive'.

2004-09-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-win.el (gnus-buffer-configuration): Add mml-preview.
	(gnus-window-to-buffer): Ditto.

	* mml.el (mml-preview-buffer): New variable.
	(mml-preview): Manage window layout with gnus-buffer-configuration.

	* gnus-msg.el (gnus-setup-message): Put article numbers into the
	X-Draft-From header even if those articles aren't quoted.

2004-09-21  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-int.el (gnus-servers-that-use-local-marks): New variable.
	(gnus-request-set-mark, gnus-request-update-mark): Use new
	g-s-t-u-l-m to decide to use backend even when unplugged.

2004-09-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Don't add
	a trailing whitespace.  Suggested by Cheng Gao <chenggao@gmail.com>.

2004-09-20  Simon Josefsson  <jas@extundo.com>

	* mm-util.el (mm-charset-synonym-alist): Map "unicode" to
	"utf-16-le".

2004-09-20  Stefan Monnier  <monnier@iro.umontreal.ca>

	* mm-decode.el (mm-copy-to-buffer): Preserve the data's unibyteness.

2004-09-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* uudecode.el (uudecode-use-external): Add :version.

	* smime.el (smime-CA-file, smime-encrypt-cipher)
	(smime-dns-server): Add :version.

	* smiley.el (gnus-smiley-file-types): Add :version.

	* sha1.el (sha1-use-external): Add :version.

	* pgg-def.el (pgg-query-keyserver): Add :version.

	* nnmail.el (nnmail-fancy-expiry-targets)
	(nnmail-mail-splitting-charset, nnmail-mail-splitting-decodes):
	Add :version.

	* nnimap.el (nnimap-split-download-body, nnimap-dont-close)
	(nnimap-retrieve-groups-asynchronous): Add :version.
	(nnimap-close-asynchronous): Add :version.  Fixed typo in doc string.

	* mml.el (mml-content-disposition-parameters)
	(mml-insert-mime-headers-always): Add :version.

	* mm-util.el (mm-coding-system-priorities): Add :version.

	* mm-decode.el (mm-inline-text-html-with-images)
	(mm-keep-viewer-alive-types, mm-external-terminal-program)
	(mm-verify-option): Add :version.
	(mm-text-html-renderer): Change :version.

	* message.el (message-fcc-externalize-attachments)
	(message-required-headers, message-draft-headers)
	(message-subject-trailing-was-query)
	(message-subject-trailing-was-ask-regexp)
	(message-subject-trailing-was-regexp, message-mark-insert-begin)
	(message-mark-insert-end, message-archive-header)
	(message-archive-note, message-cross-post-default)
	(message-cross-post-note, message-followup-to-note)
	(message-cross-post-note-function, message-use-mail-followup-to)
	(message-subscribed-address-functions)
	(message-subscribed-address-file, message-subscribed-addresses)
	(message-subscribed-regexps, message-allow-no-recipients)
	(message-yank-cited-prefix, message-signature-insert-empty-line)
	(message-hidden-headers, message-hierarchical-addresses)
	(message-mail-user-agent, message-use-idna)
	(message-valid-fqdn-regexp)
	(message-strip-special-text-properties, message-header-synonyms)
	(message-beginning-of-line, message-tab-body-function): Add :version.
	(message-insert-canlock, message-wide-reply-confirm-recipients):
	Change :version.

	* mail-source.el (mail-source-ignore-errors): Add :group, :type
	and :version.
	(mail-source-delete-old-incoming-confirm)
	(mail-source-movemail-program): Add :version.

	* gnus.el (gnus-parameters, gnus-user-agent): Add :version.
	(gnus-agent-cache, gnus-agent): Change :version.

	* gnus-util.el (gnus-use-byte-compile): Change :version.

	* gnus-sum.el (gnus-summary-make-false-root-always)
	(gnus-summary-default-high-score)
	(gnus-summary-default-low-score, gnus-auto-goto-ignores)
	(gnus-forwarded-mark, gnus-unseen-mark, gnus-no-mark)
	(gnus-read-all-available-headers, gnus-article-emulate-mime)
	(gnus-sum-thread-tree-root, gnus-sum-thread-tree-false-root)
	(gnus-sum-thread-tree-single-indent)
	(gnus-sum-thread-tree-vertical, gnus-sum-thread-tree-indent)
	(gnus-sum-thread-tree-leaf-with-other)
	(gnus-sum-thread-tree-single-leaf): Add :version.
	(gnus-summary-display-arrow, gnus-summary-muttprint-program)
	(gnus-article-loose-mime): Change :version.

	* gnus-start.el (gnus-backup-startup-file)
	(gnus-save-startup-file-via-temp-buffer): Add :version.

	* gnus-srvr.el (gnus-server-browse-in-group-buffer)
	(gnus-server-offline-face): Add :version.

	* gnus-score.el (gnus-adaptive-word-length-limit): Add :version.

	* gnus-msg.el (gnus-gcc-externalize-attachments)
	(gnus-debug-files, gnus-debug-exclude-variables)
	(gnus-discouraged-post-methods): Change :version.
	(gnus-confirm-mail-reply-to-news)
	(gnus-confirm-treat-mail-like-news): Add :version.

	* gnus-int.el (gnus-server-unopen-status): Add :version.

	* gnus-group.el (gnus-group-jump-to-group-prompt)
	(gnus-large-ephemeral-newsgroup)
	(gnus-fetch-old-ephemeral-headers): Add :version.

	* gnus-fun.el (gnus-x-face-directory)
	(gnus-convert-pbm-to-x-face-command)
	(gnus-convert-image-to-x-face-command)
	(gnus-convert-image-to-face-command): Add :version.

	* gnus-delay.el (gnus-delay-default-hour): Add :version.

	* gnus-cite.el (gnus-cite-blank-line-after-header)
	(gnus-article-boring-faces): Add :version.

	* gnus-art.el (gnus-buttonized-mime-types)
	(gnus-inhibit-mime-unbuttonizing)
	(gnus-treat-display-face)
	(gnus-treat-body-boundary): Change :version.
	(gnus-body-boundary-delimiter, gnus-picon-databases)
	(gnus-treat-strip-cr, gnus-treat-leading-whitespace)
	(gnus-treat-date-english, gnus-treat-fold-headers)
	(gnus-article-skip-boring, gnus-treat-fold-newsgroups)
	(gnus-treat-mail-picon, gnus-treat-wash-html)
	(gnus-article-encrypt-protocol)
	(gnus-use-idna, gnus-article-over-scroll)
	(gnus-mime-display-multipart-alternative-as-mixed)
	(gnus-mime-display-multipart-related-as-mixed)
	(gnus-button-valid-fqdn-regexp, gnus-button-man-handler)
	(gnus-ctan-url, gnus-button-ctan-handler)
	(gnus-button-handle-ctan-bogus-regexp)
	(gnus-button-ctan-directory-regexp)
	(gnus-button-mid-or-mail-regexp, gnus-button-prefer-mid-or-mail)
	(gnus-button-mid-or-mail-heuristic-alist, gnus-button-tex-level)
	(gnus-button-man-level, gnus-button-emacs-level)
	(gnus-button-message-level, gnus-button-browse-level): Add :version.

	* gnus-agent.el (gnus-agent-fetched-hook): Add :version.
	(gnus-agent-go-online): Change :version.
	(gnus-agent-expire-unagentized-dirs)
	(gnus-agent-auto-agentize-methods): Add :version.

	* flow-fill.el (fill-flowed-display-column)
	(fill-flowed-encode-column): Add :version.

	* deuglify.el (gnus-outlook-deuglify-unwrap-min)
	(gnus-outlook-deuglify-unwrap-max)
	(gnus-outlook-deuglify-cite-marks)
	(gnus-outlook-deuglify-unwrap-stop-chars)
	(gnus-outlook-deuglify-no-wrap-chars)
	(gnus-outlook-deuglify-attrib-cut-regexp)
	(gnus-outlook-deuglify-attrib-verb-regexp)
	(gnus-outlook-deuglify-attrib-end-regexp)
	(gnus-outlook-display-hook): Add :version.

	* binhex.el (binhex-use-external): Add :version.

2004-09-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-fetch-old-headers): Add custom choices `t'
	and `invisible'.

2004-09-10  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): Watch out for negatives
	in gnus-registry-trim.

2004-09-13  Simon Josefsson  <jas@extundo.com>

	* dns-mode.el: Add XEmacs auto-mode-alist autoload cookie.

	* nnimap.el (nnimap-demule): Revert 2004-08-30 change.

	* dns-mode.el (dns-mode): Fix menu for XEmacs, reported by Steve
	Youngs <steve@youngs.au.com> and suggested by Katsumi Yamaoka
	<yamaoka@jpl.org>.
	(dns-mode-font-lock-keywords): Fix faces, reported by Steve Youngs
	<steve@youngs.au.com> and suggested by Katsumi Yamaoka
	<yamaoka@jpl.org>.

	* sieve.el (sieve-manage-mode): Ditto.

2004-09-13  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-summary-copy-article): Fix doc string.

2004-09-11  Simon Josefsson  <jas@extundo.com>

	* dns-mode.el: Add.

	* mm-view.el (mm-display-dns-inline): Add.

	* mm-decode.el (mm-inline-media-tests): Add text/dns.
	(mm-automatic-display): Ditto.

	* mailcap.el (mailcap-mime-data): Add text/dns.
	(mailcap-mime-extensions): Map .soa to text/dns.

2004-09-10  Miles Bader  <miles@gnu.ai.mit.edu>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Remove unnecessary bindings of
	`inhibit-read-only' inherited from v5.10 merge.

2004-09-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp): New customization group.
	(nntp-authinfo-file): Add customization group.

	* mml2015.el (mml2015-unabbrev-trust-alist): Add customization group.

	* mml-sec.el (mml-signencrypt-style-alist): Ditto.

	* gnus.el (to-address, to-list, subscribed)
	(large-newsgroup-initial): Ditto.

	* flow-fill.el (fill-flowed-display-column)
	(fill-flowed-encode-column): Ditto.

2004-09-06  Stefan Monnier  <monnier@iro.umontreal.ca>

	* message.el (message-tokenize-header, message-send-mail-with-qmail):
	Use point-min rather than 1.
	(message-send-mail): Use buffer-size rather than point-max.

	* gnus-sum.el (gnus-summary-search-article-forward):
	Signal a specific `search-failed' rather than a generic `error'.

	* gnus-salt.el (gnus-pick-mouse-pick-region): Switch 1 => point-min.
	(gnus-generate-vertical-tree): Usue `bobp' rather than compare to 1.
	(gnus-highlight-selected-tree): Use point-min rather than 1 and 2.

2004-09-10  Simon Josefsson  <jas@extundo.com>

	* nndb.el (require): Remove tcp and duplicate cl.

2004-09-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (directory-files-and-attributes): Move forward.

2004-09-09  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (directory-files-and-attributes): Optionally
	defined to support XEmacs.

2004-09-09  Kevin Greiner  <kgreiner@compsol.cc>

	* gnus-agent.el (gnus-agent-cat-groups): Rewrote avoiding defsetf
	to avoid run-time CL dependencies.
	(gnus-agent-unfetch-articles): New function.
	(gnus-agent-fetch-headers): Use gnus-agent-braid-nov to validate
	article numbers even when local .overview file is missing.
	(gnus-agent-read-article-number): New function.  Only accepts
	27-bit article numbers.
	(gnus-agent-copy-nov-line, gnus-agent-uncached-articles): Use
	gnus-agent-read-article-number.
	(gnus-agent-braid-nov): Rewrote to validate article numbers coming
	from backend while recognizing that article numbers in .overview
	must be valid.
	(gnus-agent-update-files-total-fetched-for): Use
	directory-files-and-attributes to improve performance.
	* gnus-int.el (gnus-request-move-article): Use
	gnus-agent-unfetch-articles in place of gnus-agent-expire to
	improve performance.

	* gnus-start.el (gnus-convert-old-newsrc): Changed message text as
	some users confused by references to .newsrc when they only have a
	.newsrc.eld file.
	(gnus-convert-mark-converter-prompt)
	(gnus-convert-converter-needs-prompt): Fixed use of property list.
	* legacy-gnus-agent.el (gnus-agent-convert-to-compressed-agentview-prompt):
	New function.  Used internally to only display 'gnus converting
	files' message when actually necessary.

	* gnus-sum.el (): Removed (require 'gnus-agent) as required
	methods now autoloaded.

2004-09-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-sum.el (gnus-summary-insert-subject): Remove list
	identifiers.

2004-09-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-picon.el: Fix indentation and closing parenthesis.

2004-09-01  Simon Josefsson  <jas@extundo.com>

	* message.el (message-canlock-generate): Require sha1, not
	sha1-el.  (Can we get rid of this require altogether?  It is ugly
	to require within a function.  Sadly, if sha1.el isn't loaded, the
	let binding in m-c-g will hide the defcustom definition, which is
	bad.)

	* canlock.el: Require sha1, not sha1-el.

	* message.el: Don't autoload sha1 (there is a autoload cookie in
	sha1.el).

	* sha1-el.el: Renamed to sha1.el.

2004-08-30  Juanma Barranquero  <lektu@terra.es>

	* ietf-drums.el (ietf-drums-remove-whitespace): Fix character constant.

2004-08-30  Stefan Monnier  <monnier@iro.umontreal.ca>

	* nnimap.el (nnimap-demule): Avoid string-as-multibyte.

2004-08-30  Kim F. Storm  <storm@cua.dk>

	* nntp.el (nntp-authinfo-file): Add :group 'nntp.

	* nnimap.el (nnimap-authinfo-file, nnimap-prune-cache):
	Add :group 'nnimap.

2004-08-30  Andreas Schwab  <schwab@suse.de>

	* rfc2231.el (rfc2231-parse-string): Restore whitespace syntax for
	?* and ?\;.

	* ietf-drums.el (ietf-drums-syntax-table): Set syntax of ?* ?\;
	and ?\' to symbol instead of whitespace.

2004-08-30  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-restore-gcc): Use ^ and regexp-quote.

	* gnus-sum.el (gnus-summary-morse-message): Use search-forward
	instead of re-search-forward.

	* gnus-uu.el (gnus-uu-save-article): Ditto.
	(gnus-uu-post-encode-uuencode): Ditto.

	* html2text.el (html2text-clean-list-items): Ditto.
	(html2text-clean-dtdd): Ditto.
	(html2text-format-tags): Ditto.

	* message.el (message-send-mail-with-sendmail): Fix regexp.
	(message-fill-field-general): Use search-forward instead of
	re-search-forward.
	(unbold-region): Ditto.

	* nnrss.el (nnrss-request-article): Ditto.

	* nnslashdot.el (nnslashdot-request-article): Ditto.

	* nnweb.el (nnweb-gmane-wash-article): Ditto.

	* gnus-sum.el (gnus-summary-make-menu-bar): Avoid the
	"Unrecognized menu descriptor" error in XEmacs.

2004-08-26  Stefan Wiens  <s.wi@gmx.net>  (tiny change)

	* gnus-sum.el (gnus-read-header): Don't remove a header for the
	parent article of a sparse article in the thread hashtb.

2004-08-26  David Hedbor  <dhedbor@real.com>  (tiny change)

	* nnmail.el (nnmail-split-lowercase-expanded): New user option.
	(nnmail-expand-newtext): Lowercase expanded entries if
	nnmail-split-lowercase-expanded is non-nil.

2004-08-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-type-alist): Fix regexp in the rfc822-forward entry.

	* gnus-group.el (gnus-group-line-format-alist): Convert the value
	of gnus-tmp-news-method into string under XEmacs.  It will be
	passed to gnus-correct-length which takes only a string argument.

2004-08-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-bind-print-variables): New macro.
	(gnus-prin1): Use it.
	(gnus-prin1-to-string): Use it.
	(gnus-pp): New function.
	(gnus-pp-to-string): New function.

	* gnus-cus.el (gnus-agent-cat-prepare-category-field):
	Replace pp-to-string with gnus-pp-to-string.
	* gnus-eform.el (gnus-edit-form): Replace pp with gnus-pp.
	* gnus-group.el (gnus-group-make-kiboze-group): Ditto.
	* gnus-msg.el (gnus-debug): Ditto.
	* gnus-score.el (gnus-score-save): Ditto.
	* gnus-spec.el (gnus-update-format): Replace pp-to-string with
	gnus-pp-to-string.
	* legacy-gnus-agent.el (gnus-agent-unlist-expire-days): Replace pp
	with gnus-pp.
	* score-mode.el (gnus-score-pretty-print): Ditto.
	* webmail.el (webmail-debug): Ditto.

2004-08-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face, article-display-x-face):
	Use buffer-read-only.

2004-08-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-list-identifiers):
	Bind inhibit-read-only as t.

2004-08-22  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-mlspl.el (gnus-group-split-update): Fix docstring.

2004-08-22  Stefan Monnier  <monnier@iro.umontreal.ca>

	* gnus-art.el: Use inhibit-read-only instead of buffer-read-only.
	(gnus-narrow-to-page): Don't assume point-min == 1.
	(gnus-article-edit-mode): Derive from message-mode.

	* gnus-score.el (gnus-score-find-bnews): Simplify and don't assume
	point-min == 1.

	* imap.el (imap-parse-address-list, imap-parse-body-ext):
	Disable incorrect use of `assert'.

	* message.el (message-mode): Set comment-start-skip.


2004-08-22  Sam Steingold  <sds@gnu.org>

	* pop3.el (pop3-leave-mail-on-server): New user variable.
	(pop3-movemail): Delete mail only when it is nil.

2004-08-21  Reiner Steib  <Reiner.Steib@gmx.de>

	* nntp.el (nntp-marks-is-evil): Fix typo in docstring.

	* mml.el (mml-preview): Use `pop-to-buffer'.

	* message.el (message-goto-mail-followup-to): Insert after "To".
	(message-carefully-insert-headers): Add comment.

	* gnus.el: Remove unused variable `gnus-article-check-size'.

	* gnus-sum.el (gnus-summary-make-menu-bar): Add help texts.

	* gnus-art.el (gnus-button-alist): Improve
	`gnus-button-handle-library' entry.

2004-08-19  Sebastian Freundt  <hroptatyr@gna.org>  (tiny change)

	* nnmaildir.el (nnmaildir--emlink-p, nnmaildir--enoent-p): Use
	downcase, since XEmacs capitalizes error messages differently.

2004-08-18  Jesper Harder  <harder@ifa.au.dk>

	* nntp.el: Add (require 'gnus) due to reference to
	`gnus-directory'.  Reported by Matt Swift <swift@alum.mit.edu>.

2004-08-18  Florian Weimer  <fw@deneb.enyo.de>

	* gnus-sum.el (gnus-summary-force-verify-and-decrypt): Bind
	`mm-fill-flowed'.

	* mm-decode.el (mm-dissect-singlepart): Check it.

2004-08-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnimap.el (nnimap-open-connection): Add 'imaps' synonym to
	'imap' for netrc parsing.

2004-08-16  Reiner Steib  <Reiner.Steib@gmx.de>

	* mailcap.el (mailcap-mime-data): Mark as risky.

2004-08-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Assume the close parenthesis
	may be included in the encoded word.
	(rfc2047-encode): Don't append a space if the encoded word
	includes close parenthesis.

2004-08-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-1, rfc2047-encode): Improve encoding
	of text within parentheses.

2004-08-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-encrypt.el (gnus-encrypt-insert-file-contents)
	(gnus-encrypt-write-file-contents): Make the password key the file
	name PLUS the cipher, not just the cipher.  Also remove failed
	passwords from the cache.

2004-08-06  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-article-loose-mime): Change default to t.  Doc
	fix.

2004-08-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-fold-region): Use trailing whitespace as
	LWSP.

2004-08-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent): Try
	to append in-reply-to: data to the references: header.

	* netrc.el: Remove old encryption support, autoload gnus-encrypt.el
	(netrc-parse): Use gnus-encrypt.el functions.

	* gnus-encrypt.el: Add new file for encryption support; currently
	does only a few GPG ciphers and an internal XOR cipher.

	* password.el: Add comments on using password-read-and-add.
	(password-read-and-add): Add function to read and add the
	password to the cache at once.

2004-07-28  Simon Josefsson  <jas@extundo.com>

	* pgg-pgp5.el (pgg-pgp5-encrypt-region): Accept sign
	parameter (but don't use it, for now).

	* imap.el (imap-ssl-open): Use imap-process-connection-type,
	instead of hard coding to nil.

2004-07-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-image-emacs): Open lines under an image
	as mm-inline-image-xemacs does.

2004-07-26  Simon Josefsson  <jas@extundo.com>

	* gnus-group.el (gnus-group-group-map, gnus-group-make-menu-bar):
	Revert part of 2004-07-17 change below.

2004-07-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Don't infloop.  Suggested by
	Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-07-25  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* flow-fill.el (fill-flowed): Remove space stuffing, and only do
	quotes that actually start with ">" at the beginning of the
	lines.

2004-07-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Fix last change.
	(rfc2047-encode-parameter): Remove useless concat.

2004-07-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Check carefully whether to
	encode special characters; fix some kind of misconfigured headers;
	signal a real error if debug-on-quit or debug-on-error is non-nil.
	(rfc2047-encode-max-chars): New variable.
	(rfc2047-encode-1): Use it.
	(rfc2047-encode-parameter): New function.

	* mml.el (mml-insert-parameter): Remove an excessive space.

2004-07-17  Simon Josefsson  <jas@extundo.com>

	* gnus-group.el (gnus-group-make-group-simple): Add, suggested by
	Kai Grossjohann <kai@emptydomain.de>.
	(gnus-group-group-map): Use it, instead of gnus-group-make-group.
	(gnus-group-make-menu-bar): Ditto.

	* gnus-util.el (gnus-group-server): Add.

2004-07-16  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-clone-locals): Clone sendmail and smtp
	variables.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Fix last change.

2004-07-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Treat backslash-quoted
	characters as non-special.

2004-07-09  Simon Josefsson  <jas@extundo.com>

	* gnus-agent.el (gnus-agent-synchronize-flags): Revert to ask.
	Users will lose all flag changes made while unplugged with
	e.g. nntp unless flag synchronization happens, thus `nil' is not a
	good default.  See numerous reports on ding mailing list.

2004-07-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-type-alist): Improve regexp for article-begin,
	add generate-head-function and generate-article-function to the
	rfc822-forward entry.
	(nndoc-rfc822-forward-generate-article): New function.
	(nndoc-rfc822-forward-generate-head): New function.

	* mm-decode.el (mm-dissect-buffer): Simplify cleaning of CTE.

2004-07-06  Dan Christensen  <jdc@uwo.ca>

	* gnus-sum.el (gnus-summary-read-group-1): When summary is unthreaded,
	respect display group parameter and gnus-summary-expunge-below.
	(gnus-articles-to-read): Remove unused reference to display group
	parameter.

2004-07-03  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nnheader.el (nnheader-uniquify-message-id): New experimental
	variable.
	(nnheader-nov-read-message-id): Use it.

	* spam-report.el (spam-report-gmane): Add interactive.

2004-07-02  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-encode.el (mm-content-transfer-encoding-defaults): Use
	qp-or-base64 for the application/* types.

2004-07-02  Joakim Verona  <joakim@verona.se>  (tiny change)

	* nnrss.el (nnrss-read-group-data): Fix off-by-one error.

2004-06-30  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-trim): Don't allow a negative
	trim value.

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--condcase, nnmaildir--enoent-p):
	New macro and function.
	(nnmaildir--new-number, nnmaildir-request-set-mark): Use them.

2004-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-enrich-utf-8-by-mule-ucs): Fix cleaning of
	after-load-alist.

2004-06-29  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-get-new-news-this-group): Don't
	update info that isn't there.

2004-06-29  Ilya N. Golubev  <gin@mo.msk.ru>.

	* mm-util.el (mm-mime-mule-charset-alist): Add the windows-1251
	entry.

2004-06-29  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-view.el (mm-inline-render-with-function): Use multibyte
	buffer; decode html source by charset.

	* mm-encode.el (mm-content-transfer-encoding-defaults): Doc fix.

	* mm-util.el (mm-enrich-utf-8-by-mule-ucs): New function run when
	Mule-UCS is loaded under XEmacs.
	(mm-mime-mule-charset-alist): Avoid duplicated entries.

2004-06-28  Jesper Harder  <harder@ifa.au.dk>

	* nnheader.el (nnheader-max-head-length): Increase to 8192.

2004-06-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-coding-system-p): Return a coding-system.
	(mm-mime-mule-charset-alist): Use shift_jis instead of
	iso-2022-jp-2 for the katakana-jisx0201 mule charset; add new
	entries for the mime charsets iso-2022-jp-3 and shift_jis.
	(mm-coding-system-priorities): Use shift_jis and iso-8859-1
	instead of japanese-shift-jis and iso-latin-1 respectively in
	order to share the default value with both Emacs and XEmacs-mule.
	(mm-mule-charset-to-mime-charset): Make
	mm-coding-system-priorities effective.
	(mm-sort-coding-systems-predicate): Canonicalize coding-systems
	while predicating of candidates upon the priorities.

2004-06-27  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-make-menu-bar): Add
	gnus-uu-invert-processable.

	* gnus.el: Autoload gnus-uu-invert-processable.

2004-06-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-util.el (mm-with-multibyte-buffer): New macro.

	* rfc2047.el (rfc2047-encode-string): Use it.
	(rfc2047-encode-region): Move point to the end of the region after
	encoding.  Suggested by IRIE Tetsuya <irie@t.email.ne.jp>.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-parse): Don't ignore case when finding
	">From ".  Thanks to Reiner Steib <Reiner.Steib@gmx.de>.

2004-06-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cite.el (gnus-cite-ignore-quoted-from): New user option.
	(gnus-cite-parse): Ignore quoted envelope From_.  Suggested by
	Karl Chen <quarl@nospam.quarl.org>.

2004-06-23  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-idna-to-ascii-rhs-1): Don't choke on
	invalid addresses.

2004-06-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el: Change section markers, revise TODO list.
	(spam-backends): Make new master list of all installed backends.
	(spam-summary-exit-behavior): Add new variable to determine how
	messages moves are done at summary exit.
	(spam-move-spam-nonspam-groups-only)
	(spam-process-ham-in-nonham-groups)
	(spam-process-ham-in-spam-groups): Remove variables, the
	spam-summary-exit-behavior variable should be used to manage this
	behavior.
	(spam-old-ham-articles, spam-old-spam-articles): Remove.
	(spam-old-articles): Add variable, replacing spam-old-ham-articles
	and spam-old-spam-articles.
	(spam-use-copy, spam-use-move, spam-use-gmane, spam-use-resend):
	Add empty variables, placeholders for the backends they represent.
	(spam-set-difference): Move, unchanged.
	(spam-list-of-processors): Declare OBSOLETE, not used anymore
	unless the user has a processor variable.
	(spam-classifications, spam-classification-valid-p)
	(spam-backend-properties, spam-backend-property-valid-p)
	(spam-backend-function-type-valid-p)
	(spam-process-type-valid-p, spam-list-articles): Add helper functions.
	(spam-report-articles-gmane, spam-report-articles-resend):
	Remove functions, they are not needed.
	(spam-install-backend-super, spam-backend-list)
	(spam-backend-check, spam-backend-valid-p, spam-backend-info)
	(spam-backend-function, spam-backend-ham-registration-function)
	(spam-backend-spam-registration-function)
	(spam-backend-ham-unregistration-function)
	(spam-backend-spam-unregistration-function)
	(spam-backend-statistical-p, spam-backend-mover-p)
	(spam-install-backend-alias, spam-install-checkonly-backend)
	(spam-install-mover-backend, spam-install-nocheck-backend)
	(spam-install-backend, spam-install-statistical-backend)
	(spam-install-statistical-checkonly-backend): Add backend installation
	support.
	(spam-summary-prepare-exit): Rewrite to use the new backend code.
	(spam-group-processor-p): Use the new backend code and respect the
	summary exit behavior.
	(spam-mark-spam-as-expired-and-move-routine): Remove.
	(spam-summary-prepare): Change to use the new spam-old-articles
	variable.
	(spam-copy-or-move-routine, spam-copy-spam-routine)
	(spam-move-spam-routine, spam-copy-ham-routine)
	(spam-move-ham-routine): Add code to copy/move ham or spam.
	(spam-fetch-field-fast): Improve doc and code, plus allow the
	'number request.
	(spam-list-of-checks, spam-list-of-statistical-checks): Remove
	variables.
	(spam-split, spam-find-spam): Use the new backend code.
	(spam-registration-functions): Remove variable.
	(spam-unregister-routine): Add convenience wrapper.
	(spam-log-undo-registration, spam-register-routine)
	(spam-log-processing-to-registry)
	(spam-log-unregistration-needed-p): Rename "check" to "backend"
	where possible.
	(spam-check-gmane-xref, spam-check-regex-headers)
	(spam-check-blackholes, spam-check-stat, spam-check-ifile)
	(spam-check-BBDB, spam-check-whitelist, spam-check-blacklist)
	(spam-check-bogofilter-headers, spam-check-spamoracle)
	(spam-check-spamassassin-headers, spam-check-bsfilter-headers)
	(spam-check-crm114-headers): Use the spam-split-group that
	spam-split prepares, no need to determine it every time.

	* nnimap.el (nnimap-retrieve-headers-progress): Add the message number
	to the nnheader-parse-naked-head call.

	* nnheader.el (nnheader-generate-fake-message-id): Fix indentation.

	* gnus-sum.el (gnus-nov-parse-line): Add the message number to
	the nnheader-nov-read-message-id call.

2004-06-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-group.el (gnus-group-get-new-news-this-group): Don't call
	gnus-activate-group twice.  Suggested by Markus Peter
	<warp@spin.de>.

2004-06-18  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-time-format): Exchange the order of
	day and month in the default value; fix customization type.
	(article-date-ut): Use add-text-properties.
	(article-make-date-line): Use message-make-date instead of
	current-time-string.

	* message.el (message-fetch-field): Don't use set-text-properties.
	(message-make-date): Simplify.

	* messagexmas.el (message-xmas-make-date): New function.
	(message-xmas-redefine): Defalias message-make-date to it.

2004-06-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-syntax-table): Treat `(' and `)' as is.
	(rfc2047-encode-region): Treat text within parentheses as special;
	show the original text when error has occurred.

	* gnus-group.el (gnus-group-get-new-news-this-group): Pass the
	already-computed method to gnus-activate-group.

	* gnus-start.el (gnus-make-hashtable-from-newsrc-alist): Make the
	same select-methods identical Lisp objects.

	* gnus-srvr.el (gnus-server-set-info): Don't make a new Lisp
	object when modifying the info.

2004-06-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-srvr.el (gnus-server-set-info): Remove the server from
	gnus-opened-servers since it has never been opened with the new
	configuration yet.

2004-06-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnheader.el (nnheader-nov-read-message-id): Pass the optional
	arg to nnheader-generate-fake-message-id.

2004-06-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* nnheader.el (nnheader-generate-fake-message-id): Accept a
	number and build a fake message ID localized to a group and
	article number (so it's repeatable from that point on).
	(nnheader-fake-message-id-p): Change regex to accomodate new fake
	ID format.

	* gnus-sum.el (gnus-get-newsgroup-headers): Call
	nnheader-generate-fake-message-id with the article number.

2004-06-12  YAGI Tatsuya  <ynyaaa@ybb.ne.jp>  (tiny change)

	* gnus-art.el (gnus-article-next-page): Fix the way to find a real
	end-of-buffer.

2004-06-12  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-ignored-supersedes-headers): Add Approved.

2004-06-11  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-message-header): Remove useless
	goto-char.
	(rfc2047-encode): Fold the line before encoding.

2004-06-10  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* rfc2047.el (rfc2047-encode-message-header): Disabled header
	folding -- not all headers can be folded, and this should be done
	by the message composition mode.  Probably.  I think.

2004-06-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-util.el (gnus-remove-text-with-property): Make it slightly
	fast.

	* gnus-ems.el (gnus-remove-image): Don't use
	message-text-with-property; remove only the image found first.

	* gnus-xmas.el (gnus-xmas-remove-image): Remove only the image
	found first.

2004-06-09  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-send-mail-with-sendmail): Use with-current-buffer.

2004-06-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-text-with-property): Make it fast and accept
	optional arguments.
	(message-strip-forbidden-properties): Use it.
	(message-fix-before-sending): Follow the m-t-w-p change.

	* gnus-ems.el (gnus-remove-image): Follow the m-t-w-p change.

2004-06-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-headers): Don't change the buffer
	mistakenly when performing mml-preview even if
	gnus-single-article-buffer is nil.

2004-06-08  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* message.el (message-expand-name-databases): New user option.
	(message-expand-name): Use it.

2004-06-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-report-articles-resend)
	(spam-report-resend-register-routine): Allow ham reporting.
	(spam-report-resend-register-ham-routine): Add wrapper.
	(spam-registration-functions): Add ham resending functions.
	(spam-list-of-processors): Add ham resend processor.

	* gnus.el (ham-resend-to): Add new group parameter.
	(spam-process): Add ham resend option.

	* spam-report.el (spam-report-resend): Allow reporting ham.
	(spam-report-resend-ham): Add wrapper.

2004-06-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-cite-articles-with-x-no-archive): New
	variable.
	(message-cite-original): Use it.

2004-06-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-cite-original): Respect X-No-Archive.

2004-06-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-hide-headers): Refer to the values for
	gnus-ignored-headers and gnus-visible-headers in the summary
	buffer since a user may have set them as group parameters.

2004-06-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-node-name): Add convenience function.
	(assistant-render-text, assistant-render-node): Add error handling,
	plus handle multiple next nodes.
	(assistant-find-next-node): Comment out for now.
	(assistant-find-next-nodes): Add function, returns list of next
	nodes.

2004-06-02  Reiner Steib  <Reiner.Steib@gmx.de>

	* mail-source.el (mail-source-directory): Fix doc-string.

2004-05-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-render-text, assistant-eval): Add :set
	widget type, which is different because it takes and returns a
	list.  Much hilarity ensues.

2004-05-28  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist): Fixed regexp for manual links.

	* gnus-group.el (gnus-group-get-new-news-this-group): Added
	doc-string.

	* gnus-start.el (gnus-activate-group): Added doc-string.

2004-05-28  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-encode.el (mm-safer-encoding): Consider 7bit is safe.

2004-05-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* assistant.el (assistant-render-text): Try to add a :set
	widget, more to come.

	* spam.el (spam-group-spam-contents-p): Handle empty groupname
	strings.
	(spam-report-articles-resend)
	(spam-register-routine): Do registration iff any articles warrant
	it.
	(spam-summary-prepare-exit): Change log message for nil group
	destinations.

2004-05-27  Daniel Pittman  <daniel@rimspace.net>

	* spam.el (spam-report-resend-register-routine): Allow
	spam-report-resend-to to be a group parameter or a global value.

2004-05-26  Simon Josefsson  <jas@extundo.com>

	* starttls.el: Merge with my GNUTLS based starttls.el.
	(starttls-gnutls-program, starttls-use-gnutls)
	(starttls-extra-arguments, starttls-process-connection-type)
	(starttls-connect, starttls-failure, starttls-success): New
	variables.
	(starttls-program, starttls-extra-args): Doc fix.
	(starttls-negotiate-gnutls, starttls-open-stream-gnutls): New
	functions.
	(starttls-negotiate, starttls-open-stream): Check
	`starttls-use-gnutls' and pass on to corresponding *-gnutls
	function if it is set.

2004-05-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-region): Encode encoded words in
	structured fields.

2004-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-resend): Bind rfc2047-encode-encoded-words.

2004-05-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-mark-new-messages-in-spam-group-as-spam): Add
	variable.
	(spam-mark-junk-as-spam-routine): Use it.  Allow to disable
	assigning the spam-mark to new messages.

2004-05-26  Adam Sjøgren  <asjo@koldfront.dk>  (tiny change)

	(spam-ham-copy-or-move-routine): Don't declare `todo' twice.

2004-05-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Autoload customize-set-variable for XEmacs.

	* rfc2047.el (rfc2047-encodable-p): Don't move point.
	(rfc2047-decode): Treat the ascii coding-system as raw-text by
	default.

2004-05-25  Anand Mitra  <mitramc@yahoo.com>  (tiny change)

	* gnus-sum.el (gnus-summary-delete-article): Invoke hook with
	correct data.

2004-05-24  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-processors): Use nil for nonexistent processors.
	(spam-group-processor-p): Fix function.
	(spam-group-processor-multiple-p)
	(spam-group-spam-processor-report-gmane-p)
	(spam-group-spam-processor-report-resend-p)
	(spam-group-spam-processor-bogofilter-p)
	(spam-group-spam-processor-blacklist-p)
	(spam-group-spam-processor-ifile-p)
	(spam-group-ham-processor-ifile-p)
	(spam-group-spam-processor-spamoracle-p)
	(spam-group-spam-processor-crm114-p)
	(spam-group-ham-processor-bogofilter-p)
	(spam-group-spam-processor-stat-p)
	(spam-group-ham-processor-stat-p)
	(spam-group-ham-processor-whitelist-p)
	(spam-group-ham-processor-BBDB-p)
	(spam-group-ham-processor-spamoracle-p)
	(spam-group-ham-processor-copy-p): Remove functions with some
	prejudice against unneeded code.
	(spam-report-articles-resend)
	(spam-report-resend-register-routine): Allow the group/topic
	spam-resend-to value to override spam-report-resend-to.
	(spam-summary-prepare-exit): Invoke spam-group-processor-p
	properly now.

	* gnus.el (spam-resend-to): Add group/topic parameter.
	(spam-process): Move the OBSOLETE processors to the end of the
	choices.

2004-05-24  Daniel Pittman  <daniel@rimspace.net>

	* spam-report.el (spam-report-resend-to, spam-report-resend): Start
	with resend-to set to nil, and then ask the user if necessary.
	(spam-report-resend): spam-report-resend takes a list of articles, not
	separate article numbers.

2004-05-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-text-html-renderer): Make sure w3m exists in
	addition to emacs-w3m.

2004-05-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* assistant.el (assistant-authinfo-data): New function.
	(assistant-eval): Eval for entire assistant.

	* netrc.el (netrc-services-file): New variable.
	(netrc-parse-services): New function.
	(netrc-find-service-name): New function.
	(netrc-find-service-number): New function.
	(netrc-port-equal): New function.
	(netrc-machine): Use it.

	* nnimap.el (nnimap-open-connection): Use netrc.

	* gnus-util.el (gnus-netrc-get): Remove aliases.

	* gnus-sum.el (gnus-auto-center-summary): Change default to 2.

	* assistant.el (wid-edit): Fix compilation.

	* gnus-util.el (gnus-set-file-modes): Just ignore errors.

2004-05-23  Paul Stodghill  <stodghil@cs.cornell.edu>

	* gnus-util.el (gnus-set-file-modes): New function.  (small
	patch).

2004-05-23  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-topic.el (gnus-topic-jump-to-topic): Goto missing topic.

	* assistant.el (assistant-render-node): Fix up rendering and
	read-only text.
	(assistant-render-node): Reset.
	(assistant-make-read-only): Not sticky.

2004-05-20  Danny Siu  <dsiu@adobe.com>

	* gnus-sum.el (gnus-summary-recenter): Summery buffer was not auto
	centered even when gnus-auto-center-summary is t

2004-05-22  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* dns.el (dns-get-txt-answer): New function.
	(dns-read-txt): Ditto.
	(query-dns): Use it.

2004-05-21  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Don't invalidate
	active for foreign groups even if the group level is higher than
	the specified value.

2004-05-21  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-group-jump-to-group): Don't prompt for
	non-active groups.

	* gnus-art.el (gnus-picon-databases): Add /usr/share/picons.

2004-05-20  Magnus Henoch  <mange@freemail.hu>

	* dns.el (dns-read-type): Add support for SVR.  (small patch)

2004-05-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-crm114, spam-crm114, spam-crm114-program)
	(spam-crm114-header, spam-crm114-spam-switch)
	(spam-crm114-spam-strong-switch, spam-crm114-ham-strong-switch)
	(spam-crm114-positive-spam-header)
	(spam-crm114-database-directory, spam-list-of-processors)
	(spam-group-spam-processor-crm114-p)
	(spam-group-ham-processor-crm114-p, spam-extra-header-to-number)
	(spam-generic-score, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-crm114-headers, spam-crm114-score)
	(spam-check-crm114, spam-crm114-register-with-crm114)
	(spam-crm114-register-spam-routine)
	(spam-crm114-unregister-spam-routine)
	(spam-crm114-register-ham-routine)
	(spam-crm114-unregister-ham-routine): Add CRM114 support.  From
	asjo@koldfront.dk (Adam Sjøgren).

	* gnus.el: Add spam-use-crm114.

	* spam.el (spam-list-of-processors, spam-registration-functions):
	Add spam-use-resend.
	(spam-group-spam-processor-report-resend-p): Add utility wrapper.
	(spam-report-articles-gmane): Add doc fix.
	(spam-report-articles-resend, spam-report-resend-register-routine):
	Add wrappers around spam-report-resend-to.

	* spam-report.el (spam-report-resend-to, spam-report-resend):
	Add support for resending spam.
	(spam-report-gmane): Fix line length >80.

	* gnus.el (spam-process): Add spam-use-resend.

2004-05-20  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-mark-spam-as-expired-and-move-routine): Return the
	number of processed spam messages.
	(spam-ham-copy-or-move-routine): Return the number of processed
	ham messages.
	(spam-summary-prepare-exit): Use the above values to decide
	whether status messages shouled be displayed.

2004-05-20  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encode-function-alist): Renamed from
	`rfc2047-encoding-function-alist' in order to avoid conflicting
	with the old version.
	(rfc2047-encode-region): Concatenate words containing non-ASCII
	characters in structured fields; don't encode space-delimited
	ASCII words even in unstructured fields; don't break words at
	char-category boundaries.
	(rfc2047-encode-1): New function.
	(rfc2047-encode): Use it; encode text so that it occupies the
	maximum width within 76-column; work correctly on Q encoding for
	iso-2022-* charsets.
	(rfc2047-fold-region): Use existing whitespace for LWSP; make it
	sure not to break a line just after the header name.
	(rfc2047-b-encode-region): Removed.
	(rfc2047-b-encode-string): New function.
	(rfc2047-q-encode-region): Removed.
	(rfc2047-q-encode-string): New function.

	* mm-util.el (mm-replace-in-string): New function.

2004-05-20  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Really
	get it right.
	(gnus-inews-make-draft): Really.

2004-05-19  Ben Menasha  <bmenasha@benmenasha.net>

	* nnmh.el (nnmh-request-list-1): Don't check the link count
	before descending.  (small patch)

2004-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-make-draft-meta-information): Fix quote
	stuff.

	* gnus-start.el (gnus-subscribe-hierarchical-interactive): Match
	on real group name.

	* gnus-art.el (gnus-signature-limit): Doc fix.

	* gnus-msg.el (gnus-inews-make-draft): Quote list.

	* pgg-pgp.el (pgg-pgp-verify-region): Clean up.

2004-05-19  Michael Schierl  <schierlm-usenet@gmx.de>  (tiny change)

	* pgg-pgp.el (pgg-pgp-verify-region): Default when signature
	isn't a string.

2004-05-19  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-draft.el (gnus-draft-send): Bind
	rfc2047-encode-encoded-words.

	* rfc2047.el (rfc2047-encode-region): Encode =? strings.
	(rfc2047-encodable-p): Say that =? needs encoding.
	(rfc2047-encode-encoded-words): New variable.

	* gnus-group.el (gnus-group-select-group): Doc fix.

	* gnus-draft.el (gnus-draft-setup): Mark all replied as replied.

	* gnus-group.el (gnus-group-mode): Set show-trailing-whitespace
	to nil.

	* gnus-cache.el (gnus-cache-possibly-enter-article): Use it.

	* nnheader.el (nnheader-get-lines-and-char): New function.

2004-05-19  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-msg.el (gnus-summary-followup-with-original): Document
	yanking of region when active.

2004-05-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-start.el (gnus-get-unread-articles): Do nothing for foreign
	groups if the group level is higher than the specified value.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-group.el (gnus-group-jump-to-group-prompt): Allow an alist.
	(gnus-group-jump-to-group): Added prefix argument using
	`gnus-group-jump-to-group-prompt'.  Query before jumping to
	non-active group.

	* compface.el (uncompface): Be verbose when changing
	`uncompface-use-external'.

	* gnus-art.el (gnus-button-handle-man, gnus-button-alist): Try to
	handle manual section.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-art.el (gnus-button-alist): Revert previous change.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* message.el (message-idna-to-ascii-rhs-1): Fix typo.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-msg.el (gnus-inews-do-gcc): Don't use read-only-p to see
	whether backend can accept message.

	* message.el (message-idna-to-ascii-rhs-1): Don't use equalp.

2004-05-18  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* nntp.el (nntp-request-set-mark, nntp-request-update-info):
	Avoid creating directory when nntp-marks-is-evil is true.
	Reported by Reiner Steib.

2004-05-18  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-picon.el (gnus-picon-style): New variable.
	(gnus-picon-insert-glyph): Added optional `nostring' argument.
	(gnus-picon-transform-address): Support `gnus-picon-style'.  From
	Jesper Harder <harder@ifa.au.dk>.

2004-05-18  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-fill-field): Return point.
	(message-generate-headers): Go to end of field.

	* gnus-start.el (gnus-get-unread-articles-in-group): Don't do
	stuff for non-living groups.

2004-05-18  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-article-followup-with-original)
	(gnus-article-reply-with-original): gnus-mark-active-p ->
	gnus-region-active-p.

2004-05-17  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Fix messages, so they show
	only when there is spam or ham to be processed.

2004-05-17  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mail-source.el (mail-source-delete-crash-box): Refactor.
	(mail-source-fetch): Use it.
	(mail-source-fetch-file): Ditto.
	(mail-source-fetch-directory): Run postscript in loop.
	(mail-source-fetch-pop): Delete.
	(mail-source-fetch-maildir): Ditto.
	(mail-source-fetch-imap): Ditto.

	* imap.el (imap-authenticators): Comment out sasl.

	* message.el (message-skip-to-next-address): New function.
	(message-fill-header-address): Refactor.
	(message-fill-address): Use it.
	(message-delete-address): Use it.
	(message-fill-header-general): Refactor.
	(message-fill-field-address): Rename.
	(message-narrow-to-field): Find the start of the header.
	(message-header-format-alist): Don't pre-fill.
	(message-fill-header): Removed.
	(message-insert-header): New function.
	(message-shorten-references): Use it.

	* rfc2047.el (rfc2047-field-value): Strip props.

	* mail-parse.el (mail-header-make-address): New alias.

	* ietf-drums.el (ietf-drums-make-address): New function.

	* imap.el: Add compiler directives.

	* gnus-score.el (gnus-score-edit-done): run-hook->run-hooks.

	* gnus-art.el (article-decode-idna-rhs): Don't use
	message-idna-inside-rhs-p.

2004-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* message.el (message-idna-inside-rhs-p): Removed.
	(message-idna-to-ascii-rhs-1): Use proper address parsing.

	* gnus-art.el (gnus-emphasis-alist): Removed strikethru; too many
	false positives.

2004-05-16  Kim-Minh Kaplan  <kmkaplan-AwwS6Bc0PDVoiYX5Tdu9fQ@public.gmane.org>

	* imap.el (imap-sasl-make-mechanisms): Use sasl.

2004-05-16  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* nneething.el (nneething-file-name): Don't create spurious
	files.

	* gnus-msg.el (gnus-inews-do-gcc): Ignore read-only groups.
	(gnus-inews-do-gcc): Remove sleep.

	* gnus-art.el (gnus-mime-delete-part): Error message when no MIME
	part under point.

	* gnus-agent.el (gnus-agent-synchronize-flags): Default to nil.
	(gnus-agent-regenerate-group): Using nil messages aren't valid.

2004-05-15  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Fixed (length).

2004-05-14  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Fix to produce "marking spam
	as expired without moving it" message when there are spam
	messages left.

2004-05-14  Nelson Ferreira  <nelson.ferreira@verizon.net>  (tiny change)

	* gnus-dup.el (gnus-dup-unsuppress-article): Don't assume the mail
	header is not nil.

2004-05-14  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* nntp.el (nntp-request-set-mark, nntp-request-update-info): Call
	nntp-possibly-create-directory, not nntp-possibly-change-group.
	(nntp-marks-changed-p): New arg SERVER.
	(nntp-request-update-info): Adjust caller.

2004-05-14  Kai Grossjohann  <kai@emptydomain.de>

	* nntp.el (nntp-save-marks): Pass missing arg.

2004-05-13  Kai Grossjohann  <kai.grossjohann@gmx.net>

	* nntp.el: Support marks.
	(nntp-marks-is-evil, nntp-marks-file-name, nntp-marks)
	(nntp-marks-modtime, nntp-marks-directory): New variables.
	(nntp-request-set-mark, nntp-request-update-info)
	(nntp-possibly-create-directory, nntp-marks-changed-p)
	(nntp-save-marks, nntp-open-marks, nntp-marks-directory): New
	functions.

2004-05-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-xmas.el (gnus-xmas-select-lowest-window)
	(gnus-xmas-redefine): Rename.

	* gnus-score.el (gnus-score-insert-help): Use
	gnus-select-lowest-window.

	* gnus-ems.el (gnus-select-lowest-window): Copy definition of
	appt-select-lowest-window and rename to gnus-select-lowest-window.

	* gnus.el: do.

2004-05-12  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* rfc2047.el (rfc2047-encode): Use uppercase letters to specify
	encodings of MIME-encoded words, in order to improve
	interoperability with several broken MUAs.

2004-05-07  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* mm-view.el (mm-inline-text-html-render-with-w3): Check META
	tags, only when charsets are not specified in headers.
	(mm-inline-text-html-render-with-w3m): Ditto.

	* lpath.el: Remove `w3m-meta-content-type-charset-regexp' and
	`w3m-charset-to-coding-system'.  Add `w3m-detect-meta-charset'.

2004-05-06  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus-art.el (article-strip-banner): Use MIME-encoded from fields
	instead of MIME-decoded from fields when checking
	`gnus-article-address-banner-alist'.

2004-05-03  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-check-group, nnrss-read-group-data): Hash on
	description rather than subject.

2004-05-02  Steve Youngs  <steve@youngs.au.com>

	* dgnushack.el: Autoload `mail-fetch-field' for XEmacs.

2004-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump.

2004-05-01  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.2 is released.

2004-05-01  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-agent.el (gnus-agent-read-agentview): Inline
	gnus-uncompress-range.

2004-05-01  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* spam.el (spam-bsfilter-path): Use `executable-find' instead of
	`exec-installed-p'.

2004-04-30  TSUCHIYA Masatoshi  <tsuchiya@namazu.org>

	* gnus.el (spam-process, spam-autodetect-methods): Add
	bsfilter and bsfilter-headers.

	* spam.el (spam-bsfilter): New customize group.
	(spam-use-bsfilter, spam-use-bsfilter-headers, spam-bsfilter-path)
	(spam-bsfilter-header, spam-bsfilter-probability-header)
	(spam-bsfilter-spam-switch, spam-bsfilter-ham-switch)
	(spam-bsfilter-spam-strong-switch, spam-bsfilter-ham-strong-switch)
	(spam-bsfilter-database-directory): New options.
	(spam-install-hooks, spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions):
	Add `spam-use-bsfilter' and `spam-use-bsfilter-headers'.
	(spam-bsfilter-score): New command.
	(spam-check-bsfilter-headers, spam-check-bsfilter)
	(spam-bsfilter-register-with-bsfilter)
	(spam-bsfilter-register-spam-routine)
	(spam-bsfilter-unregister-spam-routine)
	(spam-bsfilter-register-ham-routine)
	(spam-bsfilter-unregister-ham-routine): New functions.
	(spam-generic-score): Support bsfilter; Accept an optional argument
	to recalcurate spam score even if scoring header has already been
	added.
	(spam-bogofilter-score, spam-spamassassin-score): Accept an
	optional argument to recalcurate spam score even if scoring header
	has already been added.

2004-04-29  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-get-namespace-prefix): Use string= to compare
	strings!  Reported by David D. Smith <davidsmith@acm.org>.
	(nnrss-check-group, nnrss-read-group-data): Hash on Subject if
	link is missing.

2004-04-28  Jesper Harder  <harder@ifa.au.dk>

	* html2text.el (html2text-replace-list): Add &amp; and &apos;.
	(html2text-get-attr): Rewrite.

	* message.el (message-setup-1): Remove redundant put-text-property
	on mail-header-separator.

2004-04-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-whitespace)
	(gnus-registry-action, gnus-registry-spool-action)
	(gnus-registry-split-fancy-with-parent): Change message levels
	from 5 to 3 or 7, as needed.

	* spam.el (spam-summary-prepare-exit)
	(spam-mark-junk-as-spam-routine, spam-fetch-field-fast)
	(spam-split, spam-find-spam, spam-log-undo-registration)
	(spam-check-blackholes, spam-enter-ham-BBDB): Changed message
	level from 5 to 6.

2004-04-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-ems.el: Autoload appt-select-lowest-window (revert
	2004-03-04 change).

2004-04-25  Jesper Harder  <harder@ifa.au.dk>

	* sieve-manage.el (sieve-manage-open):
	* nnweb.el (nnweb-insert-html):
	* nnvirtual.el (nnvirtual-catchup-group, nnvirtual-partition-sequence)
	(nnvirtual-partition-sequence, nnvirtual-create-mapping):
	* nnspool.el (nnspool-request-group):
	* nnrss.el (nnrss-opml-export, nnrss-find-el, nnrss-order-hrefs):
	* nnml.el (nnml-request-update-info):
	* nnmh.el (nnmh-request-group, nnmh-request-list-1, nnmh-active-number)
	(nnmh-request-create-group, nnmh-update-gnus-unreads):
	* nnimap.el (nnimap-request-close, nnimap-acl-edit)
	(nnimap-request-set-mark):
	* nnfolder.el (nnfolder-request-update-info):
	* mm-view.el (mm-pkcs7-signed-magic, mm-pkcs7-enveloped-magic):
	* mml.el (mml-destroy-buffers, mml-compute-boundary-1):
	* gnus-uu.el (gnus-uu-find-articles-matching):
	* gnus-topic.el (gnus-topic-check-topology, gnus-topic-remove-group):
	* gnus-sum.el (gnus-summary-fetch-faq, gnus-read-move-group-name):
	* gnus-score.el (gnus-score-load-file, gnus-sort-score-files):
	* gnus-nocem.el (gnus-nocem-scan-groups):
	* gnus-int.el (gnus-start-news-server):
	* gnus-group.el (gnus-group-make-kiboze-group)
	(gnus-group-browse-foreign-server):
	* spam-stat.el (spam-stat-score-buffer): Simplify mapcar usage.
	Use mapc when appropriate.

2004-04-22  Teodor Zlatanov  <tzz@lifelogs.com>

	FIXME: Make separate entries for each person.

	From Dan Christensen <jdc@uwo.ca>, asjo@koldfront.dk (Adam
	Sjøgren), Wes Hardaker <wes@hardakers.net>, and Michael Shields
	<shields@msrl.com>:

	* spam.el (spam-necessary-extra-headers): Get the extra headers we
	may need for spam sorting and scoring.
	(spam-user-format-function-S): Add user format function suitable for
	general use.
	(spam-article-sort-by-spam-status): Add sorting function for summary
	sorting.
	(spam-extra-header-to-number): Add function to get a score from a
	header.
	(spam-summary-score): Add function to  get a numeric score from the
	headers.
	(spam-generic-score): Fix function doc, was in wrong place.
	(spam-initialize): Take symbols when it's run, and install the
	extra headers that spam-necessary-extra-headers thinks we need.

2004-04-21  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Add logic and message fix.
	Reported by bojohan+news@dd.chalmers.se (Johan Bockgård).

2004-04-17  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-set-global-variables)
	(gnus-build-all-threads, gnus-get-newsgroup-headers)
	(gnus-article-get-xrefs, gnus-summary-best-group)
	(gnus-summary-next-article, gnus-summary-enter-digest-group)
	(gnus-summary-set-bookmark, gnus-offer-save-summaries)
	(gnus-summary-update-info, gnus-kill-or-deaden-summary):
	Use with-current-buffer.

2004-04-16  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Simplify logic.
	(spam-fetch-article-header): Read the article header if it's not
	available.
	(spam-list-articles): Simplify logic.
	(spam-filelist-register-routine): Fix bug with unregister-list.

	* gnus-registry.el: Fix comments at beginning.

2004-04-16  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cater-to-broken-inn): Remove.
	(message-shorten-references): Make sure the total folded length of
	References is shorter than 998 characters to cater to a bug in INN
	2.3.  Also, don't pretend that references aren't folded -- this
	hasn't worked for a while.

2004-04-15  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agentize):
	gnus-agent-send-mail-real-function no longer set to current value
	of message-send-mail-function but rather a lambda that calls
	message-send-mail-function.  The change makes the agent real-time
	responsive to user changes to message-send-mail-function.

2004-04-15  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* legacy-gnus-agent.el
	(gnus-agent-convert-to-compressed-agentview): Fixed typos with
	help from Florian Weimer <fw@deneb.enyo.de>

2004-04-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-cache-insert): Revert last change.

2004-04-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nnmail.el (nnmail-cache-insert): Always check whether
	nnmail-cache-ignore-groups matches a group name.

2004-04-13  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-generate-fake-headers)
	(spam-find-spam, spam-log-processing-to-registry)
	(spam-log-registered-p, spam-log-unregistration-needed-p)
	(spam-log-undo-registration): Use gnus-message instead of
	gnus-error, none of these errors are fatal.

	* gnus-registry.el (gnus-registry-clean-empty-function)
	(gnus-registry-clean-empty): Remove only empty entries without
	extra data.

2004-04-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam-stat.el (spam-stat-buffer-change-to-spam)
	(spam-stat-buffer-change-to-non-spam): Change (error) to
	(gnus-message 8) invocation.

2004-04-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nntp.el (nntp-via-netcat-command): New variable.
	(nntp-via-netcat-switches): New variable.
	(nntp-open-via-rlogin-and-netcat): New function.
	(nntp-open-connection-function): Doc fix.
	(nntp-telnet-command): Doc fix.
	(nntp-end-of-line): Doc fix.
	(nntp-via-rlogin-command): Doc fix.
	(nntp-via-user-name): Doc fix.
	(nntp-via-address): Doc fix.

2004-04-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mml2015.el (mml2015-use): Avoid the "Recursive load suspected"
	error in Emacs 21.1.

2004-04-08  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-start.el (gnus-get-unread-articles): Fix last commit.

2004-04-07  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-total-fetched-hashtb): New variable.
	(gnus-agent-with-refreshed-group): New macro.
	(gnus-agent-rename-group): New function.
	(gnus-agent-delete-group): New function.
	(gnus-agent-save-group-info): Use gnus-command-method when
	`method' parameter is nil.  Don't write nil entries into the
	active file.
	(gnus-agent-get-group-info): New function.
	(gnus-agent-fetch-articles): Use
	gnus-agent-update-files-total-fetched-for to increment disk space
	used.
	(gnus-agent-fetch-headers, gnus-agent-save-alist): Use
	gnus-agent-update-view-total-fetched-for to increment disk space
	used.
	(gnus-agent-get-local): Added optional parameters to avoid calling
	gnus-group-real-name and gnus-find-method-for-group.
	(gnus-agent-set-local): Delete stored entry if either min, or max,
	are nil.
	(gnus-agent-fetch-session): Reworded error/quit messages.  On
	quit, use gnus-agent-regenerate-group to record existance of any
	articles fetched to disk before the quit occurred.
	(gnus-agent-expire-group-1): Use gnus-agent-with-refreshed-group,
	gnus-agent-update-view-total-fetched-for, and
	gnus-agent-update-files-total-fetched-for to decrement disk space
	used.
	(gnus-agent-retrieve-headers): Use
	gnus-agent-update-view-total-fetched-for to increment disk space
	used.
	(gnus-agent-regenerate-group): Replace gnus-group-update-group
	with gnus-agent-update-files-total-fetched-for to decrement disk
	space and fresh group buffer.
	(gnus-agent-inhibit-update-total-fetched-for): New variable.
	(gnus-agent-need-update-total-fetched-for): New variable.
	(gnus-agent-update-files-total-fetched-for): New function.
	(gnus-agent-update-view-total-fetched-for): New function.
	(gnus-agent-total-fetched-for): New function.

	* gnus-cache.el (gnus-cache-save-buffers): Use
	gnus-cache-update-overview-total-fetched-for to change disk space
	used by this group.
	(gnus-cache-possibly-enter-article): Use
	gnus-cache-update-file-total-fetched-for to increment disk space
	used by this group.
	(gnus-cache-possibly-remove-article): Use
	gnus-cache-update-file-total-fetched-for to decrement disk space
	used by this group.
	(gnus-cache-generate-nov-databases): Purge total fetched cache.
	(gnus-cache-rename-group): New function.
	(gnus-cache-delete-group): New function.
	(gnus-cache-inhibit-update-total-fetched-for): New variable.
	(gnus-cache-need-update-total-fetched-for): New variable.
	(gnus-cache-with-refreshed-group): New macro.
	(gnus-cache-update-file-total-fetched-for): New function.
	(gnus-cache-update-overview-total-fetched-for): New function.
	(gnus-cache-rename-group-total-fetched-for): New function.
	(gnus-cache-delete-group-total-fetched-for): New function.
	(gnus-cache-total-fetched-for): New function.

	* gnus-group.el: Require gnus-sum and autoload functions to
	resolve warnings when gnus-group.el compiled alone.
	(gnus-group-line-format): Documented new %F
	(size of Fetched data) group line format; identifies disk space
	used by agent and cache.
	(gnus-group-line-format-alist): Defined new F format.
	(gnus-total-fetched-for): New function.
	(gnus-group-delete-group): No longer update
	gnus-cache-active-altered as gnus-request-delete-group now keeps
	the cache in sync.
	(gnus-group-list-active): Let the agent store a server's active
	list if currently plugged.

	* gnus-int.el (gnus-request-delete-group):
	Use gnus-cache-delete-group and gnus-agent-delete-group to keep the
	local disk in sync with the server.
	(gnus-request-rename-group):
	Use gnus-cache-rename-group and gnus-agent-rename-group to keep the
	local disk in sync with the server.

	* gnus-start.el (gnus-get-unread-articles):
	Cosmetic simplification to logic.

	* gnus-util.el (gnus-rename-file): New function.

2004-04-07  Christian Neukirchen  <chneukirchen@yahoo.de>  (tiny change)

	* mm-util.el (mm-image-load-path): Handle nil in load-path.

2004-04-07  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-encoded-word-regexp): Remove unnecessary
	'+'.  Reported by Stefan Wiens <s.wi@gmx.net>.

2004-04-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-cache.el (gnus-cache-save-buffers): Check if buffer is
	alive.  Reported by Laurent Martelli <laurent@aopsys.com>.

2004-04-03  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-getenv-nntpserver): Strip whitespace.

2004-04-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-set-difference): Add function to replace
	gnus-set-difference in spam.el.
	(spam-summary-prepare-exit): Use spam-set-difference.

2004-03-29  Teodor Zlatanov  <tzz@lifelogs.com>

	* gnus-registry.el (gnus-registry-cache-file): Update to use
	gnus-dribble-directory OR gnus-home-directory OR ~.
	(gnus-registry-split-fancy-with-parent): Fix doc.

2004-03-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-exchange-point-and-mark): Use
	message-mark-active-p.  Suggested by Jesper Harder
	<harder@ifa.au.dk>.

2004-03-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-exchange-point-and-mark): Don't activate
	region if it was inactive.  Suggested by Hiroshi Fujishima
	<pooh@nature.tsukuba.ac.jp>.

2004-03-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (article-display-face): Display Faces in the same
	order as X-Faces.

2004-03-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* nndoc.el (nndoc-forward-type-p): Recognize envelope From_.

2004-03-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-recompute-hierarchical-structure): Remove.
	(gnus-mime-multipart-functions): Revert 2004-03-19 change.
	(gnus-article-mime-hierarchy): Remove.
	(gnus-article-mime-hierarchy-next): Remove.
	(gnus-article-mode): Revert 2004-03-19 change.
	(gnus-article-setup-buffer): Revert 2004-03-19 change.
	(gnus-insert-mime-button): Revert 2004-03-19 change.
	(gnus-mime-accumulate-hierarchy): Remove.
	(gnus-mime-enter-multipart): Remove.
	(gnus-mime-leave-multipart): Remove.
	(gnus-mime-display-part): Revert 2004-03-19 change.
	(gnus-mime-display-alternative): Revert 2004-03-19 change.

	* mml.el (mml-preview): Revert 2004-03-19 change.

2004-03-18  Helmut Waitzmann  <Helmut.Waitzmann@web.de>  (tiny change)

	* gnus-sum.el (gnus-newsgroup-variables): Doc fix.

2004-03-22  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-save-part): Bind enable-multibyte-characters to
	t while entering a file name using the mm-with-multibyte macro.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

	* mm-util.el (mm-with-multibyte): New macro.

2004-03-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-mime-recompute-hierarchical-structure): New
	user option.
	(gnus-mime-multipart-functions): Doc and customization fix.
	(gnus-article-mime-hierarchy): New variable.
	(gnus-article-mime-hierarchy-next): New variable.
	(gnus-article-mode): Make gnus-article-mime-hierarchy buffer-local.
	(gnus-article-setup-buffer): Set gnus-article-mime-hierarchy and
	gnus-article-mime-hierarchy-next to nil.
	(gnus-insert-mime-button): Show hierarchy numbers.
	(gnus-mime-accumulate-hierarchy): New function.
	(gnus-mime-enter-multipart): New function.
	(gnus-mime-leave-multipart): New function.
	(gnus-mime-display-part): Recompute hierarchical MIME structure.
	(gnus-mime-display-alternative): Show hierarchy numbers.

	* mml.el (mml-preview): Set gnus-article-mime-hierarchy and
	gnus-article-mime-hierarchy-next to nil.

2004-03-19  Steve Youngs  <sryoungs@bigpond.net.au>

	* dns.el: Don't require gnus-xmas.

2004-03-17  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-generate-mime-1): Don't use format=flowed with
	inline PGP.
	(mml-menu): Disable mml-quote-region if mark is inactive.

2004-03-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-regenerate-group): Activate the group
	when the group's active is not available.

2004-03-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-agent.el (gnus-agent-read-agentview): Add a missing arg to
	error.

2004-03-12  Reiner Steib  <Reiner.Steib@gmx.de>

	* imap.el (imap-store-password): New variable.
	(imap-interactive-login): Use it.
	Suggested by Mark Plaksin <happy@mcplaksin.org>.

2004-03-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-read-summary-keys): Restore new
	window-start and hscroll to summary window.

2004-03-12  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-start.el (gnus-convert-old-newsrc): Only write the
	conversion message to newsrc-dribble when an actual conversion is
	performed.

2004-03-10  Malcolm Purvis  <malcolmpurvis@optushome.com.au>  (tiny change)

	* spam-stat.el (spam-stat-coding-system): Use mm-coding-system-p.

2004-03-10  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-complicated-handles): New function reviving
	former definition of mm-multiple-handles.

	* gnus-art.el (gnus-mime-save-part-and-strip): Use it.
	(gnus-mime-delete-part): Use it.

2004-03-09  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-read-local): Bind
	nnheader-file-coding-system to gnus-agent-file-coding-system to
	avoid the implicit assumption that they will always be equal.
	(gnus-agent-save-local): Bind buffer-file-coding-system, not
	coding-system-for-write, as the with-temp-file macro first prints
	to a buffer then saves the buffer.

2004-03-09  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-edit-part): New function.
	(gnus-mime-save-part-and-strip): Use it; do query instead of
	signaling an error; don't use mm-multiple-handles.
	(gnus-mime-delete-part): Ditto.

2004-03-08  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-read-agentview): Removed support for
	old file versions.
	(gnus-group-prepare-hook): Removed function that converted list
	form of gnus-agent-expire-days to group properties.

	* gnus-int.el: Autoload gnus-agent-regenerate-group.
	(gnus-request-accept-article): Re-indented.

	* gnus-start.el (gnus-convert-old-newsrc): Registered new
	converters to handle old agent file formats.  Added logic for a
	"backup before upgrading warning".
	(gnus-convert-mark-converter-prompt): Developers can mark
	functions as needing (default), or not needing,
	gnus-convert-old-newsrc's "backup before upgrading warning".
	(gnus-convert-converter-needs-prompt): Tests whether the user
	should be protected from potentially irreversable changes by the
	function.

	* legacy-gnus-agent.el: New.  Provides converters that are only
	loaded when gnus-convert-old-newsrc needs to call them.

2004-03-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mail-source.el (mail-source-touch-pop): Doc fix.

	* message.el (message-smtpmail-send-it): Doc fix.

2004-03-05  Jesper Harder  <harder@ifa.au.dk>

	* sha1-el.el (sha1-maximum-internal-length): Doc fix.

	* nnmail.el (nnmail-split-fancy): do.

	* gnus-kill.el (gnus-kill, gnus-execute): do.

2004-03-05  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-sum.el (gnus-widget-reversible-match)
	(gnus-widget-reversible-to-internal)
	(gnus-widget-reversible-to-external): New functions.
	(gnus-widget-reversible): New widget.
	(gnus-article-sort-functions, gnus-thread-sort-functions): Use it.

2004-03-05  Kai Grossjohann  <kgrossjo@eu.uu.net>

	* gnus-sum.el (gnus-thread-sort-functions)
	(gnus-article-sort-functions): Document `(not F)' items.

2004-03-04  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-use-gmane-xref): Add new backend.
	(spam-gmane-xref-spam-group): Add variable to control the name of the
	Gmane spam group.
	(spam-blackhole-servers, spam-blackhole-good-server-regex)
	(spam-regex-headers-spam, spam-regex-headers-ham)
	(spam-regex-body-spam, spam-regex-body-ham): Clarify docs.
	(spam-list-of-checks): Add spam-use-gmane-xref to list of
	backends and checks.
	(spam-check-gmane-xref): Add function for spam-use-gmane-xref.

	* gnus.el (spam-autodetect-methods): Add spam-use-gmane-xref as
	an autodetect method.

2004-03-04  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-int.el (gnus-request-accept-article): Inform the agent that
	articles are being added to a group.
	(gnus-request-replace-article): Inform the agent that articles
	need to be uncached as the cached contents are no longer valid.

2004-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* binhex.el: Don't autoload executable-find.

	* canlock.el: Don't autoload mail-fetch-field.

	* dgnushack.el: Autoload c-mode for XEmacs.

	* gnus-ems.el: Don't autoload appt-select-lowest-window.

	* gnus-msg.el: Don't autoload news-reply-mode, news-setup,
	rmail-dont-reply-to and rmail-output.

	* gnus-score.el: Don't autoload ffap-string-at-point.

	* gnus-setup.el: Don't autoload sc-cite-original.

	* imap.el: Don't autoload base64-decode-string,
	base64-encode-string and md5.

	* message.el: Autoload rmail-dont-reply-to, rmail-msg-is-pruned
	and rmail-msg-restore-non-pruned-header.

	* mm-decode.el: Don't autoload executable-find.

	* mm-url.el: Don't autoload executable-find.

	* mm-view.el: Don't autoload diff-mode.

	* nndb.el: Don't autoload news-reply-mode, news-setup,
	cancel-timer and telnet.

	* password.el: Don't autoload run-at-time for Emacs.

	* sha1-el.el: Don't autoload executable-find.

	* sieve-mode.el: Don't autoload c-mode.

	* uudecode.el: Don't autoload executable-find.

2004-03-04  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-file-header-cache): Removed.
	(gnus-agent-possibly-alter-active): Avoid null in numeric
	comparison.
	(gnus-agent-set-local): Refuse to save null in local object table.
	(gnus-agent-regenerate-group): The REREAD parameter can now be a
	list of articles that will be marked as unread.

2004-03-04  Katsumi Yamaoka  <yamaoka@jpl.org>

	* rfc2047.el (rfc2047-encoded-word-regexp): Mismatched paren.

2004-03-04  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-encoded-word-regexp): Support RFC 2231
	language tags.

2004-03-03  Per Abrahamsen  <abraham@dina.kvl.dk>

	* gnus-agent.el (gnus-agent-read-local, gnus-agent-save-local):
	Don't bind "obarray".

	* gnus-sum.el (gnus-thread-sort-functions): Added
	`gnus-thread-sort-by-most-recent-number' and
	`gnus-thread-sort-by-most-recent-date'.
	Reported by Kai Grossjohann <kai@emptydomain.de>.

2004-03-03  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-cus.el (gnus-agent-customize-category): Mismatched paren.

2004-03-02  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-cus.el (gnus-agent-customize-category): Removed
	ignore-errors macro reference that required cl to be loaded at
	run-time.

	* gnus-range.el (gnus-sorted-range-intersection): Now accepts
	single-interval range of the form (min . max).  Previously the
	range had to look like ((min . max)).  Likewise, return
	(min . max) rather than ((min . max)).
	(gnus-range-map): Use gnus-range-normalize to accept
	single-interval range.

	* gnus-sum.el (gnus-summary-highlight-line): Articles stored in
	the cache, but not the agent, now appear with their usual face.

	* dgnushack.el (loaddir): New variable that is bound to the
	directory containing the dgnushack.el file. Use loaddir, rather
	than srcdir, to update load-path. Change lets dgnushack compile
	code in directories other than GNUS/lisp.

2004-03-01  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Don't bind w3m-safe-url-regexp.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't make the
	w3m-safe-url-regexp variable buffer-local.

	* mm-view.el (mm-inline-text-html-render-with-w3m): Ditto.

2004-02-27  Simon Josefsson  <jas@extundo.com>

	* gnus-sum.el (gnus-move-group-prefix-function): Add, default to
	gnus-group-real-prefix.
	(gnus-summary-move-article): Use it, instead of
	gnus-group-real-prefix.

2004-02-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* lpath.el: Bind w3m-safe-url-regexp.

	* gnus-art.el (gnus-article-wash-html-with-w3m): Make the
	w3m-safe-url-regexp variable buffer-local and set it as the value
	of mm-w3m-safe-url-regexp.

	* mm-view.el (mm-inline-text-html-render-with-w3m): Ditto.

	* gnus-msg.el (gnus-setup-message): Ignore an article copy while
	parsing gnus-posting-styles when the message is not for replying.

	* dgnushack.el: Autoload sgml-mode for XEmacs.

	* nnrss.el (nnrss-opml-export): Use
	mm-set-buffer-file-coding-system instead of
	set-buffer-file-coding-system.

2004-02-27  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el: Pedantic docstring and whitespace fixes (courtesy
	of checkdoc.el).
	* nnrss.el: do.
	* gnus-mlspl.el: do.
	* gnus-ml.el: do.
	* gnus-srvr.el: do.

	* nnrss.el (nnrss-opml-export): Turn on sgml-mode.

2004-02-27  Kevin Ryde  <user42@zip.com.au>  (tiny change)

	* gnus.el (gnus-group, gnus-summary, gnus-summary-sort):
	Corrections to custom-manual links.

	* gnus-art.el (gnus-article): Ditto.

	* mm-decode.el (mime-display, mime-security): Ditto.

2004-02-26  Jesper Harder  <harder@ifa.au.dk>

	* flow-fill.el: Typo.

2004-02-26  Andrew Cohen  <cohen@andy.bu.edu>

	* spam-wash.el: New file.

2004-02-26  Mark A. Hershberger  <mah@everybody.org>

	* nnrss.el (nnrss-opml-import, nnrss-opml-export): New functions.

2004-02-26  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-summary-prepare-exit): Fix gnus-set-difference: needs
	to be run with new-articles as LIST1, not LIST2.
	(spam-registration-functions): Add spam-use-ham-copy as a nil
	registration backend.

2004-02-26  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-washing-hook): New option.
	(spam-stat-buffer-words): Use it.
	(spam-stat-process-directory, spam-stat-test-directory): Use
	insert-file-contents-literally.
	(spam-stat-coding-system): New variable.
	(spam-stat-load, spam-stat-save): Use it.

2004-02-25  Katsumi Yamaoka  <yamaoka@jpl.org>

	* spam-report.el (spam-report-plug-agent): Quote
	spam-report-url-to-file and spam-report-url-ping-plain.

2004-02-25  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-button-alist, gnus-header-button-alist): Allow
	/ in mailto URLs.

2004-02-24  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-process-queue): Fix interactive use.
	(spam-report-url-ping-temp-agent-function, spam-report-plug-agent)
	(spam-report-unplug-agent): Doc fixes.
	(spam-report-url-ping-mm-url, spam-report-url-to-file)
	(spam-report-agentize, spam-report-deagentize): Autoload

2004-02-24  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el (with-syntax-table): Redefine it for XEmacs 21.5.

	* message.el (message-setup-fill-variables): Add mml tags to
	paragraph-start and paragraph-separate.  Suggested by Andrew Korty
	<ajk@iu.edu>.
	(message-mode): Don't modify paragraph-separate there.

2004-02-17  Katsumi Yamaoka  <yamaoka@jpl.org>

	* compface.el (uncompface-use-external): Default to undecided.
	(uncompface-use-external-threshold): New variable.
	(uncompface-float-time): New macro.
	(uncompface): Determine whether to use the external decoder if
	uncompface-use-external is undecided.

2004-02-15  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* mm-view.el (mm-inline-image-emacs): Don't insert blank lines
	after images.

	* gnus-art.el (gnus-mime-display-single): Remove dead code.

2004-02-14  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-request-article, nnrss-find-el): Cleanup.

	* html2text.el (html2text-get-attr, html2text-fix-paragraph): do.

	* gnus-sum.el (gnus-summary-limit-to-age)
	(gnus-summary-limit-children): do.

	* gnus-int.el (gnus-request-scan): do.

	* gnus-group.el (gnus-group-suspend): do.

	* gnus-cus.el (gnus-agent-cat-prepare-category-field): do.

	* gnus-cite.el (gnus-cite-parse-attributions): do.

	* gnus-agent.el (gnus-summary-set-agent-mark)
	(gnus-agent-regenerate-group): do.

	* deuglify.el (gnus-article-outlook-unwrap-lines): do.

	* binhex.el (binhex-decode-region-internal): do.

2004-02-12  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-fun.el (gnus-face-properties-alist): New user option.
	(gnus-display-x-face-in-from): Use it.

	* gnus-art.el (article-display-face): Ditto.

	* compface.el (uncompface-use-external): Default to nil.

2004-02-12  Jesper Harder  <harder@ifa.au.dk>

	* nntp.el (nntp-erase-buffer): New function.
	(nntp-retrieve-data, nntp-send-command)
	(nntp-send-buffer, nntp-retrieve-groups, nntp-handle-authinfo)
	(nntp-possibly-change-group): Use it.

	* nnnil.el (nnnil-retrieve-headers, nnnil-request-list): Use
	with-current-buffer.

2004-02-12  TAKAI Kousuke  <tak@kmc.gr.jp>

	* compface.el: Merge the ELisp-based uncompface program.
	(compface): New customization group.
	(uncompface-use-external): New user option.
	(uncompface): Call uncompface-internal if uncompface-use-external
	is nil.
	(uncompface-internal): New function.  Note that there are also
	some other functions and variables added for this function.

2004-02-10  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-read-group-data): Initialize nnrss-group-hashtb
	if necessary.

2004-02-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam-report.el (spam-report-unplug-agent)
	(spam-report-plug-agent, spam-report-deagentize)
	(spam-report-agentize, spam-report-url-ping-temp-agent-function):
	Add support for the Agent in spam-report: when unplugged, report to a
	file; when plugged, submit all the requests.

	* spam.el (spam-register-routine): Fix message about
	registration.

2004-02-09  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-qp-or-base64): New function to reduce
	dependencies.
	(rfc2047-encode): Use it.

	* gnus-art.el (gnus-button-marker-list): Move before first
	reference.

	* imap.el (imap-parse-flag-list, imap-parse-body-extension)
	(imap-parse-body): Fix format string mismatch.

	* gnus-score.el (gnus-summary-increase-score): do.

	* nnrss.el (nnrss-close): New function.

2004-02-08  Jesper Harder  <harder@ifa.au.dk>

	* nnrss.el (nnrss-make-filename): New function.
	(nnrss-request-delete-group, nnrss-read-server-data)
	(nnrss-save-server-data, nnrss-read-group-data)
	(nnrss-save-group-data): Use it.
	(nnrss-save-server-data, nnrss-save-group-data): Use gnus-prin1.
	(nnrss-read-server-data, nnrss-read-group-data): Use load.
	(nnrss-group-hashtb): Make it a hash table rather than an obarray.

2004-02-07  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-compute-boundary-1): Don't uncompress files.

2004-02-06  Jesper Harder  <harder@ifa.au.dk>

	* mml.el (mml-mode, mml-x-dnd-attach-file): Attach drop and drag
	files.

	* message.el (message-generate-headers-first): Don't quote nil
	and t in docstrings.

	* imap.el (imap-id): do.

	* gnus-agent.el (gnus-agent-consider-all-articles)
	(gnus-agent-queue-mail): do.

2004-02-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam-report.el (spam-report-process-queue): New function.
	Process requests from `spam-report-requests-file'.
	(spam-report-process-queue): Doc fix.

2004-02-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-register-routine)
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	Change "check" to "spam-check" for semi-clarity.

2004-02-05  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el: Require nnheader.

	* mml-smime.el: Require cl.  Autoload message-fetch-field.

	* mml-sec.el (mml-signencrypt-style): Don't depend on Gnus.

	* gnus-picon.el: Require cl.

	* gnus-fun.el: Require gnus-ems and gnus-util.

	* gnus.el (gnus-method-to-server): Move defsubst before first use.

	* gnus-diary.el (gnus-diary-header-schedule): caddr -> car (cddr

	* gnus-art.el (gnus-article-edit-mode): Define before first
	reference.

2004-02-04  Jesper Harder  <harder@ifa.au.dk>

	* gnus-uu.el (gnus-uu-check-correct-stripped-uucode): Simplify.
	(gnus-uu-post-encoded): Use point-at-bol.

	* gnus-topic.el (gnus-group-active-topic-p): do.

	* gnus-start.el (gnus-newsrc-to-gnus-format): do.

	* gnus-group.el (gnus-group-kill-region): do.

	* gnus-art.el (article-date-ut): do.

	* message.el (message-fetch-field): Remove redundant
	case-fold-search binding.
	(message-narrow-to-field): Simplify.

2004-02-03  Reiner Steib  <Reiner.Steib@gmx.de>

	* spam.el (spam-directory): Derive from `gnus-directory'.

	* spam-report.el (spam-report-url-to-file)
	(spam-report-requests-file): New function and variable for offline
	reporting.
	(spam-report-url-ping-function): Add `spam-report-url-to-file'
	and user defined function.
	(spam-report-url-ping-mm-url): Remove doubled slash.

2004-02-03  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-processors): Fix spamassassin variable names.

2004-02-03  Jesper Harder  <harder@ifa.au.dk>

	* spam.el (spam-check-spamoracle, spam-spamoracle-learn): Fix
	format string mismatch.

	* sieve.el (sieve-deactivate-all): do.

	* nnfolder.el (nnfolder-request-set-mark, nnfolder-save-marks): do.

	* nnlistserv.el (nnlistserv-kk-wash-article): do.

	* nnml.el (nnml-request-set-mark, nnml-save-marks): do.

	* mm-bodies.el (mm-7bit-chars): Don't include \r.

2004-02-02  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-list-of-checks): Add spam-use-BBDB-eclusive to
	the list of checks.

2004-01-31  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-pad-base64): Deal with more cases of invalid
	padding.

2004-01-27  Ralf Angeli  <angeli@iwi.uni-sb.de>

	* mm-view.el (mm-fill-flowed): New variable.
	(mm-inline-text): Use it.

2004-01-27  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-spamassassin-register-ham-routine)
	(spam-spamassassin-register-spam-routine): Fix function names.

2004-01-27  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el (gnus-tmp-grouplens): Remove.
	(gnus-summary-line-format): Remove grouplens.

	* gnus-group.el (gnus-group-line-format): Ditto.

	* gnus-spec.el (gnus-format-specs): Ditto.
	(gnus-update-format-specifications): Flush the group format spec
	cache if there's the grouplens stuff.
	(gnus-parse-simple-format): Replace %l with the empty string.

2004-01-27  Jerry James  <james@xemacs.org>  (tiny change)

	* gnus-spec.el (gnus-parse-simple-format): Fix setq value
	omission.

2004-01-26  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-msg.el (gnus-summary-resend-message-edit): Call mime-to-mml.
	Suggested by Hiroshi Fujishima <pooh@nature.tsukuba.ac.jp>.

2004-01-25  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir--num-file, nnmaildir--mkfile)
	(nnmaildir--emlink-p, nnmaildir--eexist-p, nnmaildir--new-number):
	New macros and functions.
	* nnmaildir.el (nnmaildir--group-maxnum, nnmaildir--update-nov):
	Handle > NLINK_MAX messages.
	* nnmaildir.el (nnmaildir-request-set-mark): Use
	nnmaildir--emlink-p and nnmaildir--eexist-p.

2004-01-25  Alex Schroeder  <alex@gnu.org>

	* spam-stat.el (spam-stat-process-directory-age): New option.
	(spam-stat-process-directory): Use it.

2004-01-24  Hiroshi Fujishima  <pooh@nature.tsukuba.ac.jp>  (tiny change)

	* spam-stat.el (spam-stat-reduce-size): Set spam-stat-dirty.
	(spam-stat-save): Accept prefix argument.

2004-01-23  Paul Jarc  <prj@po.cwru.edu>

	* nnmaildir.el (nnmaildir-request-set-mark): Handle the "too many
	links" error.

2004-01-23  Katsumi Yamaoka  <yamaoka@jpl.org>

	* dgnushack.el: Advise byte-optimize-form-code-walker to optimize
	the rest of the and/or forms.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* gnus.el (gnus-tmp-grouplens): Define for the sake of backward
	compatibility with old .newsrc.eld files.

	* gnus-xmas.el (gnus-xmas-grouplens-menu-add): Remove.

	* gnus-sum.el (gnus-summary-line-format-alist): Remove grouplens.

	* gnus-start.el (gnus-1): do.

	* gnus-group.el (gnus-group-line-format-alist): do.

	* gnus.el (gnus-use-grouplens, gnus-visual): do.

	* gnus-gl.el: Remove.

2004-01-23  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Now correctly handles a list of
	marks consisting of a single range {for example, (3 . 5)} rather
	than a list of a single range { ((3 . 5)) }.

2004-01-23  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-store-gnus-article-buffer): Use
	with-current-buffer.
	(spam-stat-store-current-buffer): Use insert-buffer-substring to
	avoid consing a string.

	* mm-util.el (mm-charset-synonym-alist): Add ks_c_5601-1987.
	Remove obsolete entries for big5 and gb2312.

2004-01-22  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-sum.el (gnus-adjust-marks): Avoid splicing null INTO the
	uncompressed list.

2004-01-22  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-strip-xref): New function.
	(spam-stat-process-directory): Use it.

	* gnus-util.el (gnus-fetch-field): Don't bind case-fold-search
	here -- it's done in message-fetch-field.

2004-01-21  Kevin Greiner  <kgreiner@xpediantsolutions.com>

	* gnus-agent.el (gnus-agent-queue-mail)
	(gnus-agent-prompt-send-queue): New variables.
	(gnus-agent-send-mail): Use gnus-agent-queue-mail.
	* gnus-draft.el (gnus-group-send-queue): Pass the group name
	"nndraft:queue" along to gnus-draft-send.  Use
	gnus-agent-prompt-send-queue.
	(gnus-draft-send): Rebind gnus-agent-queue-mail to nil when group
	is "nndraft:queue".  Suggested by Gaute Strokkenes
	<gs234@srcf.ucam.org>

	* gnus-agent.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added
	(gnus-agent-cat-groups): Use eval-and-compile, not
	eval-when-compile, to define gnus-agent-set-cat-groups as the setf
	method of gnus-agent-cat-groups even when the buffer has been
	evaled.
	(gnus-agent-save-active, gnus-agent-save-active-1): Merged to
	delete gnus-agent-save-active-1.
	(gnus-agent-save-groups): Deleted.  Identical to
	gnus-agent-save-active.
	(gnus-agent-write-active): No longer adjust agent's copy of active
	file as agent's adjustments are now stored in their own
	file.  Removed optional parameter.
	(gnus-agent-possibly-alter-active): Ignore groups of unagentized
	servers.  Add use of min/max range limits from server's local
	file.
	(gnus-agent-save-alist): Removed unused optional argument.
	(gnus-agent-load-local, gnus-agent-read-and-cache-local)
	(gnus-agent-read-local, gnus-agent-save-local, gnus-agent-get-local)
	(gnus-agent-set-local): A per-server file that keeps min/max range
	limits for articles known to the agent.  Provides a fast mechanism
	for altering many active ranges.
	(gnus-agent-expire-group, gnus-agent-expire): No longer save the
	active file (local makes it unnecessary).
	(gnus-agent-regenerate-group): Fixed XEmacs compatibility.

	* gnus-cus.el (agent-disable-undownloaded-faces): Removed
	(agent-enable-undownloaded-faces): Added

	* gnus-draft.el (gnus-draft-send): Bind gnus-agent-queue-mail to
	disable it when sending to "nndraft:queue".
	(gnus-group-send-queue): Add safety check to avoid sending queue
	when unplugged.

	* gnus-group.el (gnus-group-catchup): Use new
	gnus-sequence-of-unread-articles, not
	gnus-list-of-unread-articles, to avoid exhausting memory with huge
	numbers of articles.  Use gnus-range-map to avoid having to
	uncompress the unread list.
	(gnus-group-archive-directory, gnus-group-recent-archive-directory):
	Fixed invalid ange-ftp reference.

	* gnus-range.el (gnus-range-map): Iterate over list or sequence.
	(gnus-sorted-range-intersection): Intersection of two ranges
	without requiring that they first be uncompressed.

	* gnus-start.el (gnus-activate-group): Unless blocked by the
	caller, possibly expand the active range to include both cached
	and agentized articles.
	(gnus-convert-old-newsrc): Rewrote in anticipation of having
	multiple version-dependent converters.
	(gnus-groups-to-gnus-format): Replaced gnus-agent-save-groups with
	gnus-agent-save-active.
	(gnus-save-newsrc-file): Save dirty agent range limits.

	* gnus-sum.el (gnus-select-newgroup): Replaced inline code with
	gnus-agent-possibly-alter-active.
	(gnus-adjust-marked-articles): Faster handling of simple lists

2004-01-21  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-test-directory): New optional argument
	displays a list of files detected.  Suggested by Andrew Cohen
	<cohen@andy.bu.edu>.
	(spam-stat-buffer-words-with-scores): Don't narrow and change
	syntax table here.  Reported by Andrew Cohen <cohen@andy.bu.edu>.

2004-01-20  Hubert Chan  <hubert@uhoreg.ca>

	* spam.el (spam-use-spamassassin, spam-use-spamassassin-headers)
	(spam-install-hooks, spam-spamassassin, spam-spamassassin-path)
	(spam-spamassassin-arguments)
	(spam-spamassassin-spam-flag-header)
	(spam-spamassassin-positive-spam-flag-header)
	(spam-spamassassin-spam-status-header, spam-sa-learn-path)
	(spam-sa-learn-rebuild, spam-sa-learn-spam-switch)
	(spam-sa-learn-ham-switch, spam-sa-learn-unregister-switch)
	(spam-list-of-processors, spam-list-of-checks)
	(spam-list-of-statistical-checks, spam-registration-functions)
	(spam-check-spamassassin-headers, spam-check-spamassassin)
	(spam-spamassassin-score)
	(spam-spamassassin-register-with-sa-learn)
	(spam-spamassassin-register-spam-routine)
	(spam-spamassassin-register-ham-routine)
	(spam-assassin-register-spam-routine)
	(spam-assassin-register-ham-routine): Add SpamAssassin support.
	(spam-bogofilter-score): Fix to show article before scoring.

2004-01-20  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (gnus-summary-mode-map): Make spam-generic-score the
	default scoring function.
	(spam-generic-score): Call spam-spamassassin-score if
	spam-use-spamassassin or spam-use-spamassassin-headers is on;
	spam-bogofilter-score otherwise.

	* gnus.el (spam-process, spam-autodetect-methods): Add
	spamassassin and spamassassin-headers.

2004-01-20  Nevin Kapur  <nkapur@cs.caltech.edu>

	* gnus-registry.el (gnus-registry-split-fancy-with-parent):
	Suppress unnecessary messages.

2004-01-20  Jesper Harder  <harder@ifa.au.dk>

	* spam-stat.el (spam-stat-to-hash-table): Use :size keyword in
	make-hash-table.

2004-01-19  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (base64-encode-string): Don't autoload it.

2004-01-16  Katsumi Yamaoka  <yamaoka@jpl.org>

	* run-at-time.el: Remove useless (require 'itimer),
	eval-and-compile and (featurep 'xemacs).

2004-01-16  Jesper Harder  <harder@ifa.au.dk>

	* gnus-msg.el (gnus-post-news): Use blank Newsgroups line if
	GROUP is a virtual group.

2004-01-16  Steve Youngs  <sryoungs@bigpond.net.au>

	* gnus.el: Autoload `message-y-or-n-p'.

2004-01-15  Jesper Harder  <harder@ifa.au.dk>

	* pgg-parse.el: Remove unnecessary (require 'custom).

	* pgg-def.el: do.

	* nnmail.el: do.

	* gnus-undo.el: do.

	* gnus-picon.el: do.

	* gnus-util.el: do.

2004-01-15  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-sum.el (gnus-pick-line-number): Add autoload.

2004-01-15  Katsumi Yamaoka  <yamaoka@jpl.org>

	* mm-decode.el (mm-multiple-handles): Recognize a string as a mime
	handle, as well as a list.

	* mm-view.el (mm-w3m-cid-retrieve-1): Call itself recursively.
	Suggested by ARISAWA Akihiro <ari@mbf.sphere.ne.jp>.
	(mm-w3m-cid-retrieve): Simplify.

2004-01-14  Vasily Korytov  <deskpot@myrealbox.com>

	* message.el (message-kill-to-signature): Allow prefix arg to
	specify number of lines to keep before signature.

2004-01-14  Kai Grossjohann  <kai@emptydomain.de>

	(message-kill-to-signature): Change docstring.

2004-01-14  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el: Always require sha1-el.
	(canlock-sha1): Bind sha1-maximum-internal-length to nil.

	* message.el: Autoload sha1 only when compiling.

	* lpath.el: Bind eudc-protocol for both Emacs and XEmacs; fbind
	eudc-expand-inline for XEmacs.

2004-01-13  Katsumi Yamaoka  <yamaoka@jpl.org>

	* message.el (message-canlock-generate): Require sha1-el.

2004-01-13  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-expand-name): Silence the byte compiler.

	* lpath.el: Add detect-coding-system.

	* dgnushack.el (dgnushack-compile): Remove obsolete check for
	cus-edit.

2004-01-13  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): Fix prototype.
	Invoke gnus-score-mode.  Reported by
	bojohan+news@dd.chalmers.se (Johan Bockgård).

	* gnus-range.el (gnus-compress-sequence): Doc fix.  Suggested by
	Jim Blandy <jimb@redhat.com> (tiny change).

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* gnus-srvr.el (gnus-browse-foreign-server): Reduce consing.

2004-01-12  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-get-article-as-string): Update to use
	gnus-request-article-this-buffer, much simpler.
	(spam-get-article-as-buffer): Remove.

2004-01-12  Kai Grossjohann  <kai.grossjohann@mci.com>

	* message.el (message-expand-name): Use EUDC if the user uses that.

2004-01-12  Jesper Harder  <harder@ifa.au.dk>

	* rfc2047.el (rfc2047-parse-and-decode, rfc2047-decode): Use a
	character for the encoding to avoid consing a string.

	* rfc2047.el (rfc2047-decode-string): Don't cons a string
	unnecessarily.

	* mm-util.el (mm-replace-chars-in-string): Remove.

	* rfc2047.el (rfc2047-decode): Use mm-subst-char-in-string instead
	of mm-replace-chars-in-string.

2004-01-11  Jesper Harder  <harder@ifa.au.dk>

	* gnus.sum.el (gnus-remove-odd-characters): Don't cons two new strings.

	* mm-util.el (mm-subst-char-in-string): Support inplace.

	* gnus-sum.el (gnus-summary-remove-list-identifiers): Don't cons
	a new string in every iteration.  Use shy groups.

2004-01-10  Jesper Harder  <harder@ifa.au.dk>

	* gnus-srvr.el (gnus-browse-unsubscribe-group):
	* gnus-soup.el (gnus-soup-group-brew):
	* gnus-msg.el (gnus-put-message):
	* gnus-move.el (gnus-group-move-group-to-server):
	* gnus-kill.el (gnus-batch-score):
	* gnus-group.el (gnus-group-prepare-flat, gnus-group-delete-group)
	(gnus-group-update-group-line, gnus-group-insert-group-line-info)
	(gnus-group-update-group, gnus-group-read-group)
	(gnus-group-make-group, gnus-group-make-help-group)
	(gnus-group-make-archive-group, gnus-group-make-directory-group)
	(gnus-group-make-empty-virtual, gnus-group-sort-selected-flat)
	(gnus-group-sort-by-unread, gnus-group-catchup)
	(gnus-group-unsubscribe-group, gnus-group-kill-group)
	(gnus-group-yank-group, gnus-group-set-info)
	(gnus-group-list-groups):
	* gnus.el (gnus-generate-new-group-name):
	* gnus-delay.el (gnus-delay-send-queue):
	* nnvirtual.el (nnvirtual-catchup-group):
	* nnkiboze.el (nnkiboze-generate-group, nnkiboze-generate-group):
	* gnus-topic.el (gnus-topic-find-groups, gnus-topic-clean-alist)
	(gnus-group-prepare-topics, gnus-topic-check-topology):
	* gnus-sum.el (gnus-update-read-articles, gnus-select-newsgroup)
	(gnus-mark-xrefs-as-read, gnus-compute-read-articles)
	(gnus-summary-walk-group-buffer, gnus-summary-move-article)
	(gnus-group-make-articles-read):
	* gnus-start.el (gnus-subscribe-newsgroup, gnus-start-draft-setup)
	(gnus-group-change-level, gnus-kill-newsgroup)
	(gnus-check-bogus-newsgroups, gnus-get-unread-articles-in-group)
	(gnus-get-unread-articles, gnus-make-articles-unread)
	(gnus-make-ascending-articles-unread): Use accessor
	macros (gnus-group-entry, gnus-group-unread, gnus-info-marks etc.)
	to get group information for improved readability.


2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (article-decode-mime-words, article-babel)
	(gnus-article-highlight-signature, gnus-article-add-buttons)
	(gnus-signature-toggle): Use gnus-with-article-buffer.

	* gnus-art.el (gnus-article-highlight-headers)
	(gnus-article-add-buttons-to-head): Use gnus-with-article-headers.

	* gnus-art.el (gnus-mm-display-part, gnus-article-wash-status)
	(gnus-article-set-globals, gnus-request-article-this-buffer)
	(gnus-button-message-id, gnus-article-maybe-hide-headers)
	(gnus-mime-view-part-externally, gnus-mime-view-part-internally)
	(gnus-mime-display-alternative): Use with-current-buffer.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-generate-fake-headers): Rewrite to be simpler,
	also under 80 char limit, and call gnus-error if needed.
	(spam-fetch-article-header): Fix - it was a
	buffer-local variable (gnus-newsgroup-data).
	(spam-find-spam): Use spam-generate-fake-headers, forget about
	spam-insert-fake-headers.
	(spam-insert-fake-headers): Remove.

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* deuglify.el (gnus-article-outlook-unwrap-lines)
	(gnus-outlook-rearrange-article)
	(gnus-outlook-repair-attribution-outlook)
	(gnus-outlook-repair-attribution-block)
	(gnus-outlook-repair-attribution-other): Remove redundant
	save-excursion.

2004-01-09  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-fetch-field-fast, spam-fetch-field-from-fast)
	(spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast, spam-generate-fake-headers)
	(spam-fetch-article-header): Add functions to deal with Gnus
	internals for fast retrieval of article header data.
	(spam-initialize): Put spam-find-spam in the gnus-summary-prepared-hook.

2004-01-09  Jesper Harder  <harder@ifa.au.dk>

	* pop3.el (pop3-md5): Remove.
	(pop3-apop): Replace pop3-md5 with md5.

	* mm-bodies.el: base64 is always built-in.

	* gnus-sum.el (gnus-summary-from-or-to-or-newsgroups): Use
	with-current-buffer.

2004-01-08  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-insert-header): Remove excessive grouping in
	regexp.

	* gnus-sum.el (gnus-summary-read-document): Ditto.

	* gnus-uu.el (gnus-uu-part-number): Ditto.

	* html2text.el (html2text-remove-tags): Ditto.
	(html2text-format-tags): Ditto.
	(html2text-format-single-elements): Ditto.

	* mml.el (mml-parse-1): Ditto.

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-update-mark): Revert previous change.

	* gnus-group.el (gnus-group-mark-group): Fix for multibyte marks.

	* gnus-sum.el (gnus-summary-update-mark): Fix for multibyte marks.

	* gnus-util.el (gnus-replace-in-string): Remove Emacs 20 code.

2003-11-15  Simon Josefsson  <jas@extundo.com>

	* pgg-gpg.el (pgg-gpg-lookup-all-secret-keys)
	(pgg-gpg-lookup-key): Use regexp match instead of
	split-string (split-string is different between emacs 21.2 and
	22.1).  Reported by ultrasoul@ultrasoul.com (David D. Smith).

2004-01-08  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-view-all-parts)
	(gnus-article-part-wrapper, gnus-article-view-part): Use
	with-current-buffer.

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-disable-spam-split-during-ham-respool)
	(spam-spamoracle-database, spam-cache-lookups)
	(spam-split-last-successful-check, spam-clear-cache, spam-xor)
	(spam-group-ham-mark-p, spam-group-spam-mark-p)
	(spam-group-ham-marks, spam-group-spam-marks)
	(spam-group-spam-contents-p, spam-group-ham-contents-p)
	(spam-list-of-processors, spam-list-of-statistical-checks): Fix doc,
	also add spam-use-blackholes to the statistical checks.
	(spam-fetch-field-fast): Add interface to fetching fields, may
	become a macro.
	(spam-fetch-field-from-fast, spam-fetch-field-subject-fast)
	(spam-fetch-field-message-id-fast): Use spam-fetch-field-fast.
	(spam-insert-fake-headers): Fake an article when needed.
	(spam-find-spam): Fake article when possible.
	(spam-check-blackholes, spam-check-BBDB, spam-from-listed-p)
	(spam-check-bogofilter-headers): Use message-fetch-field instead
	of nnmail-fetch-field.

2004-01-07  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-score.el (gnus-score-find-trace): Add `k' (kill-buffer).

2004-01-07  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-split): Do not require spam-use-CHECK to be
	enabled if that check is passed to spam-split explicitly; also
	fix so 'spam doesn't get converted to spam-split-group when
	spam-split-symbolic-return is t.
	(spam-find-spam): Find registrations of the article and use those
	instead of re-running spam-split to find the spam/ham
	classification of the article.
	(spam-log-processing-to-registry, spam-log-registered-p)
	(spam-log-unregistration-needed-p, spam-log-undo-registration):
	Use gnus-error instead of gnus-message.
	(spam-log-registration-type): Add function to determine the
	classification of a message based on registry entries; will
	return nil if both 'spam and 'ham are found.
	(spam-check-BBDB): Expand all the BBDB macros here so we can have
	a reasonably fast local cache without the loading errors.
	(spam-cache-lookups): Set to t by default.
	(spam-find-spam): Don't try to guess spam-cache-lookups.
	(spam-enter-whitelist, spam-enter-blacklist): Clear the
	spam-caches entry.
	(spam-filelist-build-cache, spam-filelist-check-cache): Fix
	caching of whitelist/blacklist entries.
	(spam-check-whitelist, spam-check-blacklist): Invoke
	spam-from-listed-p with a type, not a cache variable.
	(spam-from-listed-p): Wrap around spam-filelist-check-cache.

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* message.el (message-cite-prefix-regexp): Use with-syntax-table.

	* nnmail.el (nnmail-split-fancy): do.

	* mml.el (mml-parse): do.

	* gnus-score.el (gnus-enter-score-words-into-hashtb)
	(gnus-score-adaptive): do.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-treat-emphasize): Ignore Emacs version number.
	(gnus-mime-button-map): Don't set keymap parent.
	(gnus-button-ctan-directory-regexp): Use shy grouping.
	(gnus-prev-page-map): Don't set keymap parent.
	(gnus-prev-page-map): Remove duplicated one.
	(gnus-next-page-map): Don't set keymap parent.
	(gnus-mime-security-button-map): Ditto.

	* nnheader.el (nnheader-directory-files-is-safe): Ignore Emacs
	version number.

	* sha1-el.el (sha1-string-external): Use with-temp-buffer.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* canlock.el (canlock-sha1-function): Remove.
	(canlock-sha1-function-for-verify): Remove.
	(canlock-openssl-program): Remove.
	(canlock-openssl-args): Remove.
	(canlock-ignore-errors): Remove.
	(canlock-sha1-with-openssl): Remove.
	(canlock-sha1): Use sha1 instead of to call canlock-sha1-function.
	(canlock-verify): Don't use canlock-ignore-errors.

	* sha1-el.el (sha1-string-external): Make it can return a string
	in binary form.
	(sha1-region-external): Ditto.
	(sha1-string-internal): Ditto.
	(sha1-region-internal): Ditto.
	(sha1-region): Ditto.
	(sha1-string): Ditto.
	(sha1): Ditto.

2004-01-07  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* spam.el (spam-report-articles-gmane): New command.

2004-01-07  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus.el: Don't make unnecessary *Group* buffer when loading.

	* run-at-time.el (run-at-time-saved): Remove.
	(run-at-time): Doc fix.

2004-01-07  Jesper Harder  <harder@ifa.au.dk>

	* gnus-sum.el (gnus-summary-limit-to-replied): New command.
	(gnus-summary-limit-map): Add it.
	(gnus-summary-make-menu-bar): do.

2004-01-06  Teodor Zlatanov  <tzz@lifelogs.com>

	* spam.el (spam-cache-lookups, spam-caches, spam-clear-cache):
	Make attempt at some caching support (done for BBDB only now).
	(spam-find-spam): Set spam-cache-lookups if there are more than 2
	addresses to be checked.
	(spam-clear-cache-BBDB): Add function, to be invoked by
	bbdb-change-hook, and triggering spam-clear-cache of 'spam-use-BBDB.
	(spam-check-BBDB): Check and use the caches, if
	spam-cache-lookups is on, remove superfluous (provide).

2004-01-06  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences): Changed default.

2004-01-07  Steve Youngs  <sryoungs@bigpond.net.au>

	* run-at-time.el (run-at-time-saved): Move to after the definition
	of `run-at-time'.

	* dgnushack.el: Autoload `font-lock-fontify-buffer' in XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-art.el (gnus-article-wash-html-with-w3m): Don't use
	mm-w3m-local-map-property.

	* mm-view.el (mm-w3m-mode-map): Remove.
	(mm-w3m-local-map-property): Remove.
	(mm-inline-text-html-render-with-w3m): Don't use
	mm-w3m-local-map-property.

2004-01-06  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* run-at-time.el: New file.

	* dgnushack.el (dgnushack-compile): Don't compile run-at-time
	under Emacs.

	* gnus.el ((fboundp 'gnus-set-text-properties)): Remove definition
	of gnus-set-text-properties.

	* gnus-uu.el (gnus-uu-save-article): Ditto.

	* gnus-salt.el (gnus-carpal-setup-buffer): Ditto.

	* gnus-cite.el (gnus-cite-parse): Ditto.

	* gnus-art.el (gnus-button-push): Use set-text-properties instead
	of gnus-.

	* gnus-xmas.el (run-at-time): Require run-at-time.

	* gnus.el: Changed calls to nnheader-run-at-time and
	password-run-at-time throughout to use run-at-time directly.

	* password.el: Removed definition of run-at-time.

	* nnheaderxm.el: Remove definition of run-at-time.

2004-01-05  Karl Pflästerer  <sigurd@12move.de>  (tiny change)

	* mml.el (mml-minibuffer-read-disposition): Show attachment type
	in prompt.

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* messagexmas.el (message-xmas-redefine): Alias
	`message-make-caesar-translation-table' to
	``message-xmas-make-caesar-translation-table' regardless of XEmacs
	version.

	* gnus-xmas.el (gnus-xmas-set-text-properties): Removed.
	(gnus-xmas-define): Don't alias `gnus-set-text-properties' to
	`gnus-xmas-set-text-properties'.
	(gnus-xmas-redefine): Don't alias `gnus-completing-read' to
	`gnus-xmas-completing-read'.
	(gnus-xmas-completing-read): Removed.
	(gnus-xmas-open-network-stream): Removed.

	* gnus-ems.el (gnus-mode-line-modified): Don't conditionalise on
	XEmacs version.

	* dns.el (dns-make-network-process): Use `open-network-stream'
	instead of `gnus-xmas-open-network-stream'.

	* dgnushack.el: Remove some XEmacs 21.1 specific stuff.

	* .cvsignore: Add auto-autoloads.el, custom-load.el.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-mime-display-alternative)
	(gnus-insert-mime-button, gnus-insert-mime-security-button)
	(gnus-insert-prev-page-button, gnus-insert-next-page-button):
	Don't use gnus-local-map-property.

	* gnus-util.el (gnus-local-map-property): Remove.

	* mm-view.el (mm-view-pkcs7-decrypt): Replace
	gnus-completing-read-maybe-default with completing-read.

	* gnus-util.el (gnus-completing-read): do.
	(gnus-completing-read-maybe-default): Remove.

2004-01-06  Steve Youngs  <sryoungs@bigpond.net.au>

	* password.el: Only autoload `run-at-time' if not XEmacs.
	Only autoload the itimer functions if XEmacs.

2004-01-06  Katsumi Yamaoka  <yamaoka@jpl.org>

	* gnus-xmas.el (gnus-xmas-define): Defun char-width for non-MULE
	XEmacsen.

	* dgnushack.el: Autoload executable-find for XEmacs.

2004-01-06  Jesper Harder  <harder@ifa.au.dk>

	* gnus-art.el (gnus-read-string): Remove.
	(gnus-summary-pipe-to-muttprint): Replace gnus-read-string with
	read-string.

2004-01-05  Teodor Zlatanov  <tzz@lifelogs.com>

	* netrc.el: Autoload password-read.
	(netrc): Add configuration group.
	(netrc-encoding-method, netrc-openssl-path): Add
	variables for encoding and decoding of files with symmetric
	ciphers.
	(netrc-encode): Add assistant function to encode a file with
	netrc-encoding-method.
	(netrc-parse): Add interactive parameter, added optional
	decoding if netrc-encoding-method is non-nil but otherwise
	behavior is standard.
	(netrc-encrypting-method, netrc-encrypt, netrc-parse):
	Do s/encode/encrypt/ everywhere.

	* spam.el: Remove executable-find autoload.

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* gnus-registry.el: Remove Emacs 20 hash table compatibility code.

	* gnus-uu.el (gnus-uu-post-encoded): bury-buffer is always fbound.

2004-01-05  Reiner Steib  <Reiner.Steib@gmx.de>

	* gnus-art.el (gnus-treat-ansi-sequences,
	(article-treat-ansi-sequences): New variable and function.
	Suggested by Dan Jacobson <jidanni@jidanni.org>.

	* gnus-sum.el (gnus-summary-wash-map, gnus-summary-make-menu-bar):
	Use it.

2004-01-05  Jesper Harder  <harder@ifa.au.dk>

	* mm-util.el (mm-quote-arg): Remove.

	* mm-decode.el (mm-mailcap-command): Replace mm-quote-arg with
	shell-quote-argument.

	* gnus-uu.el (gnus-uu-command): do.

	* gnus-sum.el (gnus-summary-insert-pseudos): do.

	* ietf-drums.el (ietf-drums-token-to-list): Replace mm-make-char
	with make-char.

	* mm-util.el (mm-make-char): Remove.

	* mml.el (mml-mode): Replace gnus-add-minor-mode with
	add-minor-mode.

	* gnus-undo.el (gnus-undo-mode): do.

	* gnus-topic.el (gnus-topic-mode): do.

	* gnus-sum.el (gnus-dead-summary-mode): do.

	* gnus-start.el (gnus-slave-mode): do.

	* gnus-salt.el (gnus-binary-mode, gnus-pick-mode): do.

	* gnus-ml.el (gnus-mailing-list-mode): do.

	* gnus-gl.el (gnus-grouplens-mode): do.

	* gnus-draft.el (gnus-draft-mode): do.

	* gnus-dired.el (gnus-dired-mode): do.

	* gnus-ems.el (gnus-add-minor-mode): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* gnus-spec.el (gnus-correct-length, gnus-correct-substring):
	Replace gnus-char-width with char-width.

	* gnus-ems.el (gnus-char-width): Remove.

	* spam-stat.el (with-syntax-table): Remove with-syntax-table
	definition.
	Remove Emacs 20 hash table compatibility code.

	* rfc2047.el (with-syntax-table): Remove with-syntax-table Emacs
	20 compatibility code.

	* spam.el (spam-point-at-eol): Replace with point-at-eol.

	* smime.el (smime-point-at-eol): Replace with point-at-eol.

	* rfc2047.el (rfc2047-point-at-bol, rfc2047-point-at-eol): Replace
	with point-at-{eol,bol}.

	* netrc.el (netrc-point-at-eol): Replace with point-at-eol.

	* imap.el (imap-point-at-eol): Replace with point-at-eol.

	* flow-fill.el (fill-flowed-point-at-bol)
	(fill-flowed-point-at-eol): Replace with point-at-{eol,bol}.

	* gnus-util.el (gnus-point-at-bol, gnus-point-at-eol): Remove.
	Replace with point-at-{eol,bol} throughout all files.

2004-01-05  Katsumi Yamaoka  <yamaoka@jpl.org>

	* ntlm.el (ntlm-string-as-unibyte): New macro.
	(ntlm-build-auth-response): Use it.

	Remove Emacs 20 stuff:
	* dgnushack.el (dgnushack-compile): Don't modify max-specpdl-size.
	(butlast, mapc, remove): Remove the compiler macros.
	* gnus-msg.el (gnus-summary-news-other-window): Use remove instead
	of delq and copy-sequence.
	* gnus-art.el (popup-menu): Remove the compiler macro.
	* nnmail.el (nnmail-split-fancy): Don't support customizing with
	Emacs 20.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* ntlm.el: Fix namespace.  Change smb-passwd-hash into
	ntlm-smb-passwd-hash, smb-owf-encrypt into ntlm-smb-owf-encrypt,
	smb-passwd-hash into ntlm-smb-passwd-hash, smbdes-e-p16 into
	ntlm-smb-des-e-p16, smbdes-e-p24 into ntlm-smb-des-e-p24, smbhash
	into ntlm-smb-hash, smb-sp8 into ntlm-smb-sp8, smb-str-to-key into
	ntlm-smb-str-to-key, smb-dohash into ntlm-smb-dohash, smb-perm1
	into ntlm-smb-perm1, smb-perm2 into ntlm-smb-perm2, smb-perm3 into
	ntlm-smb-perm3, smb-perm4 into ntlm-smb-perm4, smb-perm5 into
	ntlm-smb-perm5, smb-perm6 into ntlm-smb-perm6, smb-sc into
	ntlm-smb-sc, smb-sbox into ntlm-smb-sbox, string-permute into
	ntlm-string-permute, string-lshift into ntlm-string-lshift,
	string-xor into ntlm-string-xor.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* ntlm.el: Don't include poem.

	* md4.el (print-int32, print-string-hexa): Remove.  Suggested by
	Jesper Harder <harder@myrealbox.com>.

	* sasl-ntlm.el, ntlm.el, md4.el: New files.

	* hmac-md5.el (md5-binary): Fix byte compile warning.  (This
	probably breaks emacs with DL patch, but do we care? Is anyone
	still using the DL stuff?)

	* sieve-manage.el: Use the password package.
	(sieve-manage-read-passwd): Remove.
	(sieve-manage-interactive-login): Use password.  Re-add
	condition-case around loop.

	* pgg.el (pgg-passphrase-cache, pgg-run-at-time): Remove.
	(pgg-add-passphrase-cache, pgg-remove-passphrase-cache): Use
	the password package.

2003-02-19  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (sieve-sasl-auth): Quote optional initial SASL
	token.

2002-08-07  Simon Josefsson  <jas@extundo.com>

	* sieve-manage.el (require): Use SASL, not RFC2104/MD5.
	(sieve-manage-authenticators):
	(sieve-manage-authenticator-alist): Add some SASL mechs.
	(sieve-sasl-auth): New function.
	(sieve-manage-cram-md5-auth):
	(sieve-manage-plain-auth): Rewrite using SASL library.
	(sieve-manage-digest-md5-p, sieve-manage-digest-md5-auth)
	(sieve-manage-scram-md5-p, sieve-manage-scram-md5-auth)
	(sieve-manage-ntlm-p, sieve-manage-ntlm-auth)
	(sieve-manage-login-p, sieve-manage-login-auth): Add wrappers.

2004-01-05  Simon Josefsson  <jas@extundo.com>

	* sasl.el, sasl-cram.el, sasl-digest.el, hmac-md5.el, hmac-def.el:
	New files.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus-group.el (gnus-no-groups-message): Update.

	* gnus-sum.el (gnus-summary-insert-new-articles): Remove .

2003-11-09  Simon Josefsson  <jas@extundo.com>

	* imap.el: Support for ID IMAP extension (RFC 2971).
	(imap-local-variables): Add imap-id.
	(imap-id): New variable.
	(imap-id): New function.
	(imap-parse-response): Parse untagged ID response.
	* nnimap.el (nnimap-id): New variable.
	(nnimap-open-connection): Use it.

2003-12-28  Simon Josefsson  <jas@extundo.com>

	* gnus-score.el (gnus-score-edit-all-score): New.
	* gnus-group.el (gnus-group-score-map): Bind it to W e.

2004-01-04  Simon Josefsson  <jas@extundo.com>

	* password.el: Add.

2004-01-04  Mario Lang  <lang@zid.tugraz.at>

	* dns.el (dns-query-types): Fix typo.
	(dns-query-types): New function
	(dns-read-type): Add support for AAAA records, see RFC 3596.  Parse MX,
	PTR and SOA replies, see RFC 1035.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-logo-color-style): Changed colors to `no'.

	* Moved to Changelog.2.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump version.

2004-01-04  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.1 is released.

2004-01-04  Lars Magne Ingebrigtsen  <lars@ingebrigtsen.no>

	* gnus.el: No Gnus v0.0 is released.

2004-01-04  Lars Magne Ingebrigtsen  <larsi@gnus.org>

	* gnus.el (gnus-version-number): Bump.
	(gnus-version): No.

See ChangeLog.2 for earlier changes.

    Copyright (C) 2004, 2005, 2006, 2007, 2008, 2009 Free Software Foundation, Inc.

  This file is part of GNU Emacs.

  GNU Emacs is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GNU Emacs is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GNU Emacs.  If not, see <http://www.gnu.org/licenses/>.

;; Local Variables:
;; coding: utf-8
;; fill-column: 79
;; add-log-time-zone-rule: t
;; End:

;;; arch-tag: 3f33a3e7-090d-492b-bedd-02a1417d32b4
